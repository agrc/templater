//>>built
define("dojox/mvc/sync",["dojo/_base/lang","dojo/_base/config","dojo/_base/array","dojo/has"],function(e,t,i,o){function r(e,t,i,o){return[[i.canConvertToLoggable||!i.declaredClass?i:i.declaredClass,o].join(":"),[e.canConvertToLoggable||!e.declaredClass?e:e.declaredClass,t].join(":")]}function n(t,i){return t===i||"number"==typeof t&&isNaN(t)&&"number"==typeof i&&isNaN(i)||e.isFunction((t||{}).getTime)&&e.isFunction((i||{}).getTime)&&t.getTime()==i.getTime()||(e.isFunction((t||{}).equals)?t.equals(i):e.isFunction((i||{}).equals)?i.equals(t):!1)}function a(t,n,a,s,d,l,c,u,h,f){if(!(a(h,u)||"*"==d&&i.indexOf(s.get("properties")||[c],c)<0||"*"==d&&c in(f||{}))){var m="*"==d?c:d;if(o("mvc-bindings-log-api")){r(s,m,l,c)}try{h=t?t(h,n):h}catch(p){return void o("mvc-bindings-log-api")}o("mvc-bindings-log-api"),e.isFunction(s.set)?s.set(m,h):s[m]=h}}var s=e.getObject("dojox.mvc",!0);o.add("mvc-bindings-log-api",(t.mvc||{}).debugBindings);var d;o("mvc-bindings-log-api");var l,c={from:1,to:2,both:3};return d=function(t,n,c,u,h){var f,m,p,g=(h||{}).converter;g&&(f={source:t,target:c},m=g.format&&e.hitch(f,g.format),p=g.parse&&e.hitch(f,g.parse));var v,y=[],b=[],_=e.mixin({},t.constraints,c.constraints),x=(h||{}).bindDirection||s.both,M=(h||{}).equals||d.equals;if(o("mvc-bindings-log-api")){r(t,n,c,u)}if("*"==u){if("*"!=n)throw new Error("Unmatched wildcard is specified between source and target.");if(v=c.get("properties"),!v){v=[];for(var j in c)c.hasOwnProperty(j)&&"_watchCallbacks"!=j&&v.push(j)}b=c.get("excludes")}else v=[n];x&s.from&&(e.isFunction(t.set)&&e.isFunction(t.watch)?y.push(t.watch.apply(t,("*"!=n?[n]:[]).concat([function(e,i,o){a(m,_,M,c,u,t,e,i,o,b)}]))):o("mvc-bindings-log-api"),i.forEach(v,function(i){if("*"!=u||!(i in(b||{}))){var o=e.isFunction(t.get)?t.get(i):t[i];a(m,_,M,c,"*"==u?i:u,t,i,l,o)}})),x&s.to&&(x&s.from||i.forEach(v,function(i){if("*"!=u||!(i in(b||{}))){var o=e.isFunction(c.get)?c.get(u):c[u];a(p,_,M,t,i,c,"*"==u?i:u,l,o)}}),e.isFunction(c.set)&&e.isFunction(c.watch)?y.push(c.watch.apply(c,("*"!=u?[u]:[]).concat([function(e,i,o){a(p,_,M,t,n,c,e,i,o,b)}]))):o("mvc-bindings-log-api")),o("mvc-bindings-log-api");var k={};return k.unwatch=k.remove=function(){for(var e=null;e=y.pop();)e.unwatch();o("mvc-bindings-log-api")},k},e.mixin(s,c),e.setObject("dojox.mvc.sync",e.mixin(d,{equals:n},c))});//# sourceMappingURL=sync.js.map