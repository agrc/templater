//>>built
define("dojox/mvc/sync",["dojo/_base/lang","dojo/_base/config","dojo/_base/array","dojo/has"],function(e,t,i,a){function o(e,t,i,a){return[[i.canConvertToLoggable||!i.declaredClass?i:i.declaredClass,a].join(":"),[e.canConvertToLoggable||!e.declaredClass?e:e.declaredClass,t].join(":")]}function r(t,i){return t===i||"number"==typeof t&&isNaN(t)&&"number"==typeof i&&isNaN(i)||e.isFunction((t||{}).getTime)&&e.isFunction((i||{}).getTime)&&t.getTime()==i.getTime()||(e.isFunction((t||{}).equals)?t.equals(i):e.isFunction((i||{}).equals)?i.equals(t):!1)}function n(t,r,n,s,d,l,h,c,u,m){if(!(n(u,c)||"*"==d&&i.indexOf(s.get("properties")||[h],h)<0||"*"==d&&h in(m||{}))){var f="*"==d?h:d;if(a("mvc-bindings-log-api")){o(s,f,l,h)}try{u=t?t(u,r):u}catch(p){return void a("mvc-bindings-log-api")}a("mvc-bindings-log-api"),e.isFunction(s.set)?s.set(f,u):s[f]=u}}var s=e.getObject("dojox.mvc",!0);a.add("mvc-bindings-log-api",(t.mvc||{}).debugBindings);var d;a("mvc-bindings-log-api");var l,h={from:1,to:2,both:3};return d=function(t,r,h,c,u){var m,f,p,g=(u||{}).converter;g&&(m={source:t,target:h},f=g.format&&e.hitch(m,g.format),p=g.parse&&e.hitch(m,g.parse));var y,v=[],b=[],_=e.mixin({},t.constraints,h.constraints),w=(u||{}).bindDirection||s.both,x=(u||{}).equals||d.equals;if(a("mvc-bindings-log-api")){o(t,r,h,c)}if("*"==c){if("*"!=r)throw new Error("Unmatched wildcard is specified between source and target.");if(y=h.get("properties"),!y){y=[];for(var j in h)h.hasOwnProperty(j)&&"_watchCallbacks"!=j&&y.push(j)}b=h.get("excludes")}else y=[r];w&s.from&&(e.isFunction(t.set)&&e.isFunction(t.watch)?v.push(t.watch.apply(t,("*"!=r?[r]:[]).concat([function(e,i,a){n(f,_,x,h,c,t,e,i,a,b)}]))):a("mvc-bindings-log-api"),i.forEach(y,function(i){if("*"!=c||!(i in(b||{}))){var a=e.isFunction(t.get)?t.get(i):t[i];n(f,_,x,h,"*"==c?i:c,t,i,l,a)}})),w&s.to&&(w&s.from||i.forEach(y,function(i){if("*"!=c||!(i in(b||{}))){var a=e.isFunction(h.get)?h.get(c):h[c];n(p,_,x,t,i,h,"*"==c?i:c,l,a)}}),e.isFunction(h.set)&&e.isFunction(h.watch)?v.push(h.watch.apply(h,("*"!=c?[c]:[]).concat([function(e,i,a){n(p,_,x,t,r,h,e,i,a,b)}]))):a("mvc-bindings-log-api")),a("mvc-bindings-log-api");var M={};return M.unwatch=M.remove=function(){for(var e=null;e=v.pop();)e.unwatch();a("mvc-bindings-log-api")},M},e.mixin(s,h),e.setObject("dojox.mvc.sync",e.mixin(d,{equals:r},h))});//# sourceMappingURL=sync.js.map