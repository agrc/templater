//>>built
define("dojox/mvc/sync",["dojo/_base/lang","dojo/_base/config","dojo/_base/array","dojo/has"],function(e,t,i,a){function n(e,t,i,a){return[[i.canConvertToLoggable||!i.declaredClass?i:i.declaredClass,a].join(":"),[e.canConvertToLoggable||!e.declaredClass?e:e.declaredClass,t].join(":")]}function o(t,i){return t===i||"number"==typeof t&&isNaN(t)&&"number"==typeof i&&isNaN(i)||e.isFunction((t||{}).getTime)&&e.isFunction((i||{}).getTime)&&t.getTime()==i.getTime()||(e.isFunction((t||{}).equals)?t.equals(i):e.isFunction((i||{}).equals)?i.equals(t):!1)}function r(t,o,r,s,l,d,u,c,h,m){if(!(r(h,c)||"*"==l&&i.indexOf(s.get("properties")||[u],u)<0||"*"==l&&u in(m||{}))){var f="*"==l?u:l;if(a("mvc-bindings-log-api")){n(s,f,d,u)}try{h=t?t(h,o):h}catch(p){return void a("mvc-bindings-log-api")}a("mvc-bindings-log-api"),e.isFunction(s.set)?s.set(f,h):s[f]=h}}var s=e.getObject("dojox.mvc",!0);a.add("mvc-bindings-log-api",(t.mvc||{}).debugBindings);var l;a("mvc-bindings-log-api");var d,u={from:1,to:2,both:3};return l=function(t,o,u,c,h){var m,f,p,g=(h||{}).converter;g&&(m={source:t,target:u},f=g.format&&e.hitch(m,g.format),p=g.parse&&e.hitch(m,g.parse));var v,y=[],b=[],_=e.mixin({},t.constraints,u.constraints),k=(h||{}).bindDirection||s.both,x=(h||{}).equals||l.equals;if(a("mvc-bindings-log-api")){n(t,o,u,c)}if("*"==c){if("*"!=o)throw new Error("Unmatched wildcard is specified between source and target.");if(v=u.get("properties"),!v){v=[];for(var w in u)u.hasOwnProperty(w)&&"_watchCallbacks"!=w&&v.push(w)}b=u.get("excludes")}else v=[o];k&s.from&&(e.isFunction(t.set)&&e.isFunction(t.watch)?y.push(t.watch.apply(t,("*"!=o?[o]:[]).concat([function(e,i,a){r(f,_,x,u,c,t,e,i,a,b)}]))):a("mvc-bindings-log-api"),i.forEach(v,function(i){if("*"!=c||!(i in(b||{}))){var a=e.isFunction(t.get)?t.get(i):t[i];r(f,_,x,u,"*"==c?i:c,t,i,d,a)}})),k&s.to&&(k&s.from||i.forEach(v,function(i){if("*"!=c||!(i in(b||{}))){var a=e.isFunction(u.get)?u.get(c):u[c];r(p,_,x,t,i,u,"*"==c?i:c,d,a)}}),e.isFunction(u.set)&&e.isFunction(u.watch)?y.push(u.watch.apply(u,("*"!=c?[c]:[]).concat([function(e,i,a){r(p,_,x,t,o,u,e,i,a,b)}]))):a("mvc-bindings-log-api")),a("mvc-bindings-log-api");var j={};return j.unwatch=j.remove=function(){for(var e=null;e=y.pop();)e.unwatch();a("mvc-bindings-log-api")},j},e.mixin(s,u),e.setObject("dojox.mvc.sync",e.mixin(l,{equals:o},u))});//# sourceMappingURL=sync.js.map