//>>built
define("dojox/mvc/EditStoreRefController",["dojo/_base/declare","dojo/_base/lang","dojo/when","./getPlainValue","./EditModelRefController","./StoreRefController"],function(e,t,i,a,o,n){return e("dojox.mvc.EditStoreRefController",[n,o],{getPlainValueOptions:null,_removals:[],_resultsWatchHandle:null,_refSourceModelProp:"sourceModel",queryStore:function(e,a){if((this.store||{}).query){this._resultsWatchHandle&&this._resultsWatchHandle.unwatch(),this._removals=[];var o=this,n=this.inherited(arguments),r=i(n,function(e){return o._beingDestroyed?void 0:(t.isArray(e)&&(o._resultsWatchHandle=e.watchElements(function(e,t,i){[].push.apply(o._removals,t)})),e)});r.then&&(r=t.delegate(r));for(var s in n)isNaN(s)&&n.hasOwnProperty(s)&&t.isFunction(n[s])&&(r[s]=n[s]);return r}},getStore:function(e,t){return this._resultsWatchHandle&&this._resultsWatchHandle.unwatch(),this.inherited(arguments)},commit:function(){if(this._removals){for(var e=0;e<this._removals.length;e++)this.store.remove(this.store.getIdentity(this._removals[e]));this._removals=[]}var i=a(this.get(this._refEditModelProp),this.getPlainValueOptions);if(t.isArray(i))for(var e=0;e<i.length;e++)this.store.put(i[e]);else this.store.put(i);this.inherited(arguments)},reset:function(){this.inherited(arguments),this._removals=[]},destroy:function(){this._resultsWatchHandle&&this._resultsWatchHandle.unwatch(),this.inherited(arguments)}})});//# sourceMappingURL=EditStoreRefController.js.map