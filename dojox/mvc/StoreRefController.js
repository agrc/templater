//>>built
define("dojox/mvc/StoreRefController",["dojo/_base/declare","dojo/_base/lang","dojo/when","./getStateful","./ModelRefController"],function(e,t,i,r,o){return e("dojox.mvc.StoreRefController",o,{store:null,getStatefulOptions:null,_refSourceModelProp:"model",queryStore:function(e,o){if((this.store||{}).query){this._queryObserveHandle&&this._queryObserveHandle.cancel();var n=this,a=this.store.query(e,o),s=i(a,function(e){if(!n._beingDestroyed)return e=r(e,n.getStatefulOptions),n.set(n._refSourceModelProp,e),e});s.then&&(s=t.delegate(s));for(var d in a)isNaN(d)&&a.hasOwnProperty(d)&&t.isFunction(a[d])&&(s[d]=a[d]);return s}},getStore:function(e,t){if((this.store||{}).get){this._queryObserveHandle&&this._queryObserveHandle.cancel();var o=this;return result=i(this.store.get(e,t),function(e){if(!o._beingDestroyed)return e=r(e,o.getStatefulOptions),o.set(o._refSourceModelProp,e),e}),result}},putStore:function(e,t){if((this.store||{}).put)return this.store.put(e,t)},addStore:function(e,t){if((this.store||{}).add)return this.store.add(e,t)},removeStore:function(e,t){if((this.store||{}).remove)return this.store.remove(e,t)}})});//# sourceMappingURL=StoreRefController.js.map