//>>built
define("dojox/mvc/ModelRefController",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/Stateful","./_Controller"],function(e,t,i,a,n){return t("dojox.mvc.ModelRefController",n,{ownProps:null,_refModelProp:"model",_refInModelProp:"model",model:null,postscript:function(e,t){this._relTargetProp=(e||{})._refModelProp||this._refModelProp,this.inherited(arguments)},get:function(e){if(!this.hasControllerProperty(e)){var t=this[this._refModelProp];return t?t.get?t.get(e):t[e]:void 0}return this.inherited(arguments)},_set:function(e,t){if(!this.hasControllerProperty(e)){var i=this[this._refModelProp];return i&&(i.set?i.set(e,t):i[e]=t),this}return this.inherited(arguments)},watch:function(t,n){function o(e){d&&d.unwatch(),e&&i.isFunction(e.set)&&i.isFunction(e.watch)&&(d=e.watch.apply(e,(t?[t]:[]).concat([function(e,t,i){n.call(l,e,t,i)}])))}function r(i,a){var o={};t?o[t]=1:e.forEach([i,a],function(t){var i=t&&t.get("properties");if(i)e.forEach(i,function(e){l.hasControllerProperty(e)||(o[e]=1)});else for(var a in t)t.hasOwnProperty(a)&&!l.hasControllerProperty(a)&&(o[a]=1)});for(var r in o)n.call(l,r,i?i.get?i.get(r):i[r]:void 0,a?a.get?a.get(r):a[r]:void 0)}if(this.hasControllerProperty(t))return this.inherited(arguments);n||(n=t,t=null);var s=null,d=null,l=this;s=a.prototype.watch.call(this,this._refModelProp,function(e,t,i){t!==i&&(r(t,i),o(i))}),o(this.get(this._refModelProp));var h={};return h.unwatch=h.remove=function(){d&&(d.unwatch(),d=null),s&&(s.unwatch(),s=null)},h},hasControllerProperty:function(e){return"_watchCallbacks"==e||e==this._refModelProp||e==this._refInModelProp||e in(this.ownProps||{})||e in this.constructor.prototype||/^dojoAttach(Point|Event)$/i.test(e)}})});//# sourceMappingURL=ModelRefController.js.map