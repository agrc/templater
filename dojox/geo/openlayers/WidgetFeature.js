//>>built
define("dojox/geo/openlayers/WidgetFeature",["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dijit/registry","./Feature"],function(e,t,i,a,r){return e("dojox.geo.openlayers.WidgetFeature",r,{_widget:null,_bbox:null,constructor:function(e){this._params=e},setParameters:function(e){this._params=e},getParameters:function(){return this._params},_getWidget:function(){var e=this._params;if(null==this._widget&&null!=e){var r=null;if("function"==typeof e.createWidget)r=e.createWidget.call(this);else if(e.dojoType){dojo.require(e.dojoType);var n=i.getObject(e.dojoType);r=new n(e)}else e.dijitId?r=a.byId(e.dijitId):e.widget&&(r=e.widget);if(null!=r){this._widget=r,"function"==typeof r.startup&&r.startup();var o=r.domNode;null!=o&&t.set(o,{position:"absolute"})}this._widget=r}return this._widget},_getWidgetWidth:function(){var e=this._params;if(e.width)return e.width;var i=this._getWidget();return i?t.get(i.domNode,"width"):10},_getWidgetHeight:function(){var e=this._params;if(e.height)return e.height;var i=this._getWidget();return i?t.get(i.domNode,"height"):10},render:function(){var e=this.getLayer(),t=this._getWidget();if(null!=t){var i=this._params,a=i.longitude,r=i.latitude,n=this.getCoordinateSystem(),o=e.getDojoMap(),s=o.transformXY(a,r,n),d=this._getLocalXY(s),l=this._getWidgetWidth(),h=this._getWidgetHeight(),u=d[0]-l/2,c=d[1]-h/2,m=t.domNode,f=e.olLayer.div;m.parentNode!=f&&(m.parentNode&&m.parentNode.removeChild(m),f.appendChild(m)),this._updateWidgetPosition({x:u,y:c,width:l,height:h})}},_updateWidgetPosition:function(e){var a=this._widget,r=a.domNode;t.set(r,{position:"absolute",left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"}),a.srcNodeRef&&t.set(a.srcNodeRef,{position:"absolute",left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"}),i.isFunction(a.resize)&&a.resize({w:e.width,h:e.height})},remove:function(){var e=this._getWidget();if(e){var t=e.domNode;t.parentNode&&t.parentNode.removeChild(t)}}})});//# sourceMappingURL=WidgetFeature.js.map