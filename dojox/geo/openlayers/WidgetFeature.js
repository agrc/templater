//>>built
define("dojox/geo/openlayers/WidgetFeature",["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dijit/registry","./Feature"],function(e,t,i,a,o){return e("dojox.geo.openlayers.WidgetFeature",o,{_widget:null,_bbox:null,constructor:function(e){this._params=e},setParameters:function(e){this._params=e},getParameters:function(){return this._params},_getWidget:function(){var e=this._params;if(null==this._widget&&null!=e){var o=null;if("function"==typeof e.createWidget)o=e.createWidget.call(this);else if(e.dojoType){dojo.require(e.dojoType);var n=i.getObject(e.dojoType);o=new n(e)}else e.dijitId?o=a.byId(e.dijitId):e.widget&&(o=e.widget);if(null!=o){this._widget=o,"function"==typeof o.startup&&o.startup();var r=o.domNode;null!=r&&t.set(r,{position:"absolute"})}this._widget=o}return this._widget},_getWidgetWidth:function(){var e=this._params;if(e.width)return e.width;var i=this._getWidget();return i?t.get(i.domNode,"width"):10},_getWidgetHeight:function(){var e=this._params;if(e.height)return e.height;var i=this._getWidget();return i?t.get(i.domNode,"height"):10},render:function(){var e=this.getLayer(),t=this._getWidget();if(null!=t){var i=this._params,a=i.longitude,o=i.latitude,n=this.getCoordinateSystem(),r=e.getDojoMap(),s=r.transformXY(a,o,n),d=this._getLocalXY(s),l=this._getWidgetWidth(),u=this._getWidgetHeight(),h=d[0]-l/2,c=d[1]-u/2,m=t.domNode,f=e.olLayer.div;m.parentNode!=f&&(m.parentNode&&m.parentNode.removeChild(m),f.appendChild(m)),this._updateWidgetPosition({x:h,y:c,width:l,height:u})}},_updateWidgetPosition:function(e){var a=this._widget,o=a.domNode;t.set(o,{position:"absolute",left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"}),a.srcNodeRef&&t.set(a.srcNodeRef,{position:"absolute",left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"}),i.isFunction(a.resize)&&a.resize({w:e.width,h:e.height})},remove:function(){var e=this._getWidget();if(e){var t=e.domNode;t.parentNode&&t.parentNode.removeChild(t)}}})});//# sourceMappingURL=WidgetFeature.js.map