//>>built
define("dojox/geo/openlayers/WidgetFeature",["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dijit/registry","./Feature"],function(e,t,a,i,r){return e("dojox.geo.openlayers.WidgetFeature",r,{_widget:null,_bbox:null,constructor:function(e){this._params=e},setParameters:function(e){this._params=e},getParameters:function(){return this._params},_getWidget:function(){var e=this._params;if(null==this._widget&&null!=e){var r=null;if("function"==typeof e.createWidget)r=e.createWidget.call(this);else if(e.dojoType){dojo.require(e.dojoType);var n=a.getObject(e.dojoType);r=new n(e)}else e.dijitId?r=i.byId(e.dijitId):e.widget&&(r=e.widget);if(null!=r){this._widget=r,"function"==typeof r.startup&&r.startup();var o=r.domNode;null!=o&&t.set(o,{position:"absolute"})}this._widget=r}return this._widget},_getWidgetWidth:function(){var e=this._params;if(e.width)return e.width;var a=this._getWidget();return a?t.get(a.domNode,"width"):10},_getWidgetHeight:function(){var e=this._params;if(e.height)return e.height;var a=this._getWidget();return a?t.get(a.domNode,"height"):10},render:function(){var e=this.getLayer(),t=this._getWidget();if(null!=t){var a=this._params,i=a.longitude,r=a.latitude,n=this.getCoordinateSystem(),o=e.getDojoMap(),s=o.transformXY(i,r,n),l=this._getLocalXY(s),d=this._getWidgetWidth(),u=this._getWidgetHeight(),m=l[0]-d/2,c=l[1]-u/2,h=t.domNode,f=e.olLayer.div;h.parentNode!=f&&(h.parentNode&&h.parentNode.removeChild(h),f.appendChild(h)),this._updateWidgetPosition({x:m,y:c,width:d,height:u})}},_updateWidgetPosition:function(e){var i=this._widget,r=i.domNode;t.set(r,{position:"absolute",left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"}),i.srcNodeRef&&t.set(i.srcNodeRef,{position:"absolute",left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"}),a.isFunction(i.resize)&&i.resize({w:e.width,h:e.height})},remove:function(){var e=this._getWidget();if(e){var t=e.domNode;t.parentNode&&t.parentNode.removeChild(t)}}})});//# sourceMappingURL=WidgetFeature.js.map