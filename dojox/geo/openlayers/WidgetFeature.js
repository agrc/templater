//>>built
define("dojox/geo/openlayers/WidgetFeature",["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dijit/registry","./Feature"],function(e,t,a,i,n){return e("dojox.geo.openlayers.WidgetFeature",n,{_widget:null,_bbox:null,constructor:function(e){this._params=e},setParameters:function(e){this._params=e},getParameters:function(){return this._params},_getWidget:function(){var e=this._params;if(null==this._widget&&null!=e){var n=null;if("function"==typeof e.createWidget)n=e.createWidget.call(this);else if(e.dojoType){dojo.require(e.dojoType);var r=a.getObject(e.dojoType);n=new r(e)}else e.dijitId?n=i.byId(e.dijitId):e.widget&&(n=e.widget);if(null!=n){this._widget=n,"function"==typeof n.startup&&n.startup();var o=n.domNode;null!=o&&t.set(o,{position:"absolute"})}this._widget=n}return this._widget},_getWidgetWidth:function(){var e=this._params;if(e.width)return e.width;var a=this._getWidget();return a?t.get(a.domNode,"width"):10},_getWidgetHeight:function(){var e=this._params;if(e.height)return e.height;var a=this._getWidget();return a?t.get(a.domNode,"height"):10},render:function(){var e=this.getLayer(),t=this._getWidget();if(null!=t){var a=this._params,i=a.longitude,n=a.latitude,r=this.getCoordinateSystem(),o=e.getDojoMap(),s=o.transformXY(i,n,r),d=this._getLocalXY(s),l=this._getWidgetWidth(),h=this._getWidgetHeight(),u=d[0]-l/2,m=d[1]-h/2,c=t.domNode,f=e.olLayer.div;c.parentNode!=f&&(c.parentNode&&c.parentNode.removeChild(c),f.appendChild(c)),this._updateWidgetPosition({x:u,y:m,width:l,height:h})}},_updateWidgetPosition:function(e){var i=this._widget,n=i.domNode;t.set(n,{position:"absolute",left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"}),i.srcNodeRef&&t.set(i.srcNodeRef,{position:"absolute",left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"}),a.isFunction(i.resize)&&i.resize({w:e.width,h:e.height})},remove:function(){var e=this._getWidget();if(e){var t=e.domNode;t.parentNode&&t.parentNode.removeChild(t)}}})});//# sourceMappingURL=WidgetFeature.js.map