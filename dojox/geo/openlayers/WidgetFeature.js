//>>built
define("dojox/geo/openlayers/WidgetFeature",["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dijit/registry","./Feature"],function(e,t,a,i,o){return e("dojox.geo.openlayers.WidgetFeature",o,{_widget:null,_bbox:null,constructor:function(e){this._params=e},setParameters:function(e){this._params=e},getParameters:function(){return this._params},_getWidget:function(){var e=this._params;if(null==this._widget&&null!=e){var o=null;if("function"==typeof e.createWidget)o=e.createWidget.call(this);else if(e.dojoType){dojo.require(e.dojoType);var r=a.getObject(e.dojoType);o=new r(e)}else e.dijitId?o=i.byId(e.dijitId):e.widget&&(o=e.widget);if(null!=o){this._widget=o,"function"==typeof o.startup&&o.startup();var n=o.domNode;null!=n&&t.set(n,{position:"absolute"})}this._widget=o}return this._widget},_getWidgetWidth:function(){var e=this._params;if(e.width)return e.width;var a=this._getWidget();return a?t.get(a.domNode,"width"):10},_getWidgetHeight:function(){var e=this._params;if(e.height)return e.height;var a=this._getWidget();return a?t.get(a.domNode,"height"):10},render:function(){var e=this.getLayer(),t=this._getWidget();if(null!=t){var a=this._params,i=a.longitude,o=a.latitude,r=this.getCoordinateSystem(),n=e.getDojoMap(),s=n.transformXY(i,o,r),d=this._getLocalXY(s),l=this._getWidgetWidth(),u=this._getWidgetHeight(),h=d[0]-l/2,m=d[1]-u/2,c=t.domNode,f=e.olLayer.div;c.parentNode!=f&&(c.parentNode&&c.parentNode.removeChild(c),f.appendChild(c)),this._updateWidgetPosition({x:h,y:m,width:l,height:u})}},_updateWidgetPosition:function(e){var i=this._widget,o=i.domNode;t.set(o,{position:"absolute",left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"}),i.srcNodeRef&&t.set(i.srcNodeRef,{position:"absolute",left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"}),a.isFunction(i.resize)&&i.resize({w:e.width,h:e.height})},remove:function(){var e=this._getWidget();if(e){var t=e.domNode;t.parentNode&&t.parentNode.removeChild(t)}}})});//# sourceMappingURL=WidgetFeature.js.map