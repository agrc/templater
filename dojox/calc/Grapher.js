//>>built
require({cache:{"url:dojox/calc/templates/Grapher.html":'<div>\n<div data-dojo-attach-point="chartsParent" class="dojoxCalcChartHolder"></div>\n<div data-dojo-attach-point="outerDiv">\n<div data-dojo-type="dijit.form.DropDownButton" data-dojo-attach-point="windowOptions" class="dojoxCalcDropDownForWindowOptions" title="Window Options">\n\t<div>Window Options</div>\n\t<div data-dojo-type="dijit.TooltipDialog" data-dojo-attach-point="windowOptionsInside" class="dojoxCalcTooltipDialogForWindowOptions" title="">\n\t\t<table class="dojoxCalcGraphOptionTable">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\tWidth:\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="graphWidth" class="dojoxCalcGraphWidth" value="500" />\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\tHeight:\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="graphHeight" class="dojoxCalcGraphHeight" value="500" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\tX >=\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="graphMinX" class="dojoxCalcGraphMinX" value="-10" />\n\t\t\t\t</td>\n\n\t\t\t\t<td>\n\t\t\t\t\tX <=\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="graphMaxX" class="dojoxCalcGraphMaxX" value="10" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\tY >=\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="graphMinY" class="dojoxCalcGraphMinY" value="-10" />\n\t\t\t\t</td>\n\n\t\t\t\t<td>\n\t\t\t\t\tY <=\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="graphMaxY" class="dojoxCalcGraphMaxY" value="10" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n</div>\n\n<BR>\n\n<div class="dojoxCalcGrapherFuncOuterDiv">\n\t<table class="dojoxCalcGrapherFuncTable" data-dojo-attach-point="graphTable">\n\t</table>\n</div>\n\n<div data-dojo-type="dijit.form.DropDownButton" data-dojo-attach-point=\'addFuncButton\' class="dojoxCalcDropDownAddingFunction">\n\t<div>Add Function</div>\n\t<div data-dojo-type="dijit.TooltipDialog" data-dojo-attach-point="addFuncInside" class="dojoxCalcTooltipDialogAddingFunction" title="">\n\t\t<table class="dojoxCalcGrapherModeTable">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\tMode:\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select data-dojo-type="dijit.form.Select" data-dojo-attach-point="funcMode" class="dojoxCalcFunctionModeSelector">\n\t\t\t\t\t\t<option value="y=" selected="selected">y=</option>\n\t\t\t\t\t\t<option value="x=">x=</option>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t</tr>\n\t\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<input data-dojo-type="dijit.form.Button" data-dojo-attach-point="createFunc" class="dojoxCalcAddFunctionButton" label="Create" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n</div>\n<BR>\n<BR>\n<table class="dijitInline dojoxCalcGrapherLayout">\n\t<tr>\n\t\t<td class="dojoxCalcGrapherButtonContainer">\n\t\t\t<input data-dojo-type="dijit.form.Button" class="dojoxCalcGrapherButton" data-dojo-attach-point=\'selectAllButton\' label="Select All" />\n\t\t</td>\n\t\t<td class="dojoxCalcGrapherButtonContainer">\n\t\t\t<input data-dojo-type="dijit.form.Button" class="dojoxCalcGrapherButton" data-dojo-attach-point=\'deselectAllButton\' label="Deselect All" />\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class="dojoxCalcGrapherButtonContainer">\n\t\t\t<input data-dojo-type="dijit.form.Button" class="dojoxCalcGrapherButton" data-dojo-attach-point=\'drawButton\'label="Draw Selected" />\n\t\t</td>\n\t\t<td class="dojoxCalcGrapherButtonContainer">\n\t\t\t<input data-dojo-type="dijit.form.Button" class="dojoxCalcGrapherButton" data-dojo-attach-point=\'eraseButton\' label="Erase Selected" />\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class="dojoxCalcGrapherButtonContainer">\n\t\t\t<input data-dojo-type="dijit.form.Button" class="dojoxCalcGrapherButton" data-dojo-attach-point=\'deleteButton\' label="Delete Selected" />\n\t\t</td>\n\t\t<td class="dojoxCalcGrapherButtonContainer">\n\t\t\t<input data-dojo-type="dijit.form.Button" class="dojoxCalcGrapherButton" data-dojo-attach-point=\'closeButton\' label="Close" />\n\t\t</td>\n\t</tr>\n</table>\n</div>\n</div>\n'}}),define("dojox/calc/Grapher",["dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dijit/_WidgetBase","dijit/_WidgetsInTemplateMixin","dijit/_TemplatedMixin","dojox/math/_base","dijit/registry","dijit/form/DropDownButton","dijit/TooltipDialog","dijit/form/TextBox","dijit/form/CheckBox","dijit/ColorPalette","dojox/charting/Chart","dojox/charting/axis2d/Default","dojox/charting/plot2d/Default","dojox/charting/plot2d/Lines","dojox/charting/themes/Tufte","dojo/colors","dojo/text!./templates/Grapher.html","dojox/calc/_Executor","dijit/form/Button","dijit/form/Select"],function(e,t,a,i,r,n,d,o,l,s,m,u,f,h,y,c,v,M,p,g,b,k,w,F){var E=1e-15/9,I=1e200,j=Math.log(2),x={graphNumber:0,fOfX:!0,color:{stroke:"black"}},T=e("dojox.calc.Grapher",[d,l,o],{templateString:w,addXYAxes:function(e){return e.addAxis("x",{max:parseInt(this.graphMaxX.get("value")),min:parseInt(this.graphMinX.get("value")),majorLabels:!0,minorLabels:!0,minorTicks:!1,microTicks:!1,htmlLabels:!0,labelFunc:function(e){return e},maxLabelSize:30,fixUpper:"major",fixLower:"major",majorTick:{length:3}}).addAxis("y",{max:parseInt(this.graphMaxY.get("value")),min:parseInt(this.graphMinY.get("value")),labelFunc:function(e){return e},maxLabelSize:50,vertical:!0,microTicks:!1,minorTicks:!0,majorTick:{stroke:"black",length:3}})},selectAll:function(){for(var e=0;e<this.rowCount;e++)this.array[e][this.checkboxIndex].set("checked",!0)},deselectAll:function(){for(var e=0;e<this.rowCount;e++)this.array[e][this.checkboxIndex].set("checked",!1)},drawOne:function(e){},onDraw:function(){},erase:function(e){for(var t=0,a="Series "+this.array[e][this.funcNumberIndex]+"_"+t;a in this.array[e][this.chartIndex].runs;)this.array[e][this.chartIndex].removeSeries(a),t++,a="Series "+this.array[e][this.funcNumberIndex]+"_"+t;this.array[e][this.chartIndex].render(),this.setStatus(e,"Hidden")},onErase:function(){for(var e=0;e<this.rowCount;e++)this.array[e][this.checkboxIndex].get("checked")&&this.erase(e)},onDelete:function(){for(var e=0;e<this.rowCount;e++)if(this.array[e][this.checkboxIndex].get("checked")){this.erase(e);for(var t=0;t<this.functionRef;t++)this.array[e][t]&&this.array[e][t].destroy&&this.array[e][t].destroy();this.graphTable.deleteRow(e),this.array.splice(e,1),this.rowCount--,e--}},checkboxIndex:0,functionMode:1,expressionIndex:2,colorIndex:3,dropDownIndex:4,tooltipIndex:5,colorBoxFieldsetIndex:6,statusIndex:7,chartIndex:8,funcNumberIndex:9,evaluatedExpression:10,functionRef:11,createFunction:function(){var e=this.graphTable.insertRow(-1);this.array[e.rowIndex]=[];var d=e.insertCell(-1),o=i.create("div");d.appendChild(o);var l=new y({},o);this.array[e.rowIndex][this.checkboxIndex]=l,r.add(o,"dojoxCalcCheckBox"),d=e.insertCell(-1);var s=this.funcMode.get("value");o=a.doc.createTextNode(s),d.appendChild(o),this.array[e.rowIndex][this.functionMode]=s,d=e.insertCell(-1),o=i.create("div"),d.appendChild(o);var m=new h({},o);this.array[e.rowIndex][this.expressionIndex]=m,r.add(o,"dojoxCalcExpressionBox");var v=i.create("div"),M=new c({changedColor:this.changedColor},v);r.add(v,"dojoxCalcColorPalette"),this.array[e.rowIndex][this.colorIndex]=M;var p=i.create("div"),g=new f({content:M},p);this.array[e.rowIndex][this.tooltipIndex]=g,r.add(p,"dojoxCalcContainerOfColor"),d=e.insertCell(-1),o=i.create("div"),d.appendChild(o);var b=i.create("fieldset");n.set(b,{backgroundColor:"black",width:"1em",height:"1em",display:"inline"}),this.array[e.rowIndex][this.colorBoxFieldsetIndex]=b;var k=new u({label:"Color ",dropDown:g},o);k.containerNode.appendChild(b),this.array[e.rowIndex][this.dropDownIndex]=k,r.add(o,"dojoxCalcDropDownForColor"),d=e.insertCell(-1),o=i.create("fieldset"),o.innerHTML="Hidden",this.array[e.rowIndex][this.statusIndex]=o,r.add(o,"dojoxCalcStatusBox"),d.appendChild(o),o=i.create("div"),n.set(o,{position:"absolute",left:"0px",top:"0px"}),this.chartsParent.appendChild(o),this.array[e.rowIndex][this.chartNodeIndex]=o,r.add(o,"dojoxCalcChart");var w=new dojox.charting.Chart(o).setTheme(dojox.charting.themes.Tufte).addPlot("default",{type:"Lines",shadow:{dx:1,dy:1,width:2,color:[0,0,0,.3]}});this.addXYAxes(w),this.array[e.rowIndex][this.chartIndex]=w,M.set("chart",w),M.set("colorBox",b),M.set("onChange",t.hitch(M,"changedColor")),this.array[e.rowIndex][this.funcNumberIndex]=this.funcNumber++,this.rowCount++},setStatus:function(e,t){this.array[e][this.statusIndex].innerHTML=t},changedColor:function(){for(var e=this.get("chart"),t=this.get("colorBox"),a=0;a<e.series.length;a++)e.series[a].stroke&&e.series[a].stroke.color&&(e.series[a].stroke.color=this.get("value"),e.dirty=!0);e.render(),n.set(t,{backgroundColor:this.get("value")})},makeDirty:function(){this.dirty=!0},checkDirty1:function(){setTimeout(t.hitch(this,"checkDirty"),0)},checkDirty:function(){if(this.dirty){for(var e=0;e<this.rowCount;e++)this.array[e][this.chartIndex].removeAxis("x"),this.array[e][this.chartIndex].removeAxis("y"),this.addXYAxes(this.array[e][this.chartIndex]);this.onDraw()}this.dirty=!1},postCreate:function(){this.inherited(arguments),this.createFunc.set("onClick",t.hitch(this,"createFunction")),this.selectAllButton.set("onClick",t.hitch(this,"selectAll")),this.deselectAllButton.set("onClick",t.hitch(this,"deselectAll")),this.drawButton.set("onClick",t.hitch(this,"onDraw")),this.eraseButton.set("onClick",t.hitch(this,"onErase")),this.deleteButton.set("onClick",t.hitch(this,"onDelete")),this.dirty=!1,this.graphWidth.set("onChange",t.hitch(this,"makeDirty")),this.graphHeight.set("onChange",t.hitch(this,"makeDirty")),this.graphMaxX.set("onChange",t.hitch(this,"makeDirty")),this.graphMinX.set("onChange",t.hitch(this,"makeDirty")),this.graphMaxY.set("onChange",t.hitch(this,"makeDirty")),this.graphMinY.set("onChange",t.hitch(this,"makeDirty")),this.windowOptionsInside.set("onClose",t.hitch(this,"checkDirty1")),this.funcNumber=0,this.rowCount=0,this.array=[]},startup:function(){this.inherited(arguments);var e=m.getEnclosingWidget(this.domNode.parentNode);e&&"function"==typeof e.close?this.closeButton.set("onClick",t.hitch(e,"close")):n.set(this.closeButton.domNode,{display:"none"}),this.createFunction(),this.array[0][this.checkboxIndex].set("checked",!0),this.onDraw(),this.erase(0),this.array[0][this.expressionIndex].value=""}});return t.mixin(F,{draw:function(e,a,i){i=t.mixin({},x,i),e.fullGeometry();var r,n,d;1==i.fOfX?(r="x",n="y",d=F.generatePoints(a,r,n,e.axes.x.scaler.bounds.span,e.axes.x.scaler.bounds.lower,e.axes.x.scaler.bounds.upper,e.axes.y.scaler.bounds.lower,e.axes.y.scaler.bounds.upper)):(r="y",n="x",d=F.generatePoints(a,r,n,e.axes.y.scaler.bounds.span,e.axes.y.scaler.bounds.lower,e.axes.y.scaler.bounds.upper,e.axes.x.scaler.bounds.lower,e.axes.x.scaler.bounds.upper));var o=0;if(d.length>0)for(;o<d.length;o++)d[o].length>0&&e.addSeries("Series "+i.graphNumber+"_"+o,d[o],i.color);for(var l="Series "+i.graphNumber+"_"+o;l in e.runs;)e.removeSeries(l),o++,l="Series "+i.graphNumber+"_"+o;return e.render(),d},generatePoints:function(e,t,a,i,r,n,d,o){function l(e,i,r,n){for(;i<=r;){var d=(i[t]+r[t])/2,o={};if(o[t]=d,o[a]=e(o[t]),n==o[a]||o[t]==r[t]||o[t]==i[t])return o;var l=!0;n<o[a]&&(l=!1),o[a]<r[a]?l?i=o:r=o:o[a]<i[a]&&(l?r=o:i=o)}return NaN}function s(e,i,r){for(var n,d=[[],[]],o=i,l=r;o[t]<=l[t];){var s=(o[t]+l[t])/2;n={},n[t]=s,n[a]=e(s);var m=u(n[t]),f={};if(f[t]=m,f[a]=e(m),Math.abs(f[a])>=Math.abs(n[a]))d[0].push(n),o=f;else{if(d[1].unshift(n),l[t]==n[t])break;l=n}}return d}function m(e,t){var a=!1,i=!1;return e<t&&(a=!0),t>0&&(i=!0),{inc:a,pos:i}}function u(e){var t;return t=e>-1&&e<1?e<0?e>=-E?-e:e/Math.ceil(e/E):E:Math.abs(e)*E,e+t}function f(e,i){return(i[a]-e[a])/(i[t]-e[t])}var h,y,c=1<<Math.ceil(Math.log(i)/j),v=(n-r)/c,M=[],p=0;M[p]=[];for(var g,b,k=r,w=0;w<=c;k+=v,w++){if(b={},b[t]=k,b[a]=e({_name:t,_value:k,_graphing:!0}),null==b[t]||null==b[a])return{};if(!isNaN(b[a])&&!isNaN(b[t]))if(M[p].push(b),3!=M[p].length){if(!(M[p].length<4)&&(y=m(f(M[p][M[p].length-3],M[p][M[p].length-2]),f(M[p][M[p].length-2],M[p][M[p].length-1])),h.inc!=y.inc||h.pos!=y.pos)){var F=s(e,M[p][M[p].length-3],M[p][M[p].length-1]);b=M[p].pop(),M[p].pop();for(var x=0;x<F[0].length;x++)M[p].push(F[0][x]);for(g=1;g<F.length;g++)M[++p]=F.pop();M[p].push(b),h=y}}else h=m(f(M[p][M[p].length-3],M[p][M[p].length-2]),f(M[p][M[p].length-2],M[p][M[p].length-1]))}for(;M.length>1;){for(g=0;g<M[1].length;g++)M[0][M[0].length-1][t]!=M[1][g][t]&&M[0].push(M[1][g]);M.splice(1,1)}M=M[0];var T=0,A=[[]];for(g=0;g<M.length;g++){var _,S,C,G;if(isNaN(M[g][a])||isNaN(M[g][t])){for(;isNaN(M[g][a])||isNaN(M[g][t]);)M.splice(g,1);A[++T]=[],g--}else if(M[g][a]>o||M[g][a]<d){g>0&&M[g-1].y!=d&&M[g-1].y!=o&&(G=f(M[g-1],M[g]),G>I?G=I:G<-I&&(G=-I),S=M[g][a]>o?o:d,C=M[g][a]-G*M[g][t],_=(S-C)/G,b={},b[t]=_,b[a]=e(_),b[a]!=S&&(b=l(e,M[g-1],M[g],S)),A[T].push(b),A[++T]=[]);for(;g<M.length&&(M[g][a]>o||M[g][a]<d);)g++;if(g>=M.length){0==A[T].length&&A.splice(T,1);break}g>0&&M[g].y!=d&&M[g].y!=o&&(G=f(M[g-1],M[g]),G>I?G=I:G<-I&&(G=-I),S=M[g-1][a]>o?o:d,C=M[g][a]-G*M[g][t],_=(S-C)/G,b={},b[t]=_,b[a]=e(_),b[a]!=S&&(b=l(e,M[g-1],M[g],S)),A[T].push(b),A[T].push(M[g]))}else A[T].push(M[g])}return A},Grapher:T})});//# sourceMappingURL=Grapher.js.map