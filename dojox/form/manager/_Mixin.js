//>>built
define("dojox/form/manager/_Mixin",["dojo/_base/window","dojo/_base/lang","dojo/_base/array","dojo/on","dojo/dom-attr","dojo/dom-class","dijit/_base/manager","dijit/_Widget","dijit/form/_FormWidget","dijit/form/Button","dijit/form/CheckBox","dojo/_base/declare"],function(e,t,a,i,r,n,o,s,l,d,u,m){var c=t.getObject("dojox.form.manager",!0),h=c.actionAdapter=function(e){return function(i,r,n){t.isArray(r)?a.forEach(r,function(t){e.call(this,i,t,n)},this):e.apply(this,arguments)}},f=(c.inspectorAdapter=function(e){return function(a,i,r){return e.call(this,a,t.isArray(i)?i[0]:i,r)}},{domNode:1,containerNode:1,srcNodeRef:1,bgIframe:1}),g=c._keys=function(e){var t,a=[];for(t in e)e.hasOwnProperty(t)&&a.push(t);return a},p=function(e){var a=e.get("name");if(a&&e.isInstanceOf(l))if(a in this.formWidgets){var i=this.formWidgets[a].widget;t.isArray(i)?i.push(e):this.formWidgets[a].widget=[i,e]}else this.formWidgets[a]={widget:e,connections:[]};else a=null;return a},y=function(e){var i={};return h(function(e,r){var n=r.get("data-dojo-observer")||r.get("observer");n&&"string"==typeof n&&a.forEach(n.split(","),function(e){e=t.trim(e),e&&t.isFunction(this[e])&&(i[e]=1)},this)}).call(this,null,this.formWidgets[e].widget),g(i)},v=function(e,n){var o=this.formWidgets[e],s=o.widget,l=o.connections;if(l.length&&(a.forEach(l,function(e){e.remove()}),l=o.connections=[]),t.isArray(s))a.forEach(s,function(o){a.forEach(n,function(a){l.push(i(o,"change",t.hitch(this,function(t){this.watching&&r.get(o.focusNode,"checked")&&this[a](o.get("value"),e,o,t)})))},this)},this);else{var u=s.isInstanceOf(d)?"click":"change";a.forEach(n,function(a){l.push(i(s,u,t.hitch(this,function(t){this.watching&&this[a](s.get("value"),e,s,t)})))},this)}},k=m("dojox.form.manager._Mixin",null,{watching:!0,startup:function(){this._started||(this.formWidgets={},this.formNodes={},this.registerWidgetDescendants(this),this.inherited(arguments))},destroy:function(){for(var e in this.formWidgets)a.forEach(this.formWidgets[e].connections,function(e){e.remove()});this.formWidgets={},this.inherited(arguments)},registerWidget:function(e){"string"==typeof e?e=o.byId(e):e.tagName&&e.cloneNode&&(e=o.byNode(e));var t=p.call(this,e);return t&&v.call(this,t,y.call(this,t)),this},unregisterWidget:function(e){return e in this.formWidgets&&(a.forEach(this.formWidgets[e].connections,function(e){e.remove()}),delete this.formWidgets[e]),this},registerWidgetDescendants:function(e){"string"==typeof e?e=o.byId(e):e.tagName&&e.cloneNode&&(e=o.byNode(e));var t=a.map(e.getDescendants(),p,this);return a.forEach(t,function(e){e&&v.call(this,e,y.call(this,e))},this),this.registerNodeDescendants?this.registerNodeDescendants(e.domNode):this},unregisterWidgetDescendants:function(e){return"string"==typeof e?e=o.byId(e):e.tagName&&e.cloneNode&&(e=o.byNode(e)),a.forEach(a.map(e.getDescendants(),function(e){return e instanceof l&&e.get("name")||null}),function(e){e&&this.unregisterWidget(e)},this),this.unregisterNodeDescendants?this.unregisterNodeDescendants(e.domNode):this},formWidgetValue:function(e,i){var n,o=2==arguments.length&&void 0!==i;return"string"==typeof e&&(e=this.formWidgets[e],e&&(e=e.widget)),e?t.isArray(e)?o?(a.forEach(e,function(e){e.set("checked",!1,!this.watching)},this),a.forEach(e,function(e){e.set("checked",e.value===i,!this.watching)},this),this):(a.some(e,function(e){return r.get(e.focusNode,"checked")?(n=e,!0):!1}),n?n.get("value"):""):e.isInstanceOf&&e.isInstanceOf(u)?o?(e.set("value",Boolean(i),!this.watching),this):Boolean(e.get("value")):o?(e.set("value",i,!this.watching),this):e.get("value"):null},formPointValue:function(e,t){return e&&"string"==typeof e&&(e=this[e]),e&&e.tagName&&e.cloneNode&&n.contains(e,"dojoFormValue")?2==arguments.length&&void 0!==t?(e.innerHTML=t,this):e.innerHTML:null},inspectFormWidgets:function(e,i,r){var n,o={};if(i)if(t.isArray(i))a.forEach(i,function(t){t in this.formWidgets&&(o[t]=e.call(this,t,this.formWidgets[t].widget,r))},this);else for(n in i)n in this.formWidgets&&(o[n]=e.call(this,n,this.formWidgets[n].widget,i[n]));else for(n in this.formWidgets)o[n]=e.call(this,n,this.formWidgets[n].widget,r);return o},inspectAttachedPoints:function(e,i,r){var n,o,s={};if(i)if(t.isArray(i))a.forEach(i,function(t){o=this[t],o&&o.tagName&&o.cloneNode&&(s[t]=e.call(this,t,o,r))},this);else for(n in i)o=this[n],o&&o.tagName&&o.cloneNode&&(s[n]=e.call(this,n,o,i[n]));else for(n in this)n in f||(o=this[n],o&&o.tagName&&o.cloneNode&&(s[n]=e.call(this,n,o,r)));return s},inspect:function(e,i,r){var n=this.inspectFormWidgets(function(i,r,n){return t.isArray(r)?e.call(this,i,a.map(r,function(e){return e.domNode}),n):e.call(this,i,r.domNode,n)},i,r);return this.inspectFormNodes&&t.mixin(n,this.inspectFormNodes(e,i,r)),t.mixin(n,this.inspectAttachedPoints(e,i,r))}});return t.extend(s,{observer:""}),k});//# sourceMappingURL=_Mixin.js.map