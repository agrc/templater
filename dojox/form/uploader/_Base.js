//>>built
define("dojox/form/uploader/_Base",["dojo/dom-form","dojo/dom-style","dojo/dom-construct","dojo/dom-attr","dojo/has","dojo/_base/declare","dojo/_base/event","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin"],function(e,t,i,r,a,n,o,s,l,d){return a.add("FormData",function(){return!!window.FormData}),a.add("xhr-sendAsBinary",function(){var e=window.XMLHttpRequest&&new window.XMLHttpRequest;return e&&!!e.sendAsBinary}),a.add("file-multiple",function(){return!!{true:1,false:1}[r.get(document.createElement("input",{type:"file"}),"multiple")]}),n("dojox.form.uploader._Base",[s,l,d],{getForm:function(){if(!this.form)for(var e=this.domNode;e&&e.tagName&&e!==document.body;){if("form"==e.tagName.toLowerCase()){this.form=e;break}e=e.parentNode}return this.form},getUrl:function(){return this.uploadUrl&&(this.url=this.uploadUrl),this.url?this.url:(this.getForm()&&(this.url=this.form.action),this.url)},connectForm:function(){this.url=this.getUrl(),!this._fcon&&this.getForm()&&(this._fcon=!0,this.connect(this.form,"onsubmit",function(e){o.stop(e),this.submit(this.form)}))},supports:function(e){switch(e){case"multiple":return"flash"!=this.force&&"iframe"!=this.force&&a("file-multiple");case"FormData":return a(e);case"sendAsBinary":return a("xhr-sendAsBinary")}return!1},getMimeType:function(){return"application/octet-stream"},getFileType:function(e){return e.substring(e.lastIndexOf(".")+1).toUpperCase()},convertBytes:function(e){var t=Math.round(e/1024*1e5)/1e5,i=Math.round(e/1048576*1e5)/1e5,r=Math.round(e/1073741824*1e5)/1e5,a=e;return t>1&&(a=t.toFixed(1)+" kb"),i>1&&(a=i.toFixed(1)+" mb"),r>1&&(a=r.toFixed(1)+" gb"),{kb:t,mb:i,gb:r,bytes:e,value:a}}})});//# sourceMappingURL=_Base.js.map