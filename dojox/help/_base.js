//>>built
define("dojox/help/_base",["dojo","dijit","dojox","dojo/require!dojox/rpc/Service,dojo/io/script"],function(e,t,i){e.provide("dojox.help._base"),e.require("dojox.rpc.Service"),e.require("dojo.io.script"),e.experimental("dojox.help"),i.help={locate:function(t,a,o){o=o||20;var r,n=[],s={};if(a){e.isArray(a)||(a=[a]);for(var l,d=0;l=a[d];d++){if(r=l,e.isString(l)){if(l=e.getObject(l),!l)continue}else{if(!e.isObject(l))continue;r=l.__name__}n.push(l),r&&(r=r.split(".")[0],s[r]||-1!=e.indexOf(i.help._namespaces,r)||i.help.refresh(r),s[r]=!0)}}n.length||(n.push({__name__:"window"}),e.forEach(i.help._namespaces,function(e){s[e]=!0}));var u=t.toLowerCase(),h=[];e:for(var l,d=0;l=n[d];d++){var c=l.__name__||"",m=e.some(n,function(e){return e=e.__name__||"",0==c.indexOf(e+".")});if(c&&!m){r=c.split(".")[0];var f=[];if("window"==c)for(r in i.help._names)e.isArray(i.help._names[r])&&(f=f.concat(i.help._names[r]));else f=i.help._names[r];for(var p,g=0;p=f[g];g++)if(("window"==c||0==p.indexOf(c+"."))&&-1!=p.toLowerCase().indexOf(u)){if(".prototype"==p.slice(-10))continue;var y=e.getObject(p);if(y&&(h.push([p,y]),h.length==o))break e}}}return i.help._displayLocated(h),e.isMoz?void 0:""},refresh:function(e,t){arguments.length<2&&(t=!0),i.help._recurse(e,t)},noConflict:function(e){if(arguments.length)return i.help._noConflict(e);for(;i.help._overrides.length;){var t=i.help._overrides.pop(),a=t[0],o=t[1],r=a[o];a[o]=i.help._noConflict(r)}},init:function(t,a){t&&i.help._namespaces.concat(t),e.addOnLoad(function(){e.require=function(t){return function(){i.help.noConflict(),t.apply(e,arguments),i.help._timer&&clearTimeout(i.help._timer),i.help._timer=setTimeout(function(){e.addOnLoad(function(){i.help.refresh(),i.help._timer=!1})},500)}}(e.require),i.help._recurse()})},_noConflict:function(t){return t instanceof String?t.toString():t instanceof Number?+t:t instanceof Boolean?1==t:(e.isObject(t)&&(delete t.__name__,delete t.help),t)},_namespaces:["dojo","dojox","dijit","djConfig"],_rpc:new i.rpc.Service(e.moduleUrl("dojox.rpc.SMDLibrary","dojo-api.smd")),_attributes:["summary","type","returns","parameters"],_clean:function(e){for(var t,a={},o=0;t=i.help._attributes[o];o++){var r=e["__"+t+"__"];r&&(a[t]=r)}return a},_displayLocated:function(e){throw new Error("_displayLocated should be overridden in one of the dojox.help packages")},_displayHelp:function(e,t){throw new Error("_displayHelp should be overridden in one of the dojox.help packages")},_addVersion:function(t){if(t.name){t.version=[e.version.major,e.version.minor,e.version.patch].join(".");var i=t.name.split(".");"dojo"!=i[0]&&"dijit"!=i[0]&&"dojox"!=i[0]||(t.project=i[0])}return t},_stripPrototype:function(e){var t=e.replace(/\.prototype(\.|$)/g,"."),i=t;return"."==t.slice(-1)?i=t=t.slice(0,-1):t=e,[i,t]},_help:function(){for(var t,a=this.__name__,o=i.help._stripPrototype(a)[0],r=[],n=0;t=i.help._attributes[n];n++)this["__"+t+"__"]||r.push(t);return i.help._displayHelp(!0,{name:this.__name__}),!r.length||this.__searched__?i.help._displayHelp(!1,i.help._clean(this)):(this.__searched__=!0,i.help._rpc.get(i.help._addVersion({name:o,exact:!0,attributes:r})).addCallback(this,function(e){if(this.toString===i.help._toString&&this.toString(e),e&&e.length){e=e[0];for(var t,a=0;t=i.help._attributes[a];a++)e[t]&&(this["__"+t+"__"]=e[t]);i.help._displayHelp(!1,i.help._clean(this))}else i.help._displayHelp(!1,!1)})),e.isMoz?void 0:""},_parse:function(e){if(delete this.__searching__,e&&e.length){var t=e[0].parameters;if(t){var a=["function ",this.__name__,"("];this.__parameters__=t;for(var o,r=0;o=t[r];r++){if(r&&a.push(", "),a.push(o.name),o.types){for(var n,s=[],l=0;n=o.types[l];l++)s.push(n.title);s.length&&(a.push(": "),a.push(s.join("|")))}o.repeating&&a.push("..."),o.optional&&a.push("?")}a.push(")"),this.__source__=this.__source__.replace(/function[^\(]*\([^\)]*\)/,a.join(""))}this.__output__&&delete this.__output__}else i.help._displayHelp(!1,!1)},_toStrings:{},_toString:function(t){if(!this.__source__)return this.__name__;var a=!this.__parameters__;if(this.__parameters__=[],t?i.help._parse.call(this,t):a&&(this.__searching__=!0,i.help._toStrings[i.help._stripPrototype(this.__name__)[0]]=this,i.help._toStringTimer&&clearTimeout(i.help._toStringTimer),i.help._toStringTimer=setTimeout(function(){i.help.__toString()},50)),!a||!this.__searching__)return this.__source__;var o="function Loading info for "+this.__name__+"... (watch console for result) {}";return e.isMoz?{toString:e.hitch(this,function(){return this.__output__=!0,o})}:(this.__output__=!0,o)},__toString:function(){i.help._toStringTimer&&clearTimeout(i.help._toStringTimer);var e=[];i.help.noConflict(i.help._toStrings);for(var t in i.help._toStrings)e.push(t);for(;e.length;)i.help._rpc.batch(i.help._addVersion({names:e.splice(-50,50),exact:!0,attributes:["parameters"]})).addCallback(this,function(e){for(var t,a=0;t=e[a];a++){var o=i.help._toStrings[t.name];o&&(i.help._parse.call(o,[t]),delete i.help._toStrings[t.name])}})},_overrides:[],_recursions:[],_names:{},_recurse:function(t,a){arguments.length<2&&(a=!0);var o=[];if(t&&e.isString(t))i.help.__recurse(e.getObject(t),t,t,o,a);else for(var r,n=0;r=i.help._namespaces[n];n++)window[r]&&(i.help._recursions.push([window[r],r,r]),window[r].__name__=r,window[r].help||(window[r].help=i.help._help));for(;i.help._recursions.length;){var s=i.help._recursions.shift();i.help.__recurse(s[0],s[1],s[2],o,a)}for(var l,n=0;l=o[n];n++)delete l.__seen__},__recurse:function(t,a,o,r,n){for(var s in t)if(!s.match(/([^\w_.$]|__[\w_.$]+__)/)){var l=t[s];if(!("undefined"==typeof l||l===document||l===window||l===i.help._toString||l===i.help._help||null===l||+e.isIE&&l.tagName||l.__seen__)){var d=e.isFunction(l),u=e.isObject(l)&&!e.isArray(l)&&!l.nodeType,h=o?o+"."+s:s;if("dojo._blockAsync"!=h){if(!l.__name__){var c=null;e.isString(l)?c=String:"number"==typeof l?c=Number:"boolean"==typeof l&&(c=Boolean),c&&(l=t[s]=new c(l))}l.__seen__=!0,l.__name__=h,(i.help._names[a]=i.help._names[a]||[]).push(h),r.push(l),d||i.help._overrides.push([t,s]),(d||u)&&n&&i.help._recursions.push([l,a,h]),d&&(l.__source__||(l.__source__=l.toString().replace(/^function\b ?/,"function "+h)),l.toString===Function.prototype.toString&&(l.toString=i.help._toString)),l.help||(l.help=i.help._help)}}}}}});//# sourceMappingURL=_base.js.map