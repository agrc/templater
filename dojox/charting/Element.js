//>>built
define("dojox/charting/Element",["dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/shape"],function(e,t,a,i,r){return a("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:!0,renderingOptions:null,constructor:function(e,t){this.chart=e,this.group=null,this.htmlElements=[],this.dirty=!0,this.trailingSymbol="...",this._events=[],t&&t.renderingOptions&&(this.renderingOptions=t.renderingOptions)},purgeGroup:function(){if(this.destroyHtmlElements(),this.group){this.getGroup().removeShape();var a=this.getGroup().children;if(r.dispose)for(var i=0;i<a.length;++i)r.dispose(a[i],!0);this.getGroup().rawNode&&t.empty(this.getGroup().rawNode),this.getGroup().clear(),r.dispose&&r.dispose(this.getGroup(),!0),this.getGroup()!=this.group&&(this.group.rawNode&&t.empty(this.group.rawNode),this.group.clear(),r.dispose&&r.dispose(this.group,!0)),this.group=null}return this.dirty=!0,this._events.length&&(e.forEach(this._events,function(e){e.shape.disconnect(e.handle)}),this._events=[]),this},cleanGroup:function(e){if(this.destroyHtmlElements(),e||(e=this.chart.surface),this.group){var a,i=this.getGroup().children;if(r.dispose)for(var d=0;d<i.length;++d)r.dispose(i[d],!0);this.getGroup().rawNode&&(a=this.getGroup().bgNode,t.empty(this.getGroup().rawNode)),this.getGroup().clear(),a&&this.getGroup().rawNode.appendChild(a)}else if(this.group=e.createGroup(),this.renderingOptions&&this.group.rawNode&&"http://www.w3.org/2000/svg"==this.group.rawNode.namespaceURI)for(var o in this.renderingOptions)this.group.rawNode.setAttribute(o,this.renderingOptions[o]);return this.dirty=!0,this},getGroup:function(){return this.group},destroyHtmlElements:function(){this.htmlElements.length&&(e.forEach(this.htmlElements,t.destroy),this.htmlElements=[])},destroy:function(){this.purgeGroup()},overrideShape:function(e,t){},getTextWidth:function(e,t){return i._base._getTextBox(e,{font:t}).w||0},getTextWithLimitLength:function(e,t,a,i){if(!e||e.length<=0)return{text:"",truncated:i||!1};if(!a||a<=0)return{text:e,truncated:i||!1};var r=2,d=.618,o=e.substring(0,1)+this.trailingSymbol;if(a<=this.getTextWidth(o,t))return{text:o,truncated:!0};if(this.getTextWidth(e,t)<=a)return{text:e,truncated:i||!1};for(var n=0,l=e.length;n<l;){if(l-n<=r){for(;this.getTextWidth(e.substring(0,n)+this.trailingSymbol,t)>a;)n-=1;return{text:e.substring(0,n)+this.trailingSymbol,truncated:!0}}var s=n+Math.round((l-n)*d);this.getTextWidth(e.substring(0,s),t)<a?(n=s,l=l):(n=n,l=s)}},getTextWithLimitCharCount:function(e,t,a,i){return!e||e.length<=0?{text:"",truncated:i||!1}:!a||a<=0||e.length<=a?{text:e,truncated:i||!1}:{text:e.substring(0,a)+this.trailingSymbol,truncated:!0}},_plotFill:function(e,t,a){if(!e||!e.type||!e.space)return e;var r,d=e.space;switch(e.type){case"linear":"plot"!==d&&"shapeX"!==d&&"shapeY"!==d||(e=i.makeParameters(i.defaultLinearGradient,e),e.space=d,"plot"!==d&&"shapeX"!==d||(r=t.height-a.t-a.b,e.y1=a.t+r*e.y1/100,e.y2=a.t+r*e.y2/100),"plot"!==d&&"shapeY"!==d||(r=t.width-a.l-a.r,e.x1=a.l+r*e.x1/100,e.x2=a.l+r*e.x2/100));break;case"radial":if("plot"===d){e=i.makeParameters(i.defaultRadialGradient,e),e.space=d;var o=t.width-a.l-a.r,n=t.height-a.t-a.b;e.cx=a.l+o*e.cx/100,e.cy=a.t+n*e.cy/100,e.r=e.r*Math.sqrt(o*o+n*n)/200}break;case"pattern":"plot"!==d&&"shapeX"!==d&&"shapeY"!==d||(e=i.makeParameters(i.defaultPattern,e),e.space=d,"plot"!==d&&"shapeX"!==d||(r=t.height-a.t-a.b,e.y=a.t+r*e.y/100,e.height=r*e.height/100),"plot"!==d&&"shapeY"!==d||(r=t.width-a.l-a.r,e.x=a.l+r*e.x/100,e.width=r*e.width/100))}return e},_shapeFill:function(e,t){if(!e||!e.space)return e;var a,r=e.space;switch(e.type){case"linear":"shape"!==r&&"shapeX"!==r&&"shapeY"!==r||(e=i.makeParameters(i.defaultLinearGradient,e),e.space=r,"shape"!==r&&"shapeX"!==r||(a=t.width,e.x1=t.x+a*e.x1/100,e.x2=t.x+a*e.x2/100),"shape"!==r&&"shapeY"!==r||(a=t.height,e.y1=t.y+a*e.y1/100,e.y2=t.y+a*e.y2/100));break;case"radial":"shape"===r&&(e=i.makeParameters(i.defaultRadialGradient,e),e.space=r,e.cx=t.x+t.width/2,e.cy=t.y+t.height/2,e.r=e.r*t.width/200);break;case"pattern":"shape"!==r&&"shapeX"!==r&&"shapeY"!==r||(e=i.makeParameters(i.defaultPattern,e),e.space=r,"shape"!==r&&"shapeX"!==r||(a=t.width,e.x=t.x+a*e.x/100,e.width=a*e.width/100),"shape"!==r&&"shapeY"!==r||(a=t.height,e.y=t.y+a*e.y/100,e.height=a*e.height/100))}return e},_pseudoRadialFill:function(e,t,a,r,d){if(!e||"radial"!==e.type||"shape"!==e.space)return e;var o=e.space;if(e=i.makeParameters(i.defaultRadialGradient,e),e.space=o,arguments.length<4)return e.cx=t.x,e.cy=t.y,e.r=e.r*a/100,e;var n=arguments.length<5?r:(d+r)/2;return{type:"linear",x1:t.x,y1:t.y,x2:t.x+e.r*a*Math.cos(n)/100,y2:t.y+e.r*a*Math.sin(n)/100,colors:e.colors}}})});//# sourceMappingURL=Element.js.map