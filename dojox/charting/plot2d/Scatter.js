//>>built
define("dojox/charting/plot2d/Scatter",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/has","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx","dojox/gfx/gradutils"],function(e,t,a,i,r,o,d,n,l,s,m,u){var f=l.lambda("item.purgeGroup()");return a("dojox.charting.plot2d.Scatter",[r,o],{defaultParams:{shadows:null,animate:null},optionalParams:{markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",styleFunc:null},constructor:function(t,a){this.opt=e.clone(e.mixin(this.opt,this.defaultParams)),s.updateWithObject(this.opt,a),s.updateWithPattern(this.opt,a,this.optionalParams),this.animate=this.opt.animate},render:function(e,a){if(this.zoom&&!this.isDataDirty())return this.performZoom(e,a);this.resetEvents(),this.dirty=this.isDirty();var r;this.dirty&&(t.forEach(this.series,f),this._eventSeries={},this.cleanGroup(),r=this.getGroup(),n.forEachRev(this.series,function(e){e.cleanGroup(r)}));for(var o=this.chart.theme,l=this.events(),s=this.series.length-1;s>=0;--s){var m=this.series[s];if(this.dirty||m.dirty)if(m.cleanGroup(),m.data.length){var h,y=o.next("marker",[this.opt,m]),c=this._hScaler.scaler.getTransformerFromModel(this._hScaler),v=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(m.hidden)m.dyn.marker=y.symbol,m.dyn.markerFill=y.marker.fill,m.dyn.markerStroke=y.marker.stroke;else{r=m.group,h="number"==typeof m.data[0]?t.map(m.data,function(t,i){return{x:c(i+1)+a.l,y:e.height-a.b-v(t)}},this):t.map(m.data,function(t,i){return{x:c(t.x)+a.l,y:e.height-a.b-v(t.y)}},this);var M=new Array(h.length),p=new Array(h.length),g=new Array(h.length);if(t.forEach(h,function(t,i){var n,l=m.data[i];if(this.opt.styleFunc||"number"!=typeof l){var s="number"!=typeof l?[l]:[];this.opt.styleFunc&&s.push(this.opt.styleFunc(l)),n=o.addMixin(y,"marker",s,!0)}else n=o.post(y,"marker");var f="M"+t.x+" "+t.y+" "+n.symbol;if(n.marker.shadow&&(M[i]=r.createPath("M"+(t.x+n.marker.shadow.dx)+" "+(t.y+n.marker.shadow.dy)+" "+n.symbol).setStroke(n.marker.shadow).setFill(n.marker.shadow.color),this.animate&&this._animateScatter(M[i],e.height-a.b)),n.marker.outline){var h=d.makeStroke(n.marker.outline);h.width=2*h.width+n.marker.stroke.width,g[i]=r.createPath(f).setStroke(h),this.animate&&this._animateScatter(g[i],e.height-a.b)}var c=d.makeStroke(n.marker.stroke),v=this._plotFill(n.marker.fill,e,a);if(!v||"linear"!==v.type&&"radial"!=v.type)p[i]=r.createPath(f).setStroke(c).setFill(v);else{var b=u.getColor(v,{x:t.x,y:t.y});c&&(c.color=b),p[i]=r.createPath(f).setStroke(c).setFill(b)}if(this.opt.labels){var k=p[i].getBoundingBox();this.createLabel(r,l,k,n)}this.animate&&this._animateScatter(p[i],e.height-a.b)},this),p.length&&(m.dyn.marker=y.symbol,m.dyn.markerStroke=p[p.length-1].getStroke(),m.dyn.markerFill=p[p.length-1].getFill()),l){var b=new Array(p.length);t.forEach(p,function(e,t){var a={element:"marker",index:t,run:m,shape:e,outline:g&&g[t]||null,shadow:M&&M[t]||null,cx:h[t].x,cy:h[t].y};"number"==typeof m.data[0]?(a.x=t+1,a.y=m.data[t]):(a.x=m.data[t].x,a.y=m.data[t].y),this._connectEvents(a),b[t]=a},this),this._eventSeries[m.name]=b}else delete this._eventSeries[m.name];m.dirty=!1}}else m.dirty=!1,o.skip();else o.skip(),this._reconnectEvents(m.name)}return this.dirty=!1,i("dojo-bidi")&&this._checkOrientation(this.group,e,a),this},_animateScatter:function(t,a){m.animateTransform(e.delegate({shape:t,duration:1200,transform:[{name:"translate",start:[0,a],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play()}})});//# sourceMappingURL=Scatter.js.map