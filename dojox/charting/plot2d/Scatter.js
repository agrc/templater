//>>built
define("dojox/charting/plot2d/Scatter",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/has","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx","dojox/gfx/gradutils"],function(e,t,a,i,r,o,n,d,l,s,m,u){var f=l.lambda("item.purgeGroup()");return a("dojox.charting.plot2d.Scatter",[r,o],{defaultParams:{shadows:null,animate:null},optionalParams:{markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",styleFunc:null},constructor:function(t,a){this.opt=e.clone(e.mixin(this.opt,this.defaultParams)),s.updateWithObject(this.opt,a),s.updateWithPattern(this.opt,a,this.optionalParams),this.animate=this.opt.animate},render:function(e,a){if(this.zoom&&!this.isDataDirty())return this.performZoom(e,a);this.resetEvents(),this.dirty=this.isDirty();var r;this.dirty&&(t.forEach(this.series,f),this._eventSeries={},this.cleanGroup(),r=this.getGroup(),d.forEachRev(this.series,function(e){e.cleanGroup(r)}));for(var o=this.chart.theme,l=this.events(),s=this.series.length-1;s>=0;--s){var m=this.series[s];if(this.dirty||m.dirty)if(m.cleanGroup(),m.data.length){var c,h=o.next("marker",[this.opt,m]),y=this._hScaler.scaler.getTransformerFromModel(this._hScaler),M=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(m.hidden)m.dyn.marker=h.symbol,m.dyn.markerFill=h.marker.fill,m.dyn.markerStroke=h.marker.stroke;else{r=m.group,c="number"==typeof m.data[0]?t.map(m.data,function(t,i){return{x:y(i+1)+a.l,y:e.height-a.b-M(t)}},this):t.map(m.data,function(t,i){return{x:y(t.x)+a.l,y:e.height-a.b-M(t.y)}},this);var v=new Array(c.length),g=new Array(c.length),p=new Array(c.length);if(t.forEach(c,function(t,i){var d,l=m.data[i];if(this.opt.styleFunc||"number"!=typeof l){var s="number"!=typeof l?[l]:[];this.opt.styleFunc&&s.push(this.opt.styleFunc(l)),d=o.addMixin(h,"marker",s,!0)}else d=o.post(h,"marker");var f="M"+t.x+" "+t.y+" "+d.symbol;if(d.marker.shadow&&(v[i]=r.createPath("M"+(t.x+d.marker.shadow.dx)+" "+(t.y+d.marker.shadow.dy)+" "+d.symbol).setStroke(d.marker.shadow).setFill(d.marker.shadow.color),this.animate&&this._animateScatter(v[i],e.height-a.b)),d.marker.outline){var c=n.makeStroke(d.marker.outline);c.width=2*c.width+d.marker.stroke.width,p[i]=r.createPath(f).setStroke(c),this.animate&&this._animateScatter(p[i],e.height-a.b)}var y=n.makeStroke(d.marker.stroke),M=this._plotFill(d.marker.fill,e,a);if(!M||"linear"!==M.type&&"radial"!=M.type)g[i]=r.createPath(f).setStroke(y).setFill(M);else{var b=u.getColor(M,{x:t.x,y:t.y});y&&(y.color=b),g[i]=r.createPath(f).setStroke(y).setFill(b)}if(this.opt.labels){var k=g[i].getBoundingBox();this.createLabel(r,l,k,d)}this.animate&&this._animateScatter(g[i],e.height-a.b)},this),g.length&&(m.dyn.marker=h.symbol,m.dyn.markerStroke=g[g.length-1].getStroke(),m.dyn.markerFill=g[g.length-1].getFill()),l){var b=new Array(g.length);t.forEach(g,function(e,t){var a={element:"marker",index:t,run:m,shape:e,outline:p&&p[t]||null,shadow:v&&v[t]||null,cx:c[t].x,cy:c[t].y};"number"==typeof m.data[0]?(a.x=t+1,a.y=m.data[t]):(a.x=m.data[t].x,a.y=m.data[t].y),this._connectEvents(a),b[t]=a},this),this._eventSeries[m.name]=b}else delete this._eventSeries[m.name];m.dirty=!1}}else m.dirty=!1,o.skip();else o.skip(),this._reconnectEvents(m.name)}return this.dirty=!1,i("dojo-bidi")&&this._checkOrientation(this.group,e,a),this},_animateScatter:function(t,a){m.animateTransform(e.delegate({shape:t,duration:1200,transform:[{name:"translate",start:[0,a],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play()}})});//# sourceMappingURL=Scatter.js.map