//>>built
define("dojox/charting/plot2d/Scatter",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/has","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx","dojox/gfx/gradutils"],function(e,t,a,i,r,o,n,d,s,l,m,u){var c=s.lambda("item.purgeGroup()");return a("dojox.charting.plot2d.Scatter",[r,o],{defaultParams:{shadows:null,animate:null},optionalParams:{markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",styleFunc:null},constructor:function(t,a){this.opt=e.clone(e.mixin(this.opt,this.defaultParams)),l.updateWithObject(this.opt,a),l.updateWithPattern(this.opt,a,this.optionalParams),this.animate=this.opt.animate},render:function(e,a){if(this.zoom&&!this.isDataDirty())return this.performZoom(e,a);this.resetEvents(),this.dirty=this.isDirty();var r;this.dirty&&(t.forEach(this.series,c),this._eventSeries={},this.cleanGroup(),r=this.getGroup(),d.forEachRev(this.series,function(e){e.cleanGroup(r)}));for(var o=this.chart.theme,s=this.events(),l=this.series.length-1;l>=0;--l){var m=this.series[l];if(this.dirty||m.dirty)if(m.cleanGroup(),m.data.length){var h,f=o.next("marker",[this.opt,m]),y=this._hScaler.scaler.getTransformerFromModel(this._hScaler),v=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(m.hidden)m.dyn.marker=f.symbol,m.dyn.markerFill=f.marker.fill,m.dyn.markerStroke=f.marker.stroke;else{r=m.group,h="number"==typeof m.data[0]?t.map(m.data,function(t,i){return{x:y(i+1)+a.l,y:e.height-a.b-v(t)}},this):t.map(m.data,function(t,i){return{x:y(t.x)+a.l,y:e.height-a.b-v(t.y)}},this);var p=new Array(h.length),M=new Array(h.length),g=new Array(h.length);if(t.forEach(h,function(t,i){var d,s=m.data[i];if(this.opt.styleFunc||"number"!=typeof s){var l="number"!=typeof s?[s]:[];this.opt.styleFunc&&l.push(this.opt.styleFunc(s)),d=o.addMixin(f,"marker",l,!0)}else d=o.post(f,"marker");var c="M"+t.x+" "+t.y+" "+d.symbol;if(d.marker.shadow&&(p[i]=r.createPath("M"+(t.x+d.marker.shadow.dx)+" "+(t.y+d.marker.shadow.dy)+" "+d.symbol).setStroke(d.marker.shadow).setFill(d.marker.shadow.color),this.animate&&this._animateScatter(p[i],e.height-a.b)),d.marker.outline){var h=n.makeStroke(d.marker.outline);h.width=2*h.width+d.marker.stroke.width,g[i]=r.createPath(c).setStroke(h),this.animate&&this._animateScatter(g[i],e.height-a.b)}var y=n.makeStroke(d.marker.stroke),v=this._plotFill(d.marker.fill,e,a);if(!v||"linear"!==v.type&&"radial"!=v.type)M[i]=r.createPath(c).setStroke(y).setFill(v);else{var b=u.getColor(v,{x:t.x,y:t.y});y&&(y.color=b),M[i]=r.createPath(c).setStroke(y).setFill(b)}if(this.opt.labels){var k=M[i].getBoundingBox();this.createLabel(r,s,k,d)}this.animate&&this._animateScatter(M[i],e.height-a.b)},this),M.length&&(m.dyn.marker=f.symbol,m.dyn.markerStroke=M[M.length-1].getStroke(),m.dyn.markerFill=M[M.length-1].getFill()),s){var b=new Array(M.length);t.forEach(M,function(e,t){var a={element:"marker",index:t,run:m,shape:e,outline:g&&g[t]||null,shadow:p&&p[t]||null,cx:h[t].x,cy:h[t].y};"number"==typeof m.data[0]?(a.x=t+1,a.y=m.data[t]):(a.x=m.data[t].x,a.y=m.data[t].y),this._connectEvents(a),b[t]=a},this),this._eventSeries[m.name]=b}else delete this._eventSeries[m.name];m.dirty=!1}}else m.dirty=!1,o.skip();else o.skip(),this._reconnectEvents(m.name)}return this.dirty=!1,i("dojo-bidi")&&this._checkOrientation(this.group,e,a),this},_animateScatter:function(t,a){m.animateTransform(e.delegate({shape:t,duration:1200,transform:[{name:"translate",start:[0,a],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play()}})});//# sourceMappingURL=Scatter.js.map