//>>built
define("dojox/charting/plot2d/common",["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojox/gfx","dojox/lang/functional","../scaler/common"],function(e,t,i,r,a,n){var o=e.getObject("dojox.charting.plot2d.common",!0);return e.mixin(o,{doIfLoaded:n.doIfLoaded,makeStroke:function(e){return e?(("string"==typeof e||e instanceof i)&&(e={color:e}),r.makeParameters(r.defaultStroke,e)):e},augmentColor:function(e,t){var r=new i(e),a=new i(t);return a.a=r.a,a},augmentStroke:function(e,t){var i=o.makeStroke(e);return i&&(i.color=o.augmentColor(i.color,t)),i},augmentFill:function(e,t){new i(t);return"string"==typeof e||e instanceof i?o.augmentColor(e,t):e},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(i){for(var r=e.delegate(o.defaultStats),a=0;a<i.length;++a)for(var n=i[a],d=0;d<n.data.length;d++)if(null!==n.data[d]){if("number"==typeof n.data[d]){var s=r.vmin,l=r.vmax;t.forEach(n.data,function(e,t){if(null!==e){var i=t+1,a=e;isNaN(a)&&(a=0),r.hmin=Math.min(r.hmin,i),r.hmax=Math.max(r.hmax,i),r.vmin=Math.min(r.vmin,a),r.vmax=Math.max(r.vmax,a)}}),"ymin"in n&&(r.vmin=Math.min(s,n.ymin)),"ymax"in n&&(r.vmax=Math.max(l,n.ymax))}else{var u=r.hmin,c=r.hmax,s=r.vmin,l=r.vmax;"xmin"in n&&"xmax"in n&&"ymin"in n&&"ymax"in n||t.forEach(n.data,function(e,t){if(null!==e){var i="x"in e?e.x:t+1,a=e.y;isNaN(i)&&(i=0),isNaN(a)&&(a=0),r.hmin=Math.min(r.hmin,i),r.hmax=Math.max(r.hmax,i),r.vmin=Math.min(r.vmin,a),r.vmax=Math.max(r.vmax,a)}}),"xmin"in n&&(r.hmin=Math.min(u,n.xmin)),"xmax"in n&&(r.hmax=Math.max(c,n.xmax)),"ymin"in n&&(r.vmin=Math.min(s,n.ymin)),"ymax"in n&&(r.vmax=Math.max(l,n.ymax))}break}return r},calculateBarSize:function(e,t,i){i||(i=1);var r=t.gap,a=(e-2*r)/i;return"minBarSize"in t&&(a=Math.max(a,t.minBarSize)),"maxBarSize"in t&&(a=Math.min(a,t.maxBarSize)),a=Math.max(a,1),r=(e-a*i)/2,{size:a,gap:r}},collectStackedStats:function(t){var i=e.clone(o.defaultStats);if(t.length){i.hmin=Math.min(i.hmin,1),i.hmax=a.foldl(t,"seed, run -> Math.max(seed, run.data.length)",i.hmax);for(var r=0;r<i.hmax;++r){var n=t[0].data[r];n=n&&("number"==typeof n?n:n.y),isNaN(n)&&(n=0),i.vmin=Math.min(i.vmin,n);for(var d=1;d<t.length;++d){var s=t[d].data[r];s=s&&("number"==typeof s?s:s.y),isNaN(s)&&(s=0),n+=s}i.vmax=Math.max(i.vmax,n)}}return i},curve:function(e,i){var r=e.slice(0);"x"==i&&(r[r.length]=r[0]);var a=t.map(r,function(e,t){if(0==t)return"M"+e.x+","+e.y;if(!isNaN(i)){var a=e.x-r[t-1].x,n=r[t-1].y;return"C"+(e.x-(i-1)*(a/i))+","+n+" "+(e.x-a/i)+","+e.y+" "+e.x+","+e.y}if("X"==i||"x"==i||"S"==i){var o,d,s,l,u,c,f=r[t-1],m=r[t],h=1/6;1==t?(o="x"==i?r[r.length-2]:f,h=1/3):o=r[t-2],t==r.length-1?(d="x"==i?r[1]:m,h=1/3):d=r[t+1];var y=Math.sqrt((m.x-f.x)*(m.x-f.x)+(m.y-f.y)*(m.y-f.y)),p=Math.sqrt((m.x-o.x)*(m.x-o.x)+(m.y-o.y)*(m.y-o.y)),v=Math.sqrt((d.x-f.x)*(d.x-f.x)+(d.y-f.y)*(d.y-f.y)),g=p*h,b=v*h;g>y/2&&b>y/2?(g=y/2,b=y/2):g>y/2?(g=y/2,b=y/2*v/p):b>y/2&&(b=y/2,g=y/2*p/v),"S"==i&&(o==f&&(g=0),m==d&&(b=0)),s=f.x+g*(m.x-o.x)/p,l=f.y+g*(m.y-o.y)/p,u=m.x-b*(d.x-f.x)/v,c=m.y-b*(d.y-f.y)/v}return"C"+(s+","+l+" "+u+","+c+" "+m.x+","+m.y)});return a.join(" ")},getLabel:function(e,t,i){return n.doIfLoaded("dojo/number",function(r){return(t?r.format(e,{places:i}):r.format(e))||""},function(){return t?e.toFixed(i):e.toString()})}})});//# sourceMappingURL=common.js.map