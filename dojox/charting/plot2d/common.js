//>>built
define("dojox/charting/plot2d/common",["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojox/gfx","dojox/lang/functional","../scaler/common"],function(e,t,i,a,r,n){var o=e.getObject("dojox.charting.plot2d.common",!0);return e.mixin(o,{doIfLoaded:n.doIfLoaded,makeStroke:function(e){return e?(("string"==typeof e||e instanceof i)&&(e={color:e}),a.makeParameters(a.defaultStroke,e)):e},augmentColor:function(e,t){var a=new i(e),r=new i(t);return r.a=a.a,r},augmentStroke:function(e,t){var i=o.makeStroke(e);return i&&(i.color=o.augmentColor(i.color,t)),i},augmentFill:function(e,t){new i(t);return"string"==typeof e||e instanceof i?o.augmentColor(e,t):e},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(i){for(var a=e.delegate(o.defaultStats),r=0;r<i.length;++r)for(var n=i[r],d=0;d<n.data.length;d++)if(null!==n.data[d]){if("number"==typeof n.data[d]){var s=a.vmin,l=a.vmax;t.forEach(n.data,function(e,t){if(null!==e){var i=t+1,r=e;isNaN(r)&&(r=0),a.hmin=Math.min(a.hmin,i),a.hmax=Math.max(a.hmax,i),a.vmin=Math.min(a.vmin,r),a.vmax=Math.max(a.vmax,r)}}),"ymin"in n&&(a.vmin=Math.min(s,n.ymin)),"ymax"in n&&(a.vmax=Math.max(l,n.ymax))}else{var u=a.hmin,c=a.hmax,s=a.vmin,l=a.vmax;"xmin"in n&&"xmax"in n&&"ymin"in n&&"ymax"in n||t.forEach(n.data,function(e,t){if(null!==e){var i="x"in e?e.x:t+1,r=e.y;isNaN(i)&&(i=0),isNaN(r)&&(r=0),a.hmin=Math.min(a.hmin,i),a.hmax=Math.max(a.hmax,i),a.vmin=Math.min(a.vmin,r),a.vmax=Math.max(a.vmax,r)}}),"xmin"in n&&(a.hmin=Math.min(u,n.xmin)),"xmax"in n&&(a.hmax=Math.max(c,n.xmax)),"ymin"in n&&(a.vmin=Math.min(s,n.ymin)),"ymax"in n&&(a.vmax=Math.max(l,n.ymax))}break}return a},calculateBarSize:function(e,t,i){i||(i=1);var a=t.gap,r=(e-2*a)/i;return"minBarSize"in t&&(r=Math.max(r,t.minBarSize)),"maxBarSize"in t&&(r=Math.min(r,t.maxBarSize)),r=Math.max(r,1),a=(e-r*i)/2,{size:r,gap:a}},collectStackedStats:function(t){var i=e.clone(o.defaultStats);if(t.length){i.hmin=Math.min(i.hmin,1),i.hmax=r.foldl(t,"seed, run -> Math.max(seed, run.data.length)",i.hmax);for(var a=0;a<i.hmax;++a){var n=t[0].data[a];n=n&&("number"==typeof n?n:n.y),isNaN(n)&&(n=0),i.vmin=Math.min(i.vmin,n);for(var d=1;d<t.length;++d){var s=t[d].data[a];s=s&&("number"==typeof s?s:s.y),isNaN(s)&&(s=0),n+=s}i.vmax=Math.max(i.vmax,n)}}return i},curve:function(e,i){var a=e.slice(0);"x"==i&&(a[a.length]=a[0]);var r=t.map(a,function(e,t){if(0==t)return"M"+e.x+","+e.y;if(!isNaN(i)){var r=e.x-a[t-1].x,n=a[t-1].y;return"C"+(e.x-(i-1)*(r/i))+","+n+" "+(e.x-r/i)+","+e.y+" "+e.x+","+e.y}if("X"==i||"x"==i||"S"==i){var o,d,s,l,u,c,f=a[t-1],m=a[t],h=1/6;1==t?(o="x"==i?a[a.length-2]:f,h=1/3):o=a[t-2],t==a.length-1?(d="x"==i?a[1]:m,h=1/3):d=a[t+1];var y=Math.sqrt((m.x-f.x)*(m.x-f.x)+(m.y-f.y)*(m.y-f.y)),p=Math.sqrt((m.x-o.x)*(m.x-o.x)+(m.y-o.y)*(m.y-o.y)),v=Math.sqrt((d.x-f.x)*(d.x-f.x)+(d.y-f.y)*(d.y-f.y)),g=p*h,b=v*h;g>y/2&&b>y/2?(g=y/2,b=y/2):g>y/2?(g=y/2,b=y/2*v/p):b>y/2&&(b=y/2,g=y/2*p/v),"S"==i&&(o==f&&(g=0),m==d&&(b=0)),s=f.x+g*(m.x-o.x)/p,l=f.y+g*(m.y-o.y)/p,u=m.x-b*(d.x-f.x)/v,c=m.y-b*(d.y-f.y)/v}return"C"+(s+","+l+" "+u+","+c+" "+m.x+","+m.y)});return r.join(" ")},getLabel:function(e,t,i){return n.doIfLoaded("dojo/number",function(a){return(t?a.format(e,{places:i}):a.format(e))||""},function(){return t?e.toFixed(i):e.toString()})}})});//# sourceMappingURL=common.js.map