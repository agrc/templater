//>>built
define("dojox/charting/plot2d/common",["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojox/gfx","dojox/lang/functional","../scaler/common"],function(e,t,a,i,r,d){var o=e.getObject("dojox.charting.plot2d.common",!0);return e.mixin(o,{doIfLoaded:d.doIfLoaded,makeStroke:function(e){return e?(("string"==typeof e||e instanceof a)&&(e={color:e}),i.makeParameters(i.defaultStroke,e)):e},augmentColor:function(e,t){var i=new a(e),r=new a(t);return r.a=i.a,r},augmentStroke:function(e,t){var a=o.makeStroke(e);return a&&(a.color=o.augmentColor(a.color,t)),a},augmentFill:function(e,t){new a(t);return"string"==typeof e||e instanceof a?o.augmentColor(e,t):e},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(a,i){for(var r=e.delegate(o.defaultStats),d=0;d<a.length;++d)for(var n=a[d],l=0;l<n.data.length;l++)if(!i(n.data[l])){if("number"==typeof n.data[l]){var s=r.vmin,m=r.vmax;t.forEach(n.data,function(e,t){if(!i(e)){var a=t+1,d=e;isNaN(d)&&(d=0),r.hmin=Math.min(r.hmin,a),r.hmax=Math.max(r.hmax,a),r.vmin=Math.min(r.vmin,d),r.vmax=Math.max(r.vmax,d)}}),"ymin"in n&&(r.vmin=Math.min(s,n.ymin)),"ymax"in n&&(r.vmax=Math.max(m,n.ymax))}else{var u=r.hmin,f=r.hmax,s=r.vmin,m=r.vmax;"xmin"in n&&"xmax"in n&&"ymin"in n&&"ymax"in n||t.forEach(n.data,function(e,t){if(!i(e)){var a="x"in e?e.x:t+1,d=e.y;isNaN(a)&&(a=0),isNaN(d)&&(d=0),r.hmin=Math.min(r.hmin,a),r.hmax=Math.max(r.hmax,a),r.vmin=Math.min(r.vmin,d),r.vmax=Math.max(r.vmax,d)}}),"xmin"in n&&(r.hmin=Math.min(u,n.xmin)),"xmax"in n&&(r.hmax=Math.max(f,n.xmax)),"ymin"in n&&(r.vmin=Math.min(s,n.ymin)),"ymax"in n&&(r.vmax=Math.max(m,n.ymax))}break}return r},calculateBarSize:function(e,t,a){a||(a=1);var i=t.gap,r=(e-2*i)/a;return"minBarSize"in t&&(r=Math.max(r,t.minBarSize)),"maxBarSize"in t&&(r=Math.min(r,t.maxBarSize)),r=Math.max(r,1),i=(e-r*a)/2,{size:r,gap:i}},collectStackedStats:function(t){var a=e.clone(o.defaultStats);if(t.length){a.hmin=Math.min(a.hmin,1),a.hmax=r.foldl(t,"seed, run -> Math.max(seed, run.data.length)",a.hmax);for(var i=0;i<a.hmax;++i){var d=t[0].data[i];d=d&&("number"==typeof d?d:d.y),isNaN(d)&&(d=0),a.vmin=Math.min(a.vmin,d);for(var n=1;n<t.length;++n){var l=t[n].data[i];l=l&&("number"==typeof l?l:l.y),isNaN(l)&&(l=0),d+=l}a.vmax=Math.max(a.vmax,d)}}return a},curve:function(e,a){var i=e.slice(0);return"x"==a&&(i[i.length]=i[0]),t.map(i,function(e,t){if(0==t)return"M"+e.x+","+e.y;if(!isNaN(a)){var r=e.x-i[t-1].x,d=i[t-1].y;return"C"+(e.x-r/a*(a-1))+","+d+" "+(e.x-r/a)+","+e.y+" "+e.x+","+e.y}if("X"==a||"x"==a||"S"==a){var o,n,l,s,m,u,f=i[t-1],h=i[t],y=1/6;1==t?(o="x"==a?i[i.length-2]:f,y=1/3):o=i[t-2],t==i.length-1?(n="x"==a?i[1]:h,y=1/3):n=i[t+1];var c=Math.sqrt((h.x-f.x)*(h.x-f.x)+(h.y-f.y)*(h.y-f.y)),M=Math.sqrt((h.x-o.x)*(h.x-o.x)+(h.y-o.y)*(h.y-o.y)),v=Math.sqrt((n.x-f.x)*(n.x-f.x)+(n.y-f.y)*(n.y-f.y)),g=M*y,p=v*y;g>c/2&&p>c/2?(g=c/2,p=c/2):g>c/2?(g=c/2,p=c/2*v/M):p>c/2&&(p=c/2,g=c/2*M/v),"S"==a&&(o==f&&(g=0),h==n&&(p=0)),l=f.x+g*(h.x-o.x)/M,s=f.y+g*(h.y-o.y)/M,m=h.x-p*(n.x-f.x)/v,u=h.y-p*(n.y-f.y)/v}return"C"+l+","+s+" "+m+","+u+" "+h.x+","+h.y}).join(" ")},getLabel:function(e,t,a){return d.doIfLoaded("dojo/number",function(i){return(t?i.format(e,{places:a}):i.format(e))||""},function(){return t?e.toFixed(a):e.toString()})}})});//# sourceMappingURL=common.js.map