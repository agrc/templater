//>>built
define("dojox/charting/plot2d/common",["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojox/gfx","dojox/lang/functional","../scaler/common"],function(e,t,a,i,r,o){var n=e.getObject("dojox.charting.plot2d.common",!0);return e.mixin(n,{doIfLoaded:o.doIfLoaded,makeStroke:function(e){return e?(("string"==typeof e||e instanceof a)&&(e={color:e}),i.makeParameters(i.defaultStroke,e)):e},augmentColor:function(e,t){var i=new a(e),r=new a(t);return r.a=i.a,r},augmentStroke:function(e,t){var a=n.makeStroke(e);return a&&(a.color=n.augmentColor(a.color,t)),a},augmentFill:function(e,t){new a(t);return"string"==typeof e||e instanceof a?n.augmentColor(e,t):e},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(a){for(var i=e.delegate(n.defaultStats),r=0;r<a.length;++r)for(var o=a[r],d=0;d<o.data.length;d++)if(null!==o.data[d]){if("number"==typeof o.data[d]){var s=i.vmin,l=i.vmax;t.forEach(o.data,function(e,t){if(null!==e){var a=t+1,r=e;isNaN(r)&&(r=0),i.hmin=Math.min(i.hmin,a),i.hmax=Math.max(i.hmax,a),i.vmin=Math.min(i.vmin,r),i.vmax=Math.max(i.vmax,r)}}),"ymin"in o&&(i.vmin=Math.min(s,o.ymin)),"ymax"in o&&(i.vmax=Math.max(l,o.ymax))}else{var m=i.hmin,u=i.hmax,s=i.vmin,l=i.vmax;"xmin"in o&&"xmax"in o&&"ymin"in o&&"ymax"in o||t.forEach(o.data,function(e,t){if(null!==e){var a="x"in e?e.x:t+1,r=e.y;isNaN(a)&&(a=0),isNaN(r)&&(r=0),i.hmin=Math.min(i.hmin,a),i.hmax=Math.max(i.hmax,a),i.vmin=Math.min(i.vmin,r),i.vmax=Math.max(i.vmax,r)}}),"xmin"in o&&(i.hmin=Math.min(m,o.xmin)),"xmax"in o&&(i.hmax=Math.max(u,o.xmax)),"ymin"in o&&(i.vmin=Math.min(s,o.ymin)),"ymax"in o&&(i.vmax=Math.max(l,o.ymax))}break}return i},calculateBarSize:function(e,t,a){a||(a=1);var i=t.gap,r=(e-2*i)/a;return"minBarSize"in t&&(r=Math.max(r,t.minBarSize)),"maxBarSize"in t&&(r=Math.min(r,t.maxBarSize)),r=Math.max(r,1),i=(e-r*a)/2,{size:r,gap:i}},collectStackedStats:function(t){var a=e.clone(n.defaultStats);if(t.length){a.hmin=Math.min(a.hmin,1),a.hmax=r.foldl(t,"seed, run -> Math.max(seed, run.data.length)",a.hmax);for(var i=0;i<a.hmax;++i){var o=t[0].data[i];o=o&&("number"==typeof o?o:o.y),isNaN(o)&&(o=0),a.vmin=Math.min(a.vmin,o);for(var d=1;d<t.length;++d){var s=t[d].data[i];s=s&&("number"==typeof s?s:s.y),isNaN(s)&&(s=0),o+=s}a.vmax=Math.max(a.vmax,o)}}return a},curve:function(e,a){var i=e.slice(0);"x"==a&&(i[i.length]=i[0]);var r=t.map(i,function(e,t){if(0==t)return"M"+e.x+","+e.y;if(!isNaN(a)){var r=e.x-i[t-1].x,o=i[t-1].y;return"C"+(e.x-(a-1)*(r/a))+","+o+" "+(e.x-r/a)+","+e.y+" "+e.x+","+e.y}if("X"==a||"x"==a||"S"==a){var n,d,s,l,m,u,c=i[t-1],h=i[t],f=1/6;1==t?(n="x"==a?i[i.length-2]:c,f=1/3):n=i[t-2],t==i.length-1?(d="x"==a?i[1]:h,f=1/3):d=i[t+1];var y=Math.sqrt((h.x-c.x)*(h.x-c.x)+(h.y-c.y)*(h.y-c.y)),v=Math.sqrt((h.x-n.x)*(h.x-n.x)+(h.y-n.y)*(h.y-n.y)),p=Math.sqrt((d.x-c.x)*(d.x-c.x)+(d.y-c.y)*(d.y-c.y)),M=v*f,g=p*f;M>y/2&&g>y/2?(M=y/2,g=y/2):M>y/2?(M=y/2,g=y/2*p/v):g>y/2&&(g=y/2,M=y/2*v/p),"S"==a&&(n==c&&(M=0),h==d&&(g=0)),s=c.x+M*(h.x-n.x)/v,l=c.y+M*(h.y-n.y)/v,m=h.x-g*(d.x-c.x)/p,u=h.y-g*(d.y-c.y)/p}return"C"+(s+","+l+" "+m+","+u+" "+h.x+","+h.y)});return r.join(" ")},getLabel:function(e,t,a){return o.doIfLoaded("dojo/number",function(i){return(t?i.format(e,{places:a}):i.format(e))||""},function(){return t?e.toFixed(a):e.toString()})}})});//# sourceMappingURL=common.js.map