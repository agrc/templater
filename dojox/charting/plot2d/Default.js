//>>built
define("dojox/charting/plot2d/Default",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/has","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(e,t,a,i,r,o,d,n,l,s,m){var u=l.lambda("item.purgeGroup()");return t("dojox.charting.plot2d.Default",[r,o],{defaultParams:{lines:!0,areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",zeroLine:0},constructor:function(t,a){this.opt=e.clone(e.mixin(this.opt,this.defaultParams)),s.updateWithObject(this.opt,a),s.updateWithPattern(this.opt,a,this.optionalParams),this.animate=this.opt.animate},createPath:function(e,t,a){var i;return this.opt.enableCache&&e._pathFreePool.length>0?(i=e._pathFreePool.pop(),i.setShape(a),t.add(i)):i=t.createPath(a),this.opt.enableCache&&e._pathUsePool.push(i),i},buildSegments:function(e,t){for(var a=this.series[e],i=t?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,r=t?Math.min(a.data.length,Math.ceil(this._hScaler.bounds.to)):a.data.length,o=null,d=[],n=i;n<r;n++)this.isNullValue(a.data[n])?this.opt.interpolate&&!t||(o=null):(o||(o=[],d.push({index:n,rseg:o})),o.push(t&&a.data[n].hasOwnProperty("y")?a.data[n].y:a.data[n]));return d},render:function(t,r){if(this.zoom&&!this.isDataDirty())return this.performZoom(t,r);this.resetEvents(),this.dirty=this.isDirty();var o;this.dirty&&(a.forEach(this.series,u),this._eventSeries={},this.cleanGroup(),this.getGroup().setTransform(null),o=this.getGroup(),n.forEachRev(this.series,function(e){e.cleanGroup(o)}));for(var l,s,h=this.chart.theme,f=this.events(),y=0;y<this.series.length;y++){var c=this.series[y];if(this.dirty||c.dirty)if(c.cleanGroup(),this.opt.enableCache&&(c._pathFreePool=(c._pathFreePool?c._pathFreePool:[]).concat(c._pathUsePool?c._pathUsePool:[]),c._pathUsePool=[]),c.data.length){var v,p=h.next(this.opt.areas?"area":"line",[this.opt,c],!0),M=this._hScaler.scaler.getTransformerFromModel(this._hScaler),g=this._vScaler.scaler.getTransformerFromModel(this._vScaler),b=this._eventSeries[c.name]=new Array(c.data.length);if(o=c.group,c.hidden)this.opt.lines&&(c.dyn.stroke=p.series.stroke),(c.markers||void 0===c.markers&&this.opt.markers)&&(c.dyn.markerFill=p.marker.fill,c.dyn.markerStroke=p.marker.stroke,c.dyn.marker=p.symbol),this.opt.areas&&(c.dyn.fill=p.series.fill);else{for(var w=a.some(c.data,function(e){return"number"==typeof e||e&&!e.hasOwnProperty("x")}),k=this.buildSegments(y,w),_=0;_<k.length;_++){var F=k[_];if(v=w?a.map(F.rseg,function(e,a){return{x:M(a+F.index+1)+r.l,y:t.height-r.b-g(e),data:e}},this):a.map(F.rseg,function(e){return{x:M(e.x)+r.l,y:t.height-r.b-g(e.y),data:e}},this),w&&this.opt.interpolate)for(;_<k.length;)_++,(F=k[_])&&(v=v.concat(a.map(F.rseg,function(e,a){return{x:M(a+F.index+1)+r.l,y:t.height-r.b-g(e),data:e}},this)));var I=this.opt.tension?d.curve(v,this.opt.tension):"";if(this.opt.areas&&v.length>1){var j=this._plotFill(p.series.fill,t,r),E=e.clone(v),A=t.height-r.b;if(isNaN(this.opt.zeroLine)||(A=Math.max(r.t,Math.min(t.height-r.b-g(this.opt.zeroLine),A))),this.opt.tension){var x="L"+E[E.length-1].x+","+A+" L"+E[0].x+","+A+" L"+E[0].x+","+E[0].y;c.dyn.fill=o.createPath(I+" "+x).setFill(j).getFill()}else E.push({x:v[v.length-1].x,y:A}),E.push({x:v[0].x,y:A}),E.push(v[0]),c.dyn.fill=o.createPolyline(E).setFill(j).getFill()}(this.opt.lines||this.opt.markers)&&(l=p.series.stroke,p.series.outline&&(s=c.dyn.outline=d.makeStroke(p.series.outline),s.width=2*s.width+(l&&l.width||0))),this.opt.markers&&(c.dyn.marker=p.symbol);var C=null,D=null,G=null;if(l&&p.series.shadow&&v.length>1){var S=p.series.shadow,z=a.map(v,function(e){return{x:e.x+S.dx,y:e.y+S.dy}});this.opt.lines&&(this.opt.tension?c.dyn.shadow=o.createPath(d.curve(z,this.opt.tension)).setStroke(S).getStroke():c.dyn.shadow=o.createPolyline(z).setStroke(S).getStroke()),this.opt.markers&&p.marker.shadow&&(S=p.marker.shadow,G=a.map(z,function(e){return this.createPath(c,o,"M"+e.x+" "+e.y+" "+p.symbol).setStroke(S).setFill(S.color)},this))}if(this.opt.lines&&v.length>1){var N;s&&(this.opt.tension?c.dyn.outline=o.createPath(I).setStroke(s).getStroke():c.dyn.outline=o.createPolyline(v).setStroke(s).getStroke()),this.opt.tension?c.dyn.stroke=(N=o.createPath(I)).setStroke(l).getStroke():c.dyn.stroke=(N=o.createPolyline(v)).setStroke(l).getStroke(),N.setFilter&&p.series.filter&&N.setFilter(p.series.filter)}var T=null;if(this.opt.markers){var P=p;C=new Array(v.length),D=new Array(v.length),s=null,P.marker.outline&&(s=d.makeStroke(P.marker.outline),s.width=2*s.width+(P.marker.stroke?P.marker.stroke.width:0)),a.forEach(v,function(e,t){if(this.opt.styleFunc||"number"!=typeof e.data){var a="number"!=typeof e.data?[e.data]:[];this.opt.styleFunc&&a.push(this.opt.styleFunc(e.data)),P=h.addMixin(p,"marker",a,!0)}else P=h.post(p,"marker");var i="M"+e.x+" "+e.y+" "+P.symbol;s&&(D[t]=this.createPath(c,o,i).setStroke(s)),C[t]=this.createPath(c,o,i).setStroke(P.marker.stroke).setFill(P.marker.fill)},this),c.dyn.markerFill=P.marker.fill,c.dyn.markerStroke=P.marker.stroke,!T&&this.opt.labels&&(T=C[0].getBoundingBox()),f?a.forEach(C,function(e,t){var a={element:"marker",index:t+F.index,run:c,shape:e,outline:D[t]||null,shadow:G&&G[t]||null,cx:v[t].x,cy:v[t].y};w?(a.x=t+F.index+1,a.y=c.data[t+F.index]):(a.x=F.rseg[t].x,a.y=c.data[t+F.index].y),this._connectEvents(a),b[t+F.index]=a},this):delete this._eventSeries[c.name]}if(this.opt.labels){var H=T?T.width:2,Q=T?T.height:2;a.forEach(v,function(e,t){if(this.opt.styleFunc||"number"!=typeof e.data){var a="number"!=typeof e.data?[e.data]:[];this.opt.styleFunc&&a.push(this.opt.styleFunc(e.data)),P=h.addMixin(p,"marker",a,!0)}else P=h.post(p,"marker");this.createLabel(o,F.rseg[t],{x:e.x-H/2,y:e.y-Q/2,width:H,height:Q},P)},this)}}c.dirty=!1}}else c.dirty=!1,h.skip();else h.skip(),this._reconnectEvents(c.name)}if(i("dojo-bidi")&&this._checkOrientation(this.group,t,r),this.animate){var L=this.getGroup();m.animateTransform(e.delegate({shape:L,duration:1200,transform:[{name:"translate",start:[0,t.height-r.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play()}return this.dirty=!1,this}})});//# sourceMappingURL=Default.js.map