//>>built
define("dojox/charting/plot2d/Default",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/has","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(e,t,a,i,r,o,n,d,s,l,m){var u=s.lambda("item.purgeGroup()"),c=1200;return t("dojox.charting.plot2d.Default",[r,o],{defaultParams:{lines:!0,areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(t,a){this.opt=e.clone(e.mixin(this.opt,this.defaultParams)),l.updateWithObject(this.opt,a),l.updateWithPattern(this.opt,a,this.optionalParams),this.animate=this.opt.animate},createPath:function(e,t,a){var i;return this.opt.enableCache&&e._pathFreePool.length>0?(i=e._pathFreePool.pop(),i.setShape(a),t.add(i)):i=t.createPath(a),this.opt.enableCache&&e._pathUsePool.push(i),i},buildSegments:function(e,t){for(var a=this.series[e],i=t?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,r=t?Math.min(a.data.length,Math.ceil(this._hScaler.bounds.to)):a.data.length,o=null,n=[],d=i;r>d;d++)null==a.data[d]||!t&&null==a.data[d].y?this.opt.interpolate&&!t||(o=null):(o||(o=[],n.push({index:d,rseg:o})),o.push(t&&a.data[d].hasOwnProperty("y")?a.data[d].y:a.data[d]));return n},render:function(t,r){if(this.zoom&&!this.isDataDirty())return this.performZoom(t,r);this.resetEvents(),this.dirty=this.isDirty();var o;this.dirty&&(a.forEach(this.series,u),this._eventSeries={},this.cleanGroup(),this.getGroup().setTransform(null),o=this.getGroup(),d.forEachRev(this.series,function(e){e.cleanGroup(o)}));for(var s,l,h=this.chart.theme,f=this.events(),y=this.series.length-1;y>=0;--y){var v=this.series[y];if(this.dirty||v.dirty)if(v.cleanGroup(),this.opt.enableCache&&(v._pathFreePool=(v._pathFreePool?v._pathFreePool:[]).concat(v._pathUsePool?v._pathUsePool:[]),v._pathUsePool=[]),v.data.length){var p,M=h.next(this.opt.areas?"area":"line",[this.opt,v],!0),g=this._hScaler.scaler.getTransformerFromModel(this._hScaler),b=this._vScaler.scaler.getTransformerFromModel(this._vScaler),k=this._eventSeries[v.name]=new Array(v.data.length);if(o=v.group,v.hidden)this.opt.lines&&(v.dyn.stroke=M.series.stroke),this.opt.markers&&(v.dyn.markerFill=M.marker.fill,v.dyn.markerStroke=M.marker.stroke,v.dyn.marker=M.symbol),this.opt.areas&&(v.dyn.fill=M.series.fill);else{for(var w=a.some(v.data,function(e){return"number"==typeof e||e&&!e.hasOwnProperty("x")}),F=this.buildSegments(y,w),I=0;I<F.length;I++){var j=F[I];if(p=w?a.map(j.rseg,function(e,a){return{x:g(a+j.index+1)+r.l,y:t.height-r.b-b(e),data:e}},this):a.map(j.rseg,function(e){return{x:g(e.x)+r.l,y:t.height-r.b-b(e.y),data:e}},this),w&&this.opt.interpolate)for(;I<F.length;)I++,j=F[I],j&&(p=p.concat(a.map(j.rseg,function(e,a){return{x:g(a+j.index+1)+r.l,y:t.height-r.b-b(e),data:e}},this)));var _=this.opt.tension?n.curve(p,this.opt.tension):"";if(this.opt.areas&&p.length>1){var E=this._plotFill(M.series.fill,t,r),T=e.clone(p);if(this.opt.tension){var x="L"+T[T.length-1].x+","+(t.height-r.b)+" L"+T[0].x+","+(t.height-r.b)+" L"+T[0].x+","+T[0].y;v.dyn.fill=o.createPath(_+" "+x).setFill(E).getFill()}else T.push({x:p[p.length-1].x,y:t.height-r.b}),T.push({x:p[0].x,y:t.height-r.b}),T.push(p[0]),v.dyn.fill=o.createPolyline(T).setFill(E).getFill()}(this.opt.lines||this.opt.markers)&&(s=M.series.stroke,M.series.outline&&(l=v.dyn.outline=n.makeStroke(M.series.outline),l.width=2*l.width+s.width)),this.opt.markers&&(v.dyn.marker=M.symbol);var A=null,C=null,S=null;if(s&&M.series.shadow&&p.length>1){var z=M.series.shadow,G=a.map(p,function(e){return{x:e.x+z.dx,y:e.y+z.dy}});this.opt.lines&&(this.opt.tension?v.dyn.shadow=o.createPath(n.curve(G,this.opt.tension)).setStroke(z).getStroke():v.dyn.shadow=o.createPolyline(G).setStroke(z).getStroke()),this.opt.markers&&M.marker.shadow&&(z=M.marker.shadow,S=a.map(G,function(e){return this.createPath(v,o,"M"+e.x+" "+e.y+" "+M.symbol).setStroke(z).setFill(z.color)},this))}if(this.opt.lines&&p.length>1){var N;l&&(this.opt.tension?v.dyn.outline=o.createPath(_).setStroke(l).getStroke():v.dyn.outline=o.createPolyline(p).setStroke(l).getStroke()),this.opt.tension?v.dyn.stroke=(N=o.createPath(_)).setStroke(s).getStroke():v.dyn.stroke=(N=o.createPolyline(p)).setStroke(s).getStroke(),N.setFilter&&M.series.filter&&N.setFilter(M.series.filter)}var H=null;if(this.opt.markers){var D=M;A=new Array(p.length),C=new Array(p.length),l=null,D.marker.outline&&(l=n.makeStroke(D.marker.outline),l.width=2*l.width+(D.marker.stroke?D.marker.stroke.width:0)),a.forEach(p,function(e,t){if(this.opt.styleFunc||"number"!=typeof e.data){var a="number"!=typeof e.data?[e.data]:[];this.opt.styleFunc&&a.push(this.opt.styleFunc(e.data)),D=h.addMixin(M,"marker",a,!0)}else D=h.post(M,"marker");var i="M"+e.x+" "+e.y+" "+D.symbol;l&&(C[t]=this.createPath(v,o,i).setStroke(l)),A[t]=this.createPath(v,o,i).setStroke(D.marker.stroke).setFill(D.marker.fill)},this),v.dyn.markerFill=D.marker.fill,v.dyn.markerStroke=D.marker.stroke,!H&&this.opt.labels&&(H=A[0].getBoundingBox()),f?a.forEach(A,function(e,t){var a={element:"marker",index:t+j.index,run:v,shape:e,outline:C[t]||null,shadow:S&&S[t]||null,cx:p[t].x,cy:p[t].y};w?(a.x=t+j.index+1,a.y=v.data[t+j.index]):(a.x=j.rseg[t].x,a.y=v.data[t+j.index].y),this._connectEvents(a),k[t+j.index]=a},this):delete this._eventSeries[v.name]}if(this.opt.labels){var P=H?H.width:2,Q=H?H.height:2;a.forEach(p,function(e,t){if(this.opt.styleFunc||"number"!=typeof e.data){var a="number"!=typeof e.data?[e.data]:[];this.opt.styleFunc&&a.push(this.opt.styleFunc(e.data)),D=h.addMixin(M,"marker",a,!0)}else D=h.post(M,"marker");this.createLabel(o,j.rseg[t],{x:e.x-P/2,y:e.y-Q/2,width:P,height:Q},D)},this)}}v.dirty=!1}}else v.dirty=!1,h.skip();else h.skip(),this._reconnectEvents(v.name)}if(i("dojo-bidi")&&this._checkOrientation(this.group,t,r),this.animate){var L=this.getGroup();m.animateTransform(e.delegate({shape:L,duration:c,transform:[{name:"translate",start:[0,t.height-r.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play()}return this.dirty=!1,this}})});//# sourceMappingURL=Default.js.map