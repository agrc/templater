//>>built
define("dojox/charting/plot2d/Grid",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/sniff","./CartesianBase","./common","dojox/lang/utils","dojox/gfx/fx"],function(e,t,a,i,r,o,n,d){var l=function(e,t){return e.value-t.value};return t("dojox.charting.plot2d.Grid",r,{defaultParams:{hMajorLines:!0,hMinorLines:!1,vMajorLines:!0,vMinorLines:!1,hStripes:!1,vStripes:!1,animate:null,enableCache:!1,renderOnAxis:!0},optionalParams:{majorHLine:{},minorHLine:{},majorVLine:{},minorVLine:{},hFill:{},vFill:{},hAlternateFill:{},vAlternateFill:{}},constructor:function(t,a){this.opt=e.clone(this.defaultParams),n.updateWithObject(this.opt,a),n.updateWithPattern(this.opt,a,this.optionalParams),this.animate=this.opt.animate,this.opt.enableCache&&(this._lineFreePool=[],this._lineUsePool=[],this._rectFreePool=[],this._rectUsePool=[])},addSeries:function(e){return this},getSeriesStats:function(){return e.delegate(o.defaultStats)},cleanGroup:function(){this.inherited(arguments),this.opt.enableCache&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._rectFreePool=this._rectFreePool.concat(this._rectUsePool),this._rectUsePool=[])},createLine:function(e,t){var a;return this.opt.enableCache&&this._lineFreePool.length>0?(a=this._lineFreePool.pop(),a.setShape(t),e.add(a)):a=e.createLine(t),this.opt.enableCache&&this._lineUsePool.push(a),a},createRect:function(e,t){var a;return this.opt.enableCache&&this._rectFreePool.length>0?(a=this._rectFreePool.pop(),a.setShape(t),e.add(a)):a=e.createRect(t),this.opt.enableCache&&this._rectUsePool.push(a),a},render:function(e,t){if(this.zoom)return this.performZoom(e,t);if(this.dirty=this.isDirty(),!this.dirty)return this;this.cleanGroup();var a,r,o=this.getGroup(),n=this.chart.theme;if(i("ios")&&i("ios")<6||i("android")||i("safari")&&!i("ios")){var d=Math.max(0,e.width-t.l-t.r),l=Math.max(0,e.height-t.t-t.b);o.createRect({x:t.l,y:t.t,width:d,height:l})}if(this._vAxis){r=this._vAxis.getTicks();var s=this._vAxis.getScaler();if(null!=r&&null!=s){var m=s.scaler.getTransformerFromModel(s);this.opt.hStripes&&this._renderHRect(r,n.grid,e,t,s,m),this.opt.hMinorLines&&(a=this.opt.minorHLine||n.grid&&n.grid.minorLine||n.axis.minorTick,this._renderHLines(r.minor,a,e,t,s,m)),this.opt.hMajorLines&&(a=this.opt.majorHLine||n.grid&&n.grid.majorLine||n.axis.majorTick,this._renderHLines(r.major,a,e,t,s,m))}}if(this._hAxis){r=this._hAxis.getTicks();var u=this._hAxis.getScaler();if(null!=r&&null!=u){var c=u.scaler.getTransformerFromModel(u);this.opt.vStripes&&this._renderVRect(r,n.grid,e,t,u,c),r&&this.opt.vMinorLines&&(a=this.opt.minorVLine||n.grid&&n.grid.minorLine||n.axis.minorTick,this._renderVLines(r.minor,a,e,t,u,c)),r&&this.opt.vMajorLines&&(a=this.opt.majorVLine||n.grid&&n.grid.majorLine||n.axis.majorTick,this._renderVLines(r.major,a,e,t,u,c))}}return this.dirty=!1,this},_renderHLines:function(e,t,i,r,o,n){var d=this.getGroup();a.forEach(e,function(e){if(this.opt.renderOnAxis||e.value!=(this._vAxis.opt.leftBottom?o.bounds.from:o.bounds.to)){var a=i.height-r.b-n(e.value),l=this.createLine(d,{x1:r.l,y1:a,x2:i.width-r.r,y2:a}).setStroke(t);this.animate&&this._animateGrid(l,"h",r.l,r.r+r.l-i.width)}},this)},_renderVLines:function(e,t,i,r,o,n){var d=this.getGroup();a.forEach(e,function(e){if(this.opt.renderOnAxis||e.value!=(this._hAxis.opt.leftBottom?o.bounds.from:o.bounds.to)){var a=r.l+n(e.value),l=this.createLine(d,{x1:a,y1:r.t,x2:a,y2:i.height-r.b}).setStroke(t);this.animate&&this._animateGrid(l,"v",i.height-r.b,i.height-r.b-r.t)}},this)},_renderHRect:function(e,t,a,i,r,o){var n,d,s,m,u,c=e.major.concat(e.minor);c.sort(l),c[0].value>r.bounds.from&&c.splice(0,0,{value:r.bounds.from}),c[c.length-1].value<r.bounds.to&&c.push({value:r.bounds.to});for(var f=this.getGroup(),h=0;h<c.length-1;h++)d=c[h],s=a.height-i.b-o(d.value),m=a.height-i.b-o(c[h+1].value),n=h%2==0?this.opt.hAlternateFill||t&&t.alternateFill:this.opt.hFill||t&&t.fill,n&&(u=this.createRect(f,{x:i.l,y:s,width:a.width-i.r,height:s-m}).setFill(n),this.animate&&this._animateGrid(u,"h",i.l,i.r+i.l-a.width))},_renderVRect:function(e,t,a,i,r,o){var n,d,s,m,u,c=e.major.concat(e.minor);c.sort(l),c[0].value>r.bounds.from&&c.splice(0,0,{value:r.bounds.from}),c[c.length-1].value<r.bounds.to&&c.push({value:r.bounds.to});for(var f=this.getGroup(),h=0;h<c.length-1;h++)d=c[h],s=i.l+o(d.value),m=i.l+o(c[h+1].value),n=h%2==0?this.opt.vAlternateFill||t&&t.alternateFill:this.opt.vFill||t&&t.fill,n&&(u=this.createRect(f,{x:s,y:i.t,width:m-s,height:a.width-i.r}).setFill(n),this.animate&&this._animateGrid(u,"v",a.height-i.b,a.height-i.b-i.t))},_animateGrid:function(t,a,i,r){var o="h"==a?[i,0]:[0,i],n="h"==a?[1/r,1]:[1,1/r];d.animateTransform(e.delegate({shape:t,duration:1200,transform:[{name:"translate",start:o,end:[0,0]},{name:"scale",start:n,end:[1,1]},{name:"original"}]},this.animate)).play()}})});//# sourceMappingURL=Grid.js.map