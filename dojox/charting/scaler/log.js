//>>built
define("dojox/charting/scaler/log",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","./linear","./common"],function(e,t,a,i,r){function o(e,t){var a=0;if(e<.6){var i=e.toString().match(/\.(\d+)/);i&&i[1]&&(a=-i[1].length)}return n(e,a,t)}var d={},n=r.getNumericLabel;return t.mixin(d,i,{base:10,setBase:function(e){this.base=Math.round(e||10)},buildScaler:function(e,t,a,r){var o,n,l=Math.log(this.base);"min"in r&&(e=r.min),"max"in r&&(t=r.max),e=Math.log(e)/l,t=Math.log(t)/l;var s=Math.floor(e),m=Math.ceil(t);e=s<e?s:e-1,t=t<m?m:t+1,r.includeZero&&(e>0&&(e=0),t<0&&(t=0),o>0&&(o=0),n>0&&(n=0));var u={min:e,max:t,fixUpper:r.fixUpper,fixLower:r.fixLower,natural:r.natural,minorTicks:!1,minorLabels:!1,majorTickStep:1};"from"in r&&(u.from=Math.log(r.from)/l),"to"in r&&(u.to=Math.log(r.to)/l);var h=i.buildScaler.call(i,e,t,a,u);return h.scaler=d,h.bounds.lower=Math.exp(h.bounds.lower*l),h.bounds.upper=Math.exp(h.bounds.upper*l),h.bounds.from=Math.exp(h.bounds.from*l),h.bounds.to=Math.exp(h.bounds.to*l),h},buildTicks:function(e,r){function d(e){e.value=Math.exp(e.value*l),e.value>=1&&(e.value=Math.round(e.value)),10===n&&(e.value=+e.value.toPrecision(1)),r.minorLabels&&(e.label=o(e.value,r))}var n=this.base,l=Math.log(this.base),s=t.mixin({},e.bounds);e.bounds.lower=Math.log(e.bounds.lower)/l,e.bounds.upper=Math.log(e.bounds.upper)/l,e.bounds.from=Math.log(e.bounds.from)/l,e.bounds.to=Math.log(e.bounds.to)/l;var m=t.mixin({},r);m.minorTicks=m.minorLabels=!1,m.majorTickStep=1;var u=i.buildTicks.call(i,e,m);if(t.mixin(e.bounds,s),!u)return u;if(a.forEach(u.major,d),u.minor=[],r.minorTicks&&10===this.base){var h=e.bounds.from,f=e.bounds.to,c=function(e){h<=e&&e<=f&&(r.minorLabels?u.minor.push({value:e,label:o(e,r)}):u.minor.push({value:e}))};u.major.length&&(c(+(u.major[0].value/5).toPrecision(1)),c(+(u.major[0].value/2).toPrecision(1))),a.forEach(u.major,function(e,t){c(+(2*e.value).toPrecision(1)),c(+(5*e.value).toPrecision(1))})}return u.micro=[],u},getTransformerFromModel:function(e){var t=Math.log(this.base),a=Math.log(e.bounds.from)/t,i=e.bounds.scale;return function(e){return(Math.log(e)/t-a)*i}},getTransformerFromPlot:function(e){var t=this.base,a=e.bounds.from,i=e.bounds.scale;return function(e){return Math.pow(t,e/i)*a}}})});//# sourceMappingURL=log.js.map