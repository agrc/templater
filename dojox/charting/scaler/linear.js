//>>built
define("dojox/charting/scaler/linear",["dojo/_base/lang","./common"],function(e,t){function a(e,t){e=e.toLowerCase();for(var a=t.length-1;a>=0;--a)if(e===t[a])return!0;return!1}var i=e.getObject("dojox.charting.scaler.linear",!0),r=3,d=t.getNumericLabel,o=function(t,r,d,o,n,l,s){d=e.delegate(d),o||("major"==d.fixUpper&&(d.fixUpper="minor"),"major"==d.fixLower&&(d.fixLower="minor")),n||("minor"==d.fixUpper&&(d.fixUpper="micro"),"minor"==d.fixLower&&(d.fixLower="micro")),l||("micro"==d.fixUpper&&(d.fixUpper="none"),"micro"==d.fixLower&&(d.fixLower="none"));var m=a(d.fixLower,["major"])?Math.floor(d.min/o)*o:a(d.fixLower,["minor"])?Math.floor(d.min/n)*n:a(d.fixLower,["micro"])?Math.floor(d.min/l)*l:d.min,f=a(d.fixUpper,["major"])?Math.ceil(d.max/o)*o:a(d.fixUpper,["minor"])?Math.ceil(d.max/n)*n:a(d.fixUpper,["micro"])?Math.ceil(d.max/l)*l:d.max;d.useMin&&(t=m),d.useMax&&(r=f);var u=!o||d.useMin&&a(d.fixLower,["major"])?t:Math.ceil(t/o)*o,h=!n||d.useMin&&a(d.fixLower,["major","minor"])?t:Math.ceil(t/n)*n,c=!l||d.useMin&&a(d.fixLower,["major","minor","micro"])?t:Math.ceil(t/l)*l,y=o?(d.useMax&&a(d.fixUpper,["major"])?Math.round((r-u)/o):Math.floor((r-u)/o))+1:0,v=n?(d.useMax&&a(d.fixUpper,["major","minor"])?Math.round((r-h)/n):Math.floor((r-h)/n))+1:0,M=l?(d.useMax&&a(d.fixUpper,["major","minor","micro"])?Math.round((r-c)/l):Math.floor((r-c)/l))+1:0,g=n?Math.round(o/n):0,p=l?Math.round(n/l):0,b=o?Math.floor(Math.log(o)/Math.LN10):0,w=n?Math.floor(Math.log(n)/Math.LN10):0,F=s/(r-t);return isFinite(F)||(F=1),{bounds:{lower:m,upper:f,from:t,to:r,scale:F,span:s},major:{tick:o,start:u,count:y,prec:b},minor:{tick:n,start:h,count:v,prec:w},micro:{tick:l,start:c,count:M,prec:0},minorPerMajor:g,microPerMinor:p,scaler:i}};return e.mixin(i,{buildScaler:function(e,t,a,i,d,n){var l={fixUpper:"none",fixLower:"none",natural:!1};if(i&&("fixUpper"in i&&(l.fixUpper=String(i.fixUpper)),"fixLower"in i&&(l.fixLower=String(i.fixLower)),"natural"in i&&(l.natural=Boolean(i.natural))),n=!n||n<r?r:n,"min"in i&&(e=i.min),"max"in i&&(t=i.max),i.includeZero&&(e>0&&(e=0),t<0&&(t=0)),l.min=e,l.useMin=!0,l.max=t,l.useMax=!0,"from"in i&&(e=i.from,l.useMin=!1),"to"in i&&(t=i.to,l.useMax=!1),t<=e)return o(e,t,l,0,0,0,a);d||(d=t-e);var s,m=Math.floor(Math.log(d)/Math.LN10),f=i&&"majorTickStep"in i?i.majorTickStep:Math.pow(10,m),u=0,h=0;if(i&&"minorTickStep"in i)u=i.minorTickStep;else do{if(u=f/10,(!l.natural||u>.9)&&(s=o(e,t,l,f,u,0,a),s.bounds.scale*s.minor.tick>n))break;if(u=f/5,(!l.natural||u>.9)&&(s=o(e,t,l,f,u,0,a),s.bounds.scale*s.minor.tick>n))break;if(u=f/2,(!l.natural||u>.9)&&(s=o(e,t,l,f,u,0,a),s.bounds.scale*s.minor.tick>n))break;return o(e,t,l,f,0,0,a)}while(!1);if(i&&"microTickStep"in i)h=i.microTickStep,s=o(e,t,l,f,u,h,a);else do{if(h=u/10,(!l.natural||h>.9)&&(s=o(e,t,l,f,u,h,a),s.bounds.scale*s.micro.tick>r))break;if(h=u/5,(!l.natural||h>.9)&&(s=o(e,t,l,f,u,h,a),s.bounds.scale*s.micro.tick>r))break;if(h=u/2,(!l.natural||h>.9)&&(s=o(e,t,l,f,u,h,a),s.bounds.scale*s.micro.tick>r))break;h=0}while(!1);return h?s:o(e,t,l,f,u,0,a)},buildTicks:function(e,t){var a,i,r,o=e.major.start,n=e.minor.start,l=e.micro.start;if(t.microTicks&&e.micro.tick)a=e.micro.tick,i=l;else if(t.minorTicks&&e.minor.tick)a=e.minor.tick,i=n;else{if(!e.major.tick)return null;a=e.major.tick,i=o}var s=1/e.bounds.scale;if(e.bounds.to<=e.bounds.from||isNaN(s)||!isFinite(s)||a<=0||isNaN(a)||!isFinite(a))return null;for(var m=[],f=[],u=[];i<=e.bounds.to+s;)Math.abs(o-i)<a/2?(r={value:o},t.majorLabels&&(r.label=d(o,e.major.prec,t)),m.push(r),o+=e.major.tick,n+=e.minor.tick,l+=e.micro.tick):Math.abs(n-i)<a/2?(t.minorTicks&&(r={value:n},t.minorLabels&&e.minMinorStep<=e.minor.tick*e.bounds.scale&&(r.label=d(n,e.minor.prec,t)),f.push(r)),n+=e.minor.tick,l+=e.micro.tick):(t.microTicks&&u.push({value:l}),l+=e.micro.tick),i+=a;return{major:m,minor:f,micro:u}},getTransformerFromModel:function(e){var t=e.bounds.from,a=e.bounds.scale;return function(e){return(e-t)*a}},getTransformerFromPlot:function(e){var t=e.bounds.from,a=e.bounds.scale;return function(e){return e/a+t}}})});//# sourceMappingURL=linear.js.map