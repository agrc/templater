//>>built
define("dojox/widget/Standby",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/window","dojo/_base/window","dojo/_base/fx","dojo/fx","dijit/_Widget","dijit/_TemplatedMixin","dijit/registry"],function(e,t,i,a,o,r,n,s,l,d,u,h,c,m,f,g,p){return e.experimental("dojox.widget.Standby"),t("dojox.widget.Standby",[f,g],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'<div><div style="display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint="_underlayNode"></div><img src="${image}" style="opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint="_imageNode"><div style="opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint="_textNode"></div></div>',_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(e){if(!this._started){if("string"==typeof this.target){var t=p.byId(this.target);this.target=t?t.domNode:r.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text),"image"===this.centerIndicator?(this._centerNode=this._imageNode,n.set(this._imageNode,"src",this.image),n.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode,d.set(this._underlayNode,{display:"none",backgroundColor:this.color}),d.set(this._centerNode,"display","none"),this.connect(this._underlayNode,"onclick","_ignore"),this.domNode.parentNode&&this.domNode.parentNode!=h.body()&&h.body().appendChild(this.domNode),7==o("ie")&&(this._ieFixNode=s.create("div"),d.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),h.body().appendChild(this._ieFixNode)),this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(e){}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1,this._resizeCheck&&clearInterval(this._resizeCheck),d.set(this._centerNode,"display","none"),d.set(this._underlayNode,"display","none"),7==o("ie")&&this._ieFixNode&&(h.body().removeChild(this._ieFixNode),delete this._ieFixNode),this._anim&&(this._anim.stop(),delete this._anim),this.target=null,this._imageNode=null,this._textNode=null,this._centerNode=null,this.inherited(arguments)},_size:function(){if(this._displayed){var e=n.get(h.body(),"dir");e&&(e=e.toLowerCase());var t,i=this._scrollerWidths(),a=this.target,r=d.get(this._centerNode,"display");d.set(this._centerNode,"display","block");var s=l.position(a,!0);a!==h.body()&&a!==h.doc||(s=u.getBox(),s.x=s.l,s.y=s.t);var c=l.getMarginBox(this._centerNode);d.set(this._centerNode,"display",r),this._ieFixNode&&(t=-this._ieFixNode.offsetTop/1e3,s.x=Math.floor((s.x+.9)/t),s.y=Math.floor((s.y+.9)/t),s.w=Math.floor((s.w+.9)/t),s.h=Math.floor((s.h+.9)/t));var m=d.get(a,"zIndex"),f=m,g=m;if("auto"===this.zIndex)if("auto"!=m)f=parseInt(f,10)+1,g=parseInt(g,10)+2;else{var p=a;if(p&&p!==h.body()&&p!==h.doc){p=a.parentNode;for(var v=-1e5;p&&p!==h.body();)if(m=d.get(p,"zIndex"),m&&"auto"!==m){var y=parseInt(m,10);y>v&&(v=y,f=y+1,g=y+2),p=p.parentNode}else p=p.parentNode}}else f=parseInt(this.zIndex,10)+1,g=parseInt(this.zIndex,10)+2;d.set(this._centerNode,"zIndex",g),d.set(this._underlayNode,"zIndex",f);var b=a.parentNode;if(b&&b!==h.body()&&a!==h.body()&&a!==h.doc){var _=s.h,k=s.w,M=l.position(b,!0);this._ieFixNode&&(t=-this._ieFixNode.offsetTop/1e3,M.x=Math.floor((M.x+.9)/t),M.y=Math.floor((M.y+.9)/t),M.w=Math.floor((M.w+.9)/t),M.h=Math.floor((M.h+.9)/t)),M.w-=b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.v:0,M.h-=b.scrollWidth>b.clientWidth&&b.clientWidth>0?i.h:0,"rtl"===e&&(o("opera")?(s.x+=b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.v:0,M.x+=b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.v:0):o("ie")?M.x+=b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.v:0:o("webkit")),M.w<s.w&&(s.w=s.w-M.w),M.h<s.h&&(s.h=s.h-M.h);var x,w=M.y,j=M.y+M.h,T=s.y,S=s.y+_,I=M.x,C=M.x+M.w,E=s.x,A=s.x+k;if(S>w&&w>T){s.y=M.y,x=w-T;var F=_-x;F<M.h?s.h=F:s.h-=2*(b.scrollWidth>b.clientWidth&&b.clientWidth>0?i.h:0)}else j>T&&S>j?s.h=j-T:(w>=S||T>=j)&&(s.h=0);if(A>I&&I>E){s.x=M.x,x=I-E;var z=k-x;z<M.w?s.w=z:s.w-=2*(b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.w:0)}else C>E&&A>C?s.w=C-E:(I>=A||E>=C)&&(s.w=0)}if(s.h>0&&s.w>0){d.set(this._underlayNode,{display:"block",width:s.w+"px",height:s.h+"px",top:s.y+"px",left:s.x+"px"});var N=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"];this._cloneStyles(N),o("ie")||(N=["MozBorderRadius","MozBorderRadiusTopleft","MozBorderRadiusTopright","MozBorderRadiusBottomleft","MozBorderRadiusBottomright","WebkitBorderRadius","WebkitBorderTopLeftRadius","WebkitBorderTopRightRadius","WebkitBorderBottomLeftRadius","WebkitBorderBottomRightRadius"],this._cloneStyles(N,this));var L=s.h/2-c.h/2,D=s.w/2-c.w/2;s.h>=c.h&&s.w>=c.w?d.set(this._centerNode,{top:L+s.y+"px",left:D+s.x+"px",display:"block"}):d.set(this._centerNode,"display","none")}else d.set(this._underlayNode,"display","none"),d.set(this._centerNode,"display","none");if(null===this._resizeCheck){var P=this;this._resizeCheck=setInterval(function(){P._size()},100)}}},_cloneStyles:function(e){i.forEach(e,function(e){d.set(this._underlayNode,e,d.get(this.target,e))},this)},_fadeIn:function(){var e=this,t=c.animateProperty({duration:e.duration,node:e._underlayNode,properties:{opacity:{start:0,end:e.opacity}}}),i=c.animateProperty({duration:e.duration,node:e._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){e.onShow(),delete e._anim}});this._anim=m.combine([t,i]),this._anim.play()},_fadeOut:function(){var e=this,t=c.animateProperty({duration:e.duration,node:e._underlayNode,properties:{opacity:{start:e.opacity,end:0}},onEnd:function(){d.set(this.node,{display:"none",zIndex:"-1000"})}}),i=c.animateProperty({duration:e.duration,node:e._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){d.set(this.node,{display:"none",zIndex:"-1000"}),e.onHide(),e._enableOverflow(),delete e._anim}});this._anim=m.combine([t,i]),this._anim.play()},_ignore:function(e){e&&a.stop(e)},_scrollerWidths:function(){var e=s.create("div");d.set(e,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var t=s.create("div");d.set(t,{width:"200px",height:"10px"}),e.appendChild(t),h.body().appendChild(e);var i=l.getContentBox(e);d.set(e,"overflow","scroll");var a=l.getContentBox(e);return h.body().removeChild(e),{v:i.w-a.w,h:i.h-a.h}},_setTextAttr:function(e){this._textNode.innerHTML=e,this.text=e},_setColorAttr:function(e){d.set(this._underlayNode,"backgroundColor",e),this.color=e},_setImageTextAttr:function(e){n.set(this._imageNode,"alt",e),this.imageText=e},_setImageAttr:function(e){n.set(this._imageNode,"src",e),this.image=e},_setCenterIndicatorAttr:function(e){this.centerIndicator=e,"image"===e?(this._centerNode=this._imageNode,d.set(this._textNode,"display","none")):(this._centerNode=this._textNode,d.set(this._imageNode,"display","none"))},_disableOverflow:function(){if(this.target===h.body()||this.target===h.doc){this._overflowDisabled=!0;var e=h.body();if(e.style&&e.style.overflow?this._oldOverflow=d.get(e,"overflow"):this._oldOverflow="",o("ie")&&!o("quirks")){if(e.parentNode&&e.parentNode.style&&e.parentNode.style.overflow)this._oldBodyParentOverflow=e.parentNode.style.overflow;else try{this._oldBodyParentOverflow=d.get(e.parentNode,"overflow")}catch(t){this._oldBodyParentOverflow="scroll"}d.set(e.parentNode,"overflow","hidden")}d.set(e,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var e=h.body();if(o("ie")&&!o("quirks")&&(e.parentNode.style.overflow=this._oldBodyParentOverflow,delete this._oldBodyParentOverflow),d.set(e,"overflow",this._oldOverflow),o("webkit")){var t=s.create("div",{style:{height:"2px"}});e.appendChild(t),setTimeout(function(){e.removeChild(t)},0)}delete this._oldOverflow}}})});//# sourceMappingURL=Standby.js.map