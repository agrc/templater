//>>built
define("dojox/widget/Standby",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/window","dojo/_base/window","dojo/_base/fx","dojo/fx","dijit/_Widget","dijit/_TemplatedMixin","dijit/registry"],function(e,t,i,a,o,n,r,s,l,d,h,u,c,m,f,p,g){return e.experimental("dojox.widget.Standby"),t("dojox.widget.Standby",[f,p],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'<div><div style="display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint="_underlayNode"></div><img src="${image}" style="opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint="_imageNode"><div style="opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint="_textNode"></div></div>',_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(e){if(!this._started){if("string"==typeof this.target){var t=g.byId(this.target);this.target=t?t.domNode:n.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text),"image"===this.centerIndicator?(this._centerNode=this._imageNode,r.set(this._imageNode,"src",this.image),r.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode,d.set(this._underlayNode,{display:"none",backgroundColor:this.color}),d.set(this._centerNode,"display","none"),this.connect(this._underlayNode,"onclick","_ignore"),this.domNode.parentNode&&this.domNode.parentNode!=u.body()&&u.body().appendChild(this.domNode),7==o("ie")&&(this._ieFixNode=s.create("div"),d.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),u.body().appendChild(this._ieFixNode)),this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(e){}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1,this._resizeCheck&&clearInterval(this._resizeCheck),d.set(this._centerNode,"display","none"),d.set(this._underlayNode,"display","none"),7==o("ie")&&this._ieFixNode&&(u.body().removeChild(this._ieFixNode),delete this._ieFixNode),this._anim&&(this._anim.stop(),delete this._anim),this.target=null,this._imageNode=null,this._textNode=null,this._centerNode=null,this.inherited(arguments)},_size:function(){if(this._displayed){var e=r.get(u.body(),"dir");e&&(e=e.toLowerCase());var t,i=this._scrollerWidths(),a=this.target,n=d.get(this._centerNode,"display");d.set(this._centerNode,"display","block");var s=l.position(a,!0);a!==u.body()&&a!==u.doc||(s=h.getBox(),s.x=s.l,s.y=s.t);var c=l.getMarginBox(this._centerNode);d.set(this._centerNode,"display",n),this._ieFixNode&&(t=-this._ieFixNode.offsetTop/1e3,s.x=Math.floor((s.x+.9)/t),s.y=Math.floor((s.y+.9)/t),s.w=Math.floor((s.w+.9)/t),s.h=Math.floor((s.h+.9)/t));var m=d.get(a,"zIndex"),f=m,p=m;if("auto"===this.zIndex)if("auto"!=m)f=parseInt(f,10)+1,p=parseInt(p,10)+2;else{var g=a;if(g&&g!==u.body()&&g!==u.doc){g=a.parentNode;for(var y=-1e5;g&&g!==u.body();)if(m=d.get(g,"zIndex"),m&&"auto"!==m){var v=parseInt(m,10);v>y&&(y=v,f=v+1,p=v+2),g=g.parentNode}else g=g.parentNode}}else f=parseInt(this.zIndex,10)+1,p=parseInt(this.zIndex,10)+2;d.set(this._centerNode,"zIndex",p),d.set(this._underlayNode,"zIndex",f);var b=a.parentNode;if(b&&b!==u.body()&&a!==u.body()&&a!==u.doc){var x=s.h,_=s.w,w=l.position(b,!0);this._ieFixNode&&(t=-this._ieFixNode.offsetTop/1e3,w.x=Math.floor((w.x+.9)/t),w.y=Math.floor((w.y+.9)/t),w.w=Math.floor((w.w+.9)/t),w.h=Math.floor((w.h+.9)/t)),w.w-=b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.v:0,w.h-=b.scrollWidth>b.clientWidth&&b.clientWidth>0?i.h:0,"rtl"===e&&(o("opera")?(s.x+=b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.v:0,w.x+=b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.v:0):o("ie")?w.x+=b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.v:0:o("webkit")),w.w<s.w&&(s.w=s.w-w.w),w.h<s.h&&(s.h=s.h-w.h);var M,k=w.y,j=w.y+w.h,T=s.y,C=s.y+x,S=w.x,N=w.x+w.w,A=s.x,I=s.x+_;if(C>k&&k>T){s.y=w.y,M=k-T;var F=x-M;F<w.h?s.h=F:s.h-=2*(b.scrollWidth>b.clientWidth&&b.clientWidth>0?i.h:0)}else j>T&&C>j?s.h=j-T:(k>=C||T>=j)&&(s.h=0);if(I>S&&S>A){s.x=w.x,M=S-A;var E=_-M;E<w.w?s.w=E:s.w-=2*(b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.w:0)}else N>A&&I>N?s.w=N-A:(S>=I||A>=N)&&(s.w=0)}if(s.h>0&&s.w>0){d.set(this._underlayNode,{display:"block",width:s.w+"px",height:s.h+"px",top:s.y+"px",left:s.x+"px"});var P=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"];this._cloneStyles(P),o("ie")||(P=["MozBorderRadius","MozBorderRadiusTopleft","MozBorderRadiusTopright","MozBorderRadiusBottomleft","MozBorderRadiusBottomright","WebkitBorderRadius","WebkitBorderTopLeftRadius","WebkitBorderTopRightRadius","WebkitBorderBottomLeftRadius","WebkitBorderBottomRightRadius"],this._cloneStyles(P,this));var B=s.h/2-c.h/2,z=s.w/2-c.w/2;s.h>=c.h&&s.w>=c.w?d.set(this._centerNode,{top:B+s.y+"px",left:z+s.x+"px",display:"block"}):d.set(this._centerNode,"display","none")}else d.set(this._underlayNode,"display","none"),d.set(this._centerNode,"display","none");if(null===this._resizeCheck){var L=this;this._resizeCheck=setInterval(function(){L._size()},100)}}},_cloneStyles:function(e){i.forEach(e,function(e){d.set(this._underlayNode,e,d.get(this.target,e))},this)},_fadeIn:function(){var e=this,t=c.animateProperty({duration:e.duration,node:e._underlayNode,properties:{opacity:{start:0,end:e.opacity}}}),i=c.animateProperty({duration:e.duration,node:e._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){e.onShow(),delete e._anim}});this._anim=m.combine([t,i]),this._anim.play()},_fadeOut:function(){var e=this,t=c.animateProperty({duration:e.duration,node:e._underlayNode,properties:{opacity:{start:e.opacity,end:0}},onEnd:function(){d.set(this.node,{display:"none",zIndex:"-1000"})}}),i=c.animateProperty({duration:e.duration,node:e._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){d.set(this.node,{display:"none",zIndex:"-1000"}),e.onHide(),e._enableOverflow(),delete e._anim}});this._anim=m.combine([t,i]),this._anim.play()},_ignore:function(e){e&&a.stop(e)},_scrollerWidths:function(){var e=s.create("div");d.set(e,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var t=s.create("div");d.set(t,{width:"200px",height:"10px"}),e.appendChild(t),u.body().appendChild(e);var i=l.getContentBox(e);d.set(e,"overflow","scroll");var a=l.getContentBox(e);return u.body().removeChild(e),{v:i.w-a.w,h:i.h-a.h}},_setTextAttr:function(e){this._textNode.innerHTML=e,this.text=e},_setColorAttr:function(e){d.set(this._underlayNode,"backgroundColor",e),this.color=e},_setImageTextAttr:function(e){r.set(this._imageNode,"alt",e),this.imageText=e},_setImageAttr:function(e){r.set(this._imageNode,"src",e),this.image=e},_setCenterIndicatorAttr:function(e){this.centerIndicator=e,"image"===e?(this._centerNode=this._imageNode,d.set(this._textNode,"display","none")):(this._centerNode=this._textNode,d.set(this._imageNode,"display","none"))},_disableOverflow:function(){if(this.target===u.body()||this.target===u.doc){this._overflowDisabled=!0;var e=u.body();if(e.style&&e.style.overflow?this._oldOverflow=d.get(e,"overflow"):this._oldOverflow="",o("ie")&&!o("quirks")){if(e.parentNode&&e.parentNode.style&&e.parentNode.style.overflow)this._oldBodyParentOverflow=e.parentNode.style.overflow;else try{this._oldBodyParentOverflow=d.get(e.parentNode,"overflow")}catch(t){this._oldBodyParentOverflow="scroll"}d.set(e.parentNode,"overflow","hidden")}d.set(e,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var e=u.body();if(o("ie")&&!o("quirks")&&(e.parentNode.style.overflow=this._oldBodyParentOverflow,delete this._oldBodyParentOverflow),d.set(e,"overflow",this._oldOverflow),o("webkit")){var t=s.create("div",{style:{height:"2px"}});e.appendChild(t),setTimeout(function(){e.removeChild(t)},0)}delete this._oldOverflow}}})});//# sourceMappingURL=Standby.js.map