//>>built
define("dojox/widget/Standby",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/window","dojo/_base/window","dojo/_base/fx","dojo/fx","dijit/_Widget","dijit/_TemplatedMixin","dijit/registry"],function(e,t,i,r,o,n,a,s,d,l,c,h,u,f,m,p,g){return e.experimental("dojox.widget.Standby"),t("dojox.widget.Standby",[m,p],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'<div><div style="display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint="_underlayNode"></div><img src="${image}" style="opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint="_imageNode"><div style="opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint="_textNode"></div></div>',_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(e){if(!this._started){if("string"==typeof this.target){var t=g.byId(this.target);this.target=t?t.domNode:n.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text),"image"===this.centerIndicator?(this._centerNode=this._imageNode,a.set(this._imageNode,"src",this.image),a.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode,l.set(this._underlayNode,{display:"none",backgroundColor:this.color}),l.set(this._centerNode,"display","none"),this.connect(this._underlayNode,"onclick","_ignore"),this.domNode.parentNode&&this.domNode.parentNode!=h.body()&&h.body().appendChild(this.domNode),7==o("ie")&&(this._ieFixNode=s.create("div"),l.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),h.body().appendChild(this._ieFixNode)),this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(e){}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1,this._resizeCheck&&clearInterval(this._resizeCheck),l.set(this._centerNode,"display","none"),l.set(this._underlayNode,"display","none"),7==o("ie")&&this._ieFixNode&&(h.body().removeChild(this._ieFixNode),delete this._ieFixNode),this._anim&&(this._anim.stop(),delete this._anim),this.target=null,this._imageNode=null,this._textNode=null,this._centerNode=null,this.inherited(arguments)},_size:function(){if(this._displayed){var e=a.get(h.body(),"dir");e&&(e=e.toLowerCase());var t,i=this._scrollerWidths(),r=this.target,n=l.get(this._centerNode,"display");l.set(this._centerNode,"display","block");var s=d.position(r,!0);r!==h.body()&&r!==h.doc||(s=c.getBox(),s.x=s.l,s.y=s.t);var u=d.getMarginBox(this._centerNode);l.set(this._centerNode,"display",n),this._ieFixNode&&(t=-this._ieFixNode.offsetTop/1e3,s.x=Math.floor((s.x+.9)/t),s.y=Math.floor((s.y+.9)/t),s.w=Math.floor((s.w+.9)/t),s.h=Math.floor((s.h+.9)/t));var f=l.get(r,"zIndex"),m=f,p=f;if("auto"===this.zIndex)if("auto"!=f)m=parseInt(m,10),p=parseInt(p,10);else{var g=r;if(g&&g!==h.body()&&g!==h.doc){g=r.parentNode;for(var y=-1e5;g&&g!==h.body();)if((f=l.get(g,"zIndex"))&&"auto"!==f){var v=parseInt(f,10);y<v&&(y=v,m=v+1,p=v+1),g=g.parentNode}else g=g.parentNode}}else m=parseInt(this.zIndex,10),p=parseInt(this.zIndex,10);l.set(this._centerNode,"zIndex",p),l.set(this._underlayNode,"zIndex",m);var b=r.parentNode;if(b&&b!==h.body()&&r!==h.body()&&r!==h.doc){var _=s.h,w=s.w,x=d.position(b,!0);this._ieFixNode&&(t=-this._ieFixNode.offsetTop/1e3,x.x=Math.floor((x.x+.9)/t),x.y=Math.floor((x.y+.9)/t),x.w=Math.floor((x.w+.9)/t),x.h=Math.floor((x.h+.9)/t)),x.w-=b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.v:0,x.h-=b.scrollWidth>b.clientWidth&&b.clientWidth>0?i.h:0,"rtl"===e&&(o("opera")?(s.x+=b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.v:0,x.x+=b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.v:0):o("ie")?x.x+=b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.v:0:o("webkit")),x.w<s.w&&(s.w=s.w-x.w),x.h<s.h&&(s.h=s.h-x.h);var k,M=x.y,j=x.y+x.h,S=s.y,I=s.y+_,C=x.x,E=x.x+x.w,A=s.x,T=s.x+w;if(I>M&&S<M){s.y=x.y,k=M-S;var N=_-k;N<x.h?s.h=N:s.h-=2*(b.scrollWidth>b.clientWidth&&b.clientWidth>0?i.h:0)}else S<j&&I>j?s.h=j-S:(I<=M||S>=j)&&(s.h=0);if(T>C&&A<C){s.x=x.x,k=C-A;var F=w-k;F<x.w?s.w=F:s.w-=2*(b.scrollHeight>b.clientHeight&&b.clientHeight>0?i.w:0)}else A<E&&T>E?s.w=E-A:(T<=C||A>=E)&&(s.w=0)}if(s.h>0&&s.w>0){l.set(this._underlayNode,{display:"block",width:s.w+"px",height:s.h+"px",top:s.y+"px",left:s.x+"px"});var P=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"];this._cloneStyles(P),o("ie")||(P=["MozBorderRadius","MozBorderRadiusTopleft","MozBorderRadiusTopright","MozBorderRadiusBottomleft","MozBorderRadiusBottomright","WebkitBorderRadius","WebkitBorderTopLeftRadius","WebkitBorderTopRightRadius","WebkitBorderBottomLeftRadius","WebkitBorderBottomRightRadius"],this._cloneStyles(P,this));var D=s.h/2-u.h/2,z=s.w/2-u.w/2;s.h>=u.h&&s.w>=u.w?l.set(this._centerNode,{top:D+s.y+"px",left:z+s.x+"px",display:"block"}):l.set(this._centerNode,"display","none")}else l.set(this._underlayNode,"display","none"),l.set(this._centerNode,"display","none");if(null===this._resizeCheck){var L=this;this._resizeCheck=setInterval(function(){L._size()},100)}}},_cloneStyles:function(e){i.forEach(e,function(e){l.set(this._underlayNode,e,l.get(this.target,e))},this)},_fadeIn:function(){var e=this,t=u.animateProperty({duration:e.duration,node:e._underlayNode,properties:{opacity:{start:0,end:e.opacity}}}),i=u.animateProperty({duration:e.duration,node:e._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){e.onShow(),delete e._anim}});this._anim=f.combine([t,i]),this._anim.play()},_fadeOut:function(){var e=this,t=u.animateProperty({duration:e.duration,node:e._underlayNode,properties:{opacity:{start:e.opacity,end:0}},onEnd:function(){l.set(this.node,{display:"none",zIndex:"-1000"})}}),i=u.animateProperty({duration:e.duration,node:e._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){l.set(this.node,{display:"none",zIndex:"-1000"}),e.onHide(),e._enableOverflow(),delete e._anim}});this._anim=f.combine([t,i]),this._anim.play()},_ignore:function(e){e&&r.stop(e)},_scrollerWidths:function(){var e=s.create("div");l.set(e,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var t=s.create("div");l.set(t,{width:"200px",height:"10px"}),e.appendChild(t),h.body().appendChild(e);var i=d.getContentBox(e);l.set(e,"overflow","scroll");var r=d.getContentBox(e);return h.body().removeChild(e),{v:i.w-r.w,h:i.h-r.h}},_setTextAttr:function(e){this._textNode.innerHTML=e,this.text=e},_setColorAttr:function(e){l.set(this._underlayNode,"backgroundColor",e),this.color=e},_setImageTextAttr:function(e){a.set(this._imageNode,"alt",e),this.imageText=e},_setImageAttr:function(e){a.set(this._imageNode,"src",e),this.image=e},_setCenterIndicatorAttr:function(e){this.centerIndicator=e,"image"===e?(this._centerNode=this._imageNode,l.set(this._textNode,"display","none")):(this._centerNode=this._textNode,l.set(this._imageNode,"display","none"))},_setTargetAttr:function(e){if("string"==typeof e){var t=g.byId(e);this._set("target",t?t.domNode:n.byId(e))}else this._set("target",e)},_disableOverflow:function(){if(this.target===h.body()||this.target===h.doc){this._overflowDisabled=!0;var e=h.body();if(e.style&&e.style.overflow?this._oldOverflow=l.get(e,"overflow"):this._oldOverflow="",o("ie")&&!o("quirks")){if(e.parentNode&&e.parentNode.style&&e.parentNode.style.overflow)this._oldBodyParentOverflow=e.parentNode.style.overflow;else try{this._oldBodyParentOverflow=l.get(e.parentNode,"overflow")}catch(e){this._oldBodyParentOverflow="scroll"}l.set(e.parentNode,"overflow","hidden")}l.set(e,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var e=h.body();if(o("ie")&&!o("quirks")&&(e.parentNode.style.overflow=this._oldBodyParentOverflow,delete this._oldBodyParentOverflow),l.set(e,"overflow",this._oldOverflow),o("webkit")){var t=s.create("div",{style:{height:"2px"}});e.appendChild(t),setTimeout(function(){e.removeChild(t)},0)}delete this._oldOverflow}}})});//# sourceMappingURL=Standby.js.map