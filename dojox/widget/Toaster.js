//>>built
define("dojox/widget/Toaster",["dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/aspect","dojo/topic","dojo/_base/fx","dojo/dom-style","dojo/dom-class","dojo/dom-geometry","dijit/registry","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/BackgroundIframe","dojo/fx","dojo/has","dojo/window"],function(e,t,i,a,o,n,r,s,l,d,h,u,c,m,f,p){t.getObject("dojox.widget",!0);var g=function(e){return e.substring(0,1).toUpperCase()+e.substring(1)};return e("dojox.widget.Toaster",[h,u],{templateString:'<div class="dijitToasterClip" data-dojo-attach-point="clipNode"><div class="dijitToasterContainer" data-dojo-attach-point="containerNode" data-dojo-attach-event="onclick:onSelect"><div class="dijitToasterContent" data-dojo-attach-point="contentNode"></div></div></div>',messageTopic:"",messageTypes:{MESSAGE:"message",WARNING:"warning",ERROR:"error",FATAL:"fatal"},defaultType:"message",positionDirection:"br-up",positionDirectionTypes:["br-up","br-left","bl-up","bl-right","tr-down","tr-left","tl-down","tl-right"],duration:2e3,slideDuration:500,separator:"<hr>",postCreate:function(){this.inherited(arguments),this.hide(),this.ownerDocument.body.appendChild(this.domNode),this.messageTopic&&this.own(o.subscribe(this.messageTopic,t.hitch(this,"_handleMessage")))},_handleMessage:function(e){t.isString(e)?this.setContent(e):this.setContent(e.message,e.type,e.duration)},setContent:function(e,i,a){if(a=void 0===a?this.duration:a,this.slideAnim&&("playing"!=this.slideAnim.status()&&this.slideAnim.stop(),"playing"==this.slideAnim.status()||this.fadeAnim&&"playing"==this.fadeAnim.status()))return void setTimeout(t.hitch(this,function(){this.setContent(e,i,a)}),50);for(var o in this.messageTypes)s.remove(this.containerNode,"dijitToaster"+g(this.messageTypes[o]));r.set(this.containerNode,"opacity",1),this._setContent(e),s.add(this.containerNode,"dijitToaster"+g(i||this.defaultType)),this.show();var d=l.getMarginBox(this.containerNode);if(this._cancelHideTimer(),this.isVisible)this._placeClip(),this._stickyMessage||this._setHideTimer(a);else{var h=this.containerNode.style,u=this.positionDirection;if(u.indexOf("-up")>=0)h.left="0px",h.top=d.h+10+"px";else if(u.indexOf("-left")>=0)h.left=d.w+10+"px",h.top="0px";else if(u.indexOf("-right")>=0)h.left=0-d.w-10+"px",h.top="0px";else{if(!(u.indexOf("-down")>=0))throw new Error(this.id+".positionDirection is invalid: "+u);h.left="0px",h.top=0-d.h-10+"px"}this.slideAnim=m.slideTo({node:this.containerNode,top:0,left:0,duration:this.slideDuration,onEnd:t.hitch(this,function(){this.fadeAnim=n.fadeOut({node:this.containerNode,duration:1e3,onEnd:t.hitch(this,function(){this.isVisible=!1,this.hide()})}),this.own(this.fadeAnim),this._setHideTimer(a),this.on("select",t.hitch(this,function(){this._cancelHideTimer(),this._stickyMessage=!1,this.fadeAnim.play()})),this.isVisible=!0})}),this.own(this.slideAnim),this.slideAnim.play()}},_setContent:function(e){if(t.isFunction(e))return void e(this);e&&this.isVisible&&(e=this.contentNode.innerHTML+this.separator+e),this.contentNode.innerHTML=e},_cancelHideTimer:function(){this._hideTimer&&(clearTimeout(this._hideTimer),this._hideTimer=null)},_setHideTimer:function(e){this._cancelHideTimer(),e>0?(this._cancelHideTimer(),this._hideTimer=setTimeout(t.hitch(this,function(e){this.bgIframe&&this.bgIframe.iframe&&(this.bgIframe.iframe.style.display="none"),this._hideTimer=null,this._stickyMessage=!1,this.fadeAnim.play()}),e)):this._stickyMessage=!0},_placeClip:function(){var e=p.getBox(this.ownerDocument),t=l.getMarginBox(this.containerNode),i=this.clipNode.style;i.height=t.h+"px",i.width=t.w+"px";var a=this.positionDirection;if(a.match(/^t/)?i.top=e.t+"px":a.match(/^b/)&&(i.top=e.h-t.h-2+e.t+"px"),a.match(/^[tb]r-/)?i.left=e.w-t.w-1-e.l+"px":a.match(/^[tb]l-/)?i.left="0px":a.match(/^[tb]c-/)&&(i.left=Math.round((e.w-t.w-1-e.l)/2)+"px"),i.clip="rect(0px, "+t.w+"px, "+t.h+"px, 0px)",f("ie")){this.bgIframe||(this.clipNode.id||(this.clipNode.id=d.getUniqueId("dojox_widget_Toaster_clipNode")),this.bgIframe=new c(this.clipNode));var o=this.bgIframe.iframe;o&&(o.style.display="block")}},onSelect:function(e){},show:function(){r.set(this.domNode,"display","block"),this._placeClip(),this._scrollConnected||(this._scrollConnected=a.after(p,"scroll",t.hitch(this,"_placeClip")),this.own(this._scrollConnected))},hide:function(){r.set(this.domNode,"display","none"),this._scrollConnected&&(this._scrollConnected.remove(),this._scrollConnected=!1),r.set(this.containerNode,"opacity",1)}})});//# sourceMappingURL=Toaster.js.map