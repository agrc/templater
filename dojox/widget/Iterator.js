//>>built
define("dojox/widget/Iterator",["dojo","dijit","dojox","dojo/require!dijit/Declaration"],function(e,t,i){e.provide("dojox.widget.Iterator"),e.require("dijit.Declaration"),e.experimental("dojox.widget.Iterator"),e.declare("dojox.widget.Iterator",[t.Declaration],{constructor:function(){var e=0;return function(){this.attrs=[],this.children=[],this.widgetClass="dojox.widget.Iterator._classes._"+e++}}(),start:0,fetchMax:1e3,query:{name:"*"},attrs:[],defaultValue:"",widgetCtor:null,dataValues:[],data:null,store:null,_srcIndex:0,_srcParent:null,_setSrcIndex:function(e){this._srcIndex=0,this._srcParent=e.parentNode;for(var t=e;t.previousSibling;)this._srcIndex++,t=t.previousSibling},postscript:function(t,i){this._setSrcIndex(i),this.inherited("postscript",arguments);var a=this.widgetCtor=e.getObject(this.widgetClass);this.attrs=e.map(a.prototype.templateString.match(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g),function(e){return e.slice(2,-1)}),e.forEach(this.attrs,function(e){a.prototype[e]=""}),this.update()},clear:function(){this.children.length&&this._setSrcIndex(this.children[0].domNode),e.forEach(this.children,"item.destroy();"),this.children=[]},update:function(){this.store?this.fetch():this.onDataAvailable(this.data||this.dataValues)},_addItem:function(t,i){e.isString(t)&&(t={value:t});var a=new this.widgetCtor(t);this.children.push(a),e.place(a.domNode,this._srcParent,this._srcIndex+i)},getAttrValuesObj:function(t){var i={};return e.isString(t)?e.forEach(this.attrs,function(e){i[e]="value"==e?t:this.defaultValue},this):e.forEach(this.attrs,function(e){this.store?i[e]=this.store.getValue(t,e)||this.defaultValue:i[e]=t[e]||this.defaultValue},this),i},onDataAvailable:function(t){this.clear(),e.forEach(t,function(e,t){this._addItem(this.getAttrValuesObj(e),t)},this)},fetch:function(t,i,a){this.store.fetch({query:t||this.query,start:i||this.start,count:a||this.fetchMax,onComplete:e.hitch(this,"onDataAvailable")})}}),i.widget.Iterator._classes={}});//# sourceMappingURL=Iterator.js.map