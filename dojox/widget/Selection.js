//>>built
define("dojox/widget/Selection",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/Stateful"],function(e,t,i,o){return e("dojox.widget.Selection",o,{constructor:function(){this.selectedItems=[]},selectionMode:"single",_setSelectionModeAttr:function(e){"none"!=e&&"single"!=e&&"multiple"!=e&&(e="single"),e!=this.selectionMode&&(this.selectionMode=e,"none"==e?this.set("selectedItems",null):"single"==e&&this.set("selectedItem",this.selectedItem))},selectedItem:null,_setSelectedItemAttr:function(e){this.selectedItem!=e&&(this._set("selectedItem",e),this.set("selectedItems",e?[e]:null))},selectedItems:null,_setSelectedItemsAttr:function(e){var t=this.selectedItems;this.selectedItems=e,this.selectedItem=null,null!=t&&t.length>0&&this.updateRenderers(t,!0),this.selectedItems&&this.selectedItems.length>0&&(this.selectedItem=this.selectedItems[0],this.updateRenderers(this.selectedItems,!0))},_getSelectedItemsAttr:function(){return null==this.selectedItems?[]:this.selectedItems.concat()},isItemSelected:function(e){return null==this.selectedItems||0==this.selectedItems.length?!1:t.some(this.selectedItems,i.hitch(this,function(t){return this.getIdentity(t)==this.getIdentity(e)}))},getIdentity:function(e){},setItemSelected:function(e,i){if("none"!=this.selectionMode&&null!=e){var o=this.get("selectedItems");this.get("selectedItems");if("single"==this.selectionMode)i?this.set("selectedItem",e):this.isItemSelected(e)&&this.set("selectedItems",null);else if(i){if(this.isItemSelected(e))return;null==o?o=[e]:o.unshift(e),this.set("selectedItems",o)}else{var n=t.filter(o,function(t){return t.id!=e.id});if(null==n||n.length==o.length)return;this.set("selectedItems",n)}}},selectFromEvent:function(e,t,i,o){if("none"==this.selectionMode)return!1;var n,r=this.get("selectedItem"),a=t?this.isItemSelected(t):!1;return null==t?e.ctrlKey||null==this.selectedItem||(this.set("selectedItem",null),n=!0):"multiple"==this.selectionMode?e.ctrlKey?(this.setItemSelected(t,!a),n=!0):(this.set("selectedItem",t),n=!0):e.ctrlKey?(this.set("selectedItem",a?null:t),n=!0):a||(this.set("selectedItem",t),n=!0),o&&n&&this.dispatchChange(r,this.get("selectedItem"),i,e),n},dispatchChange:function(e,t,i,o){this.onChange({oldValue:e,newValue:t,renderer:i,triggerEvent:o})},onChange:function(){}})});//# sourceMappingURL=Selection.js.map