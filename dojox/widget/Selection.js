//>>built
define("dojox/widget/Selection",["dojo/_base/declare","dojo/_base/array","dojo/sniff","dojo/_base/lang","dojo/Stateful"],function(e,t,i,a,o){return e("dojox.widget.Selection",o,{constructor:function(){this.selectedItems=[]},selectionMode:"single",_setSelectionModeAttr:function(e){"none"!=e&&"single"!=e&&"multiple"!=e&&(e="single"),e!=this.selectionMode&&(this.selectionMode=e,"none"==e?this.set("selectedItems",null):"single"==e&&this.set("selectedItem",this.selectedItem))},selectedItem:null,_setSelectedItemAttr:function(e){this.selectedItem!=e&&(this._set("selectedItem",e),this.set("selectedItems",e?[e]:null))},selectedItems:null,_setSelectedItemsAttr:function(e){var t=this.selectedItems;this.selectedItems=e,this.selectedItem=null,null!=t&&t.length>0&&this.updateRenderers(t,!0),this.selectedItems&&this.selectedItems.length>0&&(this.selectedItem=this.selectedItems[0],this.updateRenderers(this.selectedItems,!0))},_getSelectedItemsAttr:function(){return null==this.selectedItems?[]:this.selectedItems.concat()},isItemSelected:function(e){return null!=this.selectedItems&&0!=this.selectedItems.length&&t.some(this.selectedItems,a.hitch(this,function(t){return this.getIdentity(t)==this.getIdentity(e)}))},getIdentity:function(e){},setItemSelected:function(e,i){if("none"!=this.selectionMode&&null!=e){var a=this.get("selectedItems");if("single"==this.selectionMode)i?this.set("selectedItem",e):this.isItemSelected(e)&&this.set("selectedItems",null);else if(i){if(this.isItemSelected(e))return;null==a?a=[e]:a.unshift(e),this.set("selectedItems",a)}else{var o=t.filter(a,function(t){return t.id!=e.id});if(null==o||o.length==a.length)return;this.set("selectedItems",o)}}},selectFromEvent:function(e,t,a,o){if("none"==this.selectionMode)return!1;var n,r=this.get("selectedItem"),s=!!t&&this.isItemSelected(t),d=i("mac")?e.metaKey:e.ctrlKey;return null==t?d||null==this.selectedItem||(this.set("selectedItem",null),n=!0):"multiple"==this.selectionMode?d?(this.setItemSelected(t,!s),n=!0):(this.set("selectedItem",t),n=!0):d?(this.set("selectedItem",s?null:t),n=!0):s||(this.set("selectedItem",t),n=!0),o&&n&&this.dispatchChange(r,this.get("selectedItem"),a,e),n},dispatchChange:function(e,t,i,a){this.onChange({oldValue:e,newValue:t,renderer:i,triggerEvent:a})},onChange:function(){}})});//# sourceMappingURL=Selection.js.map