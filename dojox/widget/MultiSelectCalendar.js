//>>built
require({cache:{"url:dojox/widget/MultiSelectCalendar/MultiSelectCalendar.html":'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" dojoAttachEvent="onkeydown: _onKeyDown" aria-labelledby="${id}_year">\n\t<thead>\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' dojoAttachPoint="decrementMonth">\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"/>\n\t\t\t\t<span dojoAttachPoint="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset\' colspan="5">\n\t\t\t\t<div dojoType="dijit.form.DropDownButton" dojoAttachPoint="monthDropDownButton"\n\t\t\t\t\tid="${id}_mddb" tabIndex="-1">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' dojoAttachPoint="incrementMonth">\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"/>\n\t\t\t\t<span dojoAttachPoint="increaseArrowNode" class="dijitA11ySideArrow">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader"><span class="dijitCalendarDayLabel"></span></th>\n\t\t</tr>\n\t</thead>\n\t<tbody dojoAttachEvent="onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut, onmousedown: _onDayMouseDown, onmouseup: _onDayMouseUp" class="dijitReset dijitCalendarBodyContainer">\n\t\t<tr class="dijitReset dijitCalendarWeekTemplate" role="row">\n\t\t\t<td class="dijitReset dijitCalendarDateTemplate" role="gridcell"><span class="dijitCalendarDateLabel"></span></td>\n\t\t</tr>\n\t</tbody>\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\n\t\t<tr>\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7">\n\t\t\t\t<h3 class="dijitCalendarYearLabel">\n\t\t\t\t\t<span dojoAttachPoint="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear"></span>\n\t\t\t\t\t<span dojoAttachPoint="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" id="${id}_year"></span>\n\t\t\t\t\t<span dojoAttachPoint="nextYearLabelNode" class="dijitInline dijitCalendarNextYear"></span>\n\t\t\t\t</h3>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>'}}),define("dojox/widget/MultiSelectCalendar",["dojo/main","dijit","dojo/text!./MultiSelectCalendar/MultiSelectCalendar.html","dojo/cldr/supplemental","dojo/date","dojo/date/stamp","dojo/date/locale","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_CssStateMixin","dijit/form/DropDownButton","dijit/typematic"],function(e,t,i,a,o,r,n,s,d,l,h,c,u){e.experimental("dojox.widget.MultiSelectCalendar");var m=e.declare("dojox.widget.MultiSelectCalendar",[s,d,l,h],{templateString:i,widgetsInTemplate:!0,value:{},datePackage:"dojo.date",dayWidth:"narrow",tabIndex:"0",returnIsoRanges:!1,currentFocus:new Date,baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},_areValidDates:function(e){for(var t in this.value)if(valid=t&&!isNaN(t)&&"object"==typeof e&&t.toString()!=this.constructor.prototype.value.toString(),!valid)return!1;return!0},_getValueAttr:function(){return this.returnIsoRanges?(datesWithRanges=this._returnDatesWithIsoRanges(this._sort()),datesWithRanges):this._sort()},_setValueAttr:function(t,i){this.value={},e.isArray(t)?(e.forEach(t,function(e,t){if(-1==e.indexOf("/"))this.value[e]=1;else{var i=r.fromISOString(e.substr(0,10)),a=r.fromISOString(e.substr(11,10));this.toggleDate(i,[],[]),i-a>0?this._addToRangeRTL(i,a,[],[]):this._addToRangeLTR(i,a,[],[])}},this),t.length>0&&this.focusOnLastDate(t[t.length-1])):(t&&(t=new this.dateClassObj(t)),this._isValidDate(t)&&(t.setHours(1,0,0,0),this.isDisabledDate(t,this.lang)||(dateIndex=r.toISOString(t).substring(0,10),this.value[dateIndex]=1,this.set("currentFocus",t),(i||void 0===i)&&(this.onChange(this.get("value")),this.onValueSelected(this.get("value")))))),this._populateGrid()},focusOnLastDate:function(e){var t,i,a=e.indexOf("/");-1==a?lastDate=r.fromISOString(e):(t=r.fromISOString(e.substr(0,10)),i=r.fromISOString(e.substr(11,10)),lastDate=t-i>0?t:i),this.set("currentFocus",lastDate)},_isValidDate:function(e){return e&&!isNaN(e)&&"object"==typeof e&&e.toString()!=this.constructor.prototype.value.toString()},_setText:function(t,i){for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(e.doc.createTextNode(i))},_populateGrid:function(){var t=new this.dateClassObj(this.currentFocus);t.setDate(1);var i=t.getDay(),a=this.dateFuncObj.getDaysInMonth(t),o=this.dateFuncObj.getDaysInMonth(this.dateFuncObj.add(t,"month",-1)),n=new this.dateClassObj,s=e.cldr.supplemental.getFirstDayOfWeek(this.lang);s>i&&(s-=7),this.listOfNodes=e.query(".dijitCalendarDateTemplate",this.domNode),this.listOfNodes.forEach(function(d,l){l+=s;var h,c=new this.dateClassObj(t),u="dijitCalendar",m=0;l<i?(h=o-i+l+1,m=-1,u+="Previous"):l>=i+a?(h=l-i-a+1,m=1,u+="Next"):(h=l-i+1,u+="Current"),m&&(c=this.dateFuncObj.add(c,"month",m)),c.setDate(h),this.dateFuncObj.compare(c,n,"date")||(u="dijitCalendarCurrentDate "+u),dateIndex=r.toISOString(c).substring(0,10),this.isDisabledDate(c,this.lang)||this._isSelectedDate(c,this.lang)&&(u=this.value[dateIndex]?"dijitCalendarSelectedDate "+u:u.replace("dijitCalendarSelectedDate ","")),this._isSelectedDate(c,this.lang)&&(u="dijitCalendarBrowsingDate "+u),this.isDisabledDate(c,this.lang)&&(u="dijitCalendarDisabledDate "+u);var f=this.getClassForDate(c,this.lang);f&&(u=f+" "+u),d.className=u+"Month dijitCalendarDateTemplate",d.dijitDateValue=c.valueOf(),e.attr(d,"dijitDateValue",c.valueOf());var g=e.query(".dijitCalendarDateLabel",d)[0],p=c.getDateLocalized?c.getDateLocalized(this.lang):c.getDate();this._setText(g,p)},this);var d=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,t);this.monthDropDownButton.dropDown.set("months",d),this.monthDropDownButton.containerNode.innerHTML=(6==e.isIE?"":"<div class='dijitSpacer'>"+this.monthDropDownButton.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+d[t.getMonth()]+"</div>";var l=t.getFullYear()-1,h=new this.dateClassObj;e.forEach(["previous","current","next"],function(e){h.setFullYear(l++),this._setText(this[e+"YearLabelNode"],this.dateLocaleModule.format(h,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("currentFocus",new this.dateClassObj,!1)},constructor:function(t){var i=t.datePackage&&"dojo.date"!=t.datePackage?t.datePackage+".Date":"Date";this.dateClassObj=e.getObject(i,!1),this.datePackage=t.datePackage||this.datePackage,this.dateFuncObj=e.getObject(this.datePackage,!1),this.dateLocaleModule=e.getObject(this.datePackage+".locale",!1)},buildRendering:function(){this.inherited(arguments),e.setSelectable(this.domNode,!1);var i=e.hitch(this,function(t,i){for(var a=e.query(t,this.domNode)[0],o=0;o<i;o++)a.parentNode.appendChild(a.cloneNode(!0))});i(".dijitCalendarDayLabelTemplate",6),i(".dijitCalendarDateTemplate",6),i(".dijitCalendarWeekTemplate",5);var a=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),o=e.cldr.supplemental.getFirstDayOfWeek(this.lang);e.query(".dijitCalendarDayLabel",this.domNode).forEach(function(e,t){this._setText(e,a[(t+o)%7])},this);var r=new this.dateClassObj(this.currentFocus);this.monthDropDownButton.dropDown=new f({id:this.id+"_mdd",onChange:e.hitch(this,"_onMonthSelect")}),this.set("currentFocus",r,!1);var n=this,s=function(e,i,a){n._connects.push(t.typematic.addMouseListener(n[e],n,function(e){e>=0&&n._adjustDisplay(i,a)},.8,500))};s("incrementMonth","month",1),s("decrementMonth","month",-1),s("nextYearLabelNode","year",1),s("previousYearLabelNode","year",-1)},_adjustDisplay:function(e,t){this._setCurrentFocusAttr(this.dateFuncObj.add(this.currentFocus,e,t))},_setCurrentFocusAttr:function(t,i){var a=this.currentFocus,o=a?e.query("[dijitDateValue="+a.valueOf()+"]",this.domNode)[0]:null;t=new this.dateClassObj(t),t.setHours(1,0,0,0),this._set("currentFocus",t);var n=r.toISOString(t).substring(0,7);n!=this.previousMonth&&(this._populateGrid(),this.previousMonth=n);var s=e.query("[dijitDateValue='"+t.valueOf()+"']",this.domNode)[0];s.setAttribute("tabIndex",this.tabIndex),(this._focused||i)&&s.focus(),o&&o!=s&&(e.isWebKit?o.setAttribute("tabIndex","-1"):o.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onMonthSelect:function(e){this.currentFocus=this.dateFuncObj.add(this.currentFocus,"month",e-this.currentFocus.getMonth()),this._populateGrid()},toggleDate:function(e,t,i){var a=r.toISOString(e).substring(0,10);this.value[a]?this.unselectDate(e,i):this.selectDate(e,t)},selectDate:function(e,t){var i=this._getNodeByDate(e),a=i.className,o=r.toISOString(e).substring(0,10);this.value[o]=1,t.push(o),a="dijitCalendarSelectedDate "+a,i.className=a},unselectDate:function(e,t){var i=this._getNodeByDate(e),a=i.className,o=r.toISOString(e).substring(0,10);delete this.value[o],t.push(o),a=a.replace("dijitCalendarSelectedDate ",""),i.className=a},_getNodeByDate:function(t){var i=new this.dateClassObj(this.listOfNodes[0].dijitDateValue),a=Math.abs(e.date.difference(i,t,"day"));return this.listOfNodes[a]},_onDayClick:function(t){e.stopEvent(t);for(var i=t.target;i&&!i.dijitDateValue;i=i.parentNode);i&&!e.hasClass(i,"dijitCalendarDisabledDate")&&(value=new this.dateClassObj(i.dijitDateValue),this.rangeJustSelected?(this.rangeJustSelected=!1,this.set("currentFocus",value)):(this.toggleDate(value,[],[]),this.previouslySelectedDay=value,this.set("currentFocus",value),this.onValueSelected([r.toISOString(value).substring(0,10)])))},_onDayMouseOver:function(t){var i=e.hasClass(t.target,"dijitCalendarDateLabel")?t.target.parentNode:t.target;i&&(i.dijitDateValue||i==this.previousYearLabelNode||i==this.nextYearLabelNode)&&(e.addClass(i,"dijitCalendarHoveredDate"),this._currentNode=i)},_setEndRangeAttr:function(e){e=new this.dateClassObj(e),e.setHours(1),this.endRange=e},_getEndRangeAttr:function(){var e=new this.dateClassObj(this.endRange);return e.setHours(0,0,0,0),e.getDate()<this.endRange.getDate()&&(e=this.dateFuncObj.add(e,"hour",1)),e},_onDayMouseOut:function(t){if(this._currentNode&&(!t.relatedTarget||t.relatedTarget.parentNode!=this._currentNode)){var i="dijitCalendarHoveredDate";e.hasClass(this._currentNode,"dijitCalendarActiveDate")&&(i+=" dijitCalendarActiveDate"),e.removeClass(this._currentNode,i),this._currentNode=null}},_onDayMouseDown:function(t){var i=t.target.parentNode;i&&i.dijitDateValue&&(e.addClass(i,"dijitCalendarActiveDate"),this._currentNode=i),t.shiftKey&&this.previouslySelectedDay?(this.selectingRange=!0,this.set("endRange",i.dijitDateValue),this._selectRange()):(this.selectingRange=!1,this.previousRangeStart=null,this.previousRangeEnd=null)},_onDayMouseUp:function(t){var i=t.target.parentNode;i&&i.dijitDateValue&&e.removeClass(i,"dijitCalendarActiveDate")},handleKey:function(t){var i,a=e.keys,o=-1,n=this.currentFocus;switch(t.keyCode){case a.RIGHT_ARROW:o=1;case a.LEFT_ARROW:i="day",this.isLeftToRight()||(o*=-1);break;case a.DOWN_ARROW:o=1;case a.UP_ARROW:i="week";break;case a.PAGE_DOWN:o=1;case a.PAGE_UP:i=t.ctrlKey||t.altKey?"year":"month";break;case a.END:n=this.dateFuncObj.add(n,"month",1),i="day";case a.HOME:n=new this.dateClassObj(n),n.setDate(1);break;case a.ENTER:case a.SPACE:t.shiftKey&&this.previouslySelectedDay?(this.selectingRange=!0,this.set("endRange",n),this._selectRange()):(this.selectingRange=!1,this.toggleDate(n,[],[]),this.previouslySelectedDay=n,this.previousRangeStart=null,this.previousRangeEnd=null,this.onValueSelected([r.toISOString(n).substring(0,10)]));break;default:return!0}return i&&(n=this.dateFuncObj.add(n,i,o)),this.set("currentFocus",n),!1},_onKeyDown:function(t){this.handleKey(t)||e.stopEvent(t)},_removeFromRangeLTR:function(t,i,a,r){difference=Math.abs(e.date.difference(t,i,"day"));for(var n=0;n<=difference;n++){var s=o.add(t,"day",n);this.toggleDate(s,a,r)}null===this.previousRangeEnd?this.previousRangeEnd=i:e.date.compare(i,this.previousRangeEnd,"date")>0&&(this.previousRangeEnd=i),null===this.previousRangeStart?this.previousRangeStart=i:e.date.compare(i,this.previousRangeStart,"date")>0&&(this.previousRangeStart=i),this.previouslySelectedDay=o.add(s,"day",1)},_removeFromRangeRTL:function(t,i,a,r){difference=Math.abs(e.date.difference(t,i,"day"));for(var n=0;n<=difference;n++){var s=e.date.add(t,"day",-n);this.toggleDate(s,a,r)}null===this.previousRangeEnd?this.previousRangeEnd=i:e.date.compare(i,this.previousRangeEnd,"date")<0&&(this.previousRangeEnd=i),null===this.previousRangeStart?this.previousRangeStart=i:e.date.compare(i,this.previousRangeStart,"date")<0&&(this.previousRangeStart=i),this.previouslySelectedDay=o.add(s,"day",-1)},_addToRangeRTL:function(t,i,a,r){difference=Math.abs(o.difference(t,i,"day"));for(var n=1;n<=difference;n++){var s=o.add(t,"day",-n);this.toggleDate(s,a,r)}null===this.previousRangeStart?this.previousRangeStart=i:e.date.compare(i,this.previousRangeStart,"date")<0&&(this.previousRangeStart=i),null===this.previousRangeEnd?this.previousRangeEnd=t:e.date.compare(t,this.previousRangeEnd,"date")>0&&(this.previousRangeEnd=t),this.previouslySelectedDay=s},_addToRangeLTR:function(t,i,a,o){difference=Math.abs(e.date.difference(t,i,"day"));for(var r=1;r<=difference;r++){var n=e.date.add(t,"day",r);this.toggleDate(n,a,o)}null===this.previousRangeStart?this.previousRangeStart=t:e.date.compare(t,this.previousRangeStart,"date")<0&&(this.previousRangeStart=t),null===this.previousRangeEnd?this.previousRangeEnd=i:e.date.compare(i,this.previousRangeEnd,"date")>0&&(this.previousRangeEnd=i),this.previouslySelectedDay=n},_selectRange:function(){var t=[],i=[],a=this.previouslySelectedDay,o=this.get("endRange");this.previousRangeStart||this.previousRangeEnd?e.date.compare(o,this.previousRangeStart,"date")<0||e.date.compare(o,this.previousRangeEnd,"date")>0?removingFromRange=!1:removingFromRange=!0:removingFromRange=!1,!0===removingFromRange?e.date.compare(o,a,"date")<0?this._removeFromRangeRTL(a,o,t,i):this._removeFromRangeLTR(a,o,t,i):e.date.compare(o,a,"date")<0?this._addToRangeRTL(a,o,t,i):this._addToRangeLTR(a,o,t,i),t.length>0&&this.onValueSelected(t),i.length>0&&this.onValueUnselected(i),this.rangeJustSelected=!0},onValueSelected:function(e){},onValueUnselected:function(e){},onChange:function(e){},_isSelectedDate:function(e,t){return dateIndex=r.toISOString(e).substring(0,10),this.value[dateIndex]},isDisabledDate:function(e,t){},getClassForDate:function(e,t){},_sort:function(){if(this.value=={})return[];var e=[];for(var t in this.value)e.push(t);return e.sort(function(e,t){return new Date(e)-new Date(t)}),e},_returnDatesWithIsoRanges:function(e){var t=[];if(e.length>1){for(var i=!1,a=null,n=null,s=r.fromISOString(e[0]),d=1;d<e.length+1;d++)currentDate=r.fromISOString(e[d]),i?(difference=Math.abs(o.difference(s,currentDate,"day")),1==difference?n=currentDate:(range=r.toISOString(a).substring(0,10)+"/"+r.toISOString(n).substring(0,10),t.push(range),i=!1)):(difference=Math.abs(o.difference(s,currentDate,"day")),1==difference?(i=!0,a=s,n=currentDate):t.push(r.toISOString(s).substring(0,10))),s=currentDate;return t}return e}}),f=m._MonthDropDown=e.declare("dojox.widget._MonthDropDown",[s,d,l],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' dojoAttachEvent='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(t){this.domNode.innerHTML=e.map(t,function(e,t){return e?"<div class='dijitCalendarMonthLabel' month='"+t+"'>"+e+"</div>":""}).join("")},_onClick:function(t){this.onChange(e.attr(t.target,"month"))},onChange:function(e){},_onMenuHover:function(t){e.toggleClass(t.target,"dijitCalendarMonthLabelHover","mouseover"==t.type)}});return m});//# sourceMappingURL=MultiSelectCalendar.js.map