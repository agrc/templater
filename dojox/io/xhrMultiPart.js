//>>built
define("dojox/io/xhrMultiPart",["dojo/_base/kernel","dojo/_base/array","dojo/_base/xhr","dojo/query","dojox/uuid/generateRandomUuid"],function(e,t,i,a,o){function r(e,t){if(!e.name&&!e.content)throw new Error("Each part of a multi-part request requires 'name' and 'content'.");var i=[];if(i.push("--"+t,'Content-Disposition: form-data; name="'+e.name+'"'+(e.filename?'; filename="'+e.filename+'"':"")),e.contentType){var a="Content-Type: "+e.contentType;e.charset&&(a+="; Charset="+e.charset),i.push(a)}return e.contentTransferEncoding&&i.push("Content-Transfer-Encoding: "+e.contentTransferEncoding),i.push("",e.content),i}function n(t,i){var a=e.formToObject(t),o=[];for(var n in a)e.isArray(a[n])?e.forEach(a[n],function(e){o=o.concat(r({name:n,content:e},i))}):o=o.concat(r({name:n,content:a[n]},i));return o}return e.getObject("io.xhrMultiPart",!0,dojox),dojox.io.xhrMultiPart=function(t){if(!t.file&&!t.content&&!t.form)throw new Error("content, file or form must be provided to dojox.io.xhrMultiPart's arguments");var i=o(),s=[],l="";if(t.file||t.content){var d=t.file||t.content;e.forEach(e.isArray(d)?d:[d],function(e){s=s.concat(r(e,i))})}else if(t.form){if(a("input[type=file]",t.form).length)throw new Error("dojox.io.xhrMultiPart cannot post files that are values of an INPUT TYPE=FILE.  Use dojo.io.iframe.send() instead.");s=n(t.form,i)}return s.length&&(s.push("--"+i+"--",""),l=s.join("\r\n")),e.rawXhrPost(e.mixin(t,{contentType:"multipart/form-data; boundary="+i,postData:l}))},dojox.io.xhrMultiPart});//# sourceMappingURL=xhrMultiPart.js.map