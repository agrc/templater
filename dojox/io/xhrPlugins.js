//>>built
define("dojox/io/xhrPlugins",["dojo/_base/kernel","dojo/_base/xhr","dojo/AdapterRegistry"],function(e,t,i){function a(){return n=dojox.io.xhrPlugins.plainXhr=n||e._defaultXhr||t}e.getObject("io.xhrPlugins",!0,dojox);var o,n;dojox.io.xhrPlugins.register=function(){var t=a();return o||(o=new i,e[e._defaultXhr?"_defaultXhr":"xhr"]=function(e,t,i){return o.match.apply(o,arguments)},o.register("xhr",function(e,t){if(!t.url.match(/^\w*:\/\//))return!0;var i=window.location.href.match(/^.*?\/\/.*?\//)[0];return t.url.substring(0,i.length)==i},t)),o.register.apply(o,arguments)},dojox.io.xhrPlugins.addProxy=function(t){var i=a();dojox.io.xhrPlugins.register("proxy",function(e,t){return!0},function(a,o,n){return o.url=t+encodeURIComponent(o.url),i.call(e,a,o,n)})};var r;return dojox.io.xhrPlugins.addCrossSiteXhr=function(t,i){var o=a();if(void 0===r&&window.XMLHttpRequest)try{(new XMLHttpRequest).open("GET","http://testing-cross-domain-capability.com",!0),r=!0,e.config.noRequestedWithHeaders=!0}catch(e){r=!1}dojox.io.xhrPlugins.register("cs-xhr",function(e,a){return(r||window.XDomainRequest&&!0!==a.sync&&("GET"==e||"POST"==e||i))&&a.url.substring(0,t.length)==t},r?o:function(){var t=e._xhrObj;e._xhrObj=function(){function e(e,i){return function(){t.readyState=i,t.status=e}}var t=new XDomainRequest;return t.readyState=1,t.setRequestHeader=function(){},t.getResponseHeader=function(e){return"Content-Type"==e?t.contentType:null},t.onload=e(200,4),t.onprogress=e(200,3),t.onerror=e(404,4),t};var o=(i?i(a()):a()).apply(e,arguments);return e._xhrObj=t,o})},dojox.io.xhrPlugins.fullHttpAdapter=function(t,i){return function(a,o,n){var r={},s={};"GET"!=a&&(s["http-method"]=a,o.putData&&i&&(r["http-content"]=o.putData,delete o.putData,n=!1),o.postData&&i&&(r["http-content"]=o.postData,delete o.postData,n=!1),a="POST");for(var l in o.headers){s[l.match(/^X-/)?l.substring(2).replace(/-/g,"_").toLowerCase():"http-"+l]=o.headers[l]}return o.query=e.objectToQuery(s),e._ioAddQueryToUrl(o),o.content=e.mixin(o.content||{},r),t.call(e,a,o,n)}},dojox.io.xhrPlugins});//# sourceMappingURL=xhrPlugins.js.map