//>>built
define("dojox/io/xhrPlugins",["dojo/_base/kernel","dojo/_base/xhr","dojo/AdapterRegistry"],function(e,t,i){function a(){return o=dojox.io.xhrPlugins.plainXhr=o||e._defaultXhr||t}e.getObject("io.xhrPlugins",!0,dojox);var r,o;dojox.io.xhrPlugins.register=function(){var t=a();return r||(r=new i,e[e._defaultXhr?"_defaultXhr":"xhr"]=function(e,t,i){return r.match.apply(r,arguments)},r.register("xhr",function(e,t){if(!t.url.match(/^\w*:\/\//))return!0;var i=window.location.href.match(/^.*?\/\/.*?\//)[0];return t.url.substring(0,i.length)==i},t)),r.register.apply(r,arguments)},dojox.io.xhrPlugins.addProxy=function(t){var i=a();dojox.io.xhrPlugins.register("proxy",function(e,t){return!0},function(a,r,o){return r.url=t+encodeURIComponent(r.url),i.call(e,a,r,o)})};var n;return dojox.io.xhrPlugins.addCrossSiteXhr=function(t,i){var r=a();if(void 0===n&&window.XMLHttpRequest)try{var o=new XMLHttpRequest;o.open("GET","http://testing-cross-domain-capability.com",!0),n=!0,e.config.noRequestedWithHeaders=!0}catch(s){n=!1}dojox.io.xhrPlugins.register("cs-xhr",function(e,a){return(n||window.XDomainRequest&&a.sync!==!0&&("GET"==e||"POST"==e||i))&&a.url.substring(0,t.length)==t},n?r:function(){var t=e._xhrObj;e._xhrObj=function(){function e(e,i){return function(){t.readyState=i,t.status=e}}var t=new XDomainRequest;return t.readyState=1,t.setRequestHeader=function(){},t.getResponseHeader=function(e){return"Content-Type"==e?t.contentType:null},t.onload=e(200,4),t.onprogress=e(200,3),t.onerror=e(404,4),t};var r=(i?i(a()):a()).apply(e,arguments);return e._xhrObj=t,r})},dojox.io.xhrPlugins.fullHttpAdapter=function(t,i){return function(a,r,o){var n={},s={};"GET"!=a&&(s["http-method"]=a,r.putData&&i&&(n["http-content"]=r.putData,delete r.putData,o=!1),r.postData&&i&&(n["http-content"]=r.postData,delete r.postData,o=!1),a="POST");for(var l in r.headers){var d=l.match(/^X-/)?l.substring(2).replace(/-/g,"_").toLowerCase():"http-"+l;s[d]=r.headers[l]}return r.query=e.objectToQuery(s),e._ioAddQueryToUrl(r),r.content=e.mixin(r.content||{},n),t.call(e,a,r,o)}},dojox.io.xhrPlugins});//# sourceMappingURL=xhrPlugins.js.map