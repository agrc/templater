//>>built
define("dojox/io/windowName",["dojo/_base/kernel","dojo/_base/window","dojo/_base/xhr","dojo/_base/sniff","dojo/_base/url","dojo/domReady!"],function(e){return e.getObject("io.windowName",!0,dojox),dojox.io.windowName={send:function(t,a){a.url+=(a.url.match(/\?/)?"&":"?")+"windowname="+(a.authElement?"auth":!0);var i=a.authElement,r=function(t){try{var a=n.ioArgs.frame.contentWindow.document;a.write(" "),a.close()}catch(r){}return(i||e.body()).removeChild(n.ioArgs.outerFrame),t},n=e._ioSetArgs(a,r,r,r);return a.timeout&&setTimeout(function(){-1==n.fired&&n.callback(new Error("Timeout"))},a.timeout),dojox.io.windowName._send(n,t,i,a.onAuthLoad),n},_send:function(t,a,i,r){function n(e){e.style.width="100%",e.style.height="100%",e.style.border="0px"}function o(){var e=p.contentWindow.name;"string"==typeof e&&e!=u&&(v=2,t.ioArgs.hash=p.contentWindow.location.hash,t.callback(e))}var s=t.ioArgs,l=dojox.io.windowName._frameNum++,d=(e.config.dojoBlankHtmlUrl||e.config.dojoCallbackUrl||e.moduleUrl("dojo","resources/blank.html"))+"#"+l,u=new e._Url(window.location,d),c=e.doc,m=i||e.body();if(e.isMoz&&![].reduce){var h=c.createElement("iframe");n(h),i||(h.style.display="none"),m.appendChild(h);var f=h.contentWindow;c=f.document,c.write("<html><body margin='0px'><iframe style='width:100%;height:100%;border:0px' name='protectedFrame'></iframe></body></html>"),c.close();var g=f[0];f.__defineGetter__(0,function(){}),f.__defineGetter__("protectedFrame",function(){}),c=g.document,c.write("<html><body margin='0px'></body></html>"),c.close(),m=c.body}var p;if(e.isIE){var y=c.createElement("div");y.innerHTML='<iframe name="'+u+'" onload="dojox.io.windowName['+l+']()">',p=y.firstChild}else p=c.createElement("iframe");s.frame=p,n(p),s.outerFrame=h=h||p,i||(h.style.display="none");var v=0;if(dojox.io.windowName[l]=p.onload=function(){try{if(!e.isMoz&&"about:blank"==p.contentWindow.location)return}catch(t){}v||(v=1,i?r&&r():p.contentWindow.location=d);try{2>v&&o()}catch(t){}},p.name=u,a.match(/GET/i))e._ioAddQueryToUrl(s),p.src=s.url,m.appendChild(p),p.contentWindow&&p.contentWindow.location.replace(s.url);else{if(!a.match(/POST/i))throw new Error("Method "+a+" not supported with the windowName transport");m.appendChild(p);var k=e.doc.createElement("form");e.body().appendChild(k);var b=e.queryToObject(s.query);for(var M in b){var _=b[M];_=_ instanceof Array?_:[_];for(var w=0;w<_.length;w++){var x=c.createElement("input");x.type="hidden",x.name=M,x.value=_[w],k.appendChild(x)}}k.method="POST",k.action=s.url,k.target=u,k.submit(),k.parentNode.removeChild(k)}p.contentWindow&&(p.contentWindow.name=u)},_frameNum:0},dojox.io.windowName});//# sourceMappingURL=windowName.js.map