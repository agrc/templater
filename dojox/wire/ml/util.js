//>>built
define("dojox/wire/ml/util",["dojo","dijit","dojox","dojo/require!dojox/xml/parser,dojox/wire/Wire"],function(e,t,i){e.provide("dojox.wire.ml.util"),e.require("dojox.xml.parser"),e.require("dojox.wire.Wire"),i.wire.ml._getValue=function(a,o){if(a){var r=void 0;if(o&&a.length>=9&&"arguments"==a.substring(0,9))return r=a.substring(9),new i.wire.Wire({property:r}).getValue(o);var n=a.indexOf(".");n>=0&&(r=a.substring(n+1),a=a.substring(0,n));var s=t.byId(a)||e.byId(a)||e.getObject(a);if(s)return r?new i.wire.Wire({object:s,property:r}).getValue():s}},i.wire.ml._setValue=function(e,t){if(e){var a=e.indexOf(".");if(!(0>a)){var o=this._getValue(e.substring(0,a));if(o){var r=e.substring(a+1);new i.wire.Wire({object:o,property:r}).setValue(t)}}}},e.declare("dojox.wire.ml.XmlElement",null,{constructor:function(t){e.isString(t)&&(t=this._getDocument().createElement(t)),this.element=t},getPropertyValue:function(e){var t=void 0;if(!this.element)return t;if(!e)return t;if("@"==e.charAt(0)){var a=e.substring(1);t=this.element.getAttribute(a)}else if("text()"==e){var o=this.element.firstChild;o&&(t=o.nodeValue)}else{for(var r=[],n=0;n<this.element.childNodes.length;n++){var s=this.element.childNodes[n];1===s.nodeType&&s.nodeName==e&&r.push(new i.wire.ml.XmlElement(s))}r.length>0&&(t=1===r.length?r[0]:r)}return t},setPropertyValue:function(t,a){var o,r;if(this.element&&t)if("@"==t.charAt(0)){var n=t.substring(1);a?this.element.setAttribute(n,a):this.element.removeAttribute(n)}else if("text()"==t){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);a&&(r=this._getDocument().createTextNode(a),this.element.appendChild(r))}else{var s,l=null;for(o=this.element.childNodes.length-1;o>=0;o--)s=this.element.childNodes[o],1===s.nodeType&&s.nodeName==t&&(l||(l=s.nextSibling),this.element.removeChild(s));if(a)if(e.isArray(a))for(o in a){var d=a[o];d.element&&this.element.insertBefore(d.element,l)}else a instanceof i.wire.ml.XmlElement?a.element&&this.element.insertBefore(a.element,l):(s=this._getDocument().createElement(t),r=this._getDocument().createTextNode(a),s.appendChild(r),this.element.insertBefore(s,l))}},toString:function(){var e="";if(this.element){var t=this.element.firstChild;t&&(e=t.nodeValue)}return e},toObject:function(){if(!this.element)return null;var t,a="",o={},r=0;for(t=0;t<this.element.childNodes.length;t++){var n=this.element.childNodes[t];if(1===n.nodeType){r++;var s=new i.wire.ml.XmlElement(n).toObject(),l=n.nodeName,d=o[l];d?e.isArray(d)?d.push(s):o[l]=[d,s]:o[l]=s}else 3!==n.nodeType&&4!==n.nodeType||(a+=n.nodeValue)}var h=0;if(1===this.element.nodeType)for(h=this.element.attributes.length,t=0;h>t;t++){var c=this.element.attributes[t];o["@"+c.nodeName]=c.nodeValue}if(0===r){if(0===h)return a;o["text()"]=a}return o},_getDocument:function(){return this.element?9==this.element.nodeType?this.element:this.element.ownerDocument:i.xml.parser.parse()}})});//# sourceMappingURL=util.js.map