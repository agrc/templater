//>>built
define("dojox/wire/ml/util",["dojo","dijit","dojox","dojo/require!dojox/xml/parser,dojox/wire/Wire"],function(e,t,i){e.provide("dojox.wire.ml.util"),e.require("dojox.xml.parser"),e.require("dojox.wire.Wire"),i.wire.ml._getValue=function(a,o){if(a){var n=void 0;if(o&&a.length>=9&&"arguments"==a.substring(0,9))return n=a.substring(9),new i.wire.Wire({property:n}).getValue(o);var r=a.indexOf(".");r>=0&&(n=a.substring(r+1),a=a.substring(0,r));var s=t.byId(a)||e.byId(a)||e.getObject(a);if(s)return n?new i.wire.Wire({object:s,property:n}).getValue():s}},i.wire.ml._setValue=function(e,t){if(e){var a=e.indexOf(".");if(!(0>a)){var o=this._getValue(e.substring(0,a));if(o){var n=e.substring(a+1);new i.wire.Wire({object:o,property:n}).setValue(t)}}}},e.declare("dojox.wire.ml.XmlElement",null,{constructor:function(t){e.isString(t)&&(t=this._getDocument().createElement(t)),this.element=t},getPropertyValue:function(e){var t=void 0;if(!this.element)return t;if(!e)return t;if("@"==e.charAt(0)){var a=e.substring(1);t=this.element.getAttribute(a)}else if("text()"==e){var o=this.element.firstChild;o&&(t=o.nodeValue)}else{for(var n=[],r=0;r<this.element.childNodes.length;r++){var s=this.element.childNodes[r];1===s.nodeType&&s.nodeName==e&&n.push(new i.wire.ml.XmlElement(s))}n.length>0&&(t=1===n.length?n[0]:n)}return t},setPropertyValue:function(t,a){var o,n;if(this.element&&t)if("@"==t.charAt(0)){var r=t.substring(1);a?this.element.setAttribute(r,a):this.element.removeAttribute(r)}else if("text()"==t){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);a&&(n=this._getDocument().createTextNode(a),this.element.appendChild(n))}else{var s,d=null;for(o=this.element.childNodes.length-1;o>=0;o--)s=this.element.childNodes[o],1===s.nodeType&&s.nodeName==t&&(d||(d=s.nextSibling),this.element.removeChild(s));if(a)if(e.isArray(a))for(o in a){var l=a[o];l.element&&this.element.insertBefore(l.element,d)}else a instanceof i.wire.ml.XmlElement?a.element&&this.element.insertBefore(a.element,d):(s=this._getDocument().createElement(t),n=this._getDocument().createTextNode(a),s.appendChild(n),this.element.insertBefore(s,d))}},toString:function(){var e="";if(this.element){var t=this.element.firstChild;t&&(e=t.nodeValue)}return e},toObject:function(){if(!this.element)return null;var t,a="",o={},n=0;for(t=0;t<this.element.childNodes.length;t++){var r=this.element.childNodes[t];if(1===r.nodeType){n++;var s=new i.wire.ml.XmlElement(r).toObject(),d=r.nodeName,l=o[d];l?e.isArray(l)?l.push(s):o[d]=[l,s]:o[d]=s}else 3!==r.nodeType&&4!==r.nodeType||(a+=r.nodeValue)}var h=0;if(1===this.element.nodeType)for(h=this.element.attributes.length,t=0;h>t;t++){var u=this.element.attributes[t];o["@"+u.nodeName]=u.nodeValue}if(0===n){if(0===h)return a;o["text()"]=a}return o},_getDocument:function(){return this.element?9==this.element.nodeType?this.element:this.element.ownerDocument:i.xml.parser.parse()}})});//# sourceMappingURL=util.js.map