//>>built
define("dojox/wire/ml/util",["dojo","dijit","dojox","dojo/require!dojox/xml/parser,dojox/wire/Wire"],function(e,t,i){e.provide("dojox.wire.ml.util"),e.require("dojox.xml.parser"),e.require("dojox.wire.Wire"),i.wire.ml._getValue=function(o,a){if(o){var r=void 0;if(a&&o.length>=9&&"arguments"==o.substring(0,9))return r=o.substring(9),new i.wire.Wire({property:r}).getValue(a);var n=o.indexOf(".");n>=0&&(r=o.substring(n+1),o=o.substring(0,n));var s=t.byId(o)||e.byId(o)||e.getObject(o);if(s)return r?new i.wire.Wire({object:s,property:r}).getValue():s}},i.wire.ml._setValue=function(e,t){if(e){var o=e.indexOf(".");if(!(0>o)){var a=this._getValue(e.substring(0,o));if(a){var r=e.substring(o+1);new i.wire.Wire({object:a,property:r}).setValue(t)}}}},e.declare("dojox.wire.ml.XmlElement",null,{constructor:function(t){e.isString(t)&&(t=this._getDocument().createElement(t)),this.element=t},getPropertyValue:function(e){var t=void 0;if(!this.element)return t;if(!e)return t;if("@"==e.charAt(0)){var o=e.substring(1);t=this.element.getAttribute(o)}else if("text()"==e){var a=this.element.firstChild;a&&(t=a.nodeValue)}else{for(var r=[],n=0;n<this.element.childNodes.length;n++){var s=this.element.childNodes[n];1===s.nodeType&&s.nodeName==e&&r.push(new i.wire.ml.XmlElement(s))}r.length>0&&(t=1===r.length?r[0]:r)}return t},setPropertyValue:function(t,o){var a,r;if(this.element&&t)if("@"==t.charAt(0)){var n=t.substring(1);o?this.element.setAttribute(n,o):this.element.removeAttribute(n)}else if("text()"==t){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);o&&(r=this._getDocument().createTextNode(o),this.element.appendChild(r))}else{var s,l=null;for(a=this.element.childNodes.length-1;a>=0;a--)s=this.element.childNodes[a],1===s.nodeType&&s.nodeName==t&&(l||(l=s.nextSibling),this.element.removeChild(s));if(o)if(e.isArray(o))for(a in o){var d=o[a];d.element&&this.element.insertBefore(d.element,l)}else o instanceof i.wire.ml.XmlElement?o.element&&this.element.insertBefore(o.element,l):(s=this._getDocument().createElement(t),r=this._getDocument().createTextNode(o),s.appendChild(r),this.element.insertBefore(s,l))}},toString:function(){var e="";if(this.element){var t=this.element.firstChild;t&&(e=t.nodeValue)}return e},toObject:function(){if(!this.element)return null;var t,o="",a={},r=0;for(t=0;t<this.element.childNodes.length;t++){var n=this.element.childNodes[t];if(1===n.nodeType){r++;var s=new i.wire.ml.XmlElement(n).toObject(),l=n.nodeName,d=a[l];d?e.isArray(d)?d.push(s):a[l]=[d,s]:a[l]=s}else 3!==n.nodeType&&4!==n.nodeType||(o+=n.nodeValue)}var h=0;if(1===this.element.nodeType)for(h=this.element.attributes.length,t=0;h>t;t++){var c=this.element.attributes[t];a["@"+c.nodeName]=c.nodeValue}if(0===r){if(0===h)return o;a["text()"]=o}return a},_getDocument:function(){return this.element?9==this.element.nodeType?this.element:this.element.ownerDocument:i.xml.parser.parse()}})});//# sourceMappingURL=util.js.map