//>>built
define("dojox/wire/Wire",["dojo","dijit","dojox","dojo/require!dojox/wire/_base"],function(e,t,i){e.provide("dojox.wire.Wire"),e.require("dojox.wire._base"),e.declare("dojox.wire.Wire",null,{_wireClass:"dojox.wire.Wire",constructor:function(t){if(e.mixin(this,t),this.converter)if(e.isString(this.converter)){var a=e.getObject(this.converter);if(e.isFunction(a))try{var o=new a;o&&!e.isFunction(o.convert)?this.converter={convert:a}:this.converter=o}catch(r){}else e.isObject(a)&&e.isFunction(a.convert)&&(this.converter=a);if(e.isString(this.converter)){var n=i.wire._getClass(this.converter);n?this.converter=new n:this.converter=void 0}}else e.isFunction(this.converter)&&(this.converter={convert:this.converter})},getValue:function(t){var a=void 0;if(a=i.wire.isWire(this.object)?this.object.getValue(t):this.object||t,this.property){var o=this.property.split(".");for(var r in o){if(!a)return a;a=this._getPropertyValue(a,o[r])}}var n=void 0;return n=this._getValue?this._getValue(a):a,n&&(this.type&&("string"==this.type?n=n.toString():"number"==this.type?n=parseInt(n,10):"boolean"==this.type?n="false"!=n:"array"==this.type&&(e.isArray(n)||(n=[n]))),this.converter&&this.converter.convert&&(n=this.converter.convert(n,this))),n},setValue:function(e,t){var a=void 0;a=i.wire.isWire(this.object)?this.object.getValue(t):this.object||t;var o,r=void 0;if(this.property){if(!a){if(!i.wire.isWire(this.object))throw new Error(this._wireClass+".setValue(): invalid object");a={},this.object.setValue(a,t)}for(var n=this.property.split("."),s=n.length-1,l=0;s>l;l++){var d=n[l];o=this._getPropertyValue(a,d),o||(o={},this._setPropertyValue(a,d,o)),a=o}r=n[s]}if(this._setValue){r&&(o=this._getPropertyValue(a,r),o||(o={},this._setPropertyValue(a,r,o)),a=o);var u=this._setValue(a,e);if(!a&&u){if(!i.wire.isWire(this.object))throw new Error(this._wireClass+".setValue(): invalid object");this.object.setValue(u,t)}}else if(r)this._setPropertyValue(a,r,e);else{if(!i.wire.isWire(this.object))throw new Error(this._wireClass+".setValue(): invalid property");this.object.setValue(e,t)}},_getPropertyValue:function(t,i){var a=void 0,o=i.indexOf("[");if(o>=0){var r=i.indexOf("]"),n=i.substring(o+1,r),s=null;0===o?s=t:(i=i.substring(0,o),s=this._getPropertyValue(t,i),s&&!e.isArray(s)&&(s=[s])),s&&(a=s[n])}else if(t.getPropertyValue)a=t.getPropertyValue(i);else{var l="get"+i.charAt(0).toUpperCase()+i.substring(1);a=this._useGet(t)?t.get(i):this._useAttr(t)?t.attr(i):t[l]?t[l]():t[i]}return a},_setPropertyValue:function(e,t,i){var a=t.indexOf("[");if(a>=0){var o=t.indexOf("]"),r=t.substring(a+1,o),n=null;0===a?n=e:(t=t.substring(0,a),n=this._getPropertyValue(e,t),n||(n=[],this._setPropertyValue(e,t,n))),n[r]=i}else if(e.setPropertyValue)e.setPropertyValue(t,i);else{var s="set"+t.charAt(0).toUpperCase()+t.substring(1);this._useSet(e)?e.set(t,i):this._useAttr(e)?e.attr(t,i):e[s]?e[s](i):e[t]=i}},_useGet:function(t){var i=!1;return e.isFunction(t.get)&&(i=!0),i},_useSet:function(t){var i=!1;return e.isFunction(t.set)&&(i=!0),i},_useAttr:function(t){var i=!1;return e.isFunction(t.attr)&&(i=!0),i}})});//# sourceMappingURL=Wire.js.map