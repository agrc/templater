//>>built
define("dojox/wire/Wire",["dojo","dijit","dojox","dojo/require!dojox/wire/_base"],function(e,t,i){e.provide("dojox.wire.Wire"),e.require("dojox.wire._base"),e.declare("dojox.wire.Wire",null,{_wireClass:"dojox.wire.Wire",constructor:function(t){if(e.mixin(this,t),this.converter)if(e.isString(this.converter)){var a=e.getObject(this.converter);if(e.isFunction(a))try{var o=new a;o&&!e.isFunction(o.convert)?this.converter={convert:a}:this.converter=o}catch(n){}else e.isObject(a)&&e.isFunction(a.convert)&&(this.converter=a);if(e.isString(this.converter)){var r=i.wire._getClass(this.converter);r?this.converter=new r:this.converter=void 0}}else e.isFunction(this.converter)&&(this.converter={convert:this.converter})},getValue:function(t){var a=void 0;if(a=i.wire.isWire(this.object)?this.object.getValue(t):this.object||t,this.property){var o=this.property.split(".");for(var n in o){if(!a)return a;a=this._getPropertyValue(a,o[n])}}var r=void 0;return r=this._getValue?this._getValue(a):a,r&&(this.type&&("string"==this.type?r=r.toString():"number"==this.type?r=parseInt(r,10):"boolean"==this.type?r="false"!=r:"array"==this.type&&(e.isArray(r)||(r=[r]))),this.converter&&this.converter.convert&&(r=this.converter.convert(r,this))),r},setValue:function(e,t){var a=void 0;a=i.wire.isWire(this.object)?this.object.getValue(t):this.object||t;var o,n=void 0;if(this.property){if(!a){if(!i.wire.isWire(this.object))throw new Error(this._wireClass+".setValue(): invalid object");a={},this.object.setValue(a,t)}for(var r=this.property.split("."),s=r.length-1,l=0;s>l;l++){var d=r[l];o=this._getPropertyValue(a,d),o||(o={},this._setPropertyValue(a,d,o)),a=o}n=r[s]}if(this._setValue){n&&(o=this._getPropertyValue(a,n),o||(o={},this._setPropertyValue(a,n,o)),a=o);var h=this._setValue(a,e);if(!a&&h){if(!i.wire.isWire(this.object))throw new Error(this._wireClass+".setValue(): invalid object");this.object.setValue(h,t)}}else if(n)this._setPropertyValue(a,n,e);else{if(!i.wire.isWire(this.object))throw new Error(this._wireClass+".setValue(): invalid property");this.object.setValue(e,t)}},_getPropertyValue:function(t,i){var a=void 0,o=i.indexOf("[");if(o>=0){var n=i.indexOf("]"),r=i.substring(o+1,n),s=null;0===o?s=t:(i=i.substring(0,o),s=this._getPropertyValue(t,i),s&&!e.isArray(s)&&(s=[s])),s&&(a=s[r])}else if(t.getPropertyValue)a=t.getPropertyValue(i);else{var l="get"+i.charAt(0).toUpperCase()+i.substring(1);a=this._useGet(t)?t.get(i):this._useAttr(t)?t.attr(i):t[l]?t[l]():t[i]}return a},_setPropertyValue:function(e,t,i){var a=t.indexOf("[");if(a>=0){var o=t.indexOf("]"),n=t.substring(a+1,o),r=null;0===a?r=e:(t=t.substring(0,a),r=this._getPropertyValue(e,t),r||(r=[],this._setPropertyValue(e,t,r))),r[n]=i}else if(e.setPropertyValue)e.setPropertyValue(t,i);else{var s="set"+t.charAt(0).toUpperCase()+t.substring(1);this._useSet(e)?e.set(t,i):this._useAttr(e)?e.attr(t,i):e[s]?e[s](i):e[t]=i}},_useGet:function(t){var i=!1;return e.isFunction(t.get)&&(i=!0),i},_useSet:function(t){var i=!1;return e.isFunction(t.set)&&(i=!0),i},_useAttr:function(t){var i=!1;return e.isFunction(t.attr)&&(i=!0),i}})});//# sourceMappingURL=Wire.js.map