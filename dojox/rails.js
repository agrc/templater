//>>built
define("dojox/rails",["dojo","dijit","dojox","dojo/require!dojo/NodeList-traverse"],function(e,t,a){e.provide("dojox.rails"),e.require("dojo.NodeList-traverse"),a.rails.live=function(t,i,r){e.isIE&&i.match(/^(on)?submit$/i)?a.rails.live(t,"click",function(t){var a=t.target,i=a.tagName.toLowerCase();if(("input"==i||"button"==i)&&"submit"==e.attr(a,"type").toLowerCase()){var o=e.query(a).closest("form");if(o.length)var d=e.connect(o[0],"submit",function(t){e.disconnect(d),r.call(t.target,t)})}}):e.connect(e.body(),i,function(a){var i=e.query(a.target).closest(t);i.length&&r.call(i[0],a)})},e.ready(function(t,a,i){return function(){var r=t.query,o=a.live,d=r("meta[name=csrf-token]").attr("content"),n=r("meta[name=csrf-param]").attr("content"),l=function(t,a){var i='<form style="display:none" method="post" action="'+t+'"><input type="hidden" name="_method" value="'+a+'" /><input type="hidden" name="'+n+'" value="'+d+'" /></form>';return e.place(i,e.body())},s=function(e){t.forEach(e,function(e){if(!t.attr(e,"disabled")){var a="input"==e.tagName.toLowerCase()?"value":"innerHTML",i=t.attr(e,"data-disable-with"),r=t.attr(e,a);t.attr(e,"disabled",!0),t.attr(e,"data-original-value",r),t.attr(e,a,i)}})},m={text:"text",json:"application/json","json-comment-optional":"text","json-comment-filtered":"text",javascript:"application/javascript",xml:"text/xml"},u=function(e){var a=e.target,i=a.tagName.toLowerCase(),r="form"==i.toLowerCase()?t.formToObject(a):{},o=t.attr(a,"data-type")||"javascript",d=(t.attr(a,"method")||t.attr(a,"data-method")||"get").toLowerCase(),n=t.attr(a,"action")||t.attr(a,"href");"form"!=i&&"get"!=d&&(a=l(n,d),d="POST"),e.preventDefault(),t.publish("ajax:before",[a]);t.xhr(d,{url:n,headers:{Accept:m[o]},content:r,handleAs:o,load:function(e,i){t.publish("ajax:success",[a,e,i])},error:function(e,i){t.publish("ajax:failure",[a,e,i])},handle:function(e,i){t.publish("ajax:complete",[a,e,i])}});t.publish("ajax:after",[a])},f=function(e){r("*[data-disable-with][disabled]",e).forEach(function(e){var a="input"==e.tagName.toLowerCase()?"value":"innerHTML",i=t.attr(e,"data-original-value");t.attr(e,"disabled",!1),t.attr(e,"data-original-value",null),t.attr(e,a,i)})},h=function(t){var a=t.target,i=l(a.href,e.attr(a,"data-method"));t.preventDefault(),i.submit()},c=function(e){var a=e.target,i=r("*[data-disable-with]",a);i.length&&s(i),t.attr(a,"data-remote")&&(e.preventDefault(),u(e))};o("*[data-confirm]","click",function(e){i.confirm(t.attr(e.target,"data-confirm"))?t.attr(e.target,"data-remote")&&u(e):e.preventDefault()}),t.subscribe("ajax:complete",f),o("a[data-remote]:not([data-confirm])","click",u),o("a[data-method]:not([data-remote])","click",h),o("form","submit",c)}}(e,a.rails,e.global))});//# sourceMappingURL=rails.js.map