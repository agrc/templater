//>>built
define("dojox/data/PersevereStore",["dojo","dojox","require","dojox/data/JsonQueryRestStore","dojox/rpc/Client","dojo/_base/url"],function(e,t,r){t.json.ref.serializeFunctions=!0;var i=e.declare("dojox.data.PersevereStore",t.data.JsonQueryRestStore,{useFullIdInQueries:!0,jsonQueryPagination:!1});return i.getStores=function(i,a){i=i&&(i.match(/\/$/)?i:i+"/")||"/",i.match(/^\w*:\/\//)&&(r("dojox/io/xhrScriptPlugin"),t.io.xhrScriptPlugin(i,"callback",t.io.xhrPlugins.fullHttpAdapter));var n=e.xhr;e.xhr=function(t,r){return(r.headers=r.headers||{})["Server-Methods"]="false",n.apply(e,arguments)};var o=t.rpc.Rest(i,!0);t.rpc._sync=a;var s,d=o("Class/"),l={},u=0;return d.addCallback(function(r){function a(r){r.extends&&r.extends.prototype&&(r.prototype&&r.prototype.isPrototypeOf(r.extends.prototype)||(a(r.extends),t.rpc.Rest._index[r.prototype.__id]=r.prototype=e.mixin(e.delegate(r.extends.prototype),r.prototype)))}function n(r,i){if(r&&i)for(var a in r){var n=r[a];"client"==n.runAt||i[a]||(i[a]=function(r){return function(){var i=e.rawXhrPost({url:this.__id,postData:t.json.ref.toJson({method:r,id:u++,params:e._toArray(arguments)}),handleAs:"json"});return i.addCallback(function(e){return e.error?new Error(e.error):e.result}),i}}(a))}}t.json.ref.resolveJson(r,{index:t.rpc.Rest._index,idPrefix:"/Class/",assignAbsoluteIds:!0});for(var o in r)if("object"==typeof r[o]){var d=r[o];a(d),n(d.methods,d.prototype=d.prototype||{}),n(d.staticMethods,d),l[r[o].id]=new t.data.PersevereStore({target:new e._Url(i,r[o].id)+"/",schema:d})}return s=l}),e.xhr=n,a?s:d},i.addProxy=function(){r("dojox/io/xhrPlugins"),t.io.xhrPlugins.addProxy("/proxy/")},i});//# sourceMappingURL=PersevereStore.js.map