//>>built
define("dojox/data/PersevereStore",["dojo","dojox","require","dojox/data/JsonQueryRestStore","dojox/rpc/Client","dojo/_base/url"],function(e,t,i){t.json.ref.serializeFunctions=!0;var a=e.declare("dojox.data.PersevereStore",t.data.JsonQueryRestStore,{useFullIdInQueries:!0,jsonQueryPagination:!1});return a.getStores=function(a,r){a=a&&(a.match(/\/$/)?a:a+"/")||"/",a.match(/^\w*:\/\//)&&(i("dojox/io/xhrScriptPlugin"),t.io.xhrScriptPlugin(a,"callback",t.io.xhrPlugins.fullHttpAdapter));var n=e.xhr;e.xhr=function(t,i){return(i.headers=i.headers||{})["Server-Methods"]="false",n.apply(e,arguments)};var o=t.rpc.Rest(a,!0);t.rpc._sync=r;var d,s=o("Class/"),l={},u=0;return s.addCallback(function(i){function r(i){i["extends"]&&i["extends"].prototype&&(i.prototype&&i.prototype.isPrototypeOf(i["extends"].prototype)||(r(i["extends"]),t.rpc.Rest._index[i.prototype.__id]=i.prototype=e.mixin(e.delegate(i["extends"].prototype),i.prototype)))}function n(i,a){if(i&&a)for(var r in i){var n=i[r];"client"==n.runAt||a[r]||(a[r]=function(i){return function(){var a=e.rawXhrPost({url:this.__id,postData:t.json.ref.toJson({method:i,id:u++,params:e._toArray(arguments)}),handleAs:"json"});return a.addCallback(function(e){return e.error?new Error(e.error):e.result}),a}}(r))}}t.json.ref.resolveJson(i,{index:t.rpc.Rest._index,idPrefix:"/Class/",assignAbsoluteIds:!0});for(var o in i)if("object"==typeof i[o]){var s=i[o];r(s),n(s.methods,s.prototype=s.prototype||{}),n(s.staticMethods,s),l[i[o].id]=new t.data.PersevereStore({target:new e._Url(a,i[o].id)+"/",schema:s})}return d=l}),e.xhr=n,r?d:s},a.addProxy=function(){i("dojox/io/xhrPlugins"),t.io.xhrPlugins.addProxy("/proxy/")},a});//# sourceMappingURL=PersevereStore.js.map