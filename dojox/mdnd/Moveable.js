//>>built
define("dojox/mdnd/Moveable",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/sniff","dojo/dom","dojo/dom-geometry","dojo/dom-style","dojo/_base/window"],function(e,t,i,a,o,n,r,s,d){return t("dojox.mdnd.Moveable",null,{handle:null,skip:!0,dragDistance:3,constructor:function(e,t){this.node=r.byId(t),this.d=this.node.ownerDocument,e||(e={}),this.handle=e.handle?r.byId(e.handle):null,this.handle||(this.handle=this.node),this.skip=e.skip,this.events=[a.connect(this.handle,"onmousedown",this,"onMouseDown")],dojox.mdnd.autoScroll&&(this.autoScroll=dojox.mdnd.autoScroll)},isFormElement:function(e){var t=e.target;return 3==t.nodeType&&(t=t.parentNode)," a button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0},onMouseDown:function(t){if(!this._isDragging){var i=1==(t.which||t.button);i&&(this.skip&&this.isFormElement(t)||(this.autoScroll&&(this.autoScroll.setAutoScrollNode(this.node),this.autoScroll.setAutoScrollMaxPage()),this.events.push(a.connect(this.d,"onmouseup",this,"onMouseUp")),this.events.push(a.connect(this.d,"onmousemove",this,"onFirstMove")),this._selectStart=a.connect(e.body(),"onselectstart",o.stop),this._firstX=t.clientX,this._firstY=t.clientY,o.stop(t)))}},onFirstMove:function(e){o.stop(e);var t=(this._firstX-e.clientX)*(this._firstX-e.clientX)+(this._firstY-e.clientY)*(this._firstY-e.clientY);t>this.dragDistance*this.dragDistance&&(this._isDragging=!0,a.disconnect(this.events.pop()),d.set(this.node,"width",s.getContentBox(this.node).w+"px"),this.initOffsetDrag(e),this.events.push(a.connect(this.d,"onmousemove",this,"onMove")))},initOffsetDrag:function(e){this.offsetDrag={l:e.pageX,t:e.pageY};var t=(this.node.style,s.position(this.node,!0));this.offsetDrag.l=t.x-this.offsetDrag.l,this.offsetDrag.t=t.y-this.offsetDrag.t;var i={x:t.x,y:t.y};this.size={w:t.w,h:t.h},this.onDragStart(this.node,i,this.size)},onMove:function(e){if(o.stop(e),!(8==n("ie")&&new Date-this.date<20)){this.autoScroll&&this.autoScroll.checkAutoScroll(e);var t={x:this.offsetDrag.l+e.pageX,y:this.offsetDrag.t+e.pageY},i=this.node.style;i.left=t.x+"px",i.top=t.y+"px",this.onDrag(this.node,t,this.size,{x:e.pageX,y:e.pageY}),8==n("ie")&&(this.date=new Date)}},onMouseUp:function(e){this._isDragging&&(o.stop(e),this._isDragging=!1,this.autoScroll&&this.autoScroll.stopAutoScroll(),delete this.onMove,this.onDragEnd(this.node),this.node.focus()),a.disconnect(this.events.pop()),a.disconnect(this.events.pop())},onDragStart:function(e,t,i){},onDragEnd:function(e){},onDrag:function(e,t,i,a){},destroy:function(){i.forEach(this.events,a.disconnect),this.events=this.node=null}})});//# sourceMappingURL=Moveable.js.map