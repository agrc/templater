//>>built
define("dojox/mdnd/PureSource",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/dom-class","dojo/dnd/common","dojo/dnd/Selector","dojo/dnd/Manager"],function(e,t,i,a,n,o,r,s,d){return t("dojox.mdnd.PureSource",s,{horizontal:!1,copyOnly:!0,skipForm:!1,withHandles:!1,isSource:!0,targetState:"Disabled",generateText:!0,constructor:function(e,t){i.mixin(this,i.mixin({},t));this.accept;this.isDragging=!1,this.mouseDown=!1,this.sourceState="",o.add(this.node,"dojoDndSource"),this.horizontal&&o.add(this.node,"dojoDndHorizontal"),this.topics=[a.subscribe("/dnd/cancel",this,"onDndCancel"),a.subscribe("/dnd/drop",this,"onDndCancel")]},onDndCancel:function(){this.isDragging=!1,this.mouseDown=!1,delete this.mouseButton},copyState:function(e){return this.copyOnly||e},destroy:function(){dojox.mdnd.PureSource.superclass.destroy.call(this),n.forEach(this.topics,a.unsubscribe),this.targetAnchor=null},markupFactory:function(e,t){return e._skipStartup=!0,new dojox.mdnd.PureSource(t,e)},onMouseMove:function(e){if(!this.isDragging){dojox.mdnd.PureSource.superclass.onMouseMove.call(this,e);var t=d.manager();if(this.mouseDown&&!this.isDragging&&this.isSource){var i=this.getSelectedNodes();i.length&&(t.startDrag(this,i,this.copyState(a.isCopyKey(e))),this.isDragging=!0)}}},onMouseDown:function(e){!this._legalMouseDown(e)||this.skipForm&&r.isFormElement(e)||(this.mouseDown=!0,this.mouseButton=e.button,dojox.mdnd.PureSource.superclass.onMouseDown.call(this,e))},onMouseUp:function(e){this.mouseDown&&(this.mouseDown=!1,dojox.mdnd.PureSource.superclass.onMouseUp.call(this,e))},onOverEvent:function(){dojox.mdnd.PureSource.superclass.onOverEvent.call(this),d.manager().overSource(this)},onOutEvent:function(){dojox.mdnd.PureSource.superclass.onOutEvent.call(this),d.manager().outSource(this)},_markDndStatus:function(e){this._changeState("Source",e?"Copied":"Moved")},_legalMouseDown:function(e){if(!this.withHandles)return!0;for(var t=e.target;t&&!o.contains(t,"dojoDndItem");t=t.parentNode)if(o.contains(t,"dojoDndHandle"))return!0;return!1}})});//# sourceMappingURL=PureSource.js.map