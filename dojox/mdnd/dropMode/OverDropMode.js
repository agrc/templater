//>>built
define("dojox/mdnd/dropMode/OverDropMode",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/connect","dojo/_base/array","dojo/dom-geometry","dojox/mdnd/AreaManager"],function(e,t,i,a,n){var o=t("dojox.mdnd.dropMode.OverDropMode",null,{_oldXPoint:null,_oldYPoint:null,_oldBehaviour:"up",constructor:function(){this._dragHandler=[i.connect(dojox.mdnd.areaManager(),"onDragEnter",function(e,t){var i=dojox.mdnd.areaManager();-1==i._oldIndexArea&&(i._oldIndexArea=i._lastValidIndexArea)})]},addArea:function(e,t){var i=e.length,a=n.position(t.node,!0);if(t.coords={x:a.x,y:a.y},0==i)e.push(t);else{for(var o=t.coords.x,r=0;i>r;r++)if(o<e[r].coords.x){for(var s=i-1;s>=r;s--)e[s+1]=e[s];e[r]=t;break}r==i&&e.push(t)}return e},updateAreas:function(e){for(var t=e.length,i=0;t>i;i++)this._updateArea(e[i])},_updateArea:function(e){var t=n.position(e.node,!0);e.coords.x=t.x,e.coords.x2=t.x+t.w,e.coords.y=t.y},initItems:function(e){a.forEach(e.items,function(e){var t=e.item.node,i=n.position(t,!0),a=i.y+i.h/2;e.y=a}),e.initItems=!0},refreshItems:function(e,t,i,a){if(-1!=t&&e&&i&&i.h){var n=i.h;e.margin&&(n+=e.margin.t);for(var o=e.items.length,r=t;o>r;r++){var s=e.items[r];a?s.y+=n:s.y-=n}}},getDragPoint:function(e,t,i){return{x:i.x,y:i.y}},getTargetArea:function(e,t,i){var a=0,n=t.x,o=t.y,r=e.length,s=0,l="right",d=!1;if(-1==i||arguments.length<3?d=!0:this._checkInterval(e,i,n,o)?a=i:(this._oldXPoint<n?s=i+1:(s=i-1,r=0,l="left"),d=!0),d)if("right"===l){for(var c=s;r>c;c++)if(this._checkInterval(e,c,n,o)){a=c;break}c==r&&(a=-1)}else{for(var c=s;c>=r;c--)if(this._checkInterval(e,c,n,o)){a=c;break}c==r-1&&(a=-1)}return this._oldXPoint=n,a},_checkInterval:function(e,t,i,a){var n=e[t],o=n.node,r=n.coords,s=r.x,l=r.x2,d=r.y,c=d+o.offsetHeight;return i>=s&&l>=i&&a>=d&&c>=a},getDropIndex:function(e,t){var i=e.items.length,a=(e.coords,t.y);if(i>0)for(var n=0;i>n;n++){if(a<e.items[n].y)return n;if(n==i-1)return-1}return-1},destroy:function(){a.forEach(this._dragHandler,i.disconnect)}});return dojox.mdnd.areaManager()._dropMode=new dojox.mdnd.dropMode.OverDropMode,o});//# sourceMappingURL=OverDropMode.js.map