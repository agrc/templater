//>>built
define("dojox/mdnd/dropMode/VerticalDropMode",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/dom-geometry","dojox/mdnd/AreaManager"],function(e,t,i,a){var r=t("dojox.mdnd.dropMode.VerticalDropMode",null,{_oldXPoint:null,_oldYPoint:null,_oldBehaviour:"up",addArea:function(e,t){var i=e.length,r=a.position(t.node,!0);if(t.coords={x:r.x,y:r.y},0==i)e.push(t);else{for(var o=t.coords.x,n=0;i>n;n++)if(o<e[n].coords.x){for(var s=i-1;s>=n;s--)e[s+1]=e[s];e[n]=t;break}n==i&&e.push(t)}return e},updateAreas:function(e){var t=e.length;if(t>1)for(var i,a,r=0;t>r;r++){var o,n=e[r];n.coords.x1=-1,n.coords.x2=-1,0==r?(o=e[r+1],this._updateArea(n),this._updateArea(o),i=n.coords.x+n.node.offsetWidth,a=o.coords.x,n.coords.x2=i+(a-i)/2):r==t-1?n.coords.x1=e[r-1].coords.x2:(o=e[r+1],this._updateArea(o),i=n.coords.x+n.node.offsetWidth,a=o.coords.x,n.coords.x1=e[r-1].coords.x2,n.coords.x2=i+(a-i)/2)}},_updateArea:function(e){var t=a.position(e.node,!0);e.coords.x=t.x,e.coords.y=t.y},initItems:function(e){i.forEach(e.items,function(e){var t=e.item.node,i=a.position(t,!0),r=i.y+i.h/2;e.y=r}),e.initItems=!0},refreshItems:function(e,t,i,a){if(-1!=t&&e&&i&&i.h){var r=i.h;e.margin&&(r+=e.margin.t);for(var o=e.items.length,n=t;o>n;n++){var s=e.items[n];a?s.y+=r:s.y-=r}}},getDragPoint:function(e,t,i){var a=e.y;return this._oldYPoint&&(a>this._oldYPoint?(this._oldBehaviour="down",a+=t.h):a<=this._oldYPoint&&(this._oldBehaviour="up")),this._oldYPoint=a,{x:e.x+t.w/2,y:a}},getTargetArea:function(e,t,i){var a=0,r=t.x,o=e.length;if(o>1){var n=0,s="right",d=!1;if(-1==i||arguments.length<3?d=!0:this._checkInterval(e,i,r)?a=i:(this._oldXPoint<r?n=i+1:(n=i-1,o=0,s="left"),d=!0),d)if("right"===s){for(var l=n;o>l;l++)if(this._checkInterval(e,l,r)){a=l;break}}else for(var l=n;l>=o;l--)if(this._checkInterval(e,l,r)){a=l;break}}return this._oldXPoint=r,a},_checkInterval:function(e,t,i){var a=e[t].coords;if(-1==a.x1){if(i<=a.x2)return!0}else if(-1==a.x2){if(i>a.x1)return!0}else if(a.x1<i&&i<=a.x2)return!0;return!1},getDropIndex:function(e,t){var i=e.items.length,a=(e.coords,t.y);if(i>0)for(var r=0;i>r;r++){if(a<e.items[r].y)return r;if(r==i-1)return-1}return-1},destroy:function(){}});return dojox.mdnd.areaManager()._dropMode=new dojox.mdnd.dropMode.VerticalDropMode,r});//# sourceMappingURL=VerticalDropMode.js.map