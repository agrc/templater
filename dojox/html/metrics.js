//>>built
define("dojox/html/metrics",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(e,t,i,a,o,n,r){var s=t.getObject("dojox.html.metrics",!0),l=t.getObject("dojox");s.getFontMeasurements=function(){var e,t={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};i("ie")&&((e=n.doc.documentElement.style.fontSize||"")||(n.doc.documentElement.style.fontSize="100%"));var a=n.doc.createElement("div"),o=a.style;o.position="absolute",o.left="-100px",o.top="0",o.width="30px",o.height="1000em",o.borderWidth="0",o.margin="0",o.padding="0",o.outline="0",o.lineHeight="1",o.overflow="hidden",n.body().appendChild(a);for(var r in t)o.fontSize=r,t[r]=16*Math.round(12*a.offsetHeight/16)/12/1e3;return i("ie")&&(n.doc.documentElement.style.fontSize=e),n.body().removeChild(a),a=null,t};var d=null;s.getCachedFontMeasurements=function(e){return!e&&d||(d=s.getFontMeasurements()),d};var u=null,h={};s.getTextBox=function(e,t,i){var a,o;if(u)a=u;else{a=u=n.doc.createElement("div");var s=n.doc.createElement("div");s.appendChild(a),o=s.style,o.overflow="scroll",o.position="absolute",o.left="0px",o.top="-10000px",o.width="1px",o.height="1px",o.visibility="hidden",o.borderWidth="0",o.margin="0",o.padding="0",o.outline="0",n.body().appendChild(s)}if(a.className="",o=a.style,o.borderWidth="0",o.margin="0",o.padding="0",o.outline="0",arguments.length>1&&t)for(var l in t)l in h||(o[l]=t[l]);arguments.length>2&&i&&(a.className=i),a.innerHTML=e;var d=r.position(a);return d.w=a.parentNode.scrollWidth,d};var c={w:16,h:16};return s.getScrollbar=function(){return{w:c.w,h:c.h}},s._fontResizeNode=null,s.initOnFontResize=function(e){var t=s._fontResizeNode=n.doc.createElement("iframe"),a=t.style;a.position="absolute",a.width="5em",a.height="10em",a.top="-10000px",a.display="none",i("ie")?t.onreadystatechange=function(){"complete"==t.contentWindow.document.readyState&&(t.onresize=t.contentWindow.parent[l._scopeName].html.metrics._fontresize)}:t.onload=function(){t.contentWindow.onresize=t.contentWindow.parent[l._scopeName].html.metrics._fontresize},t.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'"),n.body().appendChild(t),s.initOnFontResize=function(){}},s.onFontResize=function(){},s._fontresize=function(){s.onFontResize()},o.addOnUnload(function(){var e=s._fontResizeNode;e&&(i("ie")&&e.onresize?e.onresize=null:e.contentWindow&&e.contentWindow.onresize&&(e.contentWindow.onresize=null),s._fontResizeNode=null)}),a(function(){try{var t=n.doc.createElement("div");t.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;",n.body().appendChild(t),c.w=t.offsetWidth-t.clientWidth,c.h=t.offsetHeight-t.clientHeight,n.body().removeChild(t),delete t}catch(e){}"fontSizeWatch"in e.config&&e.config.fontSizeWatch&&s.initOnFontResize()}),s});//# sourceMappingURL=metrics.js.map