//>>built
define("dojox/html/metrics",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(e,t,i,r,a,o,n){var s=t.getObject("dojox.html.metrics",!0),l=t.getObject("dojox");s.getFontMeasurements=function(){var e,t={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};i("ie")&&(e=o.doc.documentElement.style.fontSize||"",e||(o.doc.documentElement.style.fontSize="100%"));var r=o.doc.createElement("div"),a=r.style;a.position="absolute",a.left="-100px",a.top="0",a.width="30px",a.height="1000em",a.borderWidth="0",a.margin="0",a.padding="0",a.outline="0",a.lineHeight="1",a.overflow="hidden",o.body().appendChild(r);for(var n in t)a.fontSize=n,t[n]=16*Math.round(12*r.offsetHeight/16)/12/1e3;return i("ie")&&(o.doc.documentElement.style.fontSize=e),o.body().removeChild(r),r=null,t};var d=null;s.getCachedFontMeasurements=function(e){return!e&&d||(d=s.getFontMeasurements()),d};var u=null,c={};s.getTextBox=function(e,t,i){var r,a;if(u)r=u;else{r=u=o.doc.createElement("div");var s=o.doc.createElement("div");s.appendChild(r),a=s.style,a.overflow="scroll",a.position="absolute",a.left="0px",a.top="-10000px",a.width="1px",a.height="1px",a.visibility="hidden",a.borderWidth="0",a.margin="0",a.padding="0",a.outline="0",o.body().appendChild(s)}if(r.className="",a=r.style,a.borderWidth="0",a.margin="0",a.padding="0",a.outline="0",arguments.length>1&&t)for(var l in t)l in c||(a[l]=t[l]);arguments.length>2&&i&&(r.className=i),r.innerHTML=e;var d=n.position(r);return d.w=r.parentNode.scrollWidth,d};var h={w:16,h:16};return s.getScrollbar=function(){return{w:h.w,h:h.h}},s._fontResizeNode=null,s.initOnFontResize=function(e){var t=s._fontResizeNode=o.doc.createElement("iframe"),r=t.style;r.position="absolute",r.width="5em",r.height="10em",r.top="-10000px",r.display="none",i("ie")?t.onreadystatechange=function(){"complete"==t.contentWindow.document.readyState&&(t.onresize=t.contentWindow.parent[l._scopeName].html.metrics._fontresize)}:t.onload=function(){t.contentWindow.onresize=t.contentWindow.parent[l._scopeName].html.metrics._fontresize},t.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'"),o.body().appendChild(t),s.initOnFontResize=function(){}},s.onFontResize=function(){},s._fontresize=function(){s.onFontResize()},a.addOnUnload(function(){var e=s._fontResizeNode;e&&(i("ie")&&e.onresize?e.onresize=null:e.contentWindow&&e.contentWindow.onresize&&(e.contentWindow.onresize=null),s._fontResizeNode=null)}),r(function(){try{var t=o.doc.createElement("div");t.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;",o.body().appendChild(t),h.w=t.offsetWidth-t.clientWidth,h.h=t.offsetHeight-t.clientHeight,o.body().removeChild(t),delete t}catch(i){}"fontSizeWatch"in e.config&&e.config.fontSizeWatch&&s.initOnFontResize()}),s});//# sourceMappingURL=metrics.js.map