//>>built
define("dojox/html/metrics",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(e,t,a,i,r,n,o){var s=t.getObject("dojox.html.metrics",!0),l=t.getObject("dojox");s.getFontMeasurements=function(){var e,t={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};a("ie")&&(e=n.doc.documentElement.style.fontSize||"",e||(n.doc.documentElement.style.fontSize="100%"));var i=n.doc.createElement("div"),r=i.style;r.position="absolute",r.left="-100px",r.top="0",r.width="30px",r.height="1000em",r.borderWidth="0",r.margin="0",r.padding="0",r.outline="0",r.lineHeight="1",r.overflow="hidden",n.body().appendChild(i);for(var o in t)r.fontSize=o,t[o]=16*Math.round(12*i.offsetHeight/16)/12/1e3;return a("ie")&&(n.doc.documentElement.style.fontSize=e),n.body().removeChild(i),i=null,t};var d=null;s.getCachedFontMeasurements=function(e){return!e&&d||(d=s.getFontMeasurements()),d};var u=null,c={};s.getTextBox=function(e,t,a){var i,r;if(u)i=u;else{i=u=n.doc.createElement("div");var s=n.doc.createElement("div");s.appendChild(i),r=s.style,r.overflow="scroll",r.position="absolute",r.left="0px",r.top="-10000px",r.width="1px",r.height="1px",r.visibility="hidden",r.borderWidth="0",r.margin="0",r.padding="0",r.outline="0",n.body().appendChild(s)}if(i.className="",r=i.style,r.borderWidth="0",r.margin="0",r.padding="0",r.outline="0",arguments.length>1&&t)for(var l in t)l in c||(r[l]=t[l]);arguments.length>2&&a&&(i.className=a),i.innerHTML=e;var d=o.position(i);return d.w=i.parentNode.scrollWidth,d};var m={w:16,h:16};return s.getScrollbar=function(){return{w:m.w,h:m.h}},s._fontResizeNode=null,s.initOnFontResize=function(e){var t=s._fontResizeNode=n.doc.createElement("iframe"),i=t.style;i.position="absolute",i.width="5em",i.height="10em",i.top="-10000px",i.display="none",a("ie")?t.onreadystatechange=function(){"complete"==t.contentWindow.document.readyState&&(t.onresize=t.contentWindow.parent[l._scopeName].html.metrics._fontresize)}:t.onload=function(){t.contentWindow.onresize=t.contentWindow.parent[l._scopeName].html.metrics._fontresize},t.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'"),n.body().appendChild(t),s.initOnFontResize=function(){}},s.onFontResize=function(){},s._fontresize=function(){s.onFontResize()},r.addOnUnload(function(){var e=s._fontResizeNode;e&&(a("ie")&&e.onresize?e.onresize=null:e.contentWindow&&e.contentWindow.onresize&&(e.contentWindow.onresize=null),s._fontResizeNode=null)}),i(function(){try{var t=n.doc.createElement("div");t.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;",n.body().appendChild(t),m.w=t.offsetWidth-t.clientWidth,m.h=t.offsetHeight-t.clientHeight,n.body().removeChild(t),delete t}catch(a){}"fontSizeWatch"in e.config&&e.config.fontSizeWatch&&s.initOnFontResize()}),s});//# sourceMappingURL=metrics.js.map