//>>built
define("dojox/html/format",["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(e,t,a,i,r){var o=e.getObject("dojox.html.format",!0);return o.prettyPrint=function(o,n,s,l,d){var c,h=[],u=0,m=[],f="	",p="",g=[],y=/[=]([^"']+?)(\s|>)/g,v=/style=("[^"]*"|'[^']*'|\S*)/gi,b=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(n&&n>0&&10>n)for(f="",c=0;n>c;c++)f+=" ";var M=i.doc.createElement("div");M.innerHTML=o;var w=t.encode,j=t.decode,k=function(e){switch(e){case"a":case"b":case"strong":case"s":case"strike":case"i":case"u":case"em":case"sup":case"sub":case"span":case"font":case"big":case"cite":case"q":case"small":return!0;default:return!1}},x=M.ownerDocument.createElement("div"),_=function(e){var t=e.cloneNode(!1);x.appendChild(t);var a=x.innerHTML;return x.innerHTML="",a},T=function(){var e,t="";for(e=0;u>e;e++)t+=f;return t.length},C=function(){var e;for(e=0;u>e;e++)h.push(f)},I=function(){h.push("\n")},F=function(e){p+=w(e.nodeValue,l)},E=function(t){var a,i,r=t.split("\n");for(a=0;a<r.length;a++)r[a]=e.trim(r[a]);if(t=r.join(" "),t=e.trim(t),""!==t){var o=[];if(s&&s>0){var n=T(),l=s;for(s>n&&(l-=n);t;)if(t.length>s){for(a=l;a>0&&" "!==t.charAt(a);a--);if(!a)for(a=l;a<t.length&&" "!==t.charAt(a);a++);var d=t.substring(0,a);if(d=e.trim(d),t=e.trim(t.substring(a==t.length?t.length:a+1,t.length)),d){for(i="",a=0;u>a;a++)i+=f;d=i+d+"\n"}o.push(d)}else{for(i="",a=0;u>a;a++)i+=f;t=i+t+"\n",o.push(t),t=null}return o.join("")}for(i="",a=0;u>a;a++)i+=f;return t=i+t+"\n"}return""},S=function(e){return e&&(e=e.replace(/&quot;/gi,'"'),e=e.replace(/&gt;/gi,">"),e=e.replace(/&lt;/gi,"<"),e=e.replace(/&amp;/gi,"&")),e},A=function(t){if(t){t=S(t);var a,i,r,o,n=0,s=t.split("\n"),l=[];for(a=0;a<s.length;a++){var d=s[a],c=d.indexOf("\n")>-1;if(d=e.trim(d)){var h=n;for(r=0;r<d.length;r++){var m=d.charAt(r);"{"===m?n++:"}"===m&&(n--,h=n)}for(o="",i=0;u+h>i;i++)o+=f;l.push(o+d+"\n")}else c&&0===a&&l.push("\n")}t=l.join("")}return t},P=function(t){var i=t.nodeName.toLowerCase(),r=e.trim(_(t)),o=r.substring(0,r.indexOf(">")+1);o=o.replace(y,'="$1"$2'),o=o.replace(v,function(t){var i=t.substring(0,6),r=t.substring(6,t.length),o=r.charAt(0);r=e.trim(r.substring(1,r.length-1)),r=r.split(";");var n=[];a.forEach(r,function(t){t=e.trim(t),t&&(t=t.substring(0,t.indexOf(":")).toLowerCase()+t.substring(t.indexOf(":"),t.length),n.push(t))}),n=n.sort(),r=n.join("; ");var s=e.trim(r);return s&&";"!==s?(r+=";",i+o+r+o):""});var n=[];o=o.replace(b,function(t){return n.push(e.trim(t)),""}),n=n.sort(),o="<"+i,n.length&&(o+=" "+n.join(" ")),-1!=r.indexOf("</")?(m.push(i),o+=">"):(o+=d?" />":">",m.push(!1));var s=k(i);g.push(s),p&&!s&&(h.push(E(p)),p=""),s?p+=o:(C(),h.push(o),I(),u++)},N=function(){var e=g.pop();p&&!e&&(h.push(E(p)),p="");var t=m.pop();t?(t="</"+t+">",e?p+=t:(u--,C(),h.push(t),I())):u--},z=function(e){var t=j(e.nodeValue,l);C(),h.push("<!--"),I(),u++,h.push(E(t)),u--,C(),h.push("-->"),I()},G=function(t){var a=t.childNodes;if(a){var i;for(i=0;i<a.length;i++){var o=a[i];if(1===o.nodeType){var n=e.trim(o.tagName.toLowerCase());if(r("ie")&&o.parentNode!=t)continue;if(n&&"/"===n.charAt(0))continue;if(P(o),"script"===n)h.push(A(o.innerHTML));else if("pre"===n){var s=o.innerHTML;r("mozilla")&&(s=s.replace("<br>","\n"),s=s.replace("<pre>",""),s=s.replace("</pre>","")),"\n"!==s.charAt(s.length-1)&&(s+="\n"),h.push(s)}else G(o);N()}else 3===o.nodeType||4===o.nodeType?F(o):8===o.nodeType&&z(o)}}};return G(M),p&&(h.push(E(p)),p=""),h.join("")},o});//# sourceMappingURL=format.js.map