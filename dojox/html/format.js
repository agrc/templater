//>>built
define("dojox/html/format",["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(e,t,i,a,o){var r=e.getObject("dojox.html.format",!0);return r.prettyPrint=function(r,n,s,d,l){var h,c=[],u=0,m=[],f="	",p="",g=[],y=/[=]([^"']+?)(\s|>)/g,v=/style=("[^"]*"|'[^']*'|\S*)/gi,b=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(n&&n>0&&10>n)for(f="",h=0;n>h;h++)f+=" ";var w=a.doc.createElement("div");w.innerHTML=r;var _=t.encode,x=t.decode,j=function(e){switch(e){case"a":case"b":case"strong":case"s":case"strike":case"i":case"u":case"em":case"sup":case"sub":case"span":case"font":case"big":case"cite":case"q":case"small":return!0;default:return!1}},M=w.ownerDocument.createElement("div"),k=function(e){var t=e.cloneNode(!1);M.appendChild(t);var i=M.innerHTML;return M.innerHTML="",i},C=function(){var e,t="";for(e=0;u>e;e++)t+=f;return t.length},T=function(){var e;for(e=0;u>e;e++)c.push(f)},I=function(){c.push("\n")},S=function(e){p+=_(e.nodeValue,d)},F=function(t){var i,a,o=t.split("\n");for(i=0;i<o.length;i++)o[i]=e.trim(o[i]);if(t=o.join(" "),t=e.trim(t),""!==t){var r=[];if(s&&s>0){var n=C(),d=s;for(s>n&&(d-=n);t;)if(t.length>s){for(i=d;i>0&&" "!==t.charAt(i);i--);if(!i)for(i=d;i<t.length&&" "!==t.charAt(i);i++);var l=t.substring(0,i);if(l=e.trim(l),t=e.trim(t.substring(i==t.length?t.length:i+1,t.length)),l){for(a="",i=0;u>i;i++)a+=f;l=a+l+"\n"}r.push(l)}else{for(a="",i=0;u>i;i++)a+=f;t=a+t+"\n",r.push(t),t=null}return r.join("")}for(a="",i=0;u>i;i++)a+=f;return t=a+t+"\n"}return""},A=function(e){return e&&(e=e.replace(/&quot;/gi,'"'),e=e.replace(/&gt;/gi,">"),e=e.replace(/&lt;/gi,"<"),e=e.replace(/&amp;/gi,"&")),e},E=function(t){if(t){t=A(t);var i,a,o,r,n=0,s=t.split("\n"),d=[];for(i=0;i<s.length;i++){var l=s[i],h=l.indexOf("\n")>-1;if(l=e.trim(l)){var c=n;for(o=0;o<l.length;o++){var m=l.charAt(o);"{"===m?n++:"}"===m&&(n--,c=n)}for(r="",a=0;u+c>a;a++)r+=f;d.push(r+l+"\n")}else h&&0===i&&d.push("\n")}t=d.join("")}return t},N=function(t){var a=t.nodeName.toLowerCase(),o=e.trim(k(t)),r=o.substring(0,o.indexOf(">")+1);r=r.replace(y,'="$1"$2'),r=r.replace(v,function(t){var a=t.substring(0,6),o=t.substring(6,t.length),r=o.charAt(0);o=e.trim(o.substring(1,o.length-1)),o=o.split(";");var n=[];i.forEach(o,function(t){t=e.trim(t),t&&(t=t.substring(0,t.indexOf(":")).toLowerCase()+t.substring(t.indexOf(":"),t.length),n.push(t))}),n=n.sort(),o=n.join("; ");var s=e.trim(o);return s&&";"!==s?(o+=";",a+r+o+r):""});var n=[];r=r.replace(b,function(t){return n.push(e.trim(t)),""}),n=n.sort(),r="<"+a,n.length&&(r+=" "+n.join(" ")),-1!=o.indexOf("</")?(m.push(a),r+=">"):(r+=l?" />":">",m.push(!1));var s=j(a);g.push(s),p&&!s&&(c.push(F(p)),p=""),s?p+=r:(T(),c.push(r),I(),u++)},P=function(){var e=g.pop();p&&!e&&(c.push(F(p)),p="");var t=m.pop();t?(t="</"+t+">",e?p+=t:(u--,T(),c.push(t),I())):u--},B=function(e){var t=x(e.nodeValue,d);T(),c.push("<!--"),I(),u++,c.push(F(t)),u--,T(),c.push("-->"),I()},D=function(t){var i=t.childNodes;if(i){var a;for(a=0;a<i.length;a++){var r=i[a];if(1===r.nodeType){var n=e.trim(r.tagName.toLowerCase());if(o("ie")&&r.parentNode!=t)continue;if(n&&"/"===n.charAt(0))continue;if(N(r),"script"===n)c.push(E(r.innerHTML));else if("pre"===n){var s=r.innerHTML;o("mozilla")&&(s=s.replace("<br>","\n"),s=s.replace("<pre>",""),s=s.replace("</pre>","")),"\n"!==s.charAt(s.length-1)&&(s+="\n"),c.push(s)}else D(r);P()}else 3===r.nodeType||4===r.nodeType?S(r):8===r.nodeType&&B(r)}}};return D(w),p&&(c.push(F(p)),p=""),c.join("")},r});//# sourceMappingURL=format.js.map