//>>built
define("dojox/html/ellipsis",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojo/colors"],function(e){if(e.isFF<7){var t=1;"dojoxFFEllipsisDelay"in e.config&&(t=Number(e.config.dojoxFFEllipsisDelay),isNaN(t)&&(t=1));try{var i=function(){var e="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul",t=document.createElementNS(e,"window"),i=document.createElementNS(e,"description");return i.setAttribute("crop","end"),t.appendChild(i),function(e){var i=t.cloneNode(!0);i.firstChild.setAttribute("value",e.textContent),e.innerHTML="",e.appendChild(i)}}()}catch(a){}var r,o,n,s=e.create,l=e.doc,d=e.place,h=s("iframe",{className:"dojoxEllipsisIFrame",src:"javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'",style:{display:"none"}}),u=function(e,t){if(!e.collapsed)if(t>0){do u(e),t--;while(t)}else if(3==e.endContainer.nodeType&&e.endOffset>0)e.setEnd(e.endContainer,e.endOffset-1);else{if(3==e.endContainer.nodeType)return e.setEndBefore(e.endContainer),void u(e);if(!(e.endOffset&&e.endContainer.childNodes.length>=e.endOffset))return e.setEndBefore(e.endContainer),void u(e);var i=e.endContainer.childNodes[e.endOffset-1];if(3!=i.nodeType)return i.childNodes.length?(e.setEnd(i,i.childNodes.length),void u(e)):(e.setEndBefore(i),void u(e));e.setEnd(i,i.length-1)}},c=function(e){var t=s("div",{className:"dojoxEllipsisContainer"}),i=s("div",{className:"dojoxEllipsisShown",style:{display:"none"}});e.parentNode.replaceChild(t,e),t.appendChild(e),t.appendChild(i);var a=h.cloneNode(!0),r=e.style,o=i.style,n=function(){if(r.display="",o.display="none",!(e.scrollWidth<=e.offsetWidth)){var t=l.createRange();t.selectNodeContents(e),r.display="none",o.display="";var a=!1;do{var n=1;d(t.cloneContents(),i,"only");var s=i.scrollWidth,h=i.offsetWidth;a=h>=s;var c=1-1*h/s;c>0&&(n=Math.max(Math.round(i.textContent.length*c)-1,1)),u(t,n)}while(!t.collapsed&&!a)}};a.onload=function(){a.contentWindow.onresize=n,n()},t.appendChild(a)},m=e.hasClass,f=e.doc;f.querySelectorAll?(r=f,o="querySelectorAll",n=".dojoxEllipsis"):f.getElementsByClassName?(r=f,o="getElementsByClassName",n="dojoxEllipsis"):(r=e,o="query",n=".dojoxEllipsis"),fx=function(){e.forEach(r[o].apply(r,[n]),function(e){e&&!e._djx_ellipsis_done&&(e._djx_ellipsis_done=!0,i&&e.textContent==e.innerHTML&&!m(e,"dojoxEllipsisSelectable")?i(e):c(e))})},e.addOnLoad(function(){var i=null,a=null,r=function(){a&&(e.disconnect(a),a=null),i&&clearTimeout(i),i=setTimeout(function(){i=null,fx(),a=e.connect(e.body(),"DOMSubtreeModified",r)},t)};r()})}});//# sourceMappingURL=ellipsis.js.map