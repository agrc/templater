//>>built
define("dojox/html/ellipsis",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojo/colors"],function(e){if(e.isFF<7){var t=1;"dojoxFFEllipsisDelay"in e.config&&(t=Number(e.config.dojoxFFEllipsisDelay),isNaN(t)&&(t=1));try{var a=function(){var e="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul",t=document.createElementNS(e,"window"),a=document.createElementNS(e,"description");return a.setAttribute("crop","end"),t.appendChild(a),function(e){var a=t.cloneNode(!0);a.firstChild.setAttribute("value",e.textContent),e.innerHTML="",e.appendChild(a)}}()}catch(e){}var i,r,n,o=e.create,s=e.doc,l=e.place,d=o("iframe",{className:"dojoxEllipsisIFrame",src:"javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'",style:{display:"none"}}),u=function(e,t){if(!e.collapsed)if(t>0)do{u(e),t--}while(t);else if(3==e.endContainer.nodeType&&e.endOffset>0)e.setEnd(e.endContainer,e.endOffset-1);else{if(3==e.endContainer.nodeType)return e.setEndBefore(e.endContainer),void u(e);if(!(e.endOffset&&e.endContainer.childNodes.length>=e.endOffset))return e.setEndBefore(e.endContainer),void u(e);var a=e.endContainer.childNodes[e.endOffset-1];if(3!=a.nodeType)return a.childNodes.length?(e.setEnd(a,a.childNodes.length),void u(e)):(e.setEndBefore(a),void u(e));e.setEnd(a,a.length-1)}},m=function(e){var t=o("div",{className:"dojoxEllipsisContainer"}),a=o("div",{className:"dojoxEllipsisShown",style:{display:"none"}});e.parentNode.replaceChild(t,e),t.appendChild(e),t.appendChild(a);var i=d.cloneNode(!0),r=e.style,n=a.style,m=function(){if(r.display="",n.display="none",!(e.scrollWidth<=e.offsetWidth)){var t=s.createRange();t.selectNodeContents(e),r.display="none",n.display="";var i=!1;do{var o=1;l(t.cloneContents(),a,"only");var d=a.scrollWidth,m=a.offsetWidth;i=d<=m;var h=1-1*m/d;h>0&&(o=Math.max(Math.round(a.textContent.length*h)-1,1)),u(t,o)}while(!t.collapsed&&!i)}};i.onload=function(){i.contentWindow.onresize=m,m()},t.appendChild(i)},h=e.hasClass,c=e.doc;c.querySelectorAll?(i=c,r="querySelectorAll",n=".dojoxEllipsis"):c.getElementsByClassName?(i=c,r="getElementsByClassName",n="dojoxEllipsis"):(i=e,r="query",n=".dojoxEllipsis"),fx=function(){e.forEach(i[r].apply(i,[n]),function(e){e&&!e._djx_ellipsis_done&&(e._djx_ellipsis_done=!0,a&&e.textContent==e.innerHTML&&!h(e,"dojoxEllipsisSelectable")?a(e):m(e))})},e.addOnLoad(function(){var a=null,i=null,r=function(){i&&(e.disconnect(i),i=null),a&&clearTimeout(a),a=setTimeout(function(){a=null,fx(),i=e.connect(e.body(),"DOMSubtreeModified",r)},t)};r()})}});//# sourceMappingURL=ellipsis.js.map