//>>built
define("dojox/gauges/AnalogGauge",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/html","dojo/_base/event","dojox/gfx","./_Gauge","./AnalogLineIndicator","dojo/dom-geometry"],function(e,t,i,a,r,n,o,s,d,l){return t("dojox.gauges.AnalogGauge",s,{startAngle:-90,endAngle:90,cx:0,cy:0,radius:0,orientation:"clockwise",_defaultIndicator:d,startup:function(){this.getChildren&&i.forEach(this.getChildren(),function(e){e.startup()}),this.startAngle=Number(this.startAngle),this.endAngle=Number(this.endAngle),this.cx=Number(this.cx),this.cx||(this.cx=this.width/2),this.cy=Number(this.cy),this.cy||(this.cy=this.height/2),this.radius=Number(this.radius),this.radius||(this.radius=Math.min(this.cx,this.cy)-25),this.inherited(arguments)},_getAngle:function(e){var t,i=Number(e);if(null==e||isNaN(i)||i<=this.min)t=this._mod360(this.startAngle);else if(i>=this.max)t=this._mod360(this.endAngle);else{var a=this._mod360(this.startAngle),r=i-this.min;"clockwise"!=this.orientation&&(r=-r),t=this._mod360(a+this._getAngleRange()*r/Math.abs(this.min-this.max))}return t},_getValueForAngle:function(e){var t=this._mod360(this.startAngle),i=this._mod360(this.endAngle);if(this._angleInRange(e)){var a=Math.abs(this.max-this.min),r=this._mod360("clockwise"==this.orientation?e-t:-e+t);return this.min+a*r/this._getAngleRange()}var n=this._mod360(t-e),o=360-n,s=this._mod360(i-e),d=360-s;return Math.min(n,o)<Math.min(s,d)?this.min:this.max},_getAngleRange:function(){var e,t=this._mod360(this.startAngle),i=this._mod360(this.endAngle);return t==i?360:e="clockwise"==this.orientation?t>i?360-(t-i):i-t:t>i?t-i:360-(i-t)},_angleInRange:function(e){var t=this._mod360(this.startAngle),i=this._mod360(this.endAngle);return t==i?!0:(e=this._mod360(e),"clockwise"==this.orientation?i>t?e>=t&&i>=e:!(e>i&&t>e):i>t?!(e>t&&i>e):e>=i&&t>=e)},_isScaleCircular:function(){return this._mod360(this.startAngle)==this._mod360(this.endAngle)},_mod360:function(e){for(;e>360;)e-=360;for(;0>e;)e+=360;return e},_getRadians:function(e){return e*Math.PI/180},_getDegrees:function(e){return 180*e/Math.PI},drawRange:function(e,t){var i;t.shape&&(t.shape.parent.remove(t.shape),t.shape=null);var r,n;if(t.low==this.min&&t.high==this.max&&this._mod360(this.endAngle)==this._mod360(this.startAngle))i=e.createCircle({cx:this.cx,cy:this.cy,r:this.radius});else{if(r=this._getRadians(this._getAngle(t.low)),n=this._getRadians(this._getAngle(t.high)),"cclockwise"==this.orientation){var s=n;n=r,r=s}var d,l=this.cx+this.radius*Math.sin(r),h=this.cy-this.radius*Math.cos(r),u=this.cx+this.radius*Math.sin(n),c=this.cy-this.radius*Math.cos(n),m=0;d=n>=r?n-r:2*Math.PI-r+n,d>Math.PI&&(m=1),i=e.createPath(),t.size?i.moveTo(this.cx+(this.radius-t.size)*Math.sin(r),this.cy-(this.radius-t.size)*Math.cos(r)):i.moveTo(this.cx,this.cy),i.lineTo(l,h),i.arcTo(this.radius,this.radius,0,m,1,u,c),t.size&&(i.lineTo(this.cx+(this.radius-t.size)*Math.sin(n),this.cy-(this.radius-t.size)*Math.cos(n)),i.arcTo(this.radius-t.size,this.radius-t.size,0,m,0,this.cx+(this.radius-t.size)*Math.sin(r),this.cy-(this.radius-t.size)*Math.cos(r))),i.closePath()}a.isArray(t.color)||a.isString(t.color)?(i.setStroke({color:t.color}),i.setFill(t.color)):t.color.type?(r=this._getRadians(this._getAngle(t.low)),n=this._getRadians(this._getAngle(t.high)),t.color.x1=this.cx+this.radius*Math.sin(r)/2,t.color.x2=this.cx+this.radius*Math.sin(n)/2,t.color.y1=this.cy-this.radius*Math.cos(r)/2,t.color.y2=this.cy-this.radius*Math.cos(n)/2,i.setFill(t.color),i.setStroke({color:t.color.colors[0].color})):o.svg&&(i.setStroke({color:"green"}),i.setFill("green"),i.getEventSource().setAttribute("class",t.color.style)),i.connect("onmouseover",a.hitch(this,this._handleMouseOverRange,t)),i.connect("onmouseout",a.hitch(this,this._handleMouseOutRange,t)),t.shape=i},getRangeUnderMouse:function(e){var t=null,i=l.getContentBox(this.gaugeContent),a=e.clientX-i.x,r=e.clientY-i.y,n=Math.sqrt((r-this.cy)*(r-this.cy)+(a-this.cx)*(a-this.cx));if(n<this.radius){var o=this._getDegrees(Math.atan2(r-this.cy,a-this.cx)+Math.PI/2),s=this._getValueForAngle(o);if(this._rangeData)for(var d=0;d<this._rangeData.length&&!t;d++)Number(this._rangeData[d].low)<=s&&Number(this._rangeData[d].high)>=s&&(t=this._rangeData[d])}return t},_dragIndicator:function(e,t){this._dragIndicatorAt(e,t.pageX,t.pageY),n.stop(t)},_dragIndicatorAt:function(e,t,i){var a=l.position(e.gaugeContent,!0),r=t-a.x,n=i-a.y,o=e._getDegrees(Math.atan2(n-e.cy,r-e.cx)+Math.PI/2),s=e._getValueForAngle(o);s=Math.min(Math.max(s,e.min),e.max),e._drag.value=e._drag.currentValue=s,e._drag.onDragMove(e._drag),e._drag.draw(this._indicatorsGroup,!0),e._drag.valueChanged()}})});//# sourceMappingURL=AnalogGauge.js.map