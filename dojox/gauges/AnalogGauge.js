//>>built
define("dojox/gauges/AnalogGauge",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/html","dojo/_base/event","dojox/gfx","./_Gauge","./AnalogLineIndicator","dojo/dom-geometry"],function(e,t,a,i,r,o,n,s,d,l){return t("dojox.gauges.AnalogGauge",s,{startAngle:-90,endAngle:90,cx:0,cy:0,radius:0,orientation:"clockwise",_defaultIndicator:d,startup:function(){this.getChildren&&a.forEach(this.getChildren(),function(e){e.startup()}),this.startAngle=Number(this.startAngle),this.endAngle=Number(this.endAngle),this.cx=Number(this.cx),this.cx||(this.cx=this.width/2),this.cy=Number(this.cy),this.cy||(this.cy=this.height/2),this.radius=Number(this.radius),this.radius||(this.radius=Math.min(this.cx,this.cy)-25),this.inherited(arguments)},_getAngle:function(e){var t,a=Number(e);if(null==e||isNaN(a)||a<=this.min)t=this._mod360(this.startAngle);else if(a>=this.max)t=this._mod360(this.endAngle);else{var i=this._mod360(this.startAngle),r=a-this.min;"clockwise"!=this.orientation&&(r=-r),t=this._mod360(i+this._getAngleRange()*r/Math.abs(this.min-this.max))}return t},_getValueForAngle:function(e){var t=this._mod360(this.startAngle),a=this._mod360(this.endAngle);if(this._angleInRange(e)){var i=Math.abs(this.max-this.min),r=this._mod360("clockwise"==this.orientation?e-t:-e+t);return this.min+i*r/this._getAngleRange()}var o=this._mod360(t-e),n=360-o,s=this._mod360(a-e),d=360-s;return Math.min(o,n)<Math.min(s,d)?this.min:this.max},_getAngleRange:function(){var e,t=this._mod360(this.startAngle),a=this._mod360(this.endAngle);return t==a?360:e="clockwise"==this.orientation?t>a?360-(t-a):a-t:t>a?t-a:360-(a-t)},_angleInRange:function(e){var t=this._mod360(this.startAngle),a=this._mod360(this.endAngle);return t==a?!0:(e=this._mod360(e),"clockwise"==this.orientation?a>t?e>=t&&a>=e:!(e>a&&t>e):a>t?!(e>t&&a>e):e>=a&&t>=e)},_isScaleCircular:function(){return this._mod360(this.startAngle)==this._mod360(this.endAngle)},_mod360:function(e){for(;e>360;)e-=360;for(;0>e;)e+=360;return e},_getRadians:function(e){return e*Math.PI/180},_getDegrees:function(e){return 180*e/Math.PI},drawRange:function(e,t){var a;t.shape&&(t.shape.parent.remove(t.shape),t.shape=null);var r,o;if(t.low==this.min&&t.high==this.max&&this._mod360(this.endAngle)==this._mod360(this.startAngle))a=e.createCircle({cx:this.cx,cy:this.cy,r:this.radius});else{if(r=this._getRadians(this._getAngle(t.low)),o=this._getRadians(this._getAngle(t.high)),"cclockwise"==this.orientation){var s=o;o=r,r=s}var d,l=this.cx+this.radius*Math.sin(r),h=this.cy-this.radius*Math.cos(r),u=this.cx+this.radius*Math.sin(o),c=this.cy-this.radius*Math.cos(o),m=0;d=o>=r?o-r:2*Math.PI-r+o,d>Math.PI&&(m=1),a=e.createPath(),t.size?a.moveTo(this.cx+(this.radius-t.size)*Math.sin(r),this.cy-(this.radius-t.size)*Math.cos(r)):a.moveTo(this.cx,this.cy),a.lineTo(l,h),a.arcTo(this.radius,this.radius,0,m,1,u,c),t.size&&(a.lineTo(this.cx+(this.radius-t.size)*Math.sin(o),this.cy-(this.radius-t.size)*Math.cos(o)),a.arcTo(this.radius-t.size,this.radius-t.size,0,m,0,this.cx+(this.radius-t.size)*Math.sin(r),this.cy-(this.radius-t.size)*Math.cos(r))),a.closePath()}i.isArray(t.color)||i.isString(t.color)?(a.setStroke({color:t.color}),a.setFill(t.color)):t.color.type?(r=this._getRadians(this._getAngle(t.low)),o=this._getRadians(this._getAngle(t.high)),t.color.x1=this.cx+this.radius*Math.sin(r)/2,t.color.x2=this.cx+this.radius*Math.sin(o)/2,t.color.y1=this.cy-this.radius*Math.cos(r)/2,t.color.y2=this.cy-this.radius*Math.cos(o)/2,a.setFill(t.color),a.setStroke({color:t.color.colors[0].color})):n.svg&&(a.setStroke({color:"green"}),a.setFill("green"),a.getEventSource().setAttribute("class",t.color.style)),a.connect("onmouseover",i.hitch(this,this._handleMouseOverRange,t)),a.connect("onmouseout",i.hitch(this,this._handleMouseOutRange,t)),t.shape=a},getRangeUnderMouse:function(e){var t=null,a=l.getContentBox(this.gaugeContent),i=e.clientX-a.x,r=e.clientY-a.y,o=Math.sqrt((r-this.cy)*(r-this.cy)+(i-this.cx)*(i-this.cx));if(o<this.radius){var n=this._getDegrees(Math.atan2(r-this.cy,i-this.cx)+Math.PI/2),s=this._getValueForAngle(n);if(this._rangeData)for(var d=0;d<this._rangeData.length&&!t;d++)Number(this._rangeData[d].low)<=s&&Number(this._rangeData[d].high)>=s&&(t=this._rangeData[d])}return t},_dragIndicator:function(e,t){this._dragIndicatorAt(e,t.pageX,t.pageY),o.stop(t)},_dragIndicatorAt:function(e,t,a){var i=l.position(e.gaugeContent,!0),r=t-i.x,o=a-i.y,n=e._getDegrees(Math.atan2(o-e.cy,r-e.cx)+Math.PI/2),s=e._getValueForAngle(n);s=Math.min(Math.max(s,e.min),e.max),e._drag.value=e._drag.currentValue=s,e._drag.onDragMove(e._drag),e._drag.draw(this._indicatorsGroup,!0),e._drag.valueChanged()}})});//# sourceMappingURL=AnalogGauge.js.map