//>>built
define("dojox/gauges/AnalogGauge",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/html","dojo/_base/event","dojox/gfx","./_Gauge","./AnalogLineIndicator","dojo/dom-geometry"],function(e,t,i,a,o,n,r,s,d,l){return t("dojox.gauges.AnalogGauge",s,{startAngle:-90,endAngle:90,cx:0,cy:0,radius:0,orientation:"clockwise",_defaultIndicator:d,startup:function(){this.getChildren&&i.forEach(this.getChildren(),function(e){e.startup()}),this.startAngle=Number(this.startAngle),this.endAngle=Number(this.endAngle),this.cx=Number(this.cx),this.cx||(this.cx=this.width/2),this.cy=Number(this.cy),this.cy||(this.cy=this.height/2),this.radius=Number(this.radius),this.radius||(this.radius=Math.min(this.cx,this.cy)-25),this.inherited(arguments)},_getAngle:function(e){var t,i=Number(e);if(null==e||isNaN(i)||i<=this.min)t=this._mod360(this.startAngle);else if(i>=this.max)t=this._mod360(this.endAngle);else{var a=this._mod360(this.startAngle),o=i-this.min;"clockwise"!=this.orientation&&(o=-o),t=this._mod360(a+this._getAngleRange()*o/Math.abs(this.min-this.max))}return t},_getValueForAngle:function(e){var t=this._mod360(this.startAngle),i=this._mod360(this.endAngle);if(this._angleInRange(e)){var a=Math.abs(this.max-this.min),o=this._mod360("clockwise"==this.orientation?e-t:-e+t);return this.min+a*o/this._getAngleRange()}var n=this._mod360(t-e),r=360-n,s=this._mod360(i-e),d=360-s;return Math.min(n,r)<Math.min(s,d)?this.min:this.max},_getAngleRange:function(){var e,t=this._mod360(this.startAngle),i=this._mod360(this.endAngle);return t==i?360:e="clockwise"==this.orientation?t>i?360-(t-i):i-t:t>i?t-i:360-(i-t)},_angleInRange:function(e){var t=this._mod360(this.startAngle),i=this._mod360(this.endAngle);return t==i?!0:(e=this._mod360(e),"clockwise"==this.orientation?i>t?e>=t&&i>=e:!(e>i&&t>e):i>t?!(e>t&&i>e):e>=i&&t>=e)},_isScaleCircular:function(){return this._mod360(this.startAngle)==this._mod360(this.endAngle)},_mod360:function(e){for(;e>360;)e-=360;for(;0>e;)e+=360;return e},_getRadians:function(e){return e*Math.PI/180},_getDegrees:function(e){return 180*e/Math.PI},drawRange:function(e,t){var i;t.shape&&(t.shape.parent.remove(t.shape),t.shape=null);var o,n;if(t.low==this.min&&t.high==this.max&&this._mod360(this.endAngle)==this._mod360(this.startAngle))i=e.createCircle({cx:this.cx,cy:this.cy,r:this.radius});else{if(o=this._getRadians(this._getAngle(t.low)),n=this._getRadians(this._getAngle(t.high)),"cclockwise"==this.orientation){var s=n;n=o,o=s}var d,l=this.cx+this.radius*Math.sin(o),h=this.cy-this.radius*Math.cos(o),u=this.cx+this.radius*Math.sin(n),m=this.cy-this.radius*Math.cos(n),c=0;d=n>=o?n-o:2*Math.PI-o+n,d>Math.PI&&(c=1),i=e.createPath(),t.size?i.moveTo(this.cx+(this.radius-t.size)*Math.sin(o),this.cy-(this.radius-t.size)*Math.cos(o)):i.moveTo(this.cx,this.cy),i.lineTo(l,h),i.arcTo(this.radius,this.radius,0,c,1,u,m),t.size&&(i.lineTo(this.cx+(this.radius-t.size)*Math.sin(n),this.cy-(this.radius-t.size)*Math.cos(n)),i.arcTo(this.radius-t.size,this.radius-t.size,0,c,0,this.cx+(this.radius-t.size)*Math.sin(o),this.cy-(this.radius-t.size)*Math.cos(o))),i.closePath()}a.isArray(t.color)||a.isString(t.color)?(i.setStroke({color:t.color}),i.setFill(t.color)):t.color.type?(o=this._getRadians(this._getAngle(t.low)),n=this._getRadians(this._getAngle(t.high)),t.color.x1=this.cx+this.radius*Math.sin(o)/2,t.color.x2=this.cx+this.radius*Math.sin(n)/2,t.color.y1=this.cy-this.radius*Math.cos(o)/2,t.color.y2=this.cy-this.radius*Math.cos(n)/2,i.setFill(t.color),i.setStroke({color:t.color.colors[0].color})):r.svg&&(i.setStroke({color:"green"}),i.setFill("green"),i.getEventSource().setAttribute("class",t.color.style)),i.connect("onmouseover",a.hitch(this,this._handleMouseOverRange,t)),i.connect("onmouseout",a.hitch(this,this._handleMouseOutRange,t)),t.shape=i},getRangeUnderMouse:function(e){var t=null,i=l.getContentBox(this.gaugeContent),a=e.clientX-i.x,o=e.clientY-i.y,n=Math.sqrt((o-this.cy)*(o-this.cy)+(a-this.cx)*(a-this.cx));if(n<this.radius){var r=this._getDegrees(Math.atan2(o-this.cy,a-this.cx)+Math.PI/2),s=this._getValueForAngle(r);if(this._rangeData)for(var d=0;d<this._rangeData.length&&!t;d++)Number(this._rangeData[d].low)<=s&&Number(this._rangeData[d].high)>=s&&(t=this._rangeData[d])}return t},_dragIndicator:function(e,t){this._dragIndicatorAt(e,t.pageX,t.pageY),n.stop(t)},_dragIndicatorAt:function(e,t,i){var a=l.position(e.gaugeContent,!0),o=t-a.x,n=i-a.y,r=e._getDegrees(Math.atan2(n-e.cy,o-e.cx)+Math.PI/2),s=e._getValueForAngle(r);s=Math.min(Math.max(s,e.min),e.max),e._drag.value=e._drag.currentValue=s,e._drag.onDragMove(e._drag),e._drag.draw(this._indicatorsGroup,!0),e._drag.valueChanged()}})});//# sourceMappingURL=AnalogGauge.js.map