//>>built
define("dojox/av/_Media",["dojo"],function(e){return e.experimental("dojox.av.FLVideo"),e.declare("dojox.av._Media",null,{mediaUrl:"",initialVolume:1,autoPlay:!1,bufferTime:2e3,minBufferTime:300,updateTime:100,id:"",isDebug:!1,percentDownloaded:0,_flashObject:null,flashMedia:null,allowScriptAccess:"always",allowNetworking:"all",wmode:"transparent",allowFullScreen:!0,_initStatus:function(){this.status="ready",this._positionHandle=e.connect(this,"onPosition",this,"_figureStatus")},getTime:function(){return this.flashMedia.getTime()},onLoad:function(e){},onDownloaded:function(e){},onClick:function(e){},onSwfSized:function(e){},onMetaData:function(e,t){this.duration=e.duration},onPosition:function(e){},onStart:function(e){},onPlay:function(e){},onPause:function(e){},onEnd:function(e){},onStop:function(){},onBuffer:function(e){this.isBuffering=e},onError:function(e,t){},onStatus:function(e){},onPlayerStatus:function(e){},onResize:function(){},_figureStatus:function(){var e=this.getTime();"stopping"==this.status?(this.status="stopped",this.onStop(this._eventFactory())):"ending"==this.status&&e==this._prevPos?(this.status="ended",this.onEnd(this._eventFactory())):this.duration&&e>this.duration-.5?this.status="ending":0===e?"ready"==this.status||(this.status="stopped","stopped"!=this._prevStatus&&this.onStop(this._eventFactory())):"ready"==this.status?(this.status="started",this.onStart(this._eventFactory()),this.onPlay(this._eventFactory())):this.isBuffering?this.status="buffering":"started"==this.status||"playing"==this.status&&e!=this._prevPos?this.status="playing":this.isStopped||"playing"!=this.status||e!=this._prevPos?"paused"!=this.status&&"stopped"!=this.status||e==this._prevPos||(this.status="started",this.onPlay(this._eventFactory())):(this.status="paused",this.status!=this._prevStatus&&this.onPause(this._eventFactory())),this._prevPos=e,this._prevStatus=this.status,this.onStatus(this.status)},_eventFactory:function(){var e={status:this.status};return e},_sub:function(t,a){e.subscribe(this.id+"/"+t,this,a)},_normalizeVolume:function(e){if(e>1)for(;e>1;)e*=.1;return e},_normalizeUrl:function(e){if(e&&(e.toLowerCase().indexOf("http")<0||0==e.indexOf("/"))){var t=window.location.href.split("/");t.pop(),t=t.join("/")+"/",e=t+e}return e},destroy:function(){return this.flashMedia?(e.forEach(this._subs,function(t){e.unsubscribe(t)}),e.forEach(this._cons,function(t){e.disconnect(t)}),void this._flashObject.destroy()):void this._cons.push(e.connect(this,"onLoad",this,"destroy"))}})});//# sourceMappingURL=_Media.js.map