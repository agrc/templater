//>>built
define("dojox/av/widget/VolumeButton",["dojo","dijit","dijit/_Widget","dijit/_TemplatedMixin","dijit/form/Button"],function(e,t,r,a,i){return e.declare("dojox.av.widget.VolumeButton",[r,a],{templateString:e.cache("dojox.av.widget","resources/VolumeButton.html"),postCreate:function(){this.handleWidth=e.marginBox(this.handle).w,this.width=e.marginBox(this.volumeSlider).w,this.slotWidth=100,e.setSelectable(this.handle,!1),this.volumeSlider=this.domNode.removeChild(this.volumeSlider)},setMedia:function(e){this.media=e,this.updateIcon()},updateIcon:function(t){t=void 0===t?this.media.volume():t,0===t?e.attr(this.domNode,"class","Volume mute"):t<.334?e.attr(this.domNode,"class","Volume low"):t<.667?e.attr(this.domNode,"class","Volume med"):e.attr(this.domNode,"class","Volume high")},onShowVolume:function(t){if(void 0==this.showing&&(e.body().appendChild(this.volumeSlider),this.showing=!1),this.showing)this.onHideVolume();else{var r=2,a=7,i=this.media.volume(),n=this._getVolumeDim(),o=this._getHandleDim();this.x=n.x-this.width,e.style(this.volumeSlider,"display",""),e.style(this.volumeSlider,"top",n.y+"px"),e.style(this.volumeSlider,"left",this.x+"px");var d=this.slotWidth*i;e.style(this.handle,"top",r+o.w/2+"px"),e.style(this.handle,"left",d+a+o.h/2+"px"),this.showing=!0,this.clickOff=e.connect(e.doc,"onmousedown",this,"onDocClick")}},onDocClick:function(t){e.isDescendant(t.target,this.domNode)||e.isDescendant(t.target,this.volumeSlider)||this.onHideVolume()},onHideVolume:function(){this.endDrag(),e.style(this.volumeSlider,"display","none"),this.showing=!1},onDrag:function(t){var r=this.handleWidth/2,a=r+this.slotWidth,i=t.clientX-this.x;i<r&&(i=r),i>a&&(i=a),e.style(this.handle,"left",i+"px");var n=(i-r)/(a-r);this.media.volume(n),this.updateIcon(n)},startDrag:function(){this.isDragging=!0,this.cmove=e.connect(e.doc,"mousemove",this,"onDrag"),this.cup=e.connect(e.doc,"mouseup",this,"endDrag")},endDrag:function(){this.isDragging=!1,this.cmove&&e.disconnect(this.cmove),this.cup&&e.disconnect(this.cup),this.handleOut()},handleOver:function(){e.addClass(this.handle,"over")},handleOut:function(){this.isDragging||e.removeClass(this.handle,"over")},_getVolumeDim:function(){return this._domCoords?this._domCoords:(this._domCoords=e.coords(this.domNode),this._domCoords)},_getHandleDim:function(){return this._handleCoords?this._handleCoords:(this._handleCoords=e.marginBox(this.handle),this._handleCoords)},onResize:function(e){this.onHideVolume(),this._domCoords=null}})});//# sourceMappingURL=VolumeButton.js.map