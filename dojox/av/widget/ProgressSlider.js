//>>built
define("dojox/av/widget/ProgressSlider",["dojo","dijit","dijit/_Widget","dijit/_TemplatedMixin"],function(e,t,i,a){return e.declare("dojox.av.widget.ProgressSlider",[i,a],{templateString:e.cache("dojox.av.widget","resources/ProgressSlider.html"),postCreate:function(){this.seeking=!1,this.handleWidth=e.marginBox(this.handle).w;var t=e.coords(this.domNode);this.finalWidth=t.w,this.width=t.w-this.handleWidth,this.x=t.x,e.setSelectable(this.domNode,!1),e.setSelectable(this.handle,!1)},setMedia:function(t,i){this.playerWidget=i,this.media=t,e.connect(this.media,"onMetaData",this,function(e){e&&e.duration&&(this.duration=e.duration)}),e.connect(this.media,"onEnd",this,function(){e.disconnect(this.posCon),this.setHandle(this.duration)}),e.connect(this.media,"onStart",this,function(){this.posCon=e.connect(this.media,"onPosition",this,"setHandle")}),e.connect(this.media,"onDownloaded",this,function(e){this.setLoadedPosition(.01*e),this.width=.01*this.finalWidth*e})},onDrag:function(t){var i=t.clientX-this.x;0>i&&(i=0),i>this.width-this.handleWidth&&(i=this.width-this.handleWidth);var a=i/this.finalWidth;this.media.seek(this.duration*a),e.style(this.handle,"marginLeft",i+"px"),e.style(this.progressPosition,"width",i+"px")},startDrag:function(){e.setSelectable(this.playerWidget.domNode,!1),this.seeking=!0,this.cmove=e.connect(e.doc,"mousemove",this,"onDrag"),this.cup=e.connect(e.doc,"mouseup",this,"endDrag")},endDrag:function(){e.setSelectable(this.playerWidget.domNode,!0),this.seeking=!1,this.cmove&&e.disconnect(this.cmove),this.cup&&e.disconnect(this.cup),this.handleOut()},setHandle:function(t){if(!this.seeking){var i=this.width-this.handleWidth,a=t/this.duration,r=a*i;e.style(this.handle,"marginLeft",r+"px"),e.style(this.progressPosition,"width",r+"px")}},setLoadedPosition:function(t){e.style(this.progressLoaded,"width",this.finalWidth*t+"px")},handleOver:function(){e.addClass(this.handle,"over")},handleOut:function(){this.seeking||e.removeClass(this.handle,"over")},onResize:function(t){var i=e.coords(this.domNode);this.finalWidth=i.w}})});//# sourceMappingURL=ProgressSlider.js.map