//>>built
define("dojox/gfx/matrix",["./_base","dojo/_base/lang"],function(e,t){var i=e.matrix={},a={};return i._degToRad=function(e){return a[e]||(a[e]=Math.PI*e/180)},i._radToDeg=function(e){return e/Math.PI*180},i.Matrix2D=function(e){if(e)if("number"==typeof e)this.xx=this.yy=e;else if(e instanceof Array){if(e.length>0){for(var a=i.normalize(e[0]),r=1;r<e.length;++r){var o=a,n=i.normalize(e[r]);a=new i.Matrix2D,a.xx=o.xx*n.xx+o.xy*n.yx,a.xy=o.xx*n.xy+o.xy*n.yy,a.yx=o.yx*n.xx+o.yy*n.yx,a.yy=o.yx*n.xy+o.yy*n.yy,a.dx=o.xx*n.dx+o.xy*n.dy+o.dx,a.dy=o.yx*n.dx+o.yy*n.dy+o.dy}t.mixin(this,a)}}else t.mixin(this,e)},t.extend(i.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0}),t.mixin(i,{identity:new i.Matrix2D,flipX:new i.Matrix2D({xx:-1}),flipY:new i.Matrix2D({yy:-1}),flipXY:new i.Matrix2D({xx:-1,yy:-1}),translate:function(e,t){return arguments.length>1?new i.Matrix2D({dx:e,dy:t}):new i.Matrix2D({dx:e.x,dy:e.y})},scale:function(e,t){return arguments.length>1?new i.Matrix2D({xx:e,yy:t}):"number"==typeof e?new i.Matrix2D({xx:e,yy:e}):new i.Matrix2D({xx:e.x,yy:e.y})},rotate:function(e){var t=Math.cos(e),a=Math.sin(e);return new i.Matrix2D({xx:t,xy:-a,yx:a,yy:t})},rotateg:function(e){return i.rotate(i._degToRad(e))},skewX:function(e){return new i.Matrix2D({xy:Math.tan(e)})},skewXg:function(e){return i.skewX(i._degToRad(e))},skewY:function(e){return new i.Matrix2D({yx:Math.tan(e)})},skewYg:function(e){return i.skewY(i._degToRad(e))},reflect:function(e,t){1==arguments.length&&(t=e.y,e=e.x);var a=e*e,r=t*t,o=a+r,n=2*e*t/o;return new i.Matrix2D({xx:2*a/o-1,xy:n,yx:n,yy:2*r/o-1})},project:function(e,t){1==arguments.length&&(t=e.y,e=e.x);var a=e*e,r=t*t,o=a+r,n=e*t/o;return new i.Matrix2D({xx:a/o,xy:n,yx:n,yy:r/o})},normalize:function(e){return e instanceof i.Matrix2D?e:new i.Matrix2D(e)},isIdentity:function(e){return 1==e.xx&&0==e.xy&&0==e.yx&&1==e.yy&&0==e.dx&&0==e.dy},clone:function(e){var t=new i.Matrix2D;for(var a in e)"number"==typeof e[a]&&"number"==typeof t[a]&&t[a]!=e[a]&&(t[a]=e[a]);return t},invert:function(e){var t=i.normalize(e),a=t.xx*t.yy-t.xy*t.yx;return t=new i.Matrix2D({xx:t.yy/a,xy:-t.xy/a,yx:-t.yx/a,yy:t.xx/a,dx:(t.xy*t.dy-t.yy*t.dx)/a,dy:(t.yx*t.dx-t.xx*t.dy)/a})},_multiplyPoint:function(e,t,i){return{x:e.xx*t+e.xy*i+e.dx,y:e.yx*t+e.yy*i+e.dy}},multiplyPoint:function(e,t,a){var r=i.normalize(e);return"number"==typeof t&&"number"==typeof a?i._multiplyPoint(r,t,a):i._multiplyPoint(r,t.x,t.y)},multiplyRectangle:function(e,t){var a=i.normalize(e);if(t=t||{x:0,y:0,width:0,height:0},i.isIdentity(a))return{x:t.x,y:t.y,width:t.width,height:t.height};var r=i.multiplyPoint(a,t.x,t.y),o=i.multiplyPoint(a,t.x,t.y+t.height),n=i.multiplyPoint(a,t.x+t.width,t.y),s=i.multiplyPoint(a,t.x+t.width,t.y+t.height),d=Math.min(r.x,o.x,n.x,s.x),l=Math.min(r.y,o.y,n.y,s.y),h=Math.max(r.x,o.x,n.x,s.x),u=Math.max(r.y,o.y,n.y,s.y);return{x:d,y:l,width:h-d,height:u-l}},multiply:function(e){for(var t=i.normalize(e),a=1;a<arguments.length;++a){var r=t,o=i.normalize(arguments[a]);t=new i.Matrix2D,t.xx=r.xx*o.xx+r.xy*o.yx,t.xy=r.xx*o.xy+r.xy*o.yy,t.yx=r.yx*o.xx+r.yy*o.yx,t.yy=r.yx*o.xy+r.yy*o.yy,t.dx=r.xx*o.dx+r.xy*o.dy+r.dx,t.dy=r.yx*o.dx+r.yy*o.dy+r.dy}return t},_sandwich:function(e,t,a){return i.multiply(i.translate(t,a),e,i.translate(-t,-a))},scaleAt:function(e,t,a,r){switch(arguments.length){case 4:return i._sandwich(i.scale(e,t),a,r);case 3:return"number"==typeof a?i._sandwich(i.scale(e),t,a):i._sandwich(i.scale(e,t),a.x,a.y)}return i._sandwich(i.scale(e),t.x,t.y)},rotateAt:function(e,t,a){return arguments.length>2?i._sandwich(i.rotate(e),t,a):i._sandwich(i.rotate(e),t.x,t.y)},rotategAt:function(e,t,a){return arguments.length>2?i._sandwich(i.rotateg(e),t,a):i._sandwich(i.rotateg(e),t.x,t.y)},skewXAt:function(e,t,a){return arguments.length>2?i._sandwich(i.skewX(e),t,a):i._sandwich(i.skewX(e),t.x,t.y)},skewXgAt:function(e,t,a){return arguments.length>2?i._sandwich(i.skewXg(e),t,a):i._sandwich(i.skewXg(e),t.x,t.y)},skewYAt:function(e,t,a){return arguments.length>2?i._sandwich(i.skewY(e),t,a):i._sandwich(i.skewY(e),t.x,t.y)},skewYgAt:function(e,t,a){return arguments.length>2?i._sandwich(i.skewYg(e),t,a):i._sandwich(i.skewYg(e),t.x,t.y)}}),e.Matrix2D=i.Matrix2D,i});//# sourceMappingURL=matrix.js.map