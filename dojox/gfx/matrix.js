//>>built
define("dojox/gfx/matrix",["./_base","dojo/_base/lang"],function(e,t){var a=e.matrix={},i={};return a._degToRad=function(e){return i[e]||(i[e]=Math.PI*e/180)},a._radToDeg=function(e){return e/Math.PI*180},a.Matrix2D=function(e){if(e)if("number"==typeof e)this.xx=this.yy=e;else if(e instanceof Array){if(e.length>0){for(var i=a.normalize(e[0]),r=1;r<e.length;++r){var n=i,o=a.normalize(e[r]);i=new a.Matrix2D,i.xx=n.xx*o.xx+n.xy*o.yx,i.xy=n.xx*o.xy+n.xy*o.yy,i.yx=n.yx*o.xx+n.yy*o.yx,i.yy=n.yx*o.xy+n.yy*o.yy,i.dx=n.xx*o.dx+n.xy*o.dy+n.dx,i.dy=n.yx*o.dx+n.yy*o.dy+n.dy}t.mixin(this,i)}}else t.mixin(this,e)},t.extend(a.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0}),t.mixin(a,{identity:new a.Matrix2D,flipX:new a.Matrix2D({xx:-1}),flipY:new a.Matrix2D({yy:-1}),flipXY:new a.Matrix2D({xx:-1,yy:-1}),translate:function(e,t){return arguments.length>1?new a.Matrix2D({dx:e,dy:t}):new a.Matrix2D({dx:e.x,dy:e.y})},scale:function(e,t){return arguments.length>1?new a.Matrix2D({xx:e,yy:t}):"number"==typeof e?new a.Matrix2D({xx:e,yy:e}):new a.Matrix2D({xx:e.x,yy:e.y})},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);return new a.Matrix2D({xx:t,xy:-i,yx:i,yy:t})},rotateg:function(e){return a.rotate(a._degToRad(e))},skewX:function(e){return new a.Matrix2D({xy:Math.tan(e)})},skewXg:function(e){return a.skewX(a._degToRad(e))},skewY:function(e){return new a.Matrix2D({yx:Math.tan(e)})},skewYg:function(e){return a.skewY(a._degToRad(e))},reflect:function(e,t){1==arguments.length&&(t=e.y,e=e.x);var i=e*e,r=t*t,n=i+r,o=2*e*t/n;return new a.Matrix2D({xx:2*i/n-1,xy:o,yx:o,yy:2*r/n-1})},project:function(e,t){1==arguments.length&&(t=e.y,e=e.x);var i=e*e,r=t*t,n=i+r,o=e*t/n;return new a.Matrix2D({xx:i/n,xy:o,yx:o,yy:r/n})},normalize:function(e){return e instanceof a.Matrix2D?e:new a.Matrix2D(e)},isIdentity:function(e){return 1==e.xx&&0==e.xy&&0==e.yx&&1==e.yy&&0==e.dx&&0==e.dy},clone:function(e){var t=new a.Matrix2D;for(var i in e)"number"==typeof e[i]&&"number"==typeof t[i]&&t[i]!=e[i]&&(t[i]=e[i]);return t},invert:function(e){var t=a.normalize(e),i=t.xx*t.yy-t.xy*t.yx;return t=new a.Matrix2D({xx:t.yy/i,xy:-t.xy/i,yx:-t.yx/i,yy:t.xx/i,dx:(t.xy*t.dy-t.yy*t.dx)/i,dy:(t.yx*t.dx-t.xx*t.dy)/i})},_multiplyPoint:function(e,t,a){return{x:e.xx*t+e.xy*a+e.dx,y:e.yx*t+e.yy*a+e.dy}},multiplyPoint:function(e,t,i){var r=a.normalize(e);return"number"==typeof t&&"number"==typeof i?a._multiplyPoint(r,t,i):a._multiplyPoint(r,t.x,t.y)},multiplyRectangle:function(e,t){var i=a.normalize(e);if(t=t||{x:0,y:0,width:0,height:0},a.isIdentity(i))return{x:t.x,y:t.y,width:t.width,height:t.height};var r=a.multiplyPoint(i,t.x,t.y),n=a.multiplyPoint(i,t.x,t.y+t.height),o=a.multiplyPoint(i,t.x+t.width,t.y),s=a.multiplyPoint(i,t.x+t.width,t.y+t.height),l=Math.min(r.x,n.x,o.x,s.x),d=Math.min(r.y,n.y,o.y,s.y),u=Math.max(r.x,n.x,o.x,s.x),m=Math.max(r.y,n.y,o.y,s.y);return{x:l,y:d,width:u-l,height:m-d}},multiply:function(e){for(var t=a.normalize(e),i=1;i<arguments.length;++i){var r=t,n=a.normalize(arguments[i]);t=new a.Matrix2D,t.xx=r.xx*n.xx+r.xy*n.yx,t.xy=r.xx*n.xy+r.xy*n.yy,t.yx=r.yx*n.xx+r.yy*n.yx,t.yy=r.yx*n.xy+r.yy*n.yy,t.dx=r.xx*n.dx+r.xy*n.dy+r.dx,t.dy=r.yx*n.dx+r.yy*n.dy+r.dy}return t},_sandwich:function(e,t,i){return a.multiply(a.translate(t,i),e,a.translate(-t,-i))},scaleAt:function(e,t,i,r){switch(arguments.length){case 4:return a._sandwich(a.scale(e,t),i,r);case 3:return"number"==typeof i?a._sandwich(a.scale(e),t,i):a._sandwich(a.scale(e,t),i.x,i.y)}return a._sandwich(a.scale(e),t.x,t.y)},rotateAt:function(e,t,i){return arguments.length>2?a._sandwich(a.rotate(e),t,i):a._sandwich(a.rotate(e),t.x,t.y)},rotategAt:function(e,t,i){return arguments.length>2?a._sandwich(a.rotateg(e),t,i):a._sandwich(a.rotateg(e),t.x,t.y)},skewXAt:function(e,t,i){return arguments.length>2?a._sandwich(a.skewX(e),t,i):a._sandwich(a.skewX(e),t.x,t.y)},skewXgAt:function(e,t,i){return arguments.length>2?a._sandwich(a.skewXg(e),t,i):a._sandwich(a.skewXg(e),t.x,t.y)},skewYAt:function(e,t,i){return arguments.length>2?a._sandwich(a.skewY(e),t,i):a._sandwich(a.skewY(e),t.x,t.y)},skewYgAt:function(e,t,i){return arguments.length>2?a._sandwich(a.skewYg(e),t,i):a._sandwich(a.skewYg(e),t.x,t.y)}}),e.Matrix2D=a.Matrix2D,a});//# sourceMappingURL=matrix.js.map