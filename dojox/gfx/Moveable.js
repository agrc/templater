//>>built
define("dojox/gfx/Moveable",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/topic","dojo/touch","dojo/dom-class","dojo/_base/window","./Mover"],function(e,t,i,r,a,n,o,s,l){return t("dojox.gfx.Moveable",null,{constructor:function(t,i){this.shape=t,this.delay=i&&i.delay>0?i.delay:0,this.mover=i&&i.mover?i.mover:l,this.events=[this.shape.on(n.press,e.hitch(this,"onMouseDown"))]},destroy:function(){i.forEach(this.events,function(e){e.remove()}),this.events=this.shape=null},onMouseDown:function(t){this.delay?(this.events.push(this.shape.on(n.move,e.hitch(this,"onMouseMove")),this.shape.on(n.release,e.hitch(this,"onMouseUp"))),this._lastX=t.clientX,this._lastY=t.clientY):new this.mover(this.shape,t,this),r.stop(t)},onMouseMove:function(e){var t=e.clientX,i=e.clientY;(Math.abs(t-this._lastX)>this.delay||Math.abs(i-this._lastY)>this.delay)&&(this.onMouseUp(e),new this.mover(this.shape,e,this)),r.stop(e)},onMouseUp:function(e){this.events.pop().remove()},onMoveStart:function(e){a.publish("/gfx/move/start",e),o.add(s.body(),"dojoMove")},onMoveStop:function(e){a.publish("/gfx/move/stop",e),o.remove(s.body(),"dojoMove")},onFirstMove:function(e){},onMove:function(e,t){this.onMoving(e,t),this.shape.applyLeftTransform(t),this.onMoved(e,t)},onMoving:function(e,t){},onMoved:function(e,t){}})});//# sourceMappingURL=Moveable.js.map