{"version":3,"sources":["canvasWithEvents.js.uncompressed.js"],"names":["define","lang","declare","has","on","aspect","touch","Color","dom","domGeom","win","g","canvas","shapeLib","m","makeFakeEvent","event","fakeEvent","k","hitch","add","document","createEvent","Object","defineProperty","value","type","e","canvasWithEvents","Shape","_testInputs","ctx","pos","this","clip","canvasFill","strokeStyle","_hitTestPixel","_renderShape","length","t","getTransform","i","input","target","x","y","p","multiplyPoint","invert","_hitTestGeometry","clearRect","save","translate","_render","getImageData","data","restore","isPointInPath","_renderFill","apply","pickingMode","fill","inherited","arguments","_renderStroke","c","color","getEventSource","surface","rawNode","listener","expectedTarget","isDescendant","connect","name","object","method","substring","disconnect","handle","remove","Group","j","children","posbk","allFound","Image","s","shape","fillRect","width","height","Text","Rect","Circle","Ellipse","Line","Polyline","Path","TextPath","fixedEventData","Surface","constructor","_elementUnderPointer","fixTarget","defineProperties","_dojoElementFromPoint","changedTouches","pageX","pageY","configurable","enumerable","gfxTarget","changedTouch","corrected","call","_checkPointer","emit","types","relatedTarget","oldBubbles","bubbles","TYPES","out","over","elementUnderPointer","oldElementUnderPointer","_initMirrorCanvas","mirror","mirrorCanvas","ownerDocument","createElement","style","position","left","top","parentNode","appendChild","moveEvt","destroy","removeChild","createSurface","w","h","parent","byId","normalizedLength","_parent","_base","_fixMsTouchAction","oldAddEventListener","addEventListener","oldRemoveEventListener","removeEventListener","listeners","addEventListenerImpl","useCapture","actualListener","push","original","actual","removeEventListenerImpl","record","splice","surfacePosition","getContext","fillStyle","inputs","Creator","createObject","listenersOfType","after","extend"],"mappings":"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","file":"canvasWithEvents.js.uncompressed.js"}