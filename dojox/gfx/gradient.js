//>>built
define("dojox/gfx/gradient",["dojo/_base/lang","./matrix","dojo/_base/Color"],function(e,t,i){function a(e,i,a,n,r,o){var s=t.multiplyPoint(a,e,i),l=t.multiplyPoint(n,s);return{r:s,p:l,o:t.multiplyPoint(r,l).x/o}}function n(e,t){return e.o-t.o}var r=e.getObject("dojox.gfx.gradient",!0),o=i;return r.rescale=function(e,t,a){var n,r=e.length,s=t>a;if(s){var l=t;t=a,a=l}if(!r)return[];if(a<=e[0].offset)n=[{offset:0,color:e[0].color},{offset:1,color:e[0].color}];else if(t>=e[r-1].offset)n=[{offset:0,color:e[r-1].color},{offset:1,color:e[r-1].color}];else{var d,h,u,c=a-t;for(n=[],0>t&&n.push({offset:0,color:new o(e[0].color)}),u=0;r>u&&(d=e[u],!(d.offset>=t));++u);for(u?(h=e[u-1],n.push({offset:0,color:i.blendColors(new o(h.color),new o(d.color),(t-h.offset)/(d.offset-h.offset))})):n.push({offset:0,color:new o(d.color)});r>u&&(d=e[u],!(d.offset>=a));++u)n.push({offset:(d.offset-t)/c,color:new o(d.color)});r>u?(h=e[u-1],n.push({offset:1,color:i.blendColors(new o(h.color),new o(d.color),(a-h.offset)/(d.offset-h.offset))})):n.push({offset:1,color:new o(e[r-1].color)})}if(s)for(n.reverse(),u=0,r=n.length;r>u;++u)d=n[u],d.offset=1-d.offset;return n},r.project=function(e,i,o,s,l,d){e=e||t.identity;var h=t.multiplyPoint(e,i.x1,i.y1),u=t.multiplyPoint(e,i.x2,i.y2),c=Math.atan2(u.y-h.y,u.x-h.x),m=t.project(u.x-h.x,u.y-h.y),f=t.multiplyPoint(m,h),p=t.multiplyPoint(m,u),g=new t.Matrix2D([t.rotate(-c),{dx:-f.x,dy:-f.y}]),y=t.multiplyPoint(g,p).x,v=[a(o.x,o.y,e,m,g,y),a(s.x,s.y,e,m,g,y),a(o.x,s.y,e,m,g,y),a(s.x,o.y,e,m,g,y)].sort(n),b=v[0].o,k=v[3].o,M=r.rescale(i.colors,b,k);Math.atan2(v[3].r.y-v[0].r.y,v[3].r.x-v[0].r.x);return{type:"linear",x1:v[0].p.x,y1:v[0].p.y,x2:v[3].p.x,y2:v[3].p.y,colors:M,angle:c}},r});//# sourceMappingURL=gradient.js.map