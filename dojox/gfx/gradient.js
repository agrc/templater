//>>built
define("dojox/gfx/gradient",["dojo/_base/lang","./matrix","dojo/_base/Color"],function(e,t,a){function i(e,a,i,r,o,n){var s=t.multiplyPoint(i,e,a),d=t.multiplyPoint(r,s);return{r:s,p:d,o:t.multiplyPoint(o,d).x/n}}function r(e,t){return e.o-t.o}var o=e.getObject("dojox.gfx.gradient",!0),n=a;return o.rescale=function(e,t,i){var r,o=e.length,s=t>i;if(s){var d=t;t=i,i=d}if(!o)return[];if(i<=e[0].offset)r=[{offset:0,color:e[0].color},{offset:1,color:e[0].color}];else if(t>=e[o-1].offset)r=[{offset:0,color:e[o-1].color},{offset:1,color:e[o-1].color}];else{var l,h,m,u=i-t;for(r=[],0>t&&r.push({offset:0,color:new n(e[0].color)}),m=0;o>m&&(l=e[m],!(l.offset>=t));++m);for(m?(h=e[m-1],r.push({offset:0,color:a.blendColors(new n(h.color),new n(l.color),(t-h.offset)/(l.offset-h.offset))})):r.push({offset:0,color:new n(l.color)});o>m&&(l=e[m],!(l.offset>=i));++m)r.push({offset:(l.offset-t)/u,color:new n(l.color)});o>m?(h=e[m-1],r.push({offset:1,color:a.blendColors(new n(h.color),new n(l.color),(i-h.offset)/(l.offset-h.offset))})):r.push({offset:1,color:new n(e[o-1].color)})}if(s)for(r.reverse(),m=0,o=r.length;o>m;++m)l=r[m],l.offset=1-l.offset;return r},o.project=function(e,a,n,s,d,l){e=e||t.identity;var h=t.multiplyPoint(e,a.x1,a.y1),m=t.multiplyPoint(e,a.x2,a.y2),u=Math.atan2(m.y-h.y,m.x-h.x),c=t.project(m.x-h.x,m.y-h.y),f=t.multiplyPoint(c,h),p=t.multiplyPoint(c,m),y=new t.Matrix2D([t.rotate(-u),{dx:-f.x,dy:-f.y}]),g=t.multiplyPoint(y,p).x,v=[i(n.x,n.y,e,c,y,g),i(s.x,s.y,e,c,y,g),i(n.x,s.y,e,c,y,g),i(s.x,n.y,e,c,y,g)].sort(r),M=v[0].o,b=v[3].o,k=o.rescale(a.colors,M,b);Math.atan2(v[3].r.y-v[0].r.y,v[3].r.x-v[0].r.x);return{type:"linear",x1:v[0].p.x,y1:v[0].p.y,x2:v[3].p.x,y2:v[3].p.y,colors:k,angle:u}},o});//# sourceMappingURL=gradient.js.map