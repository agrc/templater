//>>built
define("dojox/gfx/_base",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/Color","dojo/_base/sniff","dojo/_base/window","dojo/_base/array","dojo/dom","dojo/dom-construct","dojo/dom-geometry"],function(e,t,i,a,o,r,n,s,l){var d=t.getObject("dojox.gfx",!0),u=d._base={};d._hasClass=function(e,t){var i=e.getAttribute("className");return i&&(" "+i+" ").indexOf(" "+t+" ")>=0},d._addClass=function(e,t){var i=e.getAttribute("className")||"";(!i||(" "+i+" ").indexOf(" "+t+" ")<0)&&e.setAttribute("className",i+(i?" ":"")+t)},d._removeClass=function(e,t){var i=e.getAttribute("className");i&&e.setAttribute("className",i.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)"),"$1$2"))},u._getFontMeasurements=function(){var e,t,i={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};a("ie")&&((t=o.doc.documentElement.style.fontSize||"")||(o.doc.documentElement.style.fontSize="100%"));var r=s.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},o.body());for(e in i)r.style.fontSize=e,i[e]=16*Math.round(12*r.offsetHeight/16)/12/1e3;return a("ie")&&(o.doc.documentElement.style.fontSize=t),o.body().removeChild(r),i};var c=null;u._getCachedFontMeasurements=function(e){return!e&&c||(c=u._getFontMeasurements()),c};var h=null,m={};u._getTextBox=function(e,t,i){var a,r,n,d,u=arguments.length;if(h||(h=s.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},o.body())),a=h,a.className="",r=a.style,r.borderWidth="0",r.margin="0",r.padding="0",r.outline="0",u>1&&t)for(n in t)n in m||(r[n]=t[n]);if(u>2&&i&&(a.className=i),a.innerHTML=e,a.getBoundingClientRect){var c=a.getBoundingClientRect();d={l:c.left,t:c.top,w:c.width||c.right-c.left,h:c.height||c.bottom-c.top}}else d=l.getMarginBox(a);return a.innerHTML="",d},u._computeTextLocation=function(e,t,i,a){var o={};switch(e.align){case"end":o.x=e.x-t;break;case"middle":o.x=e.x-t/2;break;default:o.x=e.x}var r=a?.75:1;return o.y=e.y-i*r,o},u._computeTextBoundingBox=function(e){if(!d._base._isRendered(e))return{x:0,y:0,width:0,height:0};var t,i=e.getShape(),a=e.getFont()||d.defaultFont,o=e.getTextWidth(),r=d.normalizedLength(a.size);return t=u._computeTextLocation(i,o,r,!0),{x:t.x,y:t.y,width:o,height:r}},u._isRendered=function(e){for(var t=e.parent;t&&t.getParent;)t=t.parent;return null!==t};var f=0;u._getUniqueId=function(){var t;do{t=e._scopeName+"xUnique"+ ++f}while(n.byId(t));return t};var p=a("pointer-events")?"touchAction":a("MSPointer")?"msTouchAction":null;return u._fixMsTouchAction=p?function(e){e.rawNode.style[p]="none"}:function(){},t.mixin(d,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var e={};return function(t){var i=e[t];return i?new i:(i=e[t]=new Function,i.prototype=d["default"+t],new i)}}(),normalizeColor:function(e){return e instanceof i?e:new i(e)},normalizeParameters:function(e,t){var i;if(t){var a={};for(i in e)i in t&&!(i in a)&&(e[i]=t[i])}return e},makeParameters:function(e,i){var a=null;if(!i)return t.delegate(e);var o={};for(a in e)a in o||(o[a]=t.clone(a in i?i[a]:e[a]));return o},formatNumber:function(e,t){var i=e.toString();if(i.indexOf("e")>=0)i=e.toFixed(4);else{var a=i.indexOf(".");a>=0&&i.length-a>5&&(i=e.toFixed(4))}return e<0?i:t?" "+i:i},makeFontString:function(e){return e.style+" "+e.variant+" "+e.weight+" "+e.size+" "+e.family},splitFontString:function(e){var t=d.getDefault("Font"),i=e.split(/\s+/);do{if(i.length<5)break;t.style=i[0],t.variant=i[1],t.weight=i[2];var a=i[3].indexOf("/");t.size=a<0?i[3]:i[3].substring(0,a);var o=4;a<0&&("/"==i[4]?o=6:"/"==i[4].charAt(0)&&(o=5)),o<i.length&&(t.family=i.slice(o).join(" "))}while(!1);return t},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return d._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(e){return e*d.px_in_pt()},px2pt:function(e){return e/d.px_in_pt()},normalizedLength:function(e){if(0===e.length)return 0;if(e.length>2){var t=d.px_in_pt(),i=parseFloat(e);switch(e.slice(-2)){case"px":return i;case"pt":return i*t;case"in":return 72*i*t;case"pc":return 12*i*t;case"mm":return i*d.mm_in_pt*t;case"cm":return i*d.cm_in_pt*t}}return parseFloat(e)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(e,t){return e&&t&&e===t},switchTo:function(e){var t="string"==typeof e?d[e]:e;t&&(r.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","Surface","createSurface","fixTarget"],function(e){d[e]=t[e]}),"string"==typeof e?d.renderer=e:r.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(e){return d.renderer=d[e]&&d[e].Surface===d.Surface?e:null}))}}),d});//# sourceMappingURL=_base.js.map