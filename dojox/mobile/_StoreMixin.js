//>>built
define("dojox/mobile/_StoreMixin",["dojo/_base/Deferred","dojo/_base/declare"],function(e,t){return t("dojox.mobile._StoreMixin",null,{store:null,query:null,queryOptions:null,labelProperty:"label",childrenProperty:"children",setStore:function(e,t,i){return e===this.store?null:(e&&(e.getValue=function(e,t){return e[t]}),this.store=e,this._setQuery(t,i),this.refresh())},setQuery:function(e,t){return this._setQuery(e,t),this.refresh()},_setQuery:function(e,t){this.query=e,this.queryOptions=t||this.queryOptions},refresh:function(){if(!this.store)return null;var t=this,i=this.store.query(this.query,this.queryOptions);return e.when(i,function(e){e.items&&(e=e.items),i.observe&&(t._observe_h&&t._observe_h.remove(),t._observe_h=i.observe(function(e,i,a){-1!=i?a!=i?(t.onDelete(e,i),-1!=a&&(t.onAdd?t.onAdd(e,a):t.onUpdate(e,a))):t.onAdd&&t.onUpdate(e,a):-1!=a&&(t.onAdd?t.onAdd(e,a):t.onUpdate(e,a))},!0)),t.onComplete(e)},function(e){t.onError(e)}),i},destroy:function(){this._observe_h&&(this._observe_h=this._observe_h.remove()),this.inherited(arguments)}})});//# sourceMappingURL=_StoreMixin.js.map