//>>built
define("dojox/mobile/dh/JsonContentHandler",["dojo/_base/kernel","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/json","dojo/dom-construct"],function(e,t,i,a,o,r,n){return i("dojox.mobile.dh.JsonContentHandler",null,{parse:function(e,i,s){var d,l=n.create("DIV");i.insertBefore(l,s),this._ws=[],this._req=[];var h=r.parse(e);return o.when(this._loadPrereqs(h),a.hitch(this,function(){return d=this._instantiate(h,l),d.style.visibility="hidden",t.forEach(this._ws,function(e){!e._started&&e.startup&&e.startup()}),this._ws=null,d.id}))},_loadPrereqs:function(i){var a=new o,r=this._collectRequires(i);return 0===r.length?!0:e.require?(t.forEach(r,function(t){e.require(t)}),!0):(r=t.map(r,function(e){return e.replace(/\./g,"/")}),require(r,function(){a.resolve(!0)}),a)},_collectRequires:function(e){var t=e["class"];for(var i in e)if("@"!=i.charAt(0)&&"children"!==i){var o=t||i.replace(/:.*/,"");if(this._req.push(o),o)for(var r=t?[e]:a.isArray(e[i])?e[i]:[e[i]],n=0;n<r.length;n++)if(t){if(r[n].children)for(var s=0;s<r[n].children.length;s++)this._collectRequires(r[n].children[s])}else this._collectRequires(r[n])}return this._req},_instantiate:function(e,t,i){var o,n=e["class"];for(var s in e)if("@"!=s.charAt(0)&&"children"!==s){var d=a.getObject(n||s.replace(/:.*/,""));if(d)for(var l=d.prototype,h=n?[e]:a.isArray(e[s])?e[s]:[e[s]],c=0;c<h.length;c++){var u={};for(var m in h[c])if("@"==m.charAt(0)){var f=h[c][m];m=m.substring(1);var p=typeof l[m];a.isArray(l[m])?u[m]=f.split(/\s*,\s*/):"string"===p?u[m]=f:"number"===p?u[m]=f-0:"boolean"===p?u[m]="false"!==f:"object"===p?u[m]=r.parse(f):"function"===p&&(u[m]=a.getObject(f,!1)||new Function(f))}if(o=new d(u,t),t&&this._ws.push(o),i&&o.placeAt(i.containerNode||i.domNode),n){if(h[c].children)for(var g=0;g<h[c].children.length;g++)this._instantiate(h[c].children[g],null,o)}else this._instantiate(h[c],null,o)}}return o&&o.domNode}})});//# sourceMappingURL=JsonContentHandler.js.map