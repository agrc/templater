//>>built
define("dojox/mobile/scrollable",["dojo/_base/kernel","dojo/_base/connect","dojo/_base/event","dojo/_base/lang","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/dom-geometry","dojo/touch","dijit/registry","dijit/form/_TextBoxMixin","./sniff","./_css3","./_maskUtils","./common","dojo/_base/declare","dojo/has!dojo-bidi?dojox/mobile/bidi/Scrollable"],function(e,t,i,o,a,r,n,s,l,d,h,c,u,m,f,p,g,y){var v=o.getObject("dojox.mobile",!0);u.add("translate3d",function(){if(u("css3-animations")){var e=a.doc.createElement("div");e.style[m.name("transform")]="translate3d(0px,1px,0px)",a.doc.documentElement.appendChild(e);var t=a.doc.defaultView.getComputedStyle(e,"")[m.name("transform",!0)],i=t&&0===t.indexOf("matrix");return a.doc.documentElement.removeChild(e),i}});var b=function(){};return o.extend(b,{fixedHeaderHeight:0,fixedFooterHeight:0,isLocalFooter:!1,scrollBar:!0,scrollDir:"v",weight:.6,fadeScrollBar:!0,disableFlashScrollBar:!1,threshold:4,constraint:!0,touchNode:null,propagatable:!0,dirLock:!1,height:"",scrollType:0,_parentPadBorderExtentsBottom:0,_moved:!1,init:function(e){if(e)for(var i in e)e.hasOwnProperty(i)&&(this[i]="domNode"!=i&&"containerNode"!=i||"string"!=typeof e[i]?e[i]:a.doc.getElementById(e[i]));if(p._setTouchAction(this.domNode,"none"),this.touchNode=this.touchNode||this.containerNode,this._v=-1!=this.scrollDir.indexOf("v"),this._h=-1!=this.scrollDir.indexOf("h"),this._f="f"==this.scrollDir,this._ch=[],this._ch.push(t.connect(this.touchNode,d.press,this,"onTouchStart")),u("css3-animations"))if(this._useTopLeft=this.scrollType?2===this.scrollType:!1,this._useTopLeft||(this._useTransformTransition=this.scrollType?3===this.scrollType:u("ios")>=6||u("android")||u("bb")),this._useTopLeft)this._ch.push(t.connect(this.containerNode,m.name("transitionEnd"),this,"onFlickAnimationEnd"));else{if(this._useTransformTransition)this._ch.push(t.connect(this.containerNode,m.name("transitionEnd"),this,"onFlickAnimationEnd"));else{this._ch.push(t.connect(this.containerNode,m.name("animationEnd"),this,"onFlickAnimationEnd")),this._ch.push(t.connect(this.containerNode,m.name("animationStart"),this,"onFlickAnimationStart"));for(var o=0;3>o;o++)this.setKeyframes(null,null,o)}u("translate3d")&&s.set(this.containerNode,m.name("transform"),"translate3d(0,0,0)")}this._speed={x:0,y:0},this._appFooterHeight=0,this.isTopLevel()&&!this.noResize&&this.resize();var r=this;setTimeout(function(){r.flashScrollBar()},600),a.global.addEventListener&&(this._onScroll=function(e){if(r.domNode&&"none"!==r.domNode.style.display){var t,i=r.domNode.scrollTop,o=r.domNode.scrollLeft;(i>0||o>0)&&(t=r.getPos(),r.domNode.scrollLeft=0,r.domNode.scrollTop=0,r.scrollTo({x:t.x-o,y:t.y-i}))}},a.global.addEventListener("scroll",this._onScroll,!0)),!this.disableTouchScroll&&this.domNode.addEventListener&&(this._onFocusScroll=function(e){if(r.domNode&&"none"!==r.domNode.style.display){var t,i,o=a.doc.activeElement;o&&(t=o.getBoundingClientRect(),i=r.domNode.getBoundingClientRect(),t.height<r.getDim().d.h&&(t.top<i.top+r.fixedHeaderHeight?r.scrollIntoView(o,!0):t.top+t.height>i.top+i.height-r.fixedFooterHeight&&r.scrollIntoView(o,!1)))}},this.domNode.addEventListener("focus",this._onFocusScroll,!0))},isTopLevel:function(){return!0},cleanup:function(){if(this._ch){for(var e=0;e<this._ch.length;e++)t.disconnect(this._ch[e]);this._ch=null}this._onScroll&&a.global.removeEventListener&&(a.global.removeEventListener("scroll",this._onScroll,!0),this._onScroll=null),this._onFocusScroll&&this.domNode.removeEventListener&&(this.domNode.removeEventListener("focus",this._onFocusScroll,!0),this._onFocusScroll=null)},findDisp:function(e){if(!e.parentNode)return null;if(1===e.nodeType&&r.contains(e,"mblSwapView")&&"none"!==e.style.display)return e;for(var t=e.parentNode.childNodes,i=0;i<t.length;i++){var o=t[i];if(1===o.nodeType&&r.contains(o,"mblView")&&"none"!==o.style.display)return o}return e},getScreenSize:function(){return{h:a.global.innerHeight||a.doc.documentElement.clientHeight||a.doc.documentElement.offsetHeight,w:a.global.innerWidth||a.doc.documentElement.clientWidth||a.doc.documentElement.offsetWidth}},resize:function(e){this._appFooterHeight=this._fixedAppFooter?this._fixedAppFooter.offsetHeight:0,this.isLocalHeader&&(this.containerNode.style.marginTop=this.fixedHeaderHeight+"px");for(var t=0,i=this.domNode;i&&"BODY"!=i.tagName&&(i=this.findDisp(i),i);i=i.offsetParent)t+=i.offsetTop+l.getBorderExtents(i).h;var o,a=this.getScreenSize().h,r=a-t-this._appFooterHeight;if("inherit"===this.height)this.domNode.offsetParent&&(o=l.getContentBox(this.domNode.offsetParent).h-l.getBorderExtents(this.domNode).h+"px");else if("auto"===this.height){var n=this.domNode.offsetParent;if(n){this.domNode.style.height="0px";var s=n.getBoundingClientRect(),d=this.domNode.getBoundingClientRect(),h=s.bottom-this._appFooterHeight-this._parentPadBorderExtentsBottom;r=d.bottom>=h?a-(d.top-s.top)-this._appFooterHeight-this._parentPadBorderExtentsBottom:h-d.bottom}var c=Math.max(this.domNode.scrollHeight,this.containerNode.scrollHeight);o=(c?Math.min(c,r):r)+"px"}else this.height&&(o=this.height);o||(o=r+"px"),"-"!==o.charAt(0)&&"default"!==o&&(this.domNode.style.height=o),this._conn||this.onTouchEnd()},onFlickAnimationStart:function(e){e&&i.stop(e)},onFlickAnimationEnd:function(e){if(u("ios")&&this._keepInputCaretInActiveElement(),e){var t=e.animationName;if(t&&-1===t.indexOf("scrollableViewScroll2"))return void(-1!==t.indexOf("scrollableViewScroll0")?this._scrollBarNodeV&&r.remove(this._scrollBarNodeV,"mblScrollableScrollTo0"):-1!==t.indexOf("scrollableViewScroll1")?this._scrollBarNodeH&&r.remove(this._scrollBarNodeH,"mblScrollableScrollTo1"):(this._scrollBarNodeV&&(this._scrollBarNodeV.className=""),this._scrollBarNodeH&&(this._scrollBarNodeH.className="")));if(this._useTransformTransition||this._useTopLeft){var o=e.target;if(o===this._scrollBarV||o===this._scrollBarH){var a="mblScrollableScrollTo"+(o===this._scrollBarV?"0":"1");return void(r.contains(o,a)?r.remove(o,a):o.className="")}}e.srcElement&&i.stop(e)}if(this.stopAnimation(),this._bounce){var n=this,s=n._bounce;setTimeout(function(){n.slideTo(s,.3,"ease-out")},0),n._bounce=void 0}else this.hideScrollBar(),this.removeCover()},isFormElement:function(e){if(e&&1!==e.nodeType&&(e=e.parentNode),!e||1!==e.nodeType)return!1;var t=e.tagName;return"SELECT"===t||"INPUT"===t||"TEXTAREA"===t||"BUTTON"===t},onTouchStart:function(e){this.disableTouchScroll||this._conn&&(new Date).getTime()-this.startTime<500||(this._conn||(this._conn=[],this._conn.push(t.connect(a.doc,d.move,this,"onTouchMove")),this._conn.push(t.connect(a.doc,d.release,this,"onTouchEnd"))),this._aborted=!1,r.contains(this.containerNode,"mblScrollableScrollTo2")?this.abort():(this._scrollBarNodeV&&(this._scrollBarNodeV.className=""),this._scrollBarNodeH&&(this._scrollBarNodeH.className="")),this.touchStartX=e.touches?e.touches[0].pageX:e.clientX,this.touchStartY=e.touches?e.touches[0].pageY:e.clientY,this.startTime=(new Date).getTime(),this.startPos=this.getPos(),this._dim=this.getDim(),this._time=[0],this._posX=[this.touchStartX],this._posY=[this.touchStartY],this._locked=!1,this._moved=!1,this._preventDefaultInNextTouchMove=!0,this.isFormElement(e.target)||(this.propagatable?e.preventDefault():i.stop(e),this._preventDefaultInNextTouchMove=!1))},onTouchMove:function(e){if(!this._locked){if(this._preventDefaultInNextTouchMove){this._preventDefaultInNextTouchMove=!1;var t=h.getEnclosingWidget((e.targetTouches&&1===e.targetTouches.length?e.targetTouches[0]:e).target);t&&t.isInstanceOf(c)&&(this.propagatable?e.preventDefault():i.stop(e))}var o=e.touches?e.touches[0].pageX:e.clientX,a=e.touches?e.touches[0].pageY:e.clientY,r=o-this.touchStartX,n=a-this.touchStartY,s={x:this.startPos.x+r,y:this.startPos.y+n},l=this._dim;if(r=Math.abs(r),n=Math.abs(n),1==this._time.length){if(this.dirLock&&(this._v&&!this._h&&r>=this.threshold&&r>=n||(this._h||this._f)&&!this._v&&n>=this.threshold&&n>=r))return void(this._locked=!0);if(this._v&&this._h){if(n<this.threshold&&r<this.threshold)return}else if(this._v&&n<this.threshold||(this._h||this._f)&&r<this.threshold)return;this._moved=!0,this.addCover(),this.showScrollBar()}var d=this.weight;this._v&&this.constraint&&(s.y>0?s.y=Math.round(s.y*d):s.y<-l.o.h&&(l.c.h<l.d.h?s.y=Math.round(s.y*d):s.y=-l.o.h-Math.round((-l.o.h-s.y)*d))),(this._h||this._f)&&this.constraint&&(s.x>0?s.x=Math.round(s.x*d):s.x<-l.o.w&&(l.c.w<l.d.w?s.x=Math.round(s.x*d):s.x=-l.o.w-Math.round((-l.o.w-s.x)*d))),this.scrollTo(s);var u=10,m=this._time.length;if(m>=2){this._moved=!0;var f,p;this._v&&!this._h?(f=this._posY[m-1]-this._posY[m-2],p=a-this._posY[m-1]):!this._v&&this._h&&(f=this._posX[m-1]-this._posX[m-2],p=o-this._posX[m-1]),0>f*p&&(this._time=[this._time[m-1]],this._posX=[this._posX[m-1]],this._posY=[this._posY[m-1]],m=1)}m==u&&(this._time.shift(),this._posX.shift(),this._posY.shift()),this._time.push((new Date).getTime()-this.startTime),this._posX.push(o),this._posY.push(a)}},_keepInputCaretInActiveElement:function(){var e,t=a.doc.activeElement;!t||"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName||(e=t.value,"number"==t.type||"week"==t.type?(e?t.value=t.value+1:t.value="week"==t.type?"2013-W10":1,t.value=e):(t.value=t.value+" ",t.value=e))},onTouchEnd:function(e){if(!this._locked){var i=this._speed={x:0,y:0},o=this._dim,a=this.getPos(),r={};if(e){if(!this._conn)return;for(var n=0;n<this._conn.length;n++)t.disconnect(this._conn[n]);this._conn=null;var s=!1;if(this._aborted||this._moved||(s=!0),s){if(this.hideScrollBar(),this.removeCover(),u("touch")&&u("clicks-prevented")&&!this.isFormElement(e.target)){var l=e.target;1!=l.nodeType&&(l=l.parentNode),setTimeout(function(){v._sendClick(l,e)})}return}i=this._speed=this.getSpeed()}else{if(0==a.x&&0==a.y)return;o=this.getDim()}if(this._v&&(r.y=a.y+i.y),(this._h||this._f)&&(r.x=a.x+i.x),this.adjustDestination(r,a,o)!==!1){if(this.constraint){if("v"==this.scrollDir&&o.c.h<o.d.h)return void this.slideTo({y:0},.3,"ease-out");if("h"==this.scrollDir&&o.c.w<o.d.w)return void this.slideTo({x:0},.3,"ease-out");if(this._v&&this._h&&o.c.h<o.d.h&&o.c.w<o.d.w)return void this.slideTo({x:0,y:0},.3,"ease-out")}var d,h="ease-out",c={};if(this._v&&this.constraint&&(r.y>0?a.y>0?(d=.3,r.y=0):(r.y=Math.min(r.y,20),h="linear",c.y=0):-i.y>o.o.h- -a.y&&(a.y<-o.o.h?(d=.3,r.y=o.c.h<=o.d.h?0:-o.o.h):(r.y=Math.max(r.y,-o.o.h-20),h="linear",c.y=-o.o.h))),(this._h||this._f)&&this.constraint&&(r.x>0?a.x>0?(d=.3,r.x=0):(r.x=Math.min(r.x,20),h="linear",c.x=0):-i.x>o.o.w- -a.x&&(a.x<-o.o.w?(d=.3,r.x=o.c.w<=o.d.w?0:-o.o.w):(r.x=Math.max(r.x,-o.o.w-20),h="linear",c.x=-o.o.w))),this._bounce=void 0!==c.x||void 0!==c.y?c:void 0,void 0===d){var m,f;if(this._v&&this._h?(f=Math.sqrt(i.x*i.x+i.y*i.y),m=Math.sqrt(Math.pow(r.y-a.y,2)+Math.pow(r.x-a.x,2))):this._v?(f=i.y,m=r.y-a.y):this._h&&(f=i.x,m=r.x-a.x),0===m&&!e)return;d=0!==f?Math.abs(m/f):.01}this.slideTo(r,d,h)}}},adjustDestination:function(e,t,i){return!0},abort:function(){this._aborted=!0,this.scrollTo(this.getPos()),this.stopAnimation()},stopAnimation:function(){r.remove(this.containerNode,"mblScrollableScrollTo2"),this.containerNode.className=this.containerNode.className.replace(/mblScrollableScrollTo2-[^ ]+/,""),this._scrollBarV&&(this._scrollBarV.className=""),this._scrollBarH&&(this._scrollBarH.className=""),(this._useTransformTransition||this._useTopLeft)&&(this.containerNode.style[m.name("transition")]="",this._scrollBarV&&(this._scrollBarV.style[m.name("transition")]=""),this._scrollBarH&&(this._scrollBarH.style[m.name("transition")]=""))},scrollIntoView:function(e,t,i){if(this._v){for(var o=this.containerNode,a=this.getDim().d.h,r=0,n=e;n!==o;n=n.offsetParent){if(!n||"BODY"===n.tagName)return;r+=n.offsetTop}var s=t?Math.max(a-o.offsetHeight,-r):Math.min(0,a-r-e.offsetHeight);i&&"number"==typeof i?this.slideTo({y:s},i,"ease-out"):this.scrollTo({y:s})}},getSpeed:function(){var e=0,t=0,i=this._time.length;if(i>=2&&(new Date).getTime()-this.startTime-this._time[i-1]<500){var o=this._posY[i-(i>3?2:1)]-this._posY[i-6>=0?i-6:0],a=this._posX[i-(i>3?2:1)]-this._posX[i-6>=0?i-6:0],r=this._time[i-(i>3?2:1)]-this._time[i-6>=0?i-6:0];t=this.calcSpeed(o,r),e=this.calcSpeed(a,r)}return{x:e,y:t}},calcSpeed:function(e,t){return 4*Math.round(e/t*100)},scrollTo:function(e,t,i){var o,a,r,n=!0;if(!this._aborted&&this._conn&&(this._dim||(this._dim=this.getDim()),a=e.y>0?e.y:0,r=this._dim.o.h+e.y<0?-1*(this._dim.o.h+e.y):0,o={bubbles:!1,cancelable:!1,x:e.x,y:e.y,beforeTop:a>0,beforeTopHeight:a,afterBottom:r>0,afterBottomHeight:r},n=this.onBeforeScroll(o)),n){var s=(i||this.containerNode).style;u("css3-animations")?this._useTopLeft?(s[m.name("transition")]="",this._v&&(s.top=e.y+"px"),(this._h||this._f)&&(s.left=e.x+"px")):(this._useTransformTransition&&(s[m.name("transition")]=""),s[m.name("transform")]=this.makeTranslateStr(e)):(this._v&&(s.top=e.y+"px"),(this._h||this._f)&&(s.left=e.x+"px")),u("ios")&&this._keepInputCaretInActiveElement(),t||this.scrollScrollBarTo(this.calcScrollBarPos(e)),o&&this.onAfterScroll(o)}},onBeforeScroll:function(e){return!0},onAfterScroll:function(e){},slideTo:function(e,t,i){this._runSlideAnimation(this.getPos(),e,t,i,this.containerNode,2),this.slideScrollBarTo(e,t,i)},makeTranslateStr:function(e){var t=this._v&&"number"==typeof e.y?e.y+"px":"0px",i=(this._h||this._f)&&"number"==typeof e.x?e.x+"px":"0px";return u("translate3d")?"translate3d("+i+","+t+",0px)":"translate("+i+","+t+")"},getPos:function(){if(u("css3-animations")){var e=a.doc.defaultView.getComputedStyle(this.containerNode,"");if(this._useTopLeft)return{x:parseInt(e.left)||0,y:parseInt(e.top)||0};var t=e[m.name("transform")];if(t&&0===t.indexOf("matrix")){var i=t.split(/[,\s\)]+/),o=0===t.indexOf("matrix3d")?12:4;return{y:i[o+1]-0,x:i[o]-0}}return{x:0,y:0}}var r=parseInt(this.containerNode.style.top)||0;return{y:r,x:this.containerNode.offsetLeft}},getDim:function(){var e={};return e.c={h:this.containerNode.offsetHeight,w:this.containerNode.offsetWidth},e.v={h:this.domNode.offsetHeight+this._appFooterHeight,w:this.domNode.offsetWidth},e.d={h:e.v.h-this.fixedHeaderHeight-this.fixedFooterHeight-this._appFooterHeight,w:e.v.w},e.o={h:e.c.h-e.v.h+this.fixedHeaderHeight+this.fixedFooterHeight+this._appFooterHeight,w:e.c.w-e.v.w},e},showScrollBar:function(){if(this.scrollBar){var e=this._dim;if(!("v"==this.scrollDir&&e.c.h<=e.d.h||"h"==this.scrollDir&&e.c.w<=e.d.w||this._v&&this._h&&e.c.h<=e.d.h&&e.c.w<=e.d.w)){var t=function(e,t){var i=e["_scrollBarNode"+t];if(!i){var o=n.create("div",null,e.domNode),a={position:"absolute",overflow:"hidden"};"V"==t?(a.right="2px",a.width="5px"):(a.bottom=(e.isLocalFooter?e.fixedFooterHeight:0)+2+"px",a.height="5px"),s.set(o,a),o.className="mblScrollBarWrapper",e["_scrollBarWrapper"+t]=o,i=n.create("div",null,o),s.set(i,m.add({opacity:.6,position:"absolute",backgroundColor:"#606060",fontSize:"1px",MozBorderRadius:"2px",zIndex:2147483647},{borderRadius:"2px",transformOrigin:"0 0"})),s.set(i,"V"==t?{width:"5px"}:{height:"5px"}),e["_scrollBarNode"+t]=i}return i};this._v&&!this._scrollBarV&&(this._scrollBarV=t(this,"V")),this._h&&!this._scrollBarH&&(this._scrollBarH=t(this,"H")),this.resetScrollBar()}}},hideScrollBar:function(){if(this.fadeScrollBar&&u("css3-animations")&&!v._fadeRule){var e=n.create("style",null,a.doc.getElementsByTagName("head")[0]);e.textContent=".mblScrollableFadeScrollBar{  "+m.name("animation-duration",!0)+": 1s;  "+m.name("animation-name",!0)+": scrollableViewFadeScrollBar;}@"+m.name("keyframes",!0)+" scrollableViewFadeScrollBar{  from { opacity: 0.6; }  to { opacity: 0; }}",v._fadeRule=e.sheet.cssRules[1]}if(this.scrollBar){var t=function(e,t){s.set(e,m.add({opacity:0},{animationDuration:""})),t._useTopLeft&&u("android")||(e.className="mblScrollableFadeScrollBar")};this._scrollBarV&&(t(this._scrollBarV,this),this._scrollBarV=null),this._scrollBarH&&(t(this._scrollBarH,this),this._scrollBarH=null)}},calcScrollBarPos:function(e){var t={},i=this._dim,o=function(e,t,i,o,a){var r=Math.round((o-t-8)/(o-a)*i);return-t+5>r&&(r=-t+5),r>e-5&&(r=e-5),r};return"number"==typeof e.y&&this._scrollBarV&&(t.y=o(this._scrollBarWrapperV.offsetHeight,this._scrollBarV.offsetHeight,e.y,i.d.h,i.c.h)),"number"==typeof e.x&&this._scrollBarH&&(t.x=o(this._scrollBarWrapperH.offsetWidth,this._scrollBarH.offsetWidth,e.x,i.d.w,i.c.w)),t},scrollScrollBarTo:function(e){this.scrollBar&&(this._v&&this._scrollBarV&&"number"==typeof e.y&&(u("css3-animations")?this._useTopLeft?s.set(this._scrollBarV,m.add({top:e.y+"px"},{transition:""})):(this._useTransformTransition&&(this._scrollBarV.style[m.name("transition")]=""),this._scrollBarV.style[m.name("transform")]=this.makeTranslateStr({y:e.y})):this._scrollBarV.style.top=e.y+"px"),this._h&&this._scrollBarH&&"number"==typeof e.x&&(u("css3-animations")?this._useTopLeft?s.set(this._scrollBarH,m.add({left:e.x+"px"},{transition:""})):(this._useTransformTransition&&(this._scrollBarH.style[m.name("transition")]=""),this._scrollBarH.style[m.name("transform")]=this.makeTranslateStr({x:e.x})):this._scrollBarH.style.left=e.x+"px"))},slideScrollBarTo:function(e,t,i){if(this.scrollBar){var o=this.calcScrollBarPos(this.getPos()),a=this.calcScrollBarPos(e);this._v&&this._scrollBarV&&this._runSlideAnimation({y:o.y},{y:a.y},t,i,this._scrollBarV,0),this._h&&this._scrollBarH&&this._runSlideAnimation({x:o.x},{x:a.x},t,i,this._scrollBarH,1)}},_runSlideAnimation:function(t,i,o,a,n,l){if(u("css3-animations"))if(this._useTopLeft)void 0===i.x&&void 0===i.y||(this.onFlickAnimationStart(),s.set(n,m.add({},{transitionProperty:void 0!==i.x&&void 0!==i.y?"top, left":void 0!==i.y?"top":"left",transitionDuration:o+"s",transitionTimingFunction:a})),setTimeout(function(){var e={};void 0!==i.x&&(e.left=i.x+"px"),void 0!==i.y&&(e.top=i.y+"px"),s.set(n,e)},0),r.add(n,"mblScrollableScrollTo"+l));else if(this._useTransformTransition)if(void 0===i.x&&(i.x=t.x),void 0===i.y&&(i.y=t.y),i.x!==t.x||i.y!==t.y){this.onFlickAnimationStart(),s.set(n,m.add({},{transitionProperty:m.name("transform"),transitionDuration:o+"s",transitionTimingFunction:a}));var d=this.makeTranslateStr(i);setTimeout(function(){s.set(n,m.add({},{transform:d}))},0),r.add(n,"mblScrollableScrollTo"+l)}else this.hideScrollBar(),this.removeCover();else{var h=this.findDisp(this.domNode)===this.domNode,c=this.setKeyframes(t,i,l,h);s.set(n,m.add({},{animationDuration:o+"s",animationTimingFunction:a})),r.add(n,c),r.add(n,"mblScrollableScrollTo"+l),2==l?this.scrollTo(i,!0,n):this.scrollScrollBarTo(i)}else if(e.fx&&e.fx.easing&&o){var f=this;e.fx.slideTo({node:n,duration:1e3*o,left:i.x,top:i.y,easing:"ease-out"==a?e.fx.easing.quadOut:e.fx.easing.linear,onBegin:function(){2==l&&f.onFlickAnimationStart()},onEnd:function(){2==l&&f.onFlickAnimationEnd()}}).play()}else 2==l?(this.onFlickAnimationStart(),this.scrollTo(i,!1,n),this.onFlickAnimationEnd()):this.scrollScrollBarTo(i)},resetScrollBar:function(){var e=function(e,t,i,o,a,r){if(t){var n={};n[r?"top":"left"]=a+4+"px";var l=0>=i-8?1:i-8;n[r?"height":"width"]=l+"px",s.set(e,n);var d=Math.round(i*i/o);d=Math.min(Math.max(d-8,5),l),t.style[r?"height":"width"]=d+"px",s.set(t,{opacity:.6})}},t=this.getDim();e(this._scrollBarWrapperV,this._scrollBarV,t.d.h,t.c.h,this.fixedHeaderHeight,!0),e(this._scrollBarWrapperH,this._scrollBarH,t.d.w,t.c.w,0),this.createMask()},createMask:function(){if(u("mask-image")){if(this._scrollBarWrapperV){var e=this._scrollBarWrapperV.offsetHeight;f.createRoundMask(this._scrollBarWrapperV,0,0,0,0,5,e,2,2,.5)}if(this._scrollBarWrapperH){var t=this._scrollBarWrapperH.offsetWidth;f.createRoundMask(this._scrollBarWrapperH,0,0,0,0,t,5,2,2,.5)}}},flashScrollBar:function(){if(!this.disableFlashScrollBar&&this.domNode&&(this._dim=this.getDim(),!(this._dim.d.h<=0))){this.showScrollBar();var e=this;setTimeout(function(){e.hideScrollBar()},300)}},addCover:function(){u("touch")||this.noCover||(v._cover?v._cover.style.display="":(v._cover=n.create("div",null,a.doc.body),v._cover.className="mblScrollableCover",s.set(v._cover,{backgroundColor:"#ffff00",opacity:0,position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:2147483647}),this._ch.push(t.connect(v._cover,d.press,this,"onTouchEnd"))),this.setSelectable(v._cover,!1),this.setSelectable(this.domNode,!1))},removeCover:function(){!u("touch")&&v._cover&&(v._cover.style.display="none",this.setSelectable(v._cover,!0),this.setSelectable(this.domNode,!0))},setKeyframes:function(e,t,i,o){v._rule||(v._rule=[]);var r=i+(o?"-in":"-out");if(!v._rule[r]){var s=n.create("style",null,a.doc.getElementsByTagName("head")[0]);s.textContent=".mblScrollableScrollTo"+r+"{"+m.name("animation-name",!0)+": scrollableViewScroll"+r+";}@"+m.name("keyframes",!0)+" scrollableViewScroll"+r+"{}",v._rule[r]=s.sheet.cssRules[1]}var l=v._rule[r];return l&&(e&&(l.deleteRule(u("webkit")?"from":0),(l.insertRule||l.appendRule).call(l,"from { "+m.name("transform",!0)+": "+this.makeTranslateStr(e)+"; }")),t&&(void 0===t.x&&(t.x=e.x),void 0===t.y&&(t.y=e.y),l.deleteRule(u("webkit")?"to":1),(l.insertRule||l.appendRule).call(l,"to { "+m.name("transform",!0)+": "+this.makeTranslateStr(t)+"; }"))),"mblScrollableScrollTo"+r},setSelectable:function(e,t){if(e.style.KhtmlUserSelect=t?"auto":"none",e.style.MozUserSelect=t?"":"none",e.onselectstart=t?null:function(){return!1},u("ie")){e.unselectable=t?"":"on";for(var i=e.getElementsByTagName("*"),o=0;o<i.length;o++)i[o].unselectable=t?"":"on"}}}),b=u("dojo-bidi")?g("dojox.mobile.Scrollable",[b,y]):b,o.setObject("dojox.mobile.scrollable",b),b});//# sourceMappingURL=scrollable.js.map