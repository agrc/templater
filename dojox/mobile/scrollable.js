//>>built
define("dojox/mobile/scrollable",["dojo/_base/kernel","dojo/_base/connect","dojo/_base/event","dojo/_base/lang","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/dom-geometry","dojo/touch","dijit/registry","dijit/form/_TextBoxMixin","./sniff","./_css3","./_maskUtils","./common","dojo/_base/declare","dojo/has!dojo-bidi?dojox/mobile/bidi/Scrollable"],function(e,t,i,a,o,n,r,s,d,l,h,c,u,m,f,g,p,v){var y=a.getObject("dojox.mobile",!0);u.add("translate3d",function(){if(u("css3-animations")){var e=o.doc.createElement("div");e.style[m.name("transform")]="translate3d(0px,1px,0px)",o.doc.documentElement.appendChild(e);var t=o.doc.defaultView.getComputedStyle(e,"")[m.name("transform",!0)],i=t&&0===t.indexOf("matrix");return o.doc.documentElement.removeChild(e),i}});var b=function(){};return a.extend(b,{fixedHeaderHeight:0,fixedFooterHeight:0,isLocalFooter:!1,scrollBar:!0,scrollDir:"v",weight:.6,fadeScrollBar:!0,disableFlashScrollBar:!1,threshold:4,constraint:!0,touchNode:null,propagatable:!0,dirLock:!1,height:"",scrollType:0,_parentPadBorderExtentsBottom:0,_moved:!1,init:function(e){if(e)for(var i in e)e.hasOwnProperty(i)&&(this[i]="domNode"!=i&&"containerNode"!=i||"string"!=typeof e[i]?e[i]:o.doc.getElementById(e[i]));if(g._setTouchAction(this.domNode,"none"),this.touchNode=this.touchNode||this.containerNode,this._v=-1!=this.scrollDir.indexOf("v"),this._h=-1!=this.scrollDir.indexOf("h"),this._f="f"==this.scrollDir,this._ch=[],this._ch.push(t.connect(this.touchNode,l.press,this,"onTouchStart")),u("css3-animations"))if(this._useTopLeft=this.scrollType?2===this.scrollType:!1,this._useTopLeft||(this._useTransformTransition=this.scrollType?3===this.scrollType:u("ios")>=6||u("android")||u("bb")),this._useTopLeft)this._ch.push(t.connect(this.containerNode,m.name("transitionEnd"),this,"onFlickAnimationEnd"));else{if(this._useTransformTransition)this._ch.push(t.connect(this.containerNode,m.name("transitionEnd"),this,"onFlickAnimationEnd"));else{this._ch.push(t.connect(this.containerNode,m.name("animationEnd"),this,"onFlickAnimationEnd")),this._ch.push(t.connect(this.containerNode,m.name("animationStart"),this,"onFlickAnimationStart"));for(var a=0;3>a;a++)this.setKeyframes(null,null,a)}u("translate3d")&&s.set(this.containerNode,m.name("transform"),"translate3d(0,0,0)")}this._speed={x:0,y:0},this._appFooterHeight=0,this.isTopLevel()&&!this.noResize&&this.resize();var n=this;setTimeout(function(){n.flashScrollBar()},600),o.global.addEventListener&&(this._onScroll=function(e){if(n.domNode&&"none"!==n.domNode.style.display){var t,i=n.domNode.scrollTop,a=n.domNode.scrollLeft;(i>0||a>0)&&(t=n.getPos(),n.domNode.scrollLeft=0,n.domNode.scrollTop=0,n.scrollTo({x:t.x-a,y:t.y-i}))}},o.global.addEventListener("scroll",this._onScroll,!0)),!this.disableTouchScroll&&this.domNode.addEventListener&&(this._onFocusScroll=function(e){if(n.domNode&&"none"!==n.domNode.style.display){var t,i,a=o.doc.activeElement;a&&(t=a.getBoundingClientRect(),i=n.domNode.getBoundingClientRect(),t.height<n.getDim().d.h&&(t.top<i.top+n.fixedHeaderHeight?n.scrollIntoView(a,!0):t.top+t.height>i.top+i.height-n.fixedFooterHeight&&n.scrollIntoView(a,!1)))}},this.domNode.addEventListener("focus",this._onFocusScroll,!0))},isTopLevel:function(){return!0},cleanup:function(){if(this._ch){for(var e=0;e<this._ch.length;e++)t.disconnect(this._ch[e]);this._ch=null}this._onScroll&&o.global.removeEventListener&&(o.global.removeEventListener("scroll",this._onScroll,!0),this._onScroll=null),this._onFocusScroll&&this.domNode.removeEventListener&&(this.domNode.removeEventListener("focus",this._onFocusScroll,!0),this._onFocusScroll=null)},findDisp:function(e){if(!e.parentNode)return null;if(1===e.nodeType&&n.contains(e,"mblSwapView")&&"none"!==e.style.display)return e;for(var t=e.parentNode.childNodes,i=0;i<t.length;i++){var a=t[i];if(1===a.nodeType&&n.contains(a,"mblView")&&"none"!==a.style.display)return a}return e},getScreenSize:function(){return{h:o.global.innerHeight||o.doc.documentElement.clientHeight||o.doc.documentElement.offsetHeight,w:o.global.innerWidth||o.doc.documentElement.clientWidth||o.doc.documentElement.offsetWidth}},resize:function(e){this._appFooterHeight=this._fixedAppFooter?this._fixedAppFooter.offsetHeight:0,this.isLocalHeader&&(this.containerNode.style.marginTop=this.fixedHeaderHeight+"px");for(var t=0,i=this.domNode;i&&"BODY"!=i.tagName&&(i=this.findDisp(i),i);i=i.offsetParent)t+=i.offsetTop+d.getBorderExtents(i).h;var a,o=this.getScreenSize().h,n=o-t-this._appFooterHeight;if("inherit"===this.height)this.domNode.offsetParent&&(a=d.getContentBox(this.domNode.offsetParent).h-d.getBorderExtents(this.domNode).h+"px");else if("auto"===this.height){var r=this.domNode.offsetParent;if(r){this.domNode.style.height="0px";var s=r.getBoundingClientRect(),l=this.domNode.getBoundingClientRect(),h=s.bottom-this._appFooterHeight-this._parentPadBorderExtentsBottom;n=l.bottom>=h?o-(l.top-s.top)-this._appFooterHeight-this._parentPadBorderExtentsBottom:h-l.bottom}var c=Math.max(this.domNode.scrollHeight,this.containerNode.scrollHeight);a=(c?Math.min(c,n):n)+"px"}else this.height&&(a=this.height);a||(a=n+"px"),"-"!==a.charAt(0)&&"default"!==a&&(this.domNode.style.height=a),this._conn||this.onTouchEnd()},onFlickAnimationStart:function(e){e&&i.stop(e)},onFlickAnimationEnd:function(e){if(u("ios")&&this._keepInputCaretInActiveElement(),e){var t=e.animationName;if(t&&-1===t.indexOf("scrollableViewScroll2"))return void(-1!==t.indexOf("scrollableViewScroll0")?this._scrollBarNodeV&&n.remove(this._scrollBarNodeV,"mblScrollableScrollTo0"):-1!==t.indexOf("scrollableViewScroll1")?this._scrollBarNodeH&&n.remove(this._scrollBarNodeH,"mblScrollableScrollTo1"):(this._scrollBarNodeV&&(this._scrollBarNodeV.className=""),this._scrollBarNodeH&&(this._scrollBarNodeH.className="")));if(this._useTransformTransition||this._useTopLeft){var a=e.target;if(a===this._scrollBarV||a===this._scrollBarH){var o="mblScrollableScrollTo"+(a===this._scrollBarV?"0":"1");return void(n.contains(a,o)?n.remove(a,o):a.className="")}}e.srcElement&&i.stop(e)}if(this.stopAnimation(),this._bounce){var r=this,s=r._bounce;setTimeout(function(){r.slideTo(s,.3,"ease-out")},0),r._bounce=void 0}else this.hideScrollBar(),this.removeCover()},isFormElement:function(e){if(e&&1!==e.nodeType&&(e=e.parentNode),!e||1!==e.nodeType)return!1;var t=e.tagName;return"SELECT"===t||"INPUT"===t||"TEXTAREA"===t||"BUTTON"===t},onTouchStart:function(e){this.disableTouchScroll||this._conn&&(new Date).getTime()-this.startTime<500||(this._conn||(this._conn=[],this._conn.push(t.connect(o.doc,l.move,this,"onTouchMove")),this._conn.push(t.connect(o.doc,l.release,this,"onTouchEnd"))),this._aborted=!1,n.contains(this.containerNode,"mblScrollableScrollTo2")?this.abort():(this._scrollBarNodeV&&(this._scrollBarNodeV.className=""),this._scrollBarNodeH&&(this._scrollBarNodeH.className="")),this.touchStartX=e.touches?e.touches[0].pageX:e.clientX,this.touchStartY=e.touches?e.touches[0].pageY:e.clientY,this.startTime=(new Date).getTime(),this.startPos=this.getPos(),this._dim=this.getDim(),this._time=[0],this._posX=[this.touchStartX],this._posY=[this.touchStartY],this._locked=!1,this._moved=!1,this._preventDefaultInNextTouchMove=!0,this.isFormElement(e.target)||(this.propagatable?e.preventDefault():i.stop(e),this._preventDefaultInNextTouchMove=!1))},onTouchMove:function(e){if(!this._locked){if(this._preventDefaultInNextTouchMove){this._preventDefaultInNextTouchMove=!1;var t=h.getEnclosingWidget((e.targetTouches&&1===e.targetTouches.length?e.targetTouches[0]:e).target);t&&t.isInstanceOf(c)&&(this.propagatable?e.preventDefault():i.stop(e))}var a=e.touches?e.touches[0].pageX:e.clientX,o=e.touches?e.touches[0].pageY:e.clientY,n=a-this.touchStartX,r=o-this.touchStartY,s={x:this.startPos.x+n,y:this.startPos.y+r},d=this._dim;if(n=Math.abs(n),r=Math.abs(r),1==this._time.length){if(this.dirLock&&(this._v&&!this._h&&n>=this.threshold&&n>=r||(this._h||this._f)&&!this._v&&r>=this.threshold&&r>=n))return void(this._locked=!0);if(this._v&&this._h){if(r<this.threshold&&n<this.threshold)return}else if(this._v&&r<this.threshold||(this._h||this._f)&&n<this.threshold)return;this._moved=!0,this.addCover(),this.showScrollBar()}var l=this.weight;this._v&&this.constraint&&(s.y>0?s.y=Math.round(s.y*l):s.y<-d.o.h&&(d.c.h<d.d.h?s.y=Math.round(s.y*l):s.y=-d.o.h-Math.round((-d.o.h-s.y)*l))),(this._h||this._f)&&this.constraint&&(s.x>0?s.x=Math.round(s.x*l):s.x<-d.o.w&&(d.c.w<d.d.w?s.x=Math.round(s.x*l):s.x=-d.o.w-Math.round((-d.o.w-s.x)*l))),this.scrollTo(s);var u=10,m=this._time.length;if(m>=2){this._moved=!0;var f,g;this._v&&!this._h?(f=this._posY[m-1]-this._posY[m-2],g=o-this._posY[m-1]):!this._v&&this._h&&(f=this._posX[m-1]-this._posX[m-2],g=a-this._posX[m-1]),0>f*g&&(this._time=[this._time[m-1]],this._posX=[this._posX[m-1]],this._posY=[this._posY[m-1]],m=1)}m==u&&(this._time.shift(),this._posX.shift(),this._posY.shift()),this._time.push((new Date).getTime()-this.startTime),this._posX.push(a),this._posY.push(o)}},_keepInputCaretInActiveElement:function(){var e,t=o.doc.activeElement;!t||"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName||(e=t.value,"number"==t.type||"week"==t.type?(e?t.value=t.value+1:t.value="week"==t.type?"2013-W10":1,t.value=e):(t.value=t.value+" ",t.value=e))},onTouchEnd:function(e){if(!this._locked){var i=this._speed={x:0,y:0},a=this._dim,o=this.getPos(),n={};if(e){if(!this._conn)return;for(var r=0;r<this._conn.length;r++)t.disconnect(this._conn[r]);this._conn=null;var s=!1;if(this._aborted||this._moved||(s=!0),s){if(this.hideScrollBar(),this.removeCover(),u("touch")&&u("clicks-prevented")&&!this.isFormElement(e.target)){var d=e.target;1!=d.nodeType&&(d=d.parentNode),setTimeout(function(){y._sendClick(d,e)})}return}i=this._speed=this.getSpeed()}else{if(0==o.x&&0==o.y)return;a=this.getDim()}if(this._v&&(n.y=o.y+i.y),(this._h||this._f)&&(n.x=o.x+i.x),this.adjustDestination(n,o,a)!==!1){if(this.constraint){if("v"==this.scrollDir&&a.c.h<a.d.h)return void this.slideTo({y:0},.3,"ease-out");if("h"==this.scrollDir&&a.c.w<a.d.w)return void this.slideTo({x:0},.3,"ease-out");if(this._v&&this._h&&a.c.h<a.d.h&&a.c.w<a.d.w)return void this.slideTo({x:0,y:0},.3,"ease-out")}var l,h="ease-out",c={};if(this._v&&this.constraint&&(n.y>0?o.y>0?(l=.3,n.y=0):(n.y=Math.min(n.y,20),h="linear",c.y=0):-i.y>a.o.h- -o.y&&(o.y<-a.o.h?(l=.3,n.y=a.c.h<=a.d.h?0:-a.o.h):(n.y=Math.max(n.y,-a.o.h-20),h="linear",c.y=-a.o.h))),(this._h||this._f)&&this.constraint&&(n.x>0?o.x>0?(l=.3,n.x=0):(n.x=Math.min(n.x,20),h="linear",c.x=0):-i.x>a.o.w- -o.x&&(o.x<-a.o.w?(l=.3,n.x=a.c.w<=a.d.w?0:-a.o.w):(n.x=Math.max(n.x,-a.o.w-20),h="linear",c.x=-a.o.w))),this._bounce=void 0!==c.x||void 0!==c.y?c:void 0,void 0===l){var m,f;if(this._v&&this._h?(f=Math.sqrt(i.x*i.x+i.y*i.y),m=Math.sqrt(Math.pow(n.y-o.y,2)+Math.pow(n.x-o.x,2))):this._v?(f=i.y,m=n.y-o.y):this._h&&(f=i.x,m=n.x-o.x),0===m&&!e)return;l=0!==f?Math.abs(m/f):.01}this.slideTo(n,l,h)}}},adjustDestination:function(e,t,i){return!0},abort:function(){this._aborted=!0,this.scrollTo(this.getPos()),this.stopAnimation()},stopAnimation:function(){n.remove(this.containerNode,"mblScrollableScrollTo2"),this.containerNode.className=this.containerNode.className.replace(/mblScrollableScrollTo2-[^ ]+/,""),this._scrollBarV&&(this._scrollBarV.className=""),this._scrollBarH&&(this._scrollBarH.className=""),(this._useTransformTransition||this._useTopLeft)&&(this.containerNode.style[m.name("transition")]="",this._scrollBarV&&(this._scrollBarV.style[m.name("transition")]=""),this._scrollBarH&&(this._scrollBarH.style[m.name("transition")]=""))},scrollIntoView:function(e,t,i){if(this._v){for(var a=this.containerNode,o=this.getDim().d.h,n=0,r=e;r!==a;r=r.offsetParent){if(!r||"BODY"===r.tagName)return;n+=r.offsetTop}var s=t?Math.max(o-a.offsetHeight,-n):Math.min(0,o-n-e.offsetHeight);i&&"number"==typeof i?this.slideTo({y:s},i,"ease-out"):this.scrollTo({y:s})}},getSpeed:function(){var e=0,t=0,i=this._time.length;if(i>=2&&(new Date).getTime()-this.startTime-this._time[i-1]<500){var a=this._posY[i-(i>3?2:1)]-this._posY[i-6>=0?i-6:0],o=this._posX[i-(i>3?2:1)]-this._posX[i-6>=0?i-6:0],n=this._time[i-(i>3?2:1)]-this._time[i-6>=0?i-6:0];t=this.calcSpeed(a,n),e=this.calcSpeed(o,n)}return{x:e,y:t}},calcSpeed:function(e,t){return 4*Math.round(e/t*100)},scrollTo:function(e,t,i){var a,o,n,r=!0;if(!this._aborted&&this._conn&&(this._dim||(this._dim=this.getDim()),o=e.y>0?e.y:0,n=this._dim.o.h+e.y<0?-1*(this._dim.o.h+e.y):0,a={bubbles:!1,cancelable:!1,x:e.x,y:e.y,beforeTop:o>0,beforeTopHeight:o,afterBottom:n>0,afterBottomHeight:n},r=this.onBeforeScroll(a)),r){var s=(i||this.containerNode).style;u("css3-animations")?this._useTopLeft?(s[m.name("transition")]="",this._v&&(s.top=e.y+"px"),(this._h||this._f)&&(s.left=e.x+"px")):(this._useTransformTransition&&(s[m.name("transition")]=""),s[m.name("transform")]=this.makeTranslateStr(e)):(this._v&&(s.top=e.y+"px"),(this._h||this._f)&&(s.left=e.x+"px")),u("ios")&&this._keepInputCaretInActiveElement(),t||this.scrollScrollBarTo(this.calcScrollBarPos(e)),a&&this.onAfterScroll(a)}},onBeforeScroll:function(e){return!0},onAfterScroll:function(e){},slideTo:function(e,t,i){this._runSlideAnimation(this.getPos(),e,t,i,this.containerNode,2),this.slideScrollBarTo(e,t,i)},makeTranslateStr:function(e){var t=this._v&&"number"==typeof e.y?e.y+"px":"0px",i=(this._h||this._f)&&"number"==typeof e.x?e.x+"px":"0px";return u("translate3d")?"translate3d("+i+","+t+",0px)":"translate("+i+","+t+")"},getPos:function(){if(u("css3-animations")){var e=o.doc.defaultView.getComputedStyle(this.containerNode,"");if(this._useTopLeft)return{x:parseInt(e.left)||0,y:parseInt(e.top)||0};var t=e[m.name("transform")];if(t&&0===t.indexOf("matrix")){var i=t.split(/[,\s\)]+/),a=0===t.indexOf("matrix3d")?12:4;return{y:i[a+1]-0,x:i[a]-0}}return{x:0,y:0}}var n=parseInt(this.containerNode.style.top)||0;return{y:n,x:this.containerNode.offsetLeft}},getDim:function(){var e={};return e.c={h:this.containerNode.offsetHeight,w:this.containerNode.offsetWidth},e.v={h:this.domNode.offsetHeight+this._appFooterHeight,w:this.domNode.offsetWidth},e.d={h:e.v.h-this.fixedHeaderHeight-this.fixedFooterHeight-this._appFooterHeight,w:e.v.w},e.o={h:e.c.h-e.v.h+this.fixedHeaderHeight+this.fixedFooterHeight+this._appFooterHeight,w:e.c.w-e.v.w},e},showScrollBar:function(){if(this.scrollBar){var e=this._dim;if(!("v"==this.scrollDir&&e.c.h<=e.d.h||"h"==this.scrollDir&&e.c.w<=e.d.w||this._v&&this._h&&e.c.h<=e.d.h&&e.c.w<=e.d.w)){var t=function(e,t){var i=e["_scrollBarNode"+t];if(!i){var a=r.create("div",null,e.domNode),o={position:"absolute",overflow:"hidden"};"V"==t?(o.right="2px",o.width="5px"):(o.bottom=(e.isLocalFooter?e.fixedFooterHeight:0)+2+"px",o.height="5px"),s.set(a,o),a.className="mblScrollBarWrapper",e["_scrollBarWrapper"+t]=a,i=r.create("div",null,a),s.set(i,m.add({opacity:.6,position:"absolute",backgroundColor:"#606060",fontSize:"1px",MozBorderRadius:"2px",zIndex:2147483647},{borderRadius:"2px",transformOrigin:"0 0"})),s.set(i,"V"==t?{width:"5px"}:{height:"5px"}),e["_scrollBarNode"+t]=i}return i};this._v&&!this._scrollBarV&&(this._scrollBarV=t(this,"V")),this._h&&!this._scrollBarH&&(this._scrollBarH=t(this,"H")),this.resetScrollBar()}}},hideScrollBar:function(){if(this.fadeScrollBar&&u("css3-animations")&&!y._fadeRule){var e=r.create("style",null,o.doc.getElementsByTagName("head")[0]);e.textContent=".mblScrollableFadeScrollBar{  "+m.name("animation-duration",!0)+": 1s;  "+m.name("animation-name",!0)+": scrollableViewFadeScrollBar;}@"+m.name("keyframes",!0)+" scrollableViewFadeScrollBar{  from { opacity: 0.6; }  to { opacity: 0; }}",y._fadeRule=e.sheet.cssRules[1]}if(this.scrollBar){var t=function(e,t){s.set(e,m.add({opacity:0},{animationDuration:""})),t._useTopLeft&&u("android")||(e.className="mblScrollableFadeScrollBar")};this._scrollBarV&&(t(this._scrollBarV,this),this._scrollBarV=null),this._scrollBarH&&(t(this._scrollBarH,this),this._scrollBarH=null)}},calcScrollBarPos:function(e){var t={},i=this._dim,a=function(e,t,i,a,o){var n=Math.round((a-t-8)/(a-o)*i);return-t+5>n&&(n=-t+5),n>e-5&&(n=e-5),n};return"number"==typeof e.y&&this._scrollBarV&&(t.y=a(this._scrollBarWrapperV.offsetHeight,this._scrollBarV.offsetHeight,e.y,i.d.h,i.c.h)),"number"==typeof e.x&&this._scrollBarH&&(t.x=a(this._scrollBarWrapperH.offsetWidth,this._scrollBarH.offsetWidth,e.x,i.d.w,i.c.w)),t},scrollScrollBarTo:function(e){this.scrollBar&&(this._v&&this._scrollBarV&&"number"==typeof e.y&&(u("css3-animations")?this._useTopLeft?s.set(this._scrollBarV,m.add({top:e.y+"px"},{transition:""})):(this._useTransformTransition&&(this._scrollBarV.style[m.name("transition")]=""),this._scrollBarV.style[m.name("transform")]=this.makeTranslateStr({y:e.y})):this._scrollBarV.style.top=e.y+"px"),this._h&&this._scrollBarH&&"number"==typeof e.x&&(u("css3-animations")?this._useTopLeft?s.set(this._scrollBarH,m.add({left:e.x+"px"},{transition:""})):(this._useTransformTransition&&(this._scrollBarH.style[m.name("transition")]=""),this._scrollBarH.style[m.name("transform")]=this.makeTranslateStr({x:e.x})):this._scrollBarH.style.left=e.x+"px"))},slideScrollBarTo:function(e,t,i){if(this.scrollBar){var a=this.calcScrollBarPos(this.getPos()),o=this.calcScrollBarPos(e);this._v&&this._scrollBarV&&this._runSlideAnimation({y:a.y},{y:o.y},t,i,this._scrollBarV,0),this._h&&this._scrollBarH&&this._runSlideAnimation({x:a.x},{x:o.x},t,i,this._scrollBarH,1)}},_runSlideAnimation:function(t,i,a,o,r,d){if(u("css3-animations"))if(this._useTopLeft)void 0===i.x&&void 0===i.y||(this.onFlickAnimationStart(),s.set(r,m.add({},{transitionProperty:void 0!==i.x&&void 0!==i.y?"top, left":void 0!==i.y?"top":"left",transitionDuration:a+"s",transitionTimingFunction:o})),setTimeout(function(){var e={};void 0!==i.x&&(e.left=i.x+"px"),void 0!==i.y&&(e.top=i.y+"px"),s.set(r,e)},0),n.add(r,"mblScrollableScrollTo"+d));else if(this._useTransformTransition)if(void 0===i.x&&(i.x=t.x),void 0===i.y&&(i.y=t.y),i.x!==t.x||i.y!==t.y){this.onFlickAnimationStart(),s.set(r,m.add({},{transitionProperty:m.name("transform"),transitionDuration:a+"s",transitionTimingFunction:o}));var l=this.makeTranslateStr(i);setTimeout(function(){s.set(r,m.add({},{transform:l}))},0),n.add(r,"mblScrollableScrollTo"+d)}else this.hideScrollBar(),this.removeCover();else{var h=this.findDisp(this.domNode)===this.domNode,c=this.setKeyframes(t,i,d,h);s.set(r,m.add({},{animationDuration:a+"s",animationTimingFunction:o})),n.add(r,c),n.add(r,"mblScrollableScrollTo"+d),2==d?this.scrollTo(i,!0,r):this.scrollScrollBarTo(i)}else if(e.fx&&e.fx.easing&&a){var f=this;e.fx.slideTo({node:r,duration:1e3*a,left:i.x,top:i.y,easing:"ease-out"==o?e.fx.easing.quadOut:e.fx.easing.linear,onBegin:function(){2==d&&f.onFlickAnimationStart()},onEnd:function(){2==d&&f.onFlickAnimationEnd()}}).play()}else 2==d?(this.onFlickAnimationStart(),this.scrollTo(i,!1,r),this.onFlickAnimationEnd()):this.scrollScrollBarTo(i)},resetScrollBar:function(){var e=function(e,t,i,a,o,n){if(t){var r={};r[n?"top":"left"]=o+4+"px";var d=0>=i-8?1:i-8;r[n?"height":"width"]=d+"px",s.set(e,r);var l=Math.round(i*i/a);l=Math.min(Math.max(l-8,5),d),t.style[n?"height":"width"]=l+"px",s.set(t,{opacity:.6})}},t=this.getDim();e(this._scrollBarWrapperV,this._scrollBarV,t.d.h,t.c.h,this.fixedHeaderHeight,!0),e(this._scrollBarWrapperH,this._scrollBarH,t.d.w,t.c.w,0),this.createMask()},createMask:function(){if(u("mask-image")){if(this._scrollBarWrapperV){var e=this._scrollBarWrapperV.offsetHeight;f.createRoundMask(this._scrollBarWrapperV,0,0,0,0,5,e,2,2,.5)}if(this._scrollBarWrapperH){var t=this._scrollBarWrapperH.offsetWidth;f.createRoundMask(this._scrollBarWrapperH,0,0,0,0,t,5,2,2,.5)}}},flashScrollBar:function(){if(!this.disableFlashScrollBar&&this.domNode&&(this._dim=this.getDim(),!(this._dim.d.h<=0))){this.showScrollBar();var e=this;setTimeout(function(){e.hideScrollBar()},300)}},addCover:function(){u("touch")||this.noCover||(y._cover?y._cover.style.display="":(y._cover=r.create("div",null,o.doc.body),y._cover.className="mblScrollableCover",s.set(y._cover,{backgroundColor:"#ffff00",opacity:0,position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:2147483647}),this._ch.push(t.connect(y._cover,l.press,this,"onTouchEnd"))),this.setSelectable(y._cover,!1),this.setSelectable(this.domNode,!1))},removeCover:function(){!u("touch")&&y._cover&&(y._cover.style.display="none",this.setSelectable(y._cover,!0),this.setSelectable(this.domNode,!0))},setKeyframes:function(e,t,i,a){y._rule||(y._rule=[]);var n=i+(a?"-in":"-out");if(!y._rule[n]){var s=r.create("style",null,o.doc.getElementsByTagName("head")[0]);s.textContent=".mblScrollableScrollTo"+n+"{"+m.name("animation-name",!0)+": scrollableViewScroll"+n+";}@"+m.name("keyframes",!0)+" scrollableViewScroll"+n+"{}",y._rule[n]=s.sheet.cssRules[1]}var d=y._rule[n];return d&&(e&&(d.deleteRule(u("webkit")?"from":0),(d.insertRule||d.appendRule).call(d,"from { "+m.name("transform",!0)+": "+this.makeTranslateStr(e)+"; }")),t&&(void 0===t.x&&(t.x=e.x),void 0===t.y&&(t.y=e.y),d.deleteRule(u("webkit")?"to":1),(d.insertRule||d.appendRule).call(d,"to { "+m.name("transform",!0)+": "+this.makeTranslateStr(t)+"; }"))),"mblScrollableScrollTo"+n},setSelectable:function(e,t){if(e.style.KhtmlUserSelect=t?"auto":"none",e.style.MozUserSelect=t?"":"none",e.onselectstart=t?null:function(){return!1},u("ie")){e.unselectable=t?"":"on";for(var i=e.getElementsByTagName("*"),a=0;a<i.length;a++)i[a].unselectable=t?"":"on"}}}),b=u("dojo-bidi")?p("dojox.mobile.Scrollable",[b,v]):b,a.setObject("dojox.mobile.scrollable",b),b});//# sourceMappingURL=scrollable.js.map