//>>built
define("dojox/mobile/bookmarkable",["dojo/_base/array","dojo/_base/connect","dojo/_base/lang","dojo/_base/window","dojo/hash","dijit/registry","./TransitionEvent","./View","./viewRegistry"],function(e,t,i,a,o,r,n,s,d){var l={settingHash:!1,transitionInfo:[],getTransitionInfo:function(e,t){return this.transitionInfo[e.replace(/^#/,"")+":"+t.replace(/^#/,"")]},addTransitionInfo:function(e,t,i){this.transitionInfo[e.replace(/^#/,"")+":"+t.replace(/^#/,"")]=i},findTransitionViews:function(e){if(!e)return[];var t=r.byId(e.replace(/^#/,""));if(!t)return[];for(var i=t.getParent();i;i=i.getParent())i.isVisible&&!i.isVisible()&&(t=i);return[t.getShowingView(),t]},onHashChange:function(e){if(this.settingHash)return void(this.settingHash=!1);var t=this.handleFragIds(e);t.hashchange=!0,new n(a.body(),t).dispatch()},handleFragIds:function(t){var i,a;if(t)for(var o=t.replace(/^#/,"").split(/,/),n=0;n<o.length;n++){var s=r.byId(o[n]);if(!s.isVisible()){for(var l=!0,h=d.getParentView(s);h;h=d.getParentView(h))if(-1===e.indexOf(o,h.id)){l=!1;break}l?(i=this.findTransitionViews(o[n]),2===i.length&&(a=o[n])):e.forEach(s.getSiblingViews(),function(e){e.domNode.style.display=e===s?"":"none"})}}else a=d.initialView.id,i=this.findTransitionViews(a);var c=this.getTransitionInfo(i[0].id,i[1].id),u=1;return c||(c=this.getTransitionInfo(i[1].id,i[0].id),u=-1),{moveTo:"#"+a,transitionDir:c?c.transitionDir*u:1,transition:c?c.transition:"none"}},setFragIds:function(t){var i=e.filter(d.getViews(),function(e){return e.isVisible()});this.settingHash=!0,o(e.map(i,function(e){return e.id}).join(","))}};return t.subscribe("/dojo/hashchange",null,function(){l.onHashChange.apply(l,arguments)}),i.extend(s,{getTransitionInfo:function(){l.getTransitionInfo.apply(l,arguments)},addTransitionInfo:function(){l.addTransitionInfo.apply(l,arguments)},handleFragIds:function(){l.handleFragIds.apply(l,arguments)},setFragIds:function(){l.setFragIds.apply(l,arguments)}}),l});//# sourceMappingURL=bookmarkable.js.map