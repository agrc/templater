//>>built
define("dojox/mobile/bookmarkable",["dojo/_base/array","dojo/_base/connect","dojo/_base/lang","dojo/_base/window","dojo/hash","dijit/registry","./TransitionEvent","./View","./viewRegistry"],function(e,t,i,a,o,r,n,s,l){var d={settingHash:!1,transitionInfo:[],getTransitionInfo:function(e,t){return this.transitionInfo[e.replace(/^#/,"")+":"+t.replace(/^#/,"")]},addTransitionInfo:function(e,t,i){this.transitionInfo[e.replace(/^#/,"")+":"+t.replace(/^#/,"")]=i},findTransitionViews:function(e){if(!e)return[];var t=r.byId(e.replace(/^#/,""));if(!t)return[];for(var i=t.getParent();i;i=i.getParent())i.isVisible&&!i.isVisible()&&(t=i);return[t.getShowingView(),t]},onHashChange:function(e){if(this.settingHash)return void(this.settingHash=!1);var t=this.handleFragIds(e);t.hashchange=!0,new n(a.body(),t).dispatch()},handleFragIds:function(t){var i,a;if(t)for(var o=t.replace(/^#/,"").split(/,/),n=0;n<o.length;n++){var s=r.byId(o[n]);if(!s.isVisible()){for(var d=!0,h=l.getParentView(s);h;h=l.getParentView(h))if(-1===e.indexOf(o,h.id)){d=!1;break}d?(i=this.findTransitionViews(o[n]),2===i.length&&(a=o[n])):e.forEach(s.getSiblingViews(),function(e){e.domNode.style.display=e===s?"":"none"})}}else a=l.initialView.id,i=this.findTransitionViews(a);var u=this.getTransitionInfo(i[0].id,i[1].id),c=1;return u||(u=this.getTransitionInfo(i[1].id,i[0].id),c=-1),{moveTo:"#"+a,transitionDir:u?u.transitionDir*c:1,transition:u?u.transition:"none"}},setFragIds:function(t){var i=e.filter(l.getViews(),function(e){return e.isVisible()});this.settingHash=!0,o(e.map(i,function(e){return e.id}).join(","))}};return t.subscribe("/dojo/hashchange",null,function(){d.onHashChange.apply(d,arguments)}),i.extend(s,{getTransitionInfo:function(){d.getTransitionInfo.apply(d,arguments)},addTransitionInfo:function(){d.addTransitionInfo.apply(d,arguments)},handleFragIds:function(){d.handleFragIds.apply(d,arguments)},setFragIds:function(){d.setFragIds.apply(d,arguments)}}),d});//# sourceMappingURL=bookmarkable.js.map