//>>built
define("dojox/mobile/bookmarkable",["dojo/_base/array","dojo/_base/connect","dojo/_base/lang","dojo/_base/window","dojo/hash","dijit/registry","./TransitionEvent","./View","./viewRegistry"],function(e,t,i,a,o,n,r,s,l){var d={settingHash:!1,transitionInfo:[],getTransitionInfo:function(e,t){return this.transitionInfo[e.replace(/^#/,"")+":"+t.replace(/^#/,"")]},addTransitionInfo:function(e,t,i){this.transitionInfo[e.replace(/^#/,"")+":"+t.replace(/^#/,"")]=i},findTransitionViews:function(e){if(!e)return[];var t=n.byId(e.replace(/^#/,""));if(!t)return[];for(var i=t.getParent();i;i=i.getParent())i.isVisible&&!i.isVisible()&&(t=i);return[t.getShowingView(),t]},onHashChange:function(e){if(this.settingHash)return void(this.settingHash=!1);var t=this.handleFragIds(e);t.hashchange=!0,t.moveTo&&new r(a.body(),t).dispatch()},handleFragIds:function(t){var i,a,o,r;if(t)for(var s=t.replace(/^#/,"").split(/,/),d=0;d<s.length;d++){var h=n.byId(s[d]);if(h&&!h.isVisible()){for(var u=!0,c=l.getParentView(h);c;c=l.getParentView(c))if(-1===e.indexOf(s,c.id)){u=!1;break}u?(i=this.findTransitionViews(s[d]),2===i.length&&(a=s[d])):e.forEach(h.getSiblingViews(),function(e){e.domNode.style.display=e===h?"":"none"})}}else a=l.initialView.id,i=this.findTransitionViews(a);return i&&(o=this.getTransitionInfo(i[0].id,i[1].id),r=1,o||(o=this.getTransitionInfo(i[1].id,i[0].id),r=-1)),{moveTo:a?"#"+a:null,transitionDir:o?o.transitionDir*r:1,transition:o?o.transition:"none"}},setFragIds:function(t){var i=e.filter(l.getViews(),function(e){return e.isVisible()});this.settingHash=!0,o(e.map(i,function(e){return e.id}).join(","))}};return t.subscribe("/dojo/hashchange",null,function(){d.onHashChange.apply(d,arguments)}),i.extend(s,{getTransitionInfo:function(){d.getTransitionInfo.apply(d,arguments)},addTransitionInfo:function(){d.addTransitionInfo.apply(d,arguments)},handleFragIds:function(){d.handleFragIds.apply(d,arguments)},setFragIds:function(){d.setFragIds.apply(d,arguments)}}),d});//# sourceMappingURL=bookmarkable.js.map