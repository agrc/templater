//>>built
define("dojox/mobile/bookmarkable",["dojo/_base/array","dojo/_base/connect","dojo/_base/lang","dojo/_base/window","dojo/hash","dijit/registry","./TransitionEvent","./View","./viewRegistry"],function(e,t,i,a,n,o,r,s,l){var d={settingHash:!1,transitionInfo:[],getTransitionInfo:function(e,t){return this.transitionInfo[e.replace(/^#/,"")+":"+t.replace(/^#/,"")]},addTransitionInfo:function(e,t,i){this.transitionInfo[e.replace(/^#/,"")+":"+t.replace(/^#/,"")]=i},findTransitionViews:function(e){if(!e)return[];var t=o.byId(e.replace(/^#/,""));if(!t)return[];for(var i=t.getParent();i;i=i.getParent())i.isVisible&&!i.isVisible()&&(t=i);return[t.getShowingView(),t]},onHashChange:function(e){if(this.settingHash)return void(this.settingHash=!1);var t=this.handleFragIds(e);t.hashchange=!0,new r(a.body(),t).dispatch()},handleFragIds:function(t){var i,a;if(t)for(var n=t.replace(/^#/,"").split(/,/),r=0;r<n.length;r++){var s=o.byId(n[r]);if(!s.isVisible()){for(var d=!0,u=l.getParentView(s);u;u=l.getParentView(u))if(-1===e.indexOf(n,u.id)){d=!1;break}d?(i=this.findTransitionViews(n[r]),2===i.length&&(a=n[r])):e.forEach(s.getSiblingViews(),function(e){e.domNode.style.display=e===s?"":"none"})}}else a=l.initialView.id,i=this.findTransitionViews(a);var c=this.getTransitionInfo(i[0].id,i[1].id),h=1;return c||(c=this.getTransitionInfo(i[1].id,i[0].id),h=-1),{moveTo:"#"+a,transitionDir:c?c.transitionDir*h:1,transition:c?c.transition:"none"}},setFragIds:function(t){var i=e.filter(l.getViews(),function(e){return e.isVisible()});this.settingHash=!0,n(e.map(i,function(e){return e.id}).join(","))}};return t.subscribe("/dojo/hashchange",null,function(){d.onHashChange.apply(d,arguments)}),i.extend(s,{getTransitionInfo:function(){d.getTransitionInfo.apply(d,arguments)},addTransitionInfo:function(){d.addTransitionInfo.apply(d,arguments)},handleFragIds:function(){d.handleFragIds.apply(d,arguments)},setFragIds:function(){d.setFragIds.apply(d,arguments)}}),d});//# sourceMappingURL=bookmarkable.js.map