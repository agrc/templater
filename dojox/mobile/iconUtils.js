//>>built
define("dojox/mobile/iconUtils",["dojo/_base/array","dojo/_base/config","dojo/_base/connect","dojo/_base/event","dojo/_base/lang","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","./sniff"],function(e,t,i,a,o,n,r,s,l,d){var h=o.getObject("dojox.mobile",!0);return new function(){this.setupSpriteIcon=function(t,i){if(t&&i){var a=e.map(i.split(/[ ,]/),function(e){return e-0}),o=a[0],n=a[1]+a[2],s=a[0]+a[3],d=a[1];l.set(t,{position:"absolute",clip:"rect("+o+"px "+n+"px "+s+"px "+d+"px)",top:(t.parentNode?l.get(t,"top"):0)-o+"px",left:-d+"px"}),r.add(t,"mblSpriteIcon")}},this.createDomButton=function(e,i,a){if(!this._domButtons)if(d("webkit")){var o=function(e,t){var i,a;if(!e){var r={},s=n.doc.styleSheets;for(i=0;i<s.length;i++)s[i]&&o(s[i],r);return r}var l=e.cssRules||[];for(i=0;i<l.length;i++){var d=l[i];if(d.href&&d.styleSheet)o(d.styleSheet,t);else if(d.selectorText){var h=d.selectorText.split(/,/);for(a=0;a<h.length;a++){var u=h[a],c=u.split(/>/).length-1;if(u.match(/(mblDomButton\w+)/)){var m=RegExp.$1;(!t[m]||c>t[m])&&(t[m]=c)}}}}return t};this._domButtons=o()}else this._domButtons={};var h=e.className,u=a||e;if(h.match(/(mblDomButton\w+)/)&&-1===h.indexOf("/")){var c=RegExp.$1,m=4;h.match(/(mblDomButton\w+_(\d+))/)?m=RegExp.$2-0:void 0!==this._domButtons[c]&&(m=this._domButtons[c]);var f=null;d("bb")&&!1!==t.mblBBBoxShadowWorkaround&&(f={style:"-webkit-box-shadow:none"});for(var p=0,g=u;p<m;p++)g=g.firstChild||s.create("div",f,g);a&&(setTimeout(function(){r.remove(e,c)},0),r.add(a,c))}else{if(-1===h.indexOf("."))return null;s.create("img",{src:h},u)}return r.add(u,"mblDomButton"),!!i&&l.set(u,i),u},this.createIcon=function(e,t,o,n,d,u,c){if(n=n||"",e&&0===e.indexOf("mblDomButton"))o?o.className.match(/(mblDomButton\w+)/)&&r.remove(o,RegExp.$1):o=s.create("div",null,u||d,c),o.title=n,r.add(o,e),this.createDomButton(o);else if(e&&"none"!==e){if(o&&"IMG"===o.nodeName||(o=s.create("img",{alt:n},u||d,c)),o.src=(e||"").replace("${theme}",h.currentTheme),this.setupSpriteIcon(o,t),t&&d){var m=t.split(/[ ,]/);l.set(d,{position:"relative",width:m[2]+"px",height:m[3]+"px"}),r.add(d,"mblSpriteIconParent")}i.connect(o,"ondragstart",a,"stop")}return o},this.iconWrapper=!1,this.setIcon=function(e,t,i,a,o,n,l){return o&&(e||i)?e&&"none"!==e?(this.iconWrapper||0===e.indexOf("mblDomButton")||t?(i&&"IMG"===i.tagName&&(s.destroy(i),i=null),i&&s.empty(i),i||(i=s.create("div",null,n||o,l)),this.createIcon(e,t,null,null,i),a&&(i.title=a)):(i&&"DIV"===i.tagName&&(s.destroy(i),i=null),i=this.createIcon(e,null,i,a,o,n,l),r.add(i,"mblImageIcon")),r.remove(o,"mblNoIcon"),i):(s.destroy(i),r.add(o,"mblNoIcon"),null):null}}});//# sourceMappingURL=iconUtils.js.map