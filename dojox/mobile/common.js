//>>built
define("dojox/mobile/common",["dojo/_base/array","dojo/_base/config","dojo/_base/connect","dojo/_base/lang","dojo/_base/window","dojo/_base/kernel","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/domReady","dojo/ready","dojo/touch","dijit/registry","./sniff","./uacss"],function(e,t,i,r,n,o,a,s,l,d,c,u,h,f){var m=r.getObject("dojox.mobile",!0);if(n.doc.dojoClick=!0,f("touch")&&(f.add("clicks-prevented",!(f("android")>=4.1||10===f("ie")||!f("ie")&&f("trident")>6)),f("clicks-prevented")&&(m._sendClick=function(e,t){for(var i=e;i;i=i.parentNode)if(i.dojoClick)return;var r=n.doc.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,n.global,1,t.screenX,t.screenY,t.clientX,t.clientY),e.dispatchEvent(r)})),m.getScreenSize=function(){return{h:n.global.innerHeight||n.doc.documentElement.clientHeight,w:n.global.innerWidth||n.doc.documentElement.clientWidth}},m.updateOrient=function(){var e=m.getScreenSize();s.replace(n.doc.documentElement,e.h>e.w?"dj_portrait":"dj_landscape",e.h>e.w?"dj_landscape":"dj_portrait")},m.updateOrient(),m.tabletSize=500,m.detectScreenSize=function(e){var t,r,o=m.getScreenSize(),a=Math.min(o.w,o.h);a>=m.tabletSize&&(e||!this._sz||this._sz<m.tabletSize)?(t="phone",r="tablet"):a<m.tabletSize&&(e||!this._sz||this._sz>=m.tabletSize)&&(t="tablet",r="phone"),r&&(s.replace(n.doc.documentElement,"dj_"+r,"dj_"+t),i.publish("/dojox/mobile/screenSize/"+r,[o])),this._sz=a},m.detectScreenSize(),m.hideAddressBarWait="number"==typeof t.mblHideAddressBarWait?t.mblHideAddressBarWait:1500,m.hide_1=function(){scrollTo(0,1),m._hidingTimer=0==m._hidingTimer?200:2*m._hidingTimer,setTimeout(function(){m.isAddressBarHidden()||m._hidingTimer>m.hideAddressBarWait?(m.resizeAll(),m._hiding=!1):setTimeout(m.hide_1,m._hidingTimer)},50)},m.hideAddressBar=function(e){if(!m.disableHideAddressBar&&!m._hiding){m._hiding=!0,m._hidingTimer=f("ios")?200:0;var t=screen.availHeight;f("android")&&(t=outerHeight/devicePixelRatio,0==t&&(m._hiding=!1,setTimeout(function(){m.hideAddressBar()},200)),t<=innerHeight&&(t=outerHeight),f("android")<3&&(n.doc.documentElement.style.overflow=n.body().style.overflow="visible")),n.body().offsetHeight<t&&(n.body().style.minHeight=t+"px",m._resetMinHeight=!0),setTimeout(m.hide_1,m._hidingTimer)}},m.isAddressBarHidden=function(){return 1===pageYOffset},m.resizeAll=function(t,r){if(!m.disableResizeAll){i.publish("/dojox/mobile/resizeAll",[t,r]),i.publish("/dojox/mobile/beforeResizeAll",[t,r]),m._resetMinHeight&&(n.body().style.minHeight=m.getScreenSize().h+"px"),m.updateOrient(),m.detectScreenSize();var o=function(e){var t=e.getParent&&e.getParent();return!(t&&t.resize||!e.resize)},a=function(t){e.forEach(t.getChildren(),function(e){o(e)&&e.resize(),a(e)})};r?(r.resize&&r.resize(),a(r)):e.forEach(e.filter(h.toArray(),o),function(e){e.resize()}),i.publish("/dojox/mobile/afterResizeAll",[t,r])}},m.openWindow=function(e,t){n.global.open(e,t||"_blank")},m._detectWindowsTheme=function(){navigator.userAgent.match(/IEMobile\/10\.0/)&&l.create("style",{innerHTML:"@-ms-viewport {width: auto !important}"},n.doc.head);var e=function(){s.add(n.doc.documentElement,"windows_theme"),o.experimental("Dojo Mobile Windows theme","Behavior and appearance of the Windows theme are experimental.")},t=f("windows-theme");if(void 0!==t)return void(t&&e());var i,r,a=function(t){return!(!t||-1===t.indexOf("/windows/"))&&(f.add("windows-theme",!0),e(),!0)},d=n.doc.styleSheets;for(i=0;i<d.length;i++)if(!d[i].href){var c=d[i].cssRules||d[i].imports;if(c)for(r=0;r<c.length;r++)if(a(c[r].href))return}var u=n.doc.getElementsByTagName("link");for(i=0;i<u.length;i++)if(a(u[i].href))return},!1!==t.mblApplyPageStyles&&s.add(n.doc.documentElement,"mobile"),f("chrome")&&s.add(n.doc.documentElement,"dj_chrome"),n.global._no_dojo_dm){var p=n.global._no_dojo_dm;for(var g in p)m[g]=p[g];m.deviceTheme.setDm(m)}f.add("mblAndroidWorkaround",!1!==t.mblAndroidWorkaround&&f("android")<3,void 0,!0),f.add("mblAndroid3Workaround",!1!==t.mblAndroid3Workaround&&f("android")>=3,void 0,!0),m._detectWindowsTheme(),m.setSelectable=function(e,t){var i,r;if(e=a.byId(e),f("ie")<=9)if(i=e.getElementsByTagName("*"),r=i.length,t)for(e.removeAttribute("unselectable");r--;)i[r].removeAttribute("unselectable");else for(e.setAttribute("unselectable","on");r--;)"INPUT"!==i[r].tagName&&i[r].setAttribute("unselectable","on");else s.toggle(e,"unselectable",!t)};var y=f("pointer-events")?"touchAction":f("MSPointer")?"msTouchAction":null;return m._setTouchAction=y?function(e,t){e.style[y]=t}:function(){},d(function(){!1!==t.mblApplyPageStyles&&s.add(n.body(),"mblBackground")}),c(function(){m.detectScreenSize(!0),!1!==t.mblAndroidWorkaroundButtonStyle&&f("android")&&l.create("style",{innerHTML:"BUTTON,INPUT[type='button'],INPUT[type='submit'],INPUT[type='reset'],INPUT[type='file']::-webkit-file-upload-button{-webkit-appearance:none;} audio::-webkit-media-controls-play-button,video::-webkit-media-controls-play-button{-webkit-appearance:media-play-button;} video::-webkit-media-controls-fullscreen-button{-webkit-appearance:media-fullscreen-button;}"},n.doc.head,"first"),f("mblAndroidWorkaround")&&l.create("style",{innerHTML:".mblView.mblAndroidWorkaround{position:absolute;top:-9999px !important;left:-9999px !important;}"},n.doc.head,"last");var e=m.resizeAll,r=-1!=navigator.appVersion.indexOf("Mobile")&&!(f("ios")>=7);(!1!==t.mblHideAddressBar&&r||!0===t.mblForceHideAddressBar)&&(m.hideAddressBar(),!0===t.mblAlwaysHideAddressBar&&(e=m.hideAddressBar));var o=f("ios")>=6;if((f("android")||o)&&void 0!==n.global.onorientationchange){var a,s,d,c=e;o?(s=n.doc.documentElement.clientWidth,d=n.doc.documentElement.clientHeight):(e=function(e){var t=i.connect(null,"onresize",null,function(e){i.disconnect(t),c(e)})},a=m.getScreenSize()),i.connect(null,"onresize",null,function(e){if(o){var t=n.doc.documentElement.clientWidth,i=n.doc.documentElement.clientHeight;t==s&&i!=d&&c(e),s=t,d=i}else{var r=m.getScreenSize();r.w==a.w&&Math.abs(r.h-a.h)>=100&&c(e),a=r}})}i.connect(null,void 0!==n.global.onorientationchange?"onorientationchange":"onresize",null,e),n.body().style.visibility="visible"}),m});//# sourceMappingURL=common.js.map