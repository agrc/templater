//>>built
define("dojox/mobile/common",["dojo/_base/array","dojo/_base/config","dojo/_base/connect","dojo/_base/lang","dojo/_base/window","dojo/_base/kernel","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/domReady","dojo/ready","dojo/touch","dijit/registry","./sniff","./uacss"],function(e,t,i,o,a,n,r,s,d,l,h,c,u,m){var f=o.getObject("dojox.mobile",!0);if(a.doc.dojoClick=!0,m("touch")&&(m.add("clicks-prevented",!(m("android")>=4.1||10===m("ie")||!m("ie")&&m("trident")>6)),m("clicks-prevented")&&(f._sendClick=function(e,t){for(var i=e;i;i=i.parentNode)if(i.dojoClick)return;var o=a.doc.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,a.global,1,t.screenX,t.screenY,t.clientX,t.clientY),e.dispatchEvent(o)})),f.getScreenSize=function(){return{h:a.global.innerHeight||a.doc.documentElement.clientHeight,w:a.global.innerWidth||a.doc.documentElement.clientWidth}},f.updateOrient=function(){var e=f.getScreenSize();s.replace(a.doc.documentElement,e.h>e.w?"dj_portrait":"dj_landscape",e.h>e.w?"dj_landscape":"dj_portrait")},f.updateOrient(),f.tabletSize=500,f.detectScreenSize=function(e){var t,o,n=f.getScreenSize(),r=Math.min(n.w,n.h);r>=f.tabletSize&&(e||!this._sz||this._sz<f.tabletSize)?(t="phone",o="tablet"):r<f.tabletSize&&(e||!this._sz||this._sz>=f.tabletSize)&&(t="tablet",o="phone"),o&&(s.replace(a.doc.documentElement,"dj_"+o,"dj_"+t),i.publish("/dojox/mobile/screenSize/"+o,[n])),this._sz=r},f.detectScreenSize(),f.hideAddressBarWait="number"==typeof t.mblHideAddressBarWait?t.mblHideAddressBarWait:1500,f.hide_1=function(){scrollTo(0,1),f._hidingTimer=0==f._hidingTimer?200:2*f._hidingTimer,setTimeout(function(){f.isAddressBarHidden()||f._hidingTimer>f.hideAddressBarWait?(f.resizeAll(),f._hiding=!1):setTimeout(f.hide_1,f._hidingTimer)},50)},f.hideAddressBar=function(e){if(!f.disableHideAddressBar&&!f._hiding){f._hiding=!0,f._hidingTimer=m("ios")?200:0;var t=screen.availHeight;m("android")&&(t=outerHeight/devicePixelRatio,0==t&&(f._hiding=!1,setTimeout(function(){f.hideAddressBar()},200)),t<=innerHeight&&(t=outerHeight),m("android")<3&&(a.doc.documentElement.style.overflow=a.body().style.overflow="visible")),a.body().offsetHeight<t&&(a.body().style.minHeight=t+"px",f._resetMinHeight=!0),setTimeout(f.hide_1,f._hidingTimer)}},f.isAddressBarHidden=function(){return 1===pageYOffset},f.resizeAll=function(t,o){if(!f.disableResizeAll){i.publish("/dojox/mobile/resizeAll",[t,o]),i.publish("/dojox/mobile/beforeResizeAll",[t,o]),f._resetMinHeight&&(a.body().style.minHeight=f.getScreenSize().h+"px"),f.updateOrient(),f.detectScreenSize();var n=function(e){var t=e.getParent&&e.getParent();return!(t&&t.resize||!e.resize)},r=function(t){e.forEach(t.getChildren(),function(e){n(e)&&e.resize(),r(e)})};o?(o.resize&&o.resize(),r(o)):e.forEach(e.filter(u.toArray(),n),function(e){e.resize()}),i.publish("/dojox/mobile/afterResizeAll",[t,o])}},f.openWindow=function(e,t){a.global.open(e,t||"_blank")},f._detectWindowsTheme=function(){navigator.userAgent.match(/IEMobile\/10\.0/)&&d.create("style",{innerHTML:"@-ms-viewport {width: auto !important}"},a.doc.head);var e=function(){s.add(a.doc.documentElement,"windows_theme"),n.experimental("Dojo Mobile Windows theme","Behavior and appearance of the Windows theme are experimental.")},t=m("windows-theme");if(void 0!==t)return void(t&&e());var i,o,r=function(t){return t&&-1!==t.indexOf("/windows/")?(m.add("windows-theme",!0),e(),!0):!1},l=a.doc.styleSheets;for(i=0;i<l.length;i++)if(!l[i].href){var h=l[i].cssRules||l[i].imports;if(h)for(o=0;o<h.length;o++)if(r(h[o].href))return}var c=a.doc.getElementsByTagName("link");for(i=0;i<c.length;i++)if(r(c[i].href))return},t.mblApplyPageStyles!==!1&&s.add(a.doc.documentElement,"mobile"),m("chrome")&&s.add(a.doc.documentElement,"dj_chrome"),a.global._no_dojo_dm){var p=a.global._no_dojo_dm;for(var g in p)f[g]=p[g];f.deviceTheme.setDm(f)}m.add("mblAndroidWorkaround",t.mblAndroidWorkaround!==!1&&m("android")<3,void 0,!0),m.add("mblAndroid3Workaround",t.mblAndroid3Workaround!==!1&&m("android")>=3,void 0,!0),f._detectWindowsTheme(),f.setSelectable=function(e,t){var i,o;if(e=r.byId(e),m("ie")<=9)if(i=e.getElementsByTagName("*"),o=i.length,t)for(e.removeAttribute("unselectable");o--;)i[o].removeAttribute("unselectable");else for(e.setAttribute("unselectable","on");o--;)"INPUT"!==i[o].tagName&&i[o].setAttribute("unselectable","on");else s.toggle(e,"unselectable",!t)};var y=m("pointer-events")?"touchAction":m("MSPointer")?"msTouchAction":null;return f._setTouchAction=y?function(e,t){e.style[y]=t}:function(){},l(function(){s.add(a.body(),"mblBackground")}),h(function(){f.detectScreenSize(!0),t.mblAndroidWorkaroundButtonStyle!==!1&&m("android")&&d.create("style",{innerHTML:"BUTTON,INPUT[type='button'],INPUT[type='submit'],INPUT[type='reset'],INPUT[type='file']::-webkit-file-upload-button{-webkit-appearance:none;} audio::-webkit-media-controls-play-button,video::-webkit-media-controls-play-button{-webkit-appearance:media-play-button;} video::-webkit-media-controls-fullscreen-button{-webkit-appearance:media-fullscreen-button;}"},a.doc.head,"first"),m("mblAndroidWorkaround")&&d.create("style",{innerHTML:".mblView.mblAndroidWorkaround{position:absolute;top:-9999px !important;left:-9999px !important;}"},a.doc.head,"last");var e=f.resizeAll,o=-1!=navigator.appVersion.indexOf("Mobile")&&!(m("ios")>=7);(t.mblHideAddressBar!==!1&&o||t.mblForceHideAddressBar===!0)&&(f.hideAddressBar(),t.mblAlwaysHideAddressBar===!0&&(e=f.hideAddressBar));var n=m("ios")>=6;if((m("android")||n)&&void 0!==a.global.onorientationchange){var r,s,l,h=e;n?(s=a.doc.documentElement.clientWidth,l=a.doc.documentElement.clientHeight):(e=function(e){var t=i.connect(null,"onresize",null,function(e){i.disconnect(t),h(e)})},r=f.getScreenSize()),i.connect(null,"onresize",null,function(e){if(n){var t=a.doc.documentElement.clientWidth,i=a.doc.documentElement.clientHeight;t==s&&i!=l&&h(e),s=t,l=i}else{var o=f.getScreenSize();o.w==r.w&&Math.abs(o.h-r.h)>=100&&h(e),r=o}})}i.connect(null,void 0!==a.global.onorientationchange?"onorientationchange":"onresize",null,e),a.body().style.visibility="visible"}),f});//# sourceMappingURL=common.js.map