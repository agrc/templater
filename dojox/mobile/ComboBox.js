//>>built
define("dojox/mobile/ComboBox",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom-geometry","dojo/dom-style","dojo/dom-attr","dojo/window","dojo/touch","dijit/form/_AutoCompleterMixin","dijit/popup","./_ComboBoxMenu","./TextBox","./sniff"],function(e,t,i,a,r,o,n,s,d,l,h,c,u,m){return e.experimental("dojox.mobile.ComboBox"),t("dojox.mobile.ComboBox",[u,l],{dropDownClass:"dojox.mobile._ComboBoxMenu",selectOnClick:!1,autoComplete:!1,dropDown:null,maxHeight:-1,dropDownPosition:["below","above"],_throttleOpenClose:function(){this._throttleHandler&&this._throttleHandler.remove(),this._throttleHandler=this.defer(function(){this._throttleHandler=null},500)},_onFocus:function(){this.inherited(arguments),this._opened||this._throttleHandler||this._startSearchAll(),m("windows-theme")&&this.domNode.blur()},onInput:function(e){e&&0===e.charCode||(this._onKey(e),this.inherited(arguments))},_setListAttr:function(e){this._set("list",e)},closeDropDown:function(){this._throttleOpenClose(),this.endHandler&&(this.disconnect(this.startHandler),this.disconnect(this.endHandler),this.disconnect(this.moveHandler),clearInterval(this.repositionTimer),this.repositionTimer=this.endHandler=null),this.inherited(arguments),n.remove(this.domNode,"aria-owns"),n.set(this.domNode,"aria-expanded","false"),h.close(this.dropDown),this._opened=!1,m("windows-theme")&&this.domNode.disabled&&this.defer(function(){this.domNode.removeAttribute("disabled")},300)},openDropDown:function(){var e=!this._opened,t=this.dropDown,l=t.domNode,c=this.domNode,u=this;n.set(t.domNode,"role","listbox"),n.set(this.domNode,"aria-expanded","true"),t.id&&n.set(this.domNode,"aria-owns",t.id),m("touch")&&(!m("ios")||m("ios")<8)&&a.global.scrollBy(0,r.position(c,!1).y),this._preparedNode||(this._preparedNode=!0,l.style.width&&(this._explicitDDWidth=!0),l.style.height&&(this._explicitDDHeight=!0));var f={display:"",overflow:"hidden",visibility:"hidden"};this._explicitDDWidth||(f.width=""),this._explicitDDHeight||(f.height=""),o.set(l,f);var p=this.maxHeight;if(-1==p){var g=s.getBox(),y=r.position(c,!1);p=Math.floor(Math.max(y.y,g.h-(y.y+y.h)))}h.moveOffScreen(t),t.startup&&!t._started&&t.startup();var v=r.position(this.dropDown.containerNode,!1),b=p&&v.h>p;b&&(v.h=p),v.w=Math.max(v.w,c.offsetWidth),r.setMarginBox(l,v);var _=h.open({parent:this,popup:t,around:c,orient:m("windows-theme")?["above"]:this.dropDownPosition,onExecute:function(){u.closeDropDown()},onCancel:function(){u.closeDropDown()},onClose:function(){u._opened=!1}});if(this._opened=!0,e){var w=!1,M=!1,k=!1,x=t.domNode.parentNode,j=r.position(c,!1),C=r.position(x,!1),T=C.x-j.x,I=C.y-j.y,S=-1,F=-1;this.startHandler=this.connect(a.doc.documentElement,d.press,function(e){M=!0,k=!0,w=!1,S=e.clientX,F=e.clientY}),this.moveHandler=this.connect(a.doc.documentElement,d.move,function(e){M=!0,e.touches?k=w=!0:!k||e.clientX==S&&e.clientY==F||(w=!0)}),this.clickHandler=this.connect(t.domNode,"onclick",function(){M=!0,k=w=!1}),this.endHandler=this.connect(a.doc.documentElement,d.release,function(){this.defer(function(){M=!0,!w&&k&&this.closeDropDown(),k=!1})}),this.repositionTimer=setInterval(i.hitch(this,function(){if(M)return void(M=!1);var e=r.position(c,!1),t=r.position(x,!1),i=t.x-e.x,a=t.y-e.y;(Math.abs(i-T)>=1||Math.abs(a-I)>=1)&&o.set(x,{left:parseInt(o.get(x,"left"))+T-i+"px",top:parseInt(o.get(x,"top"))+I-a+"px"})}),50)}return m("windows-theme")&&this.domNode.setAttribute("disabled",!0),_},postCreate:function(){this.inherited(arguments),this.connect(this.domNode,"onclick","_onClick"),n.set(this.domNode,"role","combobox"),n.set(this.domNode,"aria-expanded","false")},destroy:function(){this.repositionTimer&&clearInterval(this.repositionTimer),this.inherited(arguments)},_onClick:function(e){this._throttleHandler||(this.opened?this.closeDropDown():this._startSearchAll())}})});//# sourceMappingURL=ComboBox.js.map