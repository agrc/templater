//>>built
define("dojox/mobile/_compat",["dojo/_base/array","dojo/_base/config","dojo/_base/connect","dojo/_base/fx","dojo/_base/lang","dojo/sniff","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/dom-attr","dojo/fx","dojo/fx/easing","dojo/ready","dojo/uacss","dijit/registry","dojox/fx","dojox/fx/flip","./EdgeToEdgeList","./IconContainer","./ProgressIndicator","./RoundRect","./RoundRectList","./ScrollableView","./Switch","./View","./Heading","require"],function(e,t,i,a,o,n,r,s,l,d,h,u,c,m,f,p,g,v,y,k,b,_,M,x,w,j,I,T,C){var S=o.getObject("dojox.mobile",!0);return n("webkit")||10===n("ie")||!n("ie")&&n("trident")>6||(o.extend(I,{_doTransition:function(e,t,o,n){var r;this.wakeUp(t);var l,d;if(o&&"none"!=o)if("slide"==o||"cover"==o||"reveal"==o){var u=e.offsetWidth;l=c.slideTo({node:e,duration:400,left:-u*n,top:h.get(e,"top")}),d=c.slideTo({node:t,duration:400,left:0,top:h.get(t,"top")}),t.style.position="absolute",t.style.left=u*n+"px",t.style.display="",r=c.combine([l,d]),i.connect(r,"onEnd",this,function(){if(this._inProgress){e.style.display="none",e.style.left="0px",t.style.position="relative";var i=g.byNode(t);i&&!s.contains(i.domNode,"out")&&(i.containerNode.style.paddingTop=""),this.invokeCallback()}}),r.play()}else if("slidev"==o||"coverv"==o||"reavealv"==o){var m=e.offsetHeight;l=c.slideTo({node:e,duration:400,left:0,top:-m*n}),d=c.slideTo({node:t,duration:400,left:0,top:0}),t.style.position="absolute",t.style.top=m*n+"px",t.style.left="0px",t.style.display="",r=c.combine([l,d]),i.connect(r,"onEnd",this,function(){this._inProgress&&(e.style.display="none",t.style.position="relative",this.invokeCallback())}),r.play()}else"flip"==o?(r=v.flip({node:e,dir:"right",depth:.5,duration:400}),t.style.position="absolute",t.style.left="0px",i.connect(r,"onEnd",this,function(){this._inProgress&&(e.style.display="none",t.style.position="relative",t.style.display="",this.invokeCallback())}),r.play()):(r=c.chain([a.fadeOut({node:e,duration:600}),a.fadeIn({node:t,duration:600})]),t.style.position="absolute",t.style.left="0px",t.style.display="",h.set(t,"opacity",0),i.connect(r,"onEnd",this,function(){this._inProgress&&(e.style.display="none",t.style.position="relative",h.set(e,"opacity",1),this.invokeCallback())}),r.play());else t.style.display="",e.style.display="none",t.style.left="0px",this.invokeCallback()},wakeUp:function(e){if(n("ie")&&!e._wokeup){e._wokeup=!0;var t=e.style.display;e.style.display="";for(var i=e.getElementsByTagName("*"),a=0,o=i.length;a<o;a++){var r=i[a].style.display;i[a].style.display="none",i[a].style.display="",i[a].style.display=r}e.style.display=t}}}),o.extend(_,{scale:function(e){if(n("ie")){var t={w:e,h:e};d.setMarginBox(this.domNode,t),d.setMarginBox(this.containerNode,t)}else if(n("ff")){var i=e/40;h.set(this.containerNode,{MozTransform:"scale("+i+")",MozTransformOrigin:"0 0"}),d.setMarginBox(this.domNode,{w:e,h:e}),d.setMarginBox(this.containerNode,{w:e/i,h:e/i})}}}),n("ie")&&(o.extend(M,{buildRendering:function(){S.createRoundRect(this),this.domNode.className="mblRoundRect"}}),x._addChild=x.prototype.addChild,x._postCreate=x.prototype.postCreate,o.extend(x,{buildRendering:function(){S.createRoundRect(this,!0),this.domNode.className="mblRoundRectList",n("ie")&&n("dojo-bidi")&&!this.isLeftToRight()&&(this.domNode.className="mblRoundRectList mblRoundRectListRtl")},postCreate:function(){x._postCreate.apply(this,arguments),this.redrawBorders()},addChild:function(e,t){x._addChild.apply(this,arguments),this.redrawBorders(),S.applyPngFilter&&S.applyPngFilter(e.domNode)},redrawBorders:function(){if(!(this instanceof k))for(var e=!1,t=this.containerNode.childNodes.length-1;t>=0;t--){var i=this.containerNode.childNodes[t];"LI"==i.tagName&&(i.style.borderBottomStyle=e?"solid":"none",e=!0)}}}),o.extend(k,{buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||r.doc.createElement("ul"),this.domNode.className="mblEdgeToEdgeList"}}),b._addChild=b.prototype.addChild,o.extend(b,{addChild:function(e,t){b._addChild.apply(this,arguments),S.applyPngFilter&&S.applyPngFilter(e.domNode)}}),o.mixin(S,{createRoundRect:function(e,t){var i,a;if(e.domNode=r.doc.createElement("div"),e.domNode.style.padding="0px",e.domNode.style.backgroundColor="transparent",e.domNode.style.border="none",e.containerNode=r.doc.createElement(t?"ul":"div"),e.containerNode.className="mblRoundRectContainer",e.srcNodeRef){for(e.srcNodeRef.parentNode.replaceChild(e.domNode,e.srcNodeRef),i=0,a=e.srcNodeRef.childNodes.length;i<a;i++)e.containerNode.appendChild(e.srcNodeRef.removeChild(e.srcNodeRef.firstChild));e.srcNodeRef=null}for(e.domNode.appendChild(e.containerNode),i=0;i<=5;i++){var o=l.create("div");o.className="mblRoundCorner mblRoundCorner"+i+"T",e.domNode.insertBefore(o,e.containerNode);var n=l.create("div");n.className="mblRoundCorner mblRoundCorner"+i+"B",e.domNode.appendChild(n)}}}),o.extend(w,{postCreate:function(){var e=l.create("div",{className:"mblDummyForIE",innerHTML:"&nbsp;"},this.containerNode,"first");h.set(e,{position:"relative",marginBottom:"-2px",fontSize:"1px"})}})),n("ie")<=6&&(S.applyPngFilter=function(e){e=e||r.body();for(var t=e.getElementsByTagName("IMG"),i=C.toUrl("dojo/resources/blank.gif"),a=0,o=t.length;a<o;a++){var n=t[a],s=n.offsetWidth,l=n.offsetHeight;if(0===s||0===l){if("none"!=h.get(n,"display"))continue;if(n.style.display="",s=n.offsetWidth,l=n.offsetHeight,n.style.display="none",0===s||0===l)continue}var d=n.src;-1==d.indexOf("resources/blank.gif")&&(n.src=i,n.runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+d+"')",n.style.width=s+"px",n.style.height=l+"px")}},!S._disableBgFilter&&S.createDomButton&&(S._createDomButton_orig=S.createDomButton,S.createDomButton=function(e,t,i){var a=S._createDomButton_orig.apply(this,arguments);if(a&&a.className&&-1!==a.className.indexOf("mblDomButton")){var o=function(){if(a.currentStyle&&a.currentStyle.backgroundImage.match(/url.*(mblDomButton.*\.png)/)){var e=RegExp.$1,t=C.toUrl("dojox/mobile/themes/common/domButtons/compat/")+e;a.runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"',sizingMethod='crop')",a.style.background="none"}};setTimeout(o,1e3),setTimeout(o,5e3)}return a})),S.loadCssFile=function(e){S.loadedCssFiles||(S.loadedCssFiles=[]),r.doc.createStyleSheet?setTimeout(function(e){return function(){var t=r.doc.createStyleSheet(e);t&&S.loadedCssFiles.push(t.owningElement)}}(e),0):S.loadedCssFiles.push(l.create("link",{href:e,type:"text/css",rel:"stylesheet"},r.doc.getElementsByTagName("head")[0]))},S.loadCss=function(t){if(!S._loadedCss){var i={};e.forEach(S.getCssPaths(),function(e){i[e]=!0}),S._loadedCss=i}o.isArray(t)||(t=[t]);for(var a=0;a<t.length;a++){var n=t[a];S._loadedCss[n]||(S._loadedCss[n]=!0,S.loadCssFile(n))}},S.getCssPaths=function(){var e,t,i,a=[],o=r.doc.styleSheets;for(e=0;e<o.length;e++)if(!o[e].href){var n=o[e].cssRules||o[e].imports;if(n)for(t=0;t<n.length;t++)n[t].href&&a.push(n[t].href)}var s=r.doc.getElementsByTagName("link");for(e=0,i=s.length;e<i;e++)s[e].href&&a.push(s[e].href);return a},S.loadCompatPattern=/\/mobile\/themes\/.*\.css$/,S.loadCompatCssFiles=function(e){if(n("ie")&&!e)return void setTimeout(function(){S.loadCompatCssFiles(!0)},0);S._loadedCss=void 0;var i=S.getCssPaths();n("dojo-bidi")&&(i=S.loadRtlCssFiles(i));for(var a=0;a<i.length;a++){var o=i[a];if((o.match(t.mblLoadCompatPattern||S.loadCompatPattern)||-1!==location.href.indexOf("mobile/tests/"))&&-1===o.indexOf("-compat.css")){var r=o.substring(0,o.length-4)+"-compat.css";S.loadCss(r)}}},n("dojo-bidi")&&(S.loadRtlCssFiles=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(-1==i.indexOf("_rtl")){if(-1!="android.css blackberry.css custom.css iphone.css holodark.css base.css Carousel.css ComboBox.css IconContainer.css IconMenu.css ListItem.css RoundRectCategory.css SpinWheel.css Switch.css TabBar.css ToggleButton.css ToolBarButton.css ProgressIndicator.css Accordion.css GridLayout.css FormLayout.css".indexOf(i.substr(i.lastIndexOf("/")+1))){var a=i.replace(".css","_rtl.css");e.push(a),S.loadCss(a)}}}return e}),S.hideAddressBar=function(e,t){!1!==t&&S.resizeAll()},f(function(){!1!==t.mblLoadCompatCssFiles&&S.loadCompatCssFiles(),S.applyPngFilter&&S.applyPngFilter()})),S});//# sourceMappingURL=_compat.js.map