//>>built
define("dojox/mobile/app/SceneController",["dojo","dijit","dojox","dojo/require!dojox/mobile/_base"],function(e,t,i){e.provide("dojox.mobile.app.SceneController"),e.experimental("dojox.mobile.app.SceneController"),e.require("dojox.mobile._base"),function(){var t=i.mobile.app,a={};e.declare("dojox.mobile.app.SceneController",i.mobile.View,{stageController:null,keepScrollPos:!1,init:function(i,r){this.sceneName=i,this.params=r;var o=t.resolveTemplate(i);return this._deferredInit=new e.Deferred,a[i]?this._setContents(a[i]):e.xhrGet({url:o,handleAs:"text"}).addCallback(e.hitch(this,this._setContents)),this._deferredInit},_setContents:function(r){a[this.sceneName]=r,this.domNode.innerHTML="<div>"+r+"</div>";for(var o="",n=this.sceneName.split("-"),s=0;s<n.length;s++)o+=n[s].substring(0,1).toUpperCase()+n[s].substring(1);o+="Assistant",this.sceneAssistantName=o;var l=this;i.mobile.app.loadResourcesForScene(this.sceneName,function(){if(void 0!==e.global[o])l._initAssistant();else{var i=t.resolveAssistant(l.sceneName);e.xhrGet({url:i,handleAs:"text"}).addCallback(function(t){try{e.eval(t)}catch(e){throw e}l._initAssistant()})}})},_initAssistant:function(){var t=e.getObject(this.sceneAssistantName);if(!t)throw Error("Unable to resolve scene assistant "+this.sceneAssistantName);this.assistant=new t(this.params),this.assistant.controller=this,this.assistant.domNode=this.domNode.firstChild,this.assistant.setup(),this._deferredInit.callback()},query:function(t,i){return e.query(t,i||this.domNode)},parse:function(e){for(var t=this._widgets=i.mobile.parser.parse(e||this.domNode,{controller:this}),a=0;a<t.length;a++)t[a].set("controller",this)},getWindowSize:function(){return{w:e.global.innerWidth,h:e.global.innerHeight}},showAlertDialog:function(t){var a=(e.marginBox(this.assistant.domNode),new i.mobile.app.AlertDialog(e.mixin(t,{controller:this})));this.assistant.domNode.appendChild(a.domNode),a.show()},popupSubMenu:function(e){var t=new i.mobile.app.ListSelector({controller:this,destroyOnHide:!0,onChoose:e.onChoose});this.assistant.domNode.appendChild(t.domNode),t.set("data",e.choices),t.show(e.fromNode)}})}()});//# sourceMappingURL=SceneController.js.map