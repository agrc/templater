//>>built
define("dojox/mobile/app/SceneController",["dojo","dijit","dojox","dojo/require!dojox/mobile/_base"],function(e,t,i){e.provide("dojox.mobile.app.SceneController"),e.experimental("dojox.mobile.app.SceneController"),e.require("dojox.mobile._base"),function(){var t=i.mobile.app,o={};e.declare("dojox.mobile.app.SceneController",i.mobile.View,{stageController:null,keepScrollPos:!1,init:function(i,n){this.sceneName=i,this.params=n;var a=t.resolveTemplate(i);return this._deferredInit=new e.Deferred,o[i]?this._setContents(o[i]):e.xhrGet({url:a,handleAs:"text"}).addCallback(e.hitch(this,this._setContents)),this._deferredInit},_setContents:function(n){o[this.sceneName]=n,this.domNode.innerHTML="<div>"+n+"</div>";for(var a="",r=this.sceneName.split("-"),s=0;s<r.length;s++)a+=r[s].substring(0,1).toUpperCase()+r[s].substring(1);a+="Assistant",this.sceneAssistantName=a;var d=this;i.mobile.app.loadResourcesForScene(this.sceneName,function(){if("undefined"!=typeof e.global[a])d._initAssistant();else{var i=t.resolveAssistant(d.sceneName);e.xhrGet({url:i,handleAs:"text"}).addCallback(function(t){try{e.eval(t)}catch(i){throw i}d._initAssistant()})}})},_initAssistant:function(){var t=e.getObject(this.sceneAssistantName);if(!t)throw Error("Unable to resolve scene assistant "+this.sceneAssistantName);this.assistant=new t(this.params),this.assistant.controller=this,this.assistant.domNode=this.domNode.firstChild,this.assistant.setup(),this._deferredInit.callback()},query:function(t,i){return e.query(t,i||this.domNode)},parse:function(e){for(var t=this._widgets=i.mobile.parser.parse(e||this.domNode,{controller:this}),o=0;o<t.length;o++)t[o].set("controller",this)},getWindowSize:function(){return{w:e.global.innerWidth,h:e.global.innerHeight}},showAlertDialog:function(t){var o=(e.marginBox(this.assistant.domNode),new i.mobile.app.AlertDialog(e.mixin(t,{controller:this})));this.assistant.domNode.appendChild(o.domNode),o.show()},popupSubMenu:function(e){var t=new i.mobile.app.ListSelector({controller:this,destroyOnHide:!0,onChoose:e.onChoose});this.assistant.domNode.appendChild(t.domNode),t.set("data",e.choices),t.show(e.fromNode)}})}()});//# sourceMappingURL=SceneController.js.map