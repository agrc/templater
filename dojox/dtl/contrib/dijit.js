//>>built
define("dojox/dtl/contrib/dijit",["dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/query","../_base","../dom","dojo/parser","dojo/_base/sniff"],function(e,t,a,i,r,o,n,d){function s(e){var t=e.cloneNode(!0);return d("ie")&&i("script",t).forEach("item.text = this[index].text;",i("script",e)),t}var l=e.getObject("contrib.dijit",!0,r);return l.AttachNode=e.extend(function(e,t){this._keys=e,this._object=t},{render:function(e,t){if(!this._rendered){this._rendered=!0;for(var a,i=0;a=this._keys[i];i++)e.getThis()[a]=this._object||t.getParent()}return t},unrender:function(e,t){if(this._rendered){this._rendered=!1;for(var a,i=0;a=this._keys[i];i++)e.getThis()[a]===(this._object||t.getParent())&&delete e.getThis()[a]}return t},clone:function(e){return new this.constructor(this._keys,this._object)}}),l.EventNode=e.extend(function(t,a){this._command=t;for(var i,r=t.split(/\s*,\s*/),o=e.trim,n=[],d=[];i=r.pop();)if(i){var s=null;if(-1!=i.indexOf(":")){var l=i.split(":");i=o(l[0]),s=o(l.slice(1).join(":"))}else i=o(i);s||(s=i),n.push(i),d.push(s)}this._types=n,this._fns=d,this._object=a,this._rendered=[]},{_clear:!1,render:function(i,o){for(var n,d=0;n=this._types[d];d++){this._clear||this._object||(o.getParent()[n]=null);var s,l=this._fns[d];if(-1!=l.indexOf(" ")&&(this._rendered[d]&&(t.disconnect(this._rendered[d]),this._rendered[d]=!1),s=a.map(l.split(" ").slice(1),function(e){return new r._Filter(e).resolve(i)}),l=l.split(" ",2)[0]),!this._rendered[d])if(this._object){var m=l;e.isArray(s)&&(m=function(e){this[l].apply(this,[e].concat(s))}),this._rendered[d]=t.connect(this._object,n,i.getThis(),l)}else this._rendered[d]=o.addEvent(i,n,l,s)}return this._clear=!0,o},unrender:function(e,a){for(;this._rendered.length;)t.disconnect(this._rendered.pop());return a},clone:function(){return new this.constructor(this._command,this._object)}}),l.DojoTypeNode=e.extend(function(t,a){this._node=t,this._parsed=a;var i=t.getAttribute("dojoAttachEvent")||t.getAttribute("data-dojo-attach-event");i&&(this._events=new l.EventNode(e.trim(i)));var o=t.getAttribute("dojoAttachPoint")||t.getAttribute("data-dojo-attach-point");if(o&&(this._attach=new l.AttachNode(e.trim(o).split(/\s*,\s*/))),a){t=s(t);var d=l.widgetsInTemplate;l.widgetsInTemplate=!1,this._template=new r.DomTemplate(t),l.widgetsInTemplate=d}else this._dijit=n.instantiate([s(t)])[0]},{render:function(e,t){if(this._parsed){var a=new r.DomBuffer;this._template.render(e,a);var i=s(a.getRootNode()),o=document.createElement("div");o.appendChild(i);var d=o.innerHTML;o.removeChild(i),d!=this._rendered&&(this._rendered=d,this._dijit&&this._dijit.destroyRecursive(),this._dijit=n.instantiate([i])[0])}var l=this._dijit.domNode;return this._events&&(this._events._object=this._dijit,this._events.render(e,t)),this._attach&&(this._attach._object=this._dijit,this._attach.render(e,t)),t.concat(l)},unrender:function(e,t){return t.remove(this._dijit.domNode)},clone:function(){return new this.constructor(this._node,this._parsed)}}),e.mixin(l,{widgetsInTemplate:!0,dojoAttachPoint:function(e,t){return new l.AttachNode(t.contents.slice(-1!==t.contents.indexOf("data-")?23:16).split(/\s*,\s*/))},dojoAttachEvent:function(e,t){return new l.EventNode(t.contents.slice(-1!==t.contents.indexOf("data-")?23:16))},dojoType:function(e,t){var a=!1;" parsed"==t.contents.slice(-7)&&(a=!0);var i=-1!==t.contents.indexOf("data-")?t.contents.slice(15):t.contents.slice(9),o=a?i.slice(0,-7):i.toString();if(l.widgetsInTemplate){var n=e.swallowNode();return n.setAttribute("data-dojo-type",o),new l.DojoTypeNode(n,a)}return new r.AttributeNode("data-dojo-type",o)},on:function(e,t){var a=t.contents.split();return new l.EventNode(a[0]+":"+a.slice(1).join(" "))}}),l["data-dojo-type"]=l.dojoType,l["data-dojo-attach-point"]=l.dojoAttachPoint,l["data-dojo-attach-event"]=l.dojoAttachEvent,r.register.tags("dojox.dtl.contrib",{dijit:["attr:dojoType","attr:data-dojo-type","attr:dojoAttachPoint","attr:data-dojo-attach-point",["attr:attach","dojoAttachPoint"],["attr:attach","data-dojo-attach-point"],"attr:dojoAttachEvent","attr:data-dojo-attach-event",[/(attr:)?on(click|key(up))/i,"on"]]}),l});//# sourceMappingURL=dijit.js.map