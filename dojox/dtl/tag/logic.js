//>>built
define("dojox/dtl/tag/logic",["dojo/_base/lang","../_base"],function(e,t){var i=e.getObject("tag.logic",!0,t);t.text;return i.IfNode=e.extend(function(e,t,i,a){this.bools=e,this.trues=t,this.falses=i,this.type=a},{render:function(e,t){var i,a,r,o,n;if("or"==this.type){for(i=0;a=this.bools[i];i++)if(r=a[0],o=a[1],n=o.resolve(e),n&&!r||r&&!n)return this.falses&&(t=this.falses.unrender(e,t)),this.trues?this.trues.render(e,t,this):t;return this.trues&&(t=this.trues.unrender(e,t)),this.falses?this.falses.render(e,t,this):t}for(i=0;a=this.bools[i];i++)if(r=a[0],o=a[1],n=o.resolve(e),n==r)return this.trues&&(t=this.trues.unrender(e,t)),this.falses?this.falses.render(e,t,this):t;return this.falses&&(t=this.falses.unrender(e,t)),this.trues?this.trues.render(e,t,this):t},unrender:function(e,t){return t=this.trues?this.trues.unrender(e,t):t,t=this.falses?this.falses.unrender(e,t):t},clone:function(e){var t=this.trues?this.trues.clone(e):null,i=this.falses?this.falses.clone(e):null;return new this.constructor(this.bools,t,i,this.type)}}),i.IfEqualNode=e.extend(function(e,i,a,r,o){this.var1=new t._Filter(e),this.var2=new t._Filter(i),this.trues=a,this.falses=r,this.negate=o},{render:function(e,t){var i=this.var1.resolve(e),a=this.var2.resolve(e);return i="undefined"!=typeof i?i:"",a="undefined"!=typeof i?a:"",this.negate&&i!=a||!this.negate&&i==a?(this.falses&&(t=this.falses.unrender(e,t,this)),this.trues?this.trues.render(e,t,this):t):(this.trues&&(t=this.trues.unrender(e,t,this)),this.falses?this.falses.render(e,t,this):t)},unrender:function(e,t){return i.IfNode.prototype.unrender.call(this,e,t)},clone:function(e){var t=this.trues?this.trues.clone(e):null,i=this.falses?this.falses.clone(e):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),t,i,this.negate)}}),i.ForNode=e.extend(function(e,i,a,r){this.assign=e,this.loop=new t._Filter(i),this.reversed=a,this.nodelist=r,this.pool=[]},{render:function(t,i){var a,r,o,n=!1,d=this.assign;for(o=0;o<d.length;o++)if("undefined"!=typeof t[d[o]]){n=!0,t=t.push();break}!n&&t.forloop&&(n=!0,t=t.push());var s=this.loop.resolve(t)||[],l=e.isObject(s)&&!e.isArrayLike(s),h=[];if(l)for(var u in s)h.push(s[u]);else h=s;for(a=h.length;a<this.pool.length;a++)this.pool[a].unrender(t,i,this);this.reversed&&(h=h.slice(0).reverse());var m=t.forloop={parentloop:t.get("forloop",{})},r=0;for(a=0;a<h.length;a++){var c=h[a];if(m.counter0=r,m.counter=r+1,m.revcounter0=h.length-r-1,m.revcounter=h.length-r,m.first=!r,m.last=r==h.length-1,d.length>1&&e.isArrayLike(c)){n||(n=!0,t=t.push());var f={};for(o=0;o<c.length&&o<d.length;o++)f[d[o]]=c[o];e.mixin(t,f)}else t[d[0]]=c;r+1>this.pool.length&&this.pool.push(this.nodelist.clone(i)),i=this.pool[r++].render(t,i,this)}if(delete t.forloop,n)t=t.pop();else for(o=0;o<d.length;o++)delete t[d[o]];return i},unrender:function(e,t){for(var i,a=0;i=this.pool[a];a++)t=i.unrender(e,t);return t},clone:function(e){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(e))}}),e.mixin(i,{if_:function(e,a){var r,o,n,d=[],s=a.contents.split();if(s.shift(),a=s.join(" "),s=a.split(" and "),1==s.length)n="or",s=a.split(" or ");else for(n="and",r=0;r<s.length;r++)if(-1!=s[r].indexOf(" or "))throw new Error("'if' tags can't mix 'and' and 'or'");for(r=0;o=s[r];r++){var l=!1;0==o.indexOf("not ")&&(o=o.slice(4),l=!0),d.push([l,new t._Filter(o)])}var h=e.parse(["else","endif"]),u=!1,a=e.next_token();return"else"==a.contents&&(u=e.parse(["endif"]),e.next_token()),new i.IfNode(d,h,u,n)},_ifequal:function(e,t,a){var r=t.split_contents();if(3!=r.length)throw new Error(r[0]+" takes two arguments");var o="end"+r[0],n=e.parse(["else",o]),d=!1,t=e.next_token();return"else"==t.contents&&(d=e.parse([o]),e.next_token()),new i.IfEqualNode(r[1],r[2],n,d,a)},ifequal:function(e,t){return i._ifequal(e,t)},ifnotequal:function(e,t){return i._ifequal(e,t,!0)},for_:function(e,t){var a=t.contents.split();if(a.length<4)throw new Error("'for' statements should have at least four words: "+t.contents);var r="reversed"==a[a.length-1],o=r?-3:-2;if("in"!=a[a.length+o])throw new Error("'for' tag received an invalid argument: "+t.contents);for(var n=a.slice(1,o).join(" ").split(/ *, */),d=0;d<n.length;d++)if(!n[d]||-1!=n[d].indexOf(" "))throw new Error("'for' tag received an invalid argument: "+t.contents);var s=e.parse(["endfor"]);return e.next_token(),new i.ForNode(n,a[a.length+o+1],r,s)}}),i});//# sourceMappingURL=logic.js.map