//>>built
define("dojox/dtl/tag/logic",["dojo/_base/lang","../_base"],function(e,t){var i=e.getObject("tag.logic",!0,t);t.text;return i.IfNode=e.extend(function(e,t,i,a){this.bools=e,this.trues=t,this.falses=i,this.type=a},{render:function(e,t){var i,a,r,n,o;if("or"==this.type){for(i=0;a=this.bools[i];i++)if(r=a[0],n=a[1],o=n.resolve(e),o&&!r||r&&!o)return this.falses&&(t=this.falses.unrender(e,t)),this.trues?this.trues.render(e,t,this):t;return this.trues&&(t=this.trues.unrender(e,t)),this.falses?this.falses.render(e,t,this):t}for(i=0;a=this.bools[i];i++)if(r=a[0],n=a[1],o=n.resolve(e),o==r)return this.trues&&(t=this.trues.unrender(e,t)),this.falses?this.falses.render(e,t,this):t;return this.falses&&(t=this.falses.unrender(e,t)),this.trues?this.trues.render(e,t,this):t},unrender:function(e,t){return t=this.trues?this.trues.unrender(e,t):t,t=this.falses?this.falses.unrender(e,t):t},clone:function(e){var t=this.trues?this.trues.clone(e):null,i=this.falses?this.falses.clone(e):null;return new this.constructor(this.bools,t,i,this.type)}}),i.IfEqualNode=e.extend(function(e,i,a,r,n){this.var1=new t._Filter(e),this.var2=new t._Filter(i),this.trues=a,this.falses=r,this.negate=n},{render:function(e,t){var i=this.var1.resolve(e),a=this.var2.resolve(e);return i="undefined"!=typeof i?i:"",a="undefined"!=typeof i?a:"",this.negate&&i!=a||!this.negate&&i==a?(this.falses&&(t=this.falses.unrender(e,t,this)),this.trues?this.trues.render(e,t,this):t):(this.trues&&(t=this.trues.unrender(e,t,this)),this.falses?this.falses.render(e,t,this):t)},unrender:function(e,t){return i.IfNode.prototype.unrender.call(this,e,t)},clone:function(e){var t=this.trues?this.trues.clone(e):null,i=this.falses?this.falses.clone(e):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),t,i,this.negate)}}),i.ForNode=e.extend(function(e,i,a,r){this.assign=e,this.loop=new t._Filter(i),this.reversed=a,this.nodelist=r,this.pool=[]},{render:function(t,i){var a,r,n,o=!1,s=this.assign;for(n=0;n<s.length;n++)if("undefined"!=typeof t[s[n]]){o=!0,t=t.push();break}!o&&t.forloop&&(o=!0,t=t.push());var d=this.loop.resolve(t)||[],l=e.isObject(d)&&!e.isArrayLike(d),h=[];if(l)for(var u in d)h.push(d[u]);else h=d;for(a=h.length;a<this.pool.length;a++)this.pool[a].unrender(t,i,this);this.reversed&&(h=h.slice(0).reverse());var c=t.forloop={parentloop:t.get("forloop",{})},r=0;for(a=0;a<h.length;a++){var m=h[a];if(c.counter0=r,c.counter=r+1,c.revcounter0=h.length-r-1,c.revcounter=h.length-r,c.first=!r,c.last=r==h.length-1,s.length>1&&e.isArrayLike(m)){o||(o=!0,t=t.push());var f={};for(n=0;n<m.length&&n<s.length;n++)f[s[n]]=m[n];e.mixin(t,f)}else t[s[0]]=m;r+1>this.pool.length&&this.pool.push(this.nodelist.clone(i)),i=this.pool[r++].render(t,i,this)}if(delete t.forloop,o)t=t.pop();else for(n=0;n<s.length;n++)delete t[s[n]];return i},unrender:function(e,t){for(var i,a=0;i=this.pool[a];a++)t=i.unrender(e,t);return t},clone:function(e){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(e))}}),e.mixin(i,{if_:function(e,a){var r,n,o,s=[],d=a.contents.split();if(d.shift(),a=d.join(" "),d=a.split(" and "),1==d.length)o="or",d=a.split(" or ");else for(o="and",r=0;r<d.length;r++)if(-1!=d[r].indexOf(" or "))throw new Error("'if' tags can't mix 'and' and 'or'");for(r=0;n=d[r];r++){var l=!1;0==n.indexOf("not ")&&(n=n.slice(4),l=!0),s.push([l,new t._Filter(n)])}var h=e.parse(["else","endif"]),u=!1,a=e.next_token();return"else"==a.contents&&(u=e.parse(["endif"]),e.next_token()),new i.IfNode(s,h,u,o)},_ifequal:function(e,t,a){var r=t.split_contents();if(3!=r.length)throw new Error(r[0]+" takes two arguments");var n="end"+r[0],o=e.parse(["else",n]),s=!1,t=e.next_token();return"else"==t.contents&&(s=e.parse([n]),e.next_token()),new i.IfEqualNode(r[1],r[2],o,s,a)},ifequal:function(e,t){return i._ifequal(e,t)},ifnotequal:function(e,t){return i._ifequal(e,t,!0)},for_:function(e,t){var a=t.contents.split();if(a.length<4)throw new Error("'for' statements should have at least four words: "+t.contents);var r="reversed"==a[a.length-1],n=r?-3:-2;if("in"!=a[a.length+n])throw new Error("'for' tag received an invalid argument: "+t.contents);for(var o=a.slice(1,n).join(" ").split(/ *, */),s=0;s<o.length;s++)if(!o[s]||-1!=o[s].indexOf(" "))throw new Error("'for' tag received an invalid argument: "+t.contents);var d=e.parse(["endfor"]);return e.next_token(),new i.ForNode(o,a[a.length+n+1],r,d)}}),i});//# sourceMappingURL=logic.js.map