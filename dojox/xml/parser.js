//>>built
define("dojox/xml/parser",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(e){return e.getObject("xml.parser",!0,dojox),dojox.xml.parser.parse=function(t,i){var r,o=e.doc;if(i=i||"text/xml",t&&e.trim(t)&&"DOMParser"in e.global){var n=new DOMParser;r=n.parseFromString(t,i);var a=r.documentElement,s="http://www.mozilla.org/newlayout/xml/parsererror.xml";if("parsererror"==a.nodeName&&a.namespaceURI==s){var d=a.getElementsByTagNameNS(s,"sourcetext")[0];throw d&&(d=d.firstChild.data),new Error("Error parsing text "+a.firstChild.data+" \n"+d)}return r}if("ActiveXObject"in e.global){var l=function(e){return"MSXML"+e+".DOMDocument"},u=["Microsoft.XMLDOM",l(6),l(4),l(3),l(2)];if(e.some(u,function(e){try{r=new ActiveXObject(e)}catch(e){return!1}return!0}),t&&r){r.async=!1,r.loadXML(t);var c=r.parseError;if(0!==c.errorCode)throw new Error("Line: "+c.line+"\nCol: "+c.linepos+"\nReason: "+c.reason+"\nError Code: "+c.errorCode+"\nSource: "+c.srcText)}if(r)return r}else if(o.implementation&&o.implementation.createDocument){if(t&&e.trim(t)&&o.createElement){var h=o.createElement("xml");h.innerHTML=t;var f=o.implementation.createDocument("foo","",null);return e.forEach(h.childNodes,function(e){f.importNode(e,!0)}),f}return o.implementation.createDocument("","",null)}return null},dojox.xml.parser.textContent=function(t,i){if(arguments.length>1){var r=t.ownerDocument||e.doc;return dojox.xml.parser.replaceChildren(t,r.createTextNode(i)),i}if(void 0!==t.textContent)return t.textContent;var o="";return t&&e.forEach(t.childNodes,function(e){switch(e.nodeType){case 1:case 5:o+=dojox.xml.parser.textContent(e);break;case 3:case 2:case 4:o+=e.nodeValue}}),o},dojox.xml.parser.replaceChildren=function(t,i){var r=[];e.isIE&&e.forEach(t.childNodes,function(e){r.push(e)}),dojox.xml.parser.removeChildren(t),e.forEach(r,e.destroy),e.isArray(i)?e.forEach(i,function(e){t.appendChild(e)}):t.appendChild(i)},dojox.xml.parser.removeChildren=function(e){for(var t=e.childNodes.length;e.hasChildNodes();)e.removeChild(e.firstChild);return t},dojox.xml.parser.innerXML=function(e){return e.innerXML?e.innerXML:e.xml?e.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(e):null},dojox.xml.parser});//# sourceMappingURL=parser.js.map