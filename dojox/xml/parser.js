//>>built
define("dojox/xml/parser",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(e){return e.getObject("xml.parser",!0,dojox),dojox.xml.parser.parse=function(t,i){var a,o=e.doc;if(i=i||"text/xml",t&&e.trim(t)&&"DOMParser"in e.global){var r=new DOMParser;a=r.parseFromString(t,i);var n=a.documentElement,s="http://www.mozilla.org/newlayout/xml/parsererror.xml";if("parsererror"==n.nodeName&&n.namespaceURI==s){var l=n.getElementsByTagNameNS(s,"sourcetext")[0];throw l&&(l=l.firstChild.data),new Error("Error parsing text "+n.firstChild.data+" \n"+l)}return a}if("ActiveXObject"in e.global){var d=function(e){return"MSXML"+e+".DOMDocument"},h=["Microsoft.XMLDOM",d(6),d(4),d(3),d(2)];if(e.some(h,function(e){try{a=new ActiveXObject(e)}catch(t){return!1}return!0}),t&&a){a.async=!1,a.loadXML(t);var u=a.parseError;if(0!==u.errorCode)throw new Error("Line: "+u.line+"\nCol: "+u.linepos+"\nReason: "+u.reason+"\nError Code: "+u.errorCode+"\nSource: "+u.srcText)}if(a)return a}else if(o.implementation&&o.implementation.createDocument){if(t&&e.trim(t)&&o.createElement){var c=o.createElement("xml");c.innerHTML=t;var m=o.implementation.createDocument("foo","",null);return e.forEach(c.childNodes,function(e){m.importNode(e,!0)}),m}return o.implementation.createDocument("","",null)}return null},dojox.xml.parser.textContent=function(t,i){if(arguments.length>1){var a=t.ownerDocument||e.doc;return dojox.xml.parser.replaceChildren(t,a.createTextNode(i)),i}if(void 0!==t.textContent)return t.textContent;var o="";return t&&e.forEach(t.childNodes,function(e){switch(e.nodeType){case 1:case 5:o+=dojox.xml.parser.textContent(e);break;case 3:case 2:case 4:o+=e.nodeValue}}),o},dojox.xml.parser.replaceChildren=function(t,i){var a=[];e.isIE&&e.forEach(t.childNodes,function(e){a.push(e)}),dojox.xml.parser.removeChildren(t),e.forEach(a,e.destroy),e.isArray(i)?e.forEach(i,function(e){t.appendChild(e)}):t.appendChild(i)},dojox.xml.parser.removeChildren=function(e){for(var t=e.childNodes.length;e.hasChildNodes();)e.removeChild(e.firstChild);return t},dojox.xml.parser.innerXML=function(e){return e.innerXML?e.innerXML:e.xml?e.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(e):null},dojox.xml.parser});//# sourceMappingURL=parser.js.map