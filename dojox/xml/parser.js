//>>built
define("dojox/xml/parser",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(e){return e.getObject("xml.parser",!0,dojox),dojox.xml.parser.parse=function(t,i){var o,a=e.doc;if(i=i||"text/xml",t&&e.trim(t)&&"DOMParser"in e.global){var r=new DOMParser;o=r.parseFromString(t,i);var n=o.documentElement,s="http://www.mozilla.org/newlayout/xml/parsererror.xml";if("parsererror"==n.nodeName&&n.namespaceURI==s){var l=n.getElementsByTagNameNS(s,"sourcetext")[0];throw l&&(l=l.firstChild.data),new Error("Error parsing text "+n.firstChild.data+" \n"+l)}return o}if("ActiveXObject"in e.global){var d=function(e){return"MSXML"+e+".DOMDocument"},h=["Microsoft.XMLDOM",d(6),d(4),d(3),d(2)];if(e.some(h,function(e){try{o=new ActiveXObject(e)}catch(t){return!1}return!0}),t&&o){o.async=!1,o.loadXML(t);var u=o.parseError;if(0!==u.errorCode)throw new Error("Line: "+u.line+"\nCol: "+u.linepos+"\nReason: "+u.reason+"\nError Code: "+u.errorCode+"\nSource: "+u.srcText)}if(o)return o}else if(a.implementation&&a.implementation.createDocument){if(t&&e.trim(t)&&a.createElement){var c=a.createElement("xml");c.innerHTML=t;var m=a.implementation.createDocument("foo","",null);return e.forEach(c.childNodes,function(e){m.importNode(e,!0)}),m}return a.implementation.createDocument("","",null)}return null},dojox.xml.parser.textContent=function(t,i){if(arguments.length>1){var o=t.ownerDocument||e.doc;return dojox.xml.parser.replaceChildren(t,o.createTextNode(i)),i}if(void 0!==t.textContent)return t.textContent;var a="";return t&&e.forEach(t.childNodes,function(e){switch(e.nodeType){case 1:case 5:a+=dojox.xml.parser.textContent(e);break;case 3:case 2:case 4:a+=e.nodeValue}}),a},dojox.xml.parser.replaceChildren=function(t,i){var o=[];e.isIE&&e.forEach(t.childNodes,function(e){o.push(e)}),dojox.xml.parser.removeChildren(t),e.forEach(o,e.destroy),e.isArray(i)?e.forEach(i,function(e){t.appendChild(e)}):t.appendChild(i)},dojox.xml.parser.removeChildren=function(e){for(var t=e.childNodes.length;e.hasChildNodes();)e.removeChild(e.firstChild);return t},dojox.xml.parser.innerXML=function(e){return e.innerXML?e.innerXML:e.xml?e.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(e):null},dojox.xml.parser});//# sourceMappingURL=parser.js.map