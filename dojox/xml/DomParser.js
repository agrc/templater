//>>built
define("dojox/xml/DomParser",["dojo/_base/kernel","dojo/_base/array"],function(e){return e.getObject("xml",!0,dojox),dojox.xml.DomParser=new function(){function t(){return new function(){var e={};this.nodeType=f.DOCUMENT,this.nodeName="#document",this.namespaces={},this._nsPaths={},this.childNodes=[],this.documentElement=null,this._add=function(t){"undefined"!=typeof t.id&&(e[t.id]=t)},this._remove=function(t){e[t]&&delete e[t]},this.byId=this.getElementById=function(t){return e[t]},this.byName=this.getElementsByTagName=i,this.byNameNS=this.getElementsByTagNameNS=o,this.childrenByName=n,this.childrenByNameNS=r}}function i(t){function i(t,o,n){e.forEach(t.childNodes,function(e){e.nodeType==f.ELEMENT&&("*"==o?n.push(e):e.nodeName==o&&n.push(e),i(e,o,n))})}var o=[];return i(this,t,o),o}function o(t,i){function o(t,i,n,r){e.forEach(t.childNodes,function(e){e.nodeType==f.ELEMENT&&("*"==i&&e.ownerDocument._nsPaths[n]==e.namespace?r.push(e):e.localName==i&&e.ownerDocument._nsPaths[n]==e.namespace&&r.push(e),o(e,i,n,r))})}i||(i=C);var n=[];return o(this,t,i,n),n}function n(t){var i=[];return e.forEach(this.childNodes,function(e){e.nodeType==f.ELEMENT&&("*"==t?i.push(e):e.nodeName==t&&i.push(e))}),i}function r(t,i){var o=[];return e.forEach(this.childNodes,function(e){e.nodeType==f.ELEMENT&&("*"==t&&e.ownerDocument._nsPaths[i]==e.namespace?o.push(e):e.localName==t&&e.ownerDocument._nsPaths[i]==e.namespace&&o.push(e))}),o}function a(e){return{nodeType:f.TEXT,nodeName:"#text",nodeValue:e.replace(_," ").replace(x,">").replace(j,"<").replace(M,"'").replace(w,'"').replace(k,"&")}}function s(e){for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].nodeName==e)return this.attributes[t].nodeValue;return null}function d(e,t){for(var i=0;i<this.attributes.length;i++)if(this.ownerDocument._nsPaths[t]==this.attributes[i].namespace&&this.attributes[i].localName==e)return this.attributes[i].nodeValue;return null}function l(e,t){for(var i=null,o=0;o<this.attributes.length;o++)if(this.attributes[o].nodeName==e){i=this.attributes[o].nodeValue,this.attributes[o].nodeValue=t;break}"id"==e&&(null!=i&&this.ownerDocument._remove(i),this.ownerDocument._add(this))}function c(e,t,i){for(var o=0;o<this.attributes.length;o++)if(this.ownerDocument._nsPaths[i]==this.attributes[o].namespace&&this.attributes[o].localName==e)return void(this.attributes[o].nodeValue=t)}function u(){var e=this.parentNode;if(e)for(var t=0;t<e.childNodes.length;t++)if(e.childNodes[t]==this&&t>0)return e.childNodes[t-1];return null}function h(){var e=this.parentNode;if(e)for(var t=0;t<e.childNodes.length;t++)if(e.childNodes[t]==this&&t+1<e.childNodes.length)return e.childNodes[t+1];return null}var f={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9},m=/<([^>\/\s+]*)([^>]*)>([^<]*)/g,p=/([^=]*)=(("([^"]*)")|('([^']*)'))/g,g=/<!ENTITY\s+([^"]*)\s+"([^"]*)">/g,v=/<!\[CDATA\[([\u0001-\uFFFF]*?)\]\]>/g,y=/<!--([\u0001-\uFFFF]*?)-->/g,b=/^\s+|\s+$/g,_=/\s+/g,x=/\&gt;/g,j=/\&lt;/g,w=/\&quot;/g,M=/\&apos;/g,k=/\&amp;/g,C="_def_";this.parse=function(e){var I=t();if(null==e)return I;if(0==e.length)return I;if(e.indexOf("<!ENTITY")>0){var T,N=[];if(g.test(e)){for(g.lastIndex=0;null!=(T=g.exec(e));)N.push({entity:"&"+T[1].replace(b,"")+";",expression:T[2]});for(var S=0;S<N.length;S++)e=e.replace(new RegExp(N[S].entity,"g"),N[S].expression)}}for(var A,F=[];null!=(A=v.exec(e));)F.push(A[1]);for(var S=0;S<F.length;S++)e=e.replace(F[S],S);for(var E,D=[];null!=(E=y.exec(e));)D.push(E[1]);for(S=0;S<D.length;S++)e=e.replace(D[S],S);for(var L,P=I;null!=(L=m.exec(e));)if("/"==L[2].charAt(0)&&L[2].replace(b,"").length>1){P.parentNode&&(P=P.parentNode);var z=(L[3]||"").replace(b,"");z.length>0&&P.childNodes.push(a(z))}else if(L[1].length>0)if("?"==L[1].charAt(0)){var B=L[1].substr(1),R=L[2].substr(0,L[2].length-2);P.childNodes.push({nodeType:f.PROCESSING_INSTRUCTION,nodeName:B,nodeValue:R})}else if("!"==L[1].charAt(0)){if(0==L[1].indexOf("![CDATA[")){var O=parseInt(L[1].replace("![CDATA[","").replace("]]",""));P.childNodes.push({nodeType:f.CDATA_SECTION,nodeName:"#cdata-section",nodeValue:F[O]})}else if("!--"==L[1].substr(0,3)){var O=parseInt(L[1].replace("!--","").replace("--",""));P.childNodes.push({nodeType:f.COMMENT,nodeName:"#comment",nodeValue:D[O]})}}else{var B=L[1].replace(b,""),H={nodeType:f.ELEMENT,nodeName:B,localName:B,namespace:C,ownerDocument:I,attributes:[],parentNode:null,childNodes:[]};if(B.indexOf(":")>-1){var G=B.split(":");H.namespace=G[0],H.localName=G[1]}H.byName=H.getElementsByTagName=i,H.byNameNS=H.getElementsByTagNameNS=o,H.childrenByName=n,H.childrenByNameNS=r,H.getAttribute=s,H.getAttributeNS=d,H.setAttribute=l,H.setAttributeNS=c,H.previous=H.previousSibling=u,H.next=H.nextSibling=h;for(var q;null!=(q=p.exec(L[2]));)if(q.length>0){var B=q[1].replace(b,""),O=(q[4]||q[6]||"").replace(_," ").replace(x,">").replace(j,"<").replace(M,"'").replace(w,'"').replace(k,"&");if(0==B.indexOf("xmlns"))if(B.indexOf(":")>0){var V=B.split(":");I.namespaces[V[1]]=O,I._nsPaths[O]=V[1]}else I.namespaces[C]=O,I._nsPaths[O]=C;else{var W=B,V=C;if(B.indexOf(":")>0){var G=B.split(":");W=G[1],V=G[0]}H.attributes.push({nodeType:f.ATTRIBUTE,nodeName:B,localName:W,namespace:V,nodeValue:O}),"id"==W&&(H.id=O)}}I._add(H),P&&(P.childNodes.push(H),H.parentNode=P,"/"!=L[2].charAt(L[2].length-1)&&(P=H));var z=L[3];z.length>0&&P.childNodes.push(a(z))}for(var S=0;S<I.childNodes.length;S++){var U=I.childNodes[S];if(U.nodeType==f.ELEMENT){I.documentElement=U;break}}return I}},dojox.xml.DomParser});//# sourceMappingURL=DomParser.js.map