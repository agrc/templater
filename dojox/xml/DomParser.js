//>>built
define("dojox/xml/DomParser",["dojo/_base/kernel","dojo/_base/array"],function(e){return e.getObject("xml",!0,dojox),dojox.xml.DomParser=new function(){function t(){return new function(){var e={};this.nodeType=m.DOCUMENT,this.nodeName="#document",this.namespaces={},this._nsPaths={},this.childNodes=[],this.documentElement=null,this._add=function(t){void 0!==t.id&&(e[t.id]=t)},this._remove=function(t){e[t]&&delete e[t]},this.byId=this.getElementById=function(t){return e[t]},this.byName=this.getElementsByTagName=i,this.byNameNS=this.getElementsByTagNameNS=a,this.childrenByName=o,this.childrenByNameNS=n}}function i(t){function i(t,a,o){e.forEach(t.childNodes,function(e){e.nodeType==m.ELEMENT&&("*"==a?o.push(e):e.nodeName==a&&o.push(e),i(e,a,o))})}var a=[];return i(this,t,a),a}function a(t,i){function a(t,i,o,n){e.forEach(t.childNodes,function(e){e.nodeType==m.ELEMENT&&("*"==i&&e.ownerDocument._nsPaths[o]==e.namespace?n.push(e):e.localName==i&&e.ownerDocument._nsPaths[o]==e.namespace&&n.push(e),a(e,i,o,n))})}i||(i=T);var o=[];return a(this,t,i,o),o}function o(t){var i=[];return e.forEach(this.childNodes,function(e){e.nodeType==m.ELEMENT&&("*"==t?i.push(e):e.nodeName==t&&i.push(e))}),i}function n(t,i){var a=[];return e.forEach(this.childNodes,function(e){e.nodeType==m.ELEMENT&&("*"==t&&e.ownerDocument._nsPaths[i]==e.namespace?a.push(e):e.localName==t&&e.ownerDocument._nsPaths[i]==e.namespace&&a.push(e))}),a}function r(e){return{nodeType:m.TEXT,nodeName:"#text",nodeValue:e.replace(k," ").replace(_,">").replace(x,"<").replace(w,"'").replace(j,'"').replace(M,"&")}}function s(e){for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].nodeName==e)return this.attributes[t].nodeValue;return null}function l(e,t){for(var i=0;i<this.attributes.length;i++)if(this.ownerDocument._nsPaths[t]==this.attributes[i].namespace&&this.attributes[i].localName==e)return this.attributes[i].nodeValue;return null}function d(e,t){for(var i=null,a=0;a<this.attributes.length;a++)if(this.attributes[a].nodeName==e){i=this.attributes[a].nodeValue,this.attributes[a].nodeValue=t;break}"id"==e&&(null!=i&&this.ownerDocument._remove(i),this.ownerDocument._add(this))}function h(e,t,i){for(var a=0;a<this.attributes.length;a++)if(this.ownerDocument._nsPaths[i]==this.attributes[a].namespace&&this.attributes[a].localName==e)return void(this.attributes[a].nodeValue=t)}function u(){var e=this.parentNode;if(e)for(var t=0;t<e.childNodes.length;t++)if(e.childNodes[t]==this&&t>0)return e.childNodes[t-1];return null}function c(){var e=this.parentNode;if(e)for(var t=0;t<e.childNodes.length;t++)if(e.childNodes[t]==this&&t+1<e.childNodes.length)return e.childNodes[t+1];return null}var m={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9},f=/<([^>\/\s+]*)([^>]*)>([^<]*)/g,p=/([^=]*)=(("([^"]*)")|('([^']*)'))/g,g=/<!ENTITY\s+([^"]*)\s+"([^"]*)">/g,v=/<!\[CDATA\[([\u0001-\uFFFF]*?)\]\]>/g,y=/<!--([\u0001-\uFFFF]*?)-->/g,b=/^\s+|\s+$/g,k=/\s+/g,_=/\&gt;/g,x=/\&lt;/g,j=/\&quot;/g,w=/\&apos;/g,M=/\&amp;/g,T="_def_";this.parse=function(e){var I=t();if(null==e)return I;if(0==e.length)return I;if(e.indexOf("<!ENTITY")>0){var S,C=[];if(g.test(e)){for(g.lastIndex=0;null!=(S=g.exec(e));)C.push({entity:"&"+S[1].replace(b,"")+";",expression:S[2]});for(var N=0;N<C.length;N++)e=e.replace(new RegExp(C[N].entity,"g"),C[N].expression)}}for(var A,E=[];null!=(A=v.exec(e));)E.push(A[1]);for(var N=0;N<E.length;N++)e=e.replace(E[N],N);for(var F,P=[];null!=(F=y.exec(e));)P.push(F[1]);for(N=0;N<P.length;N++)e=e.replace(P[N],N);for(var D,z=I;null!=(D=f.exec(e));)if("/"==D[2].charAt(0)&&D[2].replace(b,"").length>1){z.parentNode&&(z=z.parentNode);var L=(D[3]||"").replace(b,"");L.length>0&&z.childNodes.push(r(L))}else if(D[1].length>0)if("?"==D[1].charAt(0)){var B=D[1].substr(1),G=D[2].substr(0,D[2].length-2);z.childNodes.push({nodeType:m.PROCESSING_INSTRUCTION,nodeName:B,nodeValue:G})}else if("!"==D[1].charAt(0)){if(0==D[1].indexOf("![CDATA[")){var R=parseInt(D[1].replace("![CDATA[","").replace("]]",""));z.childNodes.push({nodeType:m.CDATA_SECTION,nodeName:"#cdata-section",nodeValue:E[R]})}else if("!--"==D[1].substr(0,3)){var R=parseInt(D[1].replace("!--","").replace("--",""));z.childNodes.push({nodeType:m.COMMENT,nodeName:"#comment",nodeValue:P[R]})}}else{var B=D[1].replace(b,""),O={nodeType:m.ELEMENT,nodeName:B,localName:B,namespace:T,ownerDocument:I,attributes:[],parentNode:null,childNodes:[]};if(B.indexOf(":")>-1){var H=B.split(":");O.namespace=H[0],O.localName=H[1]}O.byName=O.getElementsByTagName=i,O.byNameNS=O.getElementsByTagNameNS=a,O.childrenByName=o,O.childrenByNameNS=n,O.getAttribute=s,O.getAttributeNS=l,O.setAttribute=d,O.setAttributeNS=h,O.previous=O.previousSibling=u,O.next=O.nextSibling=c;for(var q;null!=(q=p.exec(D[2]));)if(q.length>0){var B=q[1].replace(b,""),R=(q[4]||q[6]||"").replace(k," ").replace(_,">").replace(x,"<").replace(w,"'").replace(j,'"').replace(M,"&");if(0==B.indexOf("xmlns"))if(B.indexOf(":")>0){var U=B.split(":");I.namespaces[U[1]]=R,I._nsPaths[R]=U[1]}else I.namespaces[T]=R,I._nsPaths[R]=T;else{var W=B,U=T;if(B.indexOf(":")>0){var H=B.split(":");W=H[1],U=H[0]}O.attributes.push({nodeType:m.ATTRIBUTE,nodeName:B,localName:W,namespace:U,nodeValue:R}),"id"==W&&(O.id=R)}}I._add(O),z&&(z.childNodes.push(O),O.parentNode=z,"/"!=D[2].charAt(D[2].length-1)&&(z=O));var L=D[3];L.length>0&&z.childNodes.push(r(L))}for(var N=0;N<I.childNodes.length;N++){var Q=I.childNodes[N];if(Q.nodeType==m.ELEMENT){I.documentElement=Q;break}}return I}},dojox.xml.DomParser});//# sourceMappingURL=DomParser.js.map