{"version":3,"sources":["IndexedDB.js.uncompressed.js"],"names":["define","declare","lang","Deferred","when","all","SimpleQueryEngine","QueryResults","makePromise","request","deferred","onsuccess","event","resolve","target","result","onerror","error","message","webkitErrorMessage","reject","promise","queueCursor","cursor","priority","retry","cursorsRunning","cursorQueue","length","push","sort","a","b","maxConcurrent","cursorObject","pop","e","name","yes","queryFromFilter","source","forEach","callback","thisObj","started","promisedResults","then","results","callbacks","filter","value","i","l","call","total","done","map","mapped","errback","wildcardRe","IDBKeyRange","window","webkitIDBKeyRange","constructor","options","safeMixin","this","store","dbConfig","indices","stores","storeName","cachedCount","index","preference","db","openRequest","indexedDB","open","parseInt","version","onupgradeneeded","storeConfig","objectStoreNames","contains","idbStore","transaction","objectStore","idProperty","createObjectStore","keyPath","autoIncrement","indexNames","indexed","createIndex","available","queryEngine","_currentTransaction","abort","commit","_getTransaction","oncomplete","_callOnStore","method","args","returnRequest","callOnStore","currentTransaction","allowRetry","apply","get","id","getIdentity","object","put","overwrite","add","remove","query","tryIndex","indexName","quality","factor","indexTries","indexDefinition","bestIndexQuality","bestIndex","start","count","Infinity","sortOption","sortOptions","sorter","totals","collectedCount","inCount","reduce","arguments","queues","collected","part","addToQueue","queue","nextInQueues","toMerge","every","next","nextSelected","indexOf","shift","queryResults","keyRange","advance","filterValue","queryId","JSON","stringify","wildcard","range","newFilterValue","from","to","test","bound","excludeFrom","excludeTo","lowerBound","upperBound","first","match","only","item","some","slice","matchStart","RegExp","descending","mainSort","attribute","postSorting","cursorRequestArgs","cachedPosition","offset","preFilterOffset","mixin","filteredResults","adjustTotal","Math","round","countPromise","openCursor","cursorRequest","join","matches","lastCursor","sortedResults","delegate","rawResults"],"mappings":"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","file":"IndexedDB.js.uncompressed.js"}