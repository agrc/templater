//>>built
define("dojox/fx/Timeline",["dojo/_base/lang","dojo/fx/easing","dojo/_base/fx","dojo/dom","./_base","dojo/_base/connect","dojo/_base/html","dojo/_base/array","dojo/_base/Color"],function(e,t,a,i,r,o,n,d,l){r.animateTimeline=function(e,r){var d=new s(e.keys),l=a.animateProperty({node:i.byId(r||e.node),duration:e.duration||1e3,properties:d._properties,easing:t.linear,onAnimate:function(e){}});return o.connect(l,"onEnd",function(e){var t=l.curve.getValue(l.reversed?0:1);n.style(e,t)}),o.connect(l,"beforeBegin",function(){l.curve&&delete l.curve,l.curve=d,d.ani=l}),l};var s=function(t){this.keys=e.isArray(t)?this.flatten(t):t};return s.prototype.flatten=function(e){var a=function(t,a){return"from"==t?0:"to"==t?1:void 0===t?0==a?0:a/(e.length-1):.01*parseInt(t,10)},i={},r={};return d.forEach(e,function(e,o){var n=a(e.step,o),d=t[e.ease]||t.linear;for(var s in e)"step"!=s&&"ease"!=s&&"from"!=s&&"to"!=s&&(r[s]||(r[s]={steps:[],values:[],eases:[],ease:d},i[s]={},/#/.test(e[s])?i[s].units=r[s].units="isColor":i[s].units=r[s].units=/\D{1,}/.exec(e[s]).join("")),r[s].eases.push(t[e.ease||"linear"]),r[s].steps.push(n),"isColor"==i[s].units?r[s].values.push(new l(e[s])):r[s].values.push(parseInt(/\d{1,}/.exec(e[s]).join(""))),void 0===i[s].start?i[s].start=r[s].values[r[s].values.length-1]:i[s].end=r[s].values[r[s].values.length-1])}),this._properties=i,r},s.prototype.getValue=function(e){e=this.ani._reversed?1-e:e;var t={},a=this,i=function(e,t){return"isColor"!=a._properties[e].units?a.keys[e].values[t]+a._properties[e].units:a.keys[e].values[t].toCss()};for(var r in this.keys)for(var o=this.keys[r],n=0;n<o.steps.length;n++){var d=o.steps[n],s=o.steps[n+1],m=n<o.steps.length,u=o.eases[n]||function(e){return e};if(e==d){if(t[r]=i(r,n),!m||m&&this.ani._reversed)break}else if(e>d){if(m&&e<o.steps[n+1]){var h=o.values[n+1],c=o.values[n],f=1/(s-d)*(e-d);if(f=u(f),c instanceof l)t[r]=l.blendColors(c,h,f).toCss(!1);else{var y=h-c;t[r]=c+f*y+this._properties[r].units}break}t[r]=i(r,n)}else(m&&!this.ani._reversed||!m&&this.ani._reversed)&&(t[r]=i(r,n))}return t},r._Timeline=s,r});//# sourceMappingURL=Timeline.js.map