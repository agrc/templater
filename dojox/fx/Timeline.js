//>>built
define("dojox/fx/Timeline",["dojo/_base/lang","dojo/fx/easing","dojo/_base/fx","dojo/dom","./_base","dojo/_base/connect","dojo/_base/html","dojo/_base/array","dojo/_base/Color"],function(e,t,i,r,a,n,o,s,l){a.animateTimeline=function(e,a){var s=new d(e.keys),l=i.animateProperty({node:r.byId(a||e.node),duration:e.duration||1e3,properties:s._properties,easing:t.linear,onAnimate:function(e){}});return n.connect(l,"onEnd",function(e){var t=l.curve.getValue(l.reversed?0:1);o.style(e,t)}),n.connect(l,"beforeBegin",function(){l.curve&&delete l.curve,l.curve=s,s.ani=l}),l};var d=function(t){this.keys=e.isArray(t)?this.flatten(t):t};return d.prototype.flatten=function(e){var i=function(t,i){return"from"==t?0:"to"==t?1:void 0===t?0==i?0:i/(e.length-1):.01*parseInt(t,10)},r={},a={};return s.forEach(e,function(e,n){var o=i(e.step,n),s=t[e.ease]||t.linear;for(var d in e)"step"!=d&&"ease"!=d&&"from"!=d&&"to"!=d&&(a[d]||(a[d]={steps:[],values:[],eases:[],ease:s},r[d]={},/#/.test(e[d])?r[d].units=a[d].units="isColor":r[d].units=a[d].units=/\D{1,}/.exec(e[d]).join("")),a[d].eases.push(t[e.ease||"linear"]),a[d].steps.push(o),"isColor"==r[d].units?a[d].values.push(new l(e[d])):a[d].values.push(parseInt(/\d{1,}/.exec(e[d]).join(""))),void 0===r[d].start?r[d].start=a[d].values[a[d].values.length-1]:r[d].end=a[d].values[a[d].values.length-1])}),this._properties=r,a},d.prototype.getValue=function(e){e=this.ani._reversed?1-e:e;var t={},i=this,r=function(e,t){return"isColor"!=i._properties[e].units?i.keys[e].values[t]+i._properties[e].units:i.keys[e].values[t].toCss()};for(var a in this.keys)for(var n=this.keys[a],o=0;o<n.steps.length;o++){var s=n.steps[o],d=n.steps[o+1],u=o<n.steps.length,c=n.eases[o]||function(e){return e};if(e==s){if(t[a]=r(a,o),!u||u&&this.ani._reversed)break}else if(e>s){if(u&&e<n.steps[o+1]){var h=n.values[o+1],f=n.values[o],m=1/(d-s)*(e-s);if(m=c(m),f instanceof l)t[a]=l.blendColors(f,h,m).toCss(!1);else{var p=h-f;t[a]=f+m*p+this._properties[a].units}break}t[a]=r(a,o)}else(u&&!this.ani._reversed||!u&&this.ani._reversed)&&(t[a]=r(a,o))}return t},a._Timeline=d,a});//# sourceMappingURL=Timeline.js.map