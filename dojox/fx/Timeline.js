//>>built
define("dojox/fx/Timeline",["dojo/_base/lang","dojo/fx/easing","dojo/_base/fx","dojo/dom","./_base","dojo/_base/connect","dojo/_base/html","dojo/_base/array","dojo/_base/Color"],function(e,t,i,a,r,o,n,d,s){r.animateTimeline=function(e,r){var d=new l(e.keys),s=i.animateProperty({node:a.byId(r||e.node),duration:e.duration||1e3,properties:d._properties,easing:t.linear,onAnimate:function(e){}});return o.connect(s,"onEnd",function(e){var t=s.curve.getValue(s.reversed?0:1);n.style(e,t)}),o.connect(s,"beforeBegin",function(){s.curve&&delete s.curve,s.curve=d,d.ani=s}),s};var l=function(t){this.keys=e.isArray(t)?this.flatten(t):t};return l.prototype.flatten=function(e){var i=function(t,i){return"from"==t?0:"to"==t?1:void 0===t?0==i?0:i/(e.length-1):.01*parseInt(t,10)},a={},r={};return d.forEach(e,function(e,o){var n=i(e.step,o),d=t[e.ease]||t.linear;for(var l in e)"step"!=l&&"ease"!=l&&"from"!=l&&"to"!=l&&(r[l]||(r[l]={steps:[],values:[],eases:[],ease:d},a[l]={},/#/.test(e[l])?a[l].units=r[l].units="isColor":a[l].units=r[l].units=/\D{1,}/.exec(e[l]).join("")),r[l].eases.push(t[e.ease||"linear"]),r[l].steps.push(n),"isColor"==a[l].units?r[l].values.push(new s(e[l])):r[l].values.push(parseInt(/\d{1,}/.exec(e[l]).join(""))),void 0===a[l].start?a[l].start=r[l].values[r[l].values.length-1]:a[l].end=r[l].values[r[l].values.length-1])}),this._properties=a,r},l.prototype.getValue=function(e){e=this.ani._reversed?1-e:e;var t={},i=this,a=function(e,t){return"isColor"!=i._properties[e].units?i.keys[e].values[t]+i._properties[e].units:i.keys[e].values[t].toCss()};for(var r in this.keys)for(var o=this.keys[r],n=0;n<o.steps.length;n++){var d=o.steps[n],l=o.steps[n+1],u=n<o.steps.length,m=o.eases[n]||function(e){return e};if(e==d){if(t[r]=a(r,n),!u||u&&this.ani._reversed)break}else if(e>d){if(u&&e<o.steps[n+1]){var h=o.values[n+1],c=o.values[n],f=1/(l-d)*(e-d);if(f=m(f),c instanceof s)t[r]=s.blendColors(c,h,f).toCss(!1);else{var y=h-c;t[r]=c+f*y+this._properties[r].units}break}t[r]=a(r,n)}else(u&&!this.ani._reversed||!u&&this.ani._reversed)&&(t[r]=a(r,n))}return t},r._Timeline=l,r});//# sourceMappingURL=Timeline.js.map