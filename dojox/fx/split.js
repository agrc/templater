//>>built
define("dojox/fx/split",["dojo/_base/lang","dojo/dom","dojo/_base/window","dojo/_base/html","dojo/dom-geometry","dojo/dom-construct","dojo/dom-attr","dojo/_base/fx","dojo/fx","./_base","dojo/fx/easing","dojo/_base/connect"],function(e,t,i,a,o,n,r,s,d,l,h,u){var m=e.getObject("dojox.fx");return e.mixin(m,{_split:function(s){s.rows=s.rows||3,s.columns=s.columns||3,s.duration=s.duration||1e3;for(var l=s.node=t.byId(s.node),h=l.parentNode,m=h,c=i.body(),f="position";m&&m!=c&&"static"==a.style(m,f);)m=m.parentNode;for(var p=m!=c?o.position(m,!0):{x:0,y:0},y=o.position(l,!0),g=a.style(l,"height"),v=a.style(l,"width"),b=a.style(l,"borderLeftWidth")+a.style(l,"borderRightWidth"),M=a.style(l,"borderTopWidth")+a.style(l,"borderBottomWidth"),k=Math.ceil(g/s.rows),w=Math.ceil(v/s.columns),x=n.create(l.tagName,{style:{position:"absolute",padding:0,margin:0,border:"none",top:y.y-p.y+"px",left:y.x-p.x+"px",height:g+M+"px",width:v+b+"px",background:"none",overflow:s.crop?"hidden":"visible",zIndex:a.style(l,"zIndex")}},l,"after"),_=[],j=n.create(l.tagName,{style:{position:"absolute",border:"none",padding:0,margin:0,height:k+b+"px",width:w+M+"px",overflow:"hidden"}}),T=0,C=s.rows;C>T;T++)for(var I=0,F=s.columns;F>I;I++){var E=e.clone(j),S=e.clone(l),A=T*k,z=I*w;S.style.filter="",r.remove(S,"id"),a.style(E,{border:"none",overflow:"hidden",top:A+"px",left:z+"px"}),a.style(S,{position:"static",opacity:"1",marginTop:-A+"px",marginLeft:-z+"px"}),E.appendChild(S),x.appendChild(E);var P=s.pieceAnimation(E,I,T,y);e.isArray(P)?_=_.concat(P):_.push(P)}var L=d.combine(_);return u.connect(L,"onEnd",L,function(){x.parentNode.removeChild(x)}),s.onPlay&&u.connect(L,"onPlay",L,s.onPlay),s.onEnd&&u.connect(L,"onEnd",L,s.onEnd),L},explode:function(e){var i=e.node=t.byId(e.node);e.rows=e.rows||3,e.columns=e.columns||3,e.distance=e.distance||1,e.duration=e.duration||1e3,e.random=e.random||0,e.fade||(e.fade=!0),"undefined"==typeof e.sync&&(e.sync=!0),e.random=Math.abs(e.random),e.pieceAnimation=function(t,i,o,n){var r=n.h/e.rows,d=n.w/e.columns,l=2*e.distance,u=e.duration,m=t.style,c=parseInt(m.top),f=parseInt(m.left),p=0,y=0,g=0;if(e.random){var v=Math.random()*e.random+Math.max(1-e.random,0);l*=v,u*=v,p=e.unhide&&e.sync||!e.unhide&&!e.sync?e.duration-u:0,y=Math.random()-.5,g=Math.random()-.5}var b=(n.h-r)/2-r*o,M=(n.w-d)/2-d*i,k=Math.sqrt(Math.pow(M,2)+Math.pow(b,2)),w=parseInt(c-b*l+k*g),x=parseInt(f-M*l+k*y),_=s.animateProperty({node:t,duration:u,delay:p,easing:e.easing||(e.unhide?h.sinOut:h.circOut),beforeBegin:e.unhide?function(){e.fade&&a.style(t,{opacity:"0"}),m.top=w+"px",m.left=x+"px"}:void 0,properties:{top:e.unhide?{start:w,end:c}:{start:c,end:w},left:e.unhide?{start:x,end:f}:{start:f,end:x}}});if(e.fade){var j=s.animateProperty({node:t,duration:u,delay:p,easing:e.fadeEasing||h.quadOut,properties:{opacity:e.unhide?{start:"0",end:"1"}:{start:"1",end:"0"}}});return e.unhide?[j,_]:[_,j]}return _};var o=m._split(e);return e.unhide?u.connect(o,"onEnd",null,function(){a.style(i,{opacity:"1"})}):u.connect(o,"onPlay",null,function(){a.style(i,{opacity:"0"})}),o},converge:function(e){return e.unhide=!0,m.explode(e)},disintegrate:function(e){var i=e.node=t.byId(e.node);e.rows=e.rows||5,e.columns=e.columns||5,e.duration=e.duration||1500,e.interval=e.interval||e.duration/(e.rows+2*e.columns),e.distance=e.distance||1.5,e.random=e.random||0,"undefined"==typeof e.fade&&(e.fade=!0);var o=Math.abs(e.random),n=e.duration-(e.rows+e.columns)*e.interval;e.pieceAnimation=function(t,i,r,d){var l=Math.random()*(e.rows+e.columns)*e.interval,u=t.style,m=e.reverseOrder||e.distance<0?(i+r)*e.interval:(e.rows+e.columns-(i+r))*e.interval,c=l*o+Math.max(1-o,0)*m,f={};e.unhide?(f.top={start:parseInt(u.top)-d.h*e.distance,end:parseInt(u.top)},e.fade&&(f.opacity={start:"0",end:"1"})):(f.top={end:parseInt(u.top)+d.h*e.distance},e.fade&&(f.opacity={end:"0"}));var p=s.animateProperty({node:t,duration:n,delay:c,easing:e.easing||(e.unhide?h.sinIn:h.circIn),properties:f,beforeBegin:e.unhide?function(){e.fade&&a.style(t,{opacity:"0"}),u.top=f.top.start+"px"}:void 0});return p};var r=m._split(e);return e.unhide?u.connect(r,"onEnd",r,function(){a.style(i,{opacity:"1"})}):u.connect(r,"onPlay",r,function(){a.style(i,{opacity:"0"})}),r},build:function(e){return e.unhide=!0,m.disintegrate(e)},shear:function(e){var i=e.node=t.byId(e.node);e.rows=e.rows||6,e.columns=e.columns||6,e.duration=e.duration||1e3,e.interval=e.interval||0,e.distance=e.distance||1,e.random=e.random||0,"undefined"==typeof e.fade&&(e.fade=!0);var o=Math.abs(e.random),n=e.duration-(e.rows+e.columns)*Math.abs(e.interval);e.pieceAnimation=function(t,i,a,r){var d=!(i%2),l=!(a%2),u=Math.random()*n,m=e.reverseOrder?(e.rows+e.columns-(i+a))*e.interval:(i+a)*e.interval,c=u*o+Math.max(1-o,0)*m,f={},p=t.style;e.fade&&(f.opacity=e.unhide?{start:"0",end:"1"}:{end:"0"}),1==e.columns?d=l:1==e.rows&&(l=!d);var y=parseInt(p.left),g=parseInt(p.top),v=e.distance*r.w,b=e.distance*r.h;e.unhide?d==l?f.left=d?{start:y-v,end:y}:{start:y+v,end:y}:f.top=d?{start:g+b,end:g}:{start:g-b,end:g}:d==l?f.left=d?{end:y-v}:{end:y+v}:f.top=d?{end:g+b}:{end:g-b};var M=s.animateProperty({node:t,duration:n,delay:c,easing:e.easing||h.sinInOut,properties:f,beforeBegin:e.unhide?function(){e.fade&&(p.opacity="0"),d==l?p.left=f.left.start+"px":p.top=f.top.start+"px"}:void 0});return M};var r=m._split(e);return e.unhide?u.connect(r,"onEnd",r,function(){a.style(i,{opacity:"1"})}):u.connect(r,"onPlay",r,function(){a.style(i,{opacity:"0"})}),r},unShear:function(e){return e.unhide=!0,m.shear(e)},pinwheel:function(e){var i=e.node=t.byId(e.node);e.rows=e.rows||4,e.columns=e.columns||4,e.duration=e.duration||1e3,e.interval=e.interval||0,e.distance=e.distance||1,e.random=e.random||0,"undefined"==typeof e.fade&&(e.fade=!0);var o=e.duration-(e.rows+e.columns)*Math.abs(e.interval);e.pieceAnimation=function(t,i,n,r){var d=r.h/e.rows,l=r.w/e.columns,u=!(i%2),m=!(n%2),c=Math.random()*o,f=e.interval<0?(e.rows+e.columns-(i+n))*e.interval*-1:(i+n)*e.interval,p=c*e.random+Math.max(1-e.random,0)*f,y={},g=t.style;e.fade&&(y.opacity=e.unhide?{start:0,end:1}:{end:0}),1==e.columns?u=!m:1==e.rows&&(m=u);var v=parseInt(g.left),b=parseInt(g.top);u&&(m?y.top=e.unhide?{start:b+d*e.distance,end:b}:{start:b,end:b+d*e.distance}:y.left=e.unhide?{start:v+l*e.distance,end:v}:{start:v,end:v+l*e.distance}),u!=m?y.width=e.unhide?{start:l*(1-e.distance),end:l}:{start:l,end:l*(1-e.distance)}:y.height=e.unhide?{start:d*(1-e.distance),end:d}:{start:d,end:d*(1-e.distance)};var M=s.animateProperty({node:t,duration:o,delay:p,easing:e.easing||h.sinInOut,properties:y,beforeBegin:e.unhide?function(){e.fade&&a.style(t,"opacity",0),u?m?g.top=b+d*(1-e.distance)+"px":g.left=v+l*(1-e.distance)+"px":(g.left=v+"px",g.top=b+"px"),u!=m?g.width=l*(1-e.distance)+"px":g.height=d*(1-e.distance)+"px"}:void 0});return M};var n=m._split(e);return e.unhide?u.connect(n,"onEnd",n,function(){a.style(i,{opacity:"1"})}):u.connect(n,"play",n,function(){a.style(i,{opacity:"0"})}),n},unPinwheel:function(e){return e.unhide=!0,m.pinwheel(e)},blockFadeOut:function(e){var i=e.node=t.byId(e.node);e.rows=e.rows||5,e.columns=e.columns||5,e.duration=e.duration||1e3,e.interval=e.interval||e.duration/(e.rows+2*e.columns),e.random=e.random||0;var o=Math.abs(e.random),n=e.duration-(e.rows+e.columns)*e.interval;e.pieceAnimation=function(t,i,r,d){var l=Math.random()*e.duration,u=e.reverseOrder?(e.rows+e.columns-(i+r))*Math.abs(e.interval):(i+r)*e.interval,m=l*o+Math.max(1-o,0)*u,c=s.animateProperty({node:t,duration:n,delay:m,easing:e.easing||h.sinInOut,properties:{opacity:e.unhide?{start:"0",end:"1"}:{start:"1",end:"0"}},beforeBegin:e.unhide?function(){a.style(t,{opacity:"0"})}:function(){t.style.filter=""}});return c};var r=m._split(e);return e.unhide?u.connect(r,"onEnd",r,function(){a.style(i,{opacity:"1"})}):u.connect(r,"onPlay",r,function(){a.style(i,{opacity:"0"})}),r},blockFadeIn:function(e){return e.unhide=!0,m.blockFadeOut(e)}}),l});//# sourceMappingURL=split.js.map