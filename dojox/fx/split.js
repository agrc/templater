//>>built
define("dojox/fx/split",["dojo/_base/lang","dojo/dom","dojo/_base/window","dojo/_base/html","dojo/dom-geometry","dojo/dom-construct","dojo/dom-attr","dojo/_base/fx","dojo/fx","./_base","dojo/fx/easing","dojo/_base/connect"],function(e,t,a,i,r,o,n,d,l,s,m,u){var h=e.getObject("dojox.fx");return e.mixin(h,{_split:function(d){d.rows=d.rows||3,d.columns=d.columns||3,d.duration=d.duration||1e3;for(var s=d.node=t.byId(d.node),m=s.parentNode,h=m,c=a.body(),f="position";h&&h!=c&&"static"==i.style(h,f);)h=h.parentNode;for(var y=h!=c?r.position(h,!0):{x:0,y:0},p=r.position(s,!0),v=i.style(s,"height"),g=i.style(s,"width"),M=i.style(s,"borderLeftWidth")+i.style(s,"borderRightWidth"),b=i.style(s,"borderTopWidth")+i.style(s,"borderBottomWidth"),k=Math.ceil(v/d.rows),w=Math.ceil(g/d.columns),j=o.create(s.tagName,{style:{position:"absolute",padding:0,margin:0,border:"none",top:p.y-y.y+"px",left:p.x-y.x+"px",height:v+b+"px",width:g+M+"px",background:"none",overflow:d.crop?"hidden":"visible",zIndex:i.style(s,"zIndex")}},s,"after"),_=[],F=o.create(s.tagName,{style:{position:"absolute",border:"none",padding:0,margin:0,height:k+M+"px",width:w+b+"px",overflow:"hidden"}}),x=0,I=d.rows;I>x;x++)for(var E=0,A=d.columns;A>E;E++){var T=e.clone(F),C=e.clone(s),S=x*k,G=E*w;C.style.filter="",n.remove(C,"id"),i.style(T,{border:"none",overflow:"hidden",top:S+"px",left:G+"px"}),i.style(C,{position:"static",opacity:"1",marginTop:-S+"px",marginLeft:-G+"px"}),T.appendChild(C),j.appendChild(T);var z=d.pieceAnimation(T,E,x,p);e.isArray(z)?_=_.concat(z):_.push(z)}var N=l.combine(_);return u.connect(N,"onEnd",N,function(){j.parentNode.removeChild(j)}),d.onPlay&&u.connect(N,"onPlay",N,d.onPlay),d.onEnd&&u.connect(N,"onEnd",N,d.onEnd),N},explode:function(e){var a=e.node=t.byId(e.node);e.rows=e.rows||3,e.columns=e.columns||3,e.distance=e.distance||1,e.duration=e.duration||1e3,e.random=e.random||0,e.fade||(e.fade=!0),"undefined"==typeof e.sync&&(e.sync=!0),e.random=Math.abs(e.random),e.pieceAnimation=function(t,a,r,o){var n=o.h/e.rows,l=o.w/e.columns,s=2*e.distance,u=e.duration,h=t.style,c=parseInt(h.top),f=parseInt(h.left),y=0,p=0,v=0;if(e.random){var g=Math.random()*e.random+Math.max(1-e.random,0);s*=g,u*=g,y=e.unhide&&e.sync||!e.unhide&&!e.sync?e.duration-u:0,p=Math.random()-.5,v=Math.random()-.5}var M=(o.h-n)/2-n*r,b=(o.w-l)/2-l*a,k=Math.sqrt(Math.pow(b,2)+Math.pow(M,2)),w=parseInt(c-M*s+k*v),j=parseInt(f-b*s+k*p),_=d.animateProperty({node:t,duration:u,delay:y,easing:e.easing||(e.unhide?m.sinOut:m.circOut),beforeBegin:e.unhide?function(){e.fade&&i.style(t,{opacity:"0"}),h.top=w+"px",h.left=j+"px"}:void 0,properties:{top:e.unhide?{start:w,end:c}:{start:c,end:w},left:e.unhide?{start:j,end:f}:{start:f,end:j}}});if(e.fade){var F=d.animateProperty({node:t,duration:u,delay:y,easing:e.fadeEasing||m.quadOut,properties:{opacity:e.unhide?{start:"0",end:"1"}:{start:"1",end:"0"}}});return e.unhide?[F,_]:[_,F]}return _};var r=h._split(e);return e.unhide?u.connect(r,"onEnd",null,function(){i.style(a,{opacity:"1"})}):u.connect(r,"onPlay",null,function(){i.style(a,{opacity:"0"})}),r},converge:function(e){return e.unhide=!0,h.explode(e)},disintegrate:function(e){var a=e.node=t.byId(e.node);e.rows=e.rows||5,e.columns=e.columns||5,e.duration=e.duration||1500,e.interval=e.interval||e.duration/(e.rows+2*e.columns),e.distance=e.distance||1.5,e.random=e.random||0,"undefined"==typeof e.fade&&(e.fade=!0);var r=Math.abs(e.random),o=e.duration-(e.rows+e.columns)*e.interval;e.pieceAnimation=function(t,a,n,l){var s=Math.random()*(e.rows+e.columns)*e.interval,u=t.style,h=e.reverseOrder||e.distance<0?(a+n)*e.interval:(e.rows+e.columns-(a+n))*e.interval,c=s*r+Math.max(1-r,0)*h,f={};e.unhide?(f.top={start:parseInt(u.top)-l.h*e.distance,end:parseInt(u.top)},e.fade&&(f.opacity={start:"0",end:"1"})):(f.top={end:parseInt(u.top)+l.h*e.distance},e.fade&&(f.opacity={end:"0"}));var y=d.animateProperty({node:t,duration:o,delay:c,easing:e.easing||(e.unhide?m.sinIn:m.circIn),properties:f,beforeBegin:e.unhide?function(){e.fade&&i.style(t,{opacity:"0"}),u.top=f.top.start+"px"}:void 0});return y};var n=h._split(e);return e.unhide?u.connect(n,"onEnd",n,function(){i.style(a,{opacity:"1"})}):u.connect(n,"onPlay",n,function(){i.style(a,{opacity:"0"})}),n},build:function(e){return e.unhide=!0,h.disintegrate(e)},shear:function(e){var a=e.node=t.byId(e.node);e.rows=e.rows||6,e.columns=e.columns||6,e.duration=e.duration||1e3,e.interval=e.interval||0,e.distance=e.distance||1,e.random=e.random||0,"undefined"==typeof e.fade&&(e.fade=!0);var r=Math.abs(e.random),o=e.duration-(e.rows+e.columns)*Math.abs(e.interval);e.pieceAnimation=function(t,a,i,n){var l=!(a%2),s=!(i%2),u=Math.random()*o,h=e.reverseOrder?(e.rows+e.columns-(a+i))*e.interval:(a+i)*e.interval,c=u*r+Math.max(1-r,0)*h,f={},y=t.style;e.fade&&(f.opacity=e.unhide?{start:"0",end:"1"}:{end:"0"}),1==e.columns?l=s:1==e.rows&&(s=!l);var p=parseInt(y.left),v=parseInt(y.top),g=e.distance*n.w,M=e.distance*n.h;e.unhide?l==s?f.left=l?{start:p-g,end:p}:{start:p+g,end:p}:f.top=l?{start:v+M,end:v}:{start:v-M,end:v}:l==s?f.left=l?{end:p-g}:{end:p+g}:f.top=l?{end:v+M}:{end:v-M};var b=d.animateProperty({node:t,duration:o,delay:c,easing:e.easing||m.sinInOut,properties:f,beforeBegin:e.unhide?function(){e.fade&&(y.opacity="0"),l==s?y.left=f.left.start+"px":y.top=f.top.start+"px"}:void 0});return b};var n=h._split(e);return e.unhide?u.connect(n,"onEnd",n,function(){i.style(a,{opacity:"1"})}):u.connect(n,"onPlay",n,function(){i.style(a,{opacity:"0"})}),n},unShear:function(e){return e.unhide=!0,h.shear(e)},pinwheel:function(e){var a=e.node=t.byId(e.node);e.rows=e.rows||4,e.columns=e.columns||4,e.duration=e.duration||1e3,e.interval=e.interval||0,e.distance=e.distance||1,e.random=e.random||0,"undefined"==typeof e.fade&&(e.fade=!0);var r=e.duration-(e.rows+e.columns)*Math.abs(e.interval);e.pieceAnimation=function(t,a,o,n){var l=n.h/e.rows,s=n.w/e.columns,u=!(a%2),h=!(o%2),c=Math.random()*r,f=e.interval<0?(e.rows+e.columns-(a+o))*e.interval*-1:(a+o)*e.interval,y=c*e.random+Math.max(1-e.random,0)*f,p={},v=t.style;e.fade&&(p.opacity=e.unhide?{start:0,end:1}:{end:0}),1==e.columns?u=!h:1==e.rows&&(h=u);var g=parseInt(v.left),M=parseInt(v.top);u&&(h?p.top=e.unhide?{start:M+l*e.distance,end:M}:{start:M,end:M+l*e.distance}:p.left=e.unhide?{start:g+s*e.distance,end:g}:{start:g,end:g+s*e.distance}),u!=h?p.width=e.unhide?{start:s*(1-e.distance),end:s}:{start:s,end:s*(1-e.distance)}:p.height=e.unhide?{start:l*(1-e.distance),end:l}:{start:l,end:l*(1-e.distance)};var b=d.animateProperty({node:t,duration:r,delay:y,easing:e.easing||m.sinInOut,properties:p,beforeBegin:e.unhide?function(){e.fade&&i.style(t,"opacity",0),u?h?v.top=M+l*(1-e.distance)+"px":v.left=g+s*(1-e.distance)+"px":(v.left=g+"px",v.top=M+"px"),u!=h?v.width=s*(1-e.distance)+"px":v.height=l*(1-e.distance)+"px"}:void 0});return b};var o=h._split(e);return e.unhide?u.connect(o,"onEnd",o,function(){i.style(a,{opacity:"1"})}):u.connect(o,"play",o,function(){i.style(a,{opacity:"0"})}),o},unPinwheel:function(e){return e.unhide=!0,h.pinwheel(e)},blockFadeOut:function(e){var a=e.node=t.byId(e.node);e.rows=e.rows||5,e.columns=e.columns||5,e.duration=e.duration||1e3,e.interval=e.interval||e.duration/(e.rows+2*e.columns),e.random=e.random||0;var r=Math.abs(e.random),o=e.duration-(e.rows+e.columns)*e.interval;e.pieceAnimation=function(t,a,n,l){var s=Math.random()*e.duration,u=e.reverseOrder?(e.rows+e.columns-(a+n))*Math.abs(e.interval):(a+n)*e.interval,h=s*r+Math.max(1-r,0)*u,c=d.animateProperty({node:t,duration:o,delay:h,easing:e.easing||m.sinInOut,properties:{opacity:e.unhide?{start:"0",end:"1"}:{start:"1",end:"0"}},beforeBegin:e.unhide?function(){i.style(t,{opacity:"0"})}:function(){t.style.filter=""}});return c};var n=h._split(e);return e.unhide?u.connect(n,"onEnd",n,function(){i.style(a,{opacity:"1"})}):u.connect(n,"onPlay",n,function(){i.style(a,{opacity:"0"})}),n},blockFadeIn:function(e){return e.unhide=!0,h.blockFadeOut(e)}}),s});//# sourceMappingURL=split.js.map