//>>built
define("dojox/fx/split",["dojo/_base/lang","dojo/dom","dojo/_base/window","dojo/_base/html","dojo/dom-geometry","dojo/dom-construct","dojo/dom-attr","dojo/_base/fx","dojo/fx","./_base","dojo/fx/easing","dojo/_base/connect"],function(e,t,i,a,o,r,n,d,s,l,u,m){var c=e.getObject("dojox.fx");return e.mixin(c,{_split:function(d){d.rows=d.rows||3,d.columns=d.columns||3,d.duration=d.duration||1e3;for(var l=d.node=t.byId(d.node),u=l.parentNode,c=u,h=i.body(),f="position";c&&c!=h&&"static"==a.style(c,f);)c=c.parentNode;for(var y=c!=h?o.position(c,!0):{x:0,y:0},p=o.position(l,!0),v=a.style(l,"height"),g=a.style(l,"width"),b=a.style(l,"borderLeftWidth")+a.style(l,"borderRightWidth"),M=a.style(l,"borderTopWidth")+a.style(l,"borderBottomWidth"),j=Math.ceil(v/d.rows),w=Math.ceil(g/d.columns),k=r.create(l.tagName,{style:{position:"absolute",padding:0,margin:0,border:"none",top:p.y-y.y+"px",left:p.x-y.x+"px",height:v+M+"px",width:g+b+"px",background:"none",overflow:d.crop?"hidden":"visible",zIndex:a.style(l,"zIndex")}},l,"after"),_=[],x=r.create(l.tagName,{style:{position:"absolute",border:"none",padding:0,margin:0,height:j+b+"px",width:w+M+"px",overflow:"hidden"}}),F=0,I=d.rows;I>F;F++)for(var C=0,T=d.columns;T>C;C++){var S=e.clone(x),E=e.clone(l),A=F*j,B=C*w;E.style.filter="",n.remove(E,"id"),a.style(S,{border:"none",overflow:"hidden",top:A+"px",left:B+"px"}),a.style(E,{position:"static",opacity:"1",marginTop:-A+"px",marginLeft:-B+"px"}),S.appendChild(E),k.appendChild(S);var P=d.pieceAnimation(S,C,F,p);e.isArray(P)?_=_.concat(P):_.push(P)}var z=s.combine(_);return m.connect(z,"onEnd",z,function(){k.parentNode.removeChild(k)}),d.onPlay&&m.connect(z,"onPlay",z,d.onPlay),d.onEnd&&m.connect(z,"onEnd",z,d.onEnd),z},explode:function(e){var i=e.node=t.byId(e.node);e.rows=e.rows||3,e.columns=e.columns||3,e.distance=e.distance||1,e.duration=e.duration||1e3,e.random=e.random||0,e.fade||(e.fade=!0),"undefined"==typeof e.sync&&(e.sync=!0),e.random=Math.abs(e.random),e.pieceAnimation=function(t,i,o,r){var n=r.h/e.rows,s=r.w/e.columns,l=2*e.distance,m=e.duration,c=t.style,h=parseInt(c.top),f=parseInt(c.left),y=0,p=0,v=0;if(e.random){var g=Math.random()*e.random+Math.max(1-e.random,0);l*=g,m*=g,y=e.unhide&&e.sync||!e.unhide&&!e.sync?e.duration-m:0,p=Math.random()-.5,v=Math.random()-.5}var b=(r.h-n)/2-n*o,M=(r.w-s)/2-s*i,j=Math.sqrt(Math.pow(M,2)+Math.pow(b,2)),w=parseInt(h-b*l+j*v),k=parseInt(f-M*l+j*p),_=d.animateProperty({node:t,duration:m,delay:y,easing:e.easing||(e.unhide?u.sinOut:u.circOut),beforeBegin:e.unhide?function(){e.fade&&a.style(t,{opacity:"0"}),c.top=w+"px",c.left=k+"px"}:void 0,properties:{top:e.unhide?{start:w,end:h}:{start:h,end:w},left:e.unhide?{start:k,end:f}:{start:f,end:k}}});if(e.fade){var x=d.animateProperty({node:t,duration:m,delay:y,easing:e.fadeEasing||u.quadOut,properties:{opacity:e.unhide?{start:"0",end:"1"}:{start:"1",end:"0"}}});return e.unhide?[x,_]:[_,x]}return _};var o=c._split(e);return e.unhide?m.connect(o,"onEnd",null,function(){a.style(i,{opacity:"1"})}):m.connect(o,"onPlay",null,function(){a.style(i,{opacity:"0"})}),o},converge:function(e){return e.unhide=!0,c.explode(e)},disintegrate:function(e){var i=e.node=t.byId(e.node);e.rows=e.rows||5,e.columns=e.columns||5,e.duration=e.duration||1500,e.interval=e.interval||e.duration/(e.rows+2*e.columns),e.distance=e.distance||1.5,e.random=e.random||0,"undefined"==typeof e.fade&&(e.fade=!0);var o=Math.abs(e.random),r=e.duration-(e.rows+e.columns)*e.interval;e.pieceAnimation=function(t,i,n,s){var l=Math.random()*(e.rows+e.columns)*e.interval,m=t.style,c=e.reverseOrder||e.distance<0?(i+n)*e.interval:(e.rows+e.columns-(i+n))*e.interval,h=l*o+Math.max(1-o,0)*c,f={};e.unhide?(f.top={start:parseInt(m.top)-s.h*e.distance,end:parseInt(m.top)},e.fade&&(f.opacity={start:"0",end:"1"})):(f.top={end:parseInt(m.top)+s.h*e.distance},e.fade&&(f.opacity={end:"0"}));var y=d.animateProperty({node:t,duration:r,delay:h,easing:e.easing||(e.unhide?u.sinIn:u.circIn),properties:f,beforeBegin:e.unhide?function(){e.fade&&a.style(t,{opacity:"0"}),m.top=f.top.start+"px"}:void 0});return y};var n=c._split(e);return e.unhide?m.connect(n,"onEnd",n,function(){a.style(i,{opacity:"1"})}):m.connect(n,"onPlay",n,function(){a.style(i,{opacity:"0"})}),n},build:function(e){return e.unhide=!0,c.disintegrate(e)},shear:function(e){var i=e.node=t.byId(e.node);e.rows=e.rows||6,e.columns=e.columns||6,e.duration=e.duration||1e3,e.interval=e.interval||0,e.distance=e.distance||1,e.random=e.random||0,"undefined"==typeof e.fade&&(e.fade=!0);var o=Math.abs(e.random),r=e.duration-(e.rows+e.columns)*Math.abs(e.interval);e.pieceAnimation=function(t,i,a,n){var s=!(i%2),l=!(a%2),m=Math.random()*r,c=e.reverseOrder?(e.rows+e.columns-(i+a))*e.interval:(i+a)*e.interval,h=m*o+Math.max(1-o,0)*c,f={},y=t.style;e.fade&&(f.opacity=e.unhide?{start:"0",end:"1"}:{end:"0"}),1==e.columns?s=l:1==e.rows&&(l=!s);var p=parseInt(y.left),v=parseInt(y.top),g=e.distance*n.w,b=e.distance*n.h;e.unhide?s==l?f.left=s?{start:p-g,end:p}:{start:p+g,end:p}:f.top=s?{start:v+b,end:v}:{start:v-b,end:v}:s==l?f.left=s?{end:p-g}:{end:p+g}:f.top=s?{end:v+b}:{end:v-b};var M=d.animateProperty({node:t,duration:r,delay:h,easing:e.easing||u.sinInOut,properties:f,beforeBegin:e.unhide?function(){e.fade&&(y.opacity="0"),s==l?y.left=f.left.start+"px":y.top=f.top.start+"px"}:void 0});return M};var n=c._split(e);return e.unhide?m.connect(n,"onEnd",n,function(){a.style(i,{opacity:"1"})}):m.connect(n,"onPlay",n,function(){a.style(i,{opacity:"0"})}),n},unShear:function(e){return e.unhide=!0,c.shear(e)},pinwheel:function(e){var i=e.node=t.byId(e.node);e.rows=e.rows||4,e.columns=e.columns||4,e.duration=e.duration||1e3,e.interval=e.interval||0,e.distance=e.distance||1,e.random=e.random||0,"undefined"==typeof e.fade&&(e.fade=!0);var o=e.duration-(e.rows+e.columns)*Math.abs(e.interval);e.pieceAnimation=function(t,i,r,n){var s=n.h/e.rows,l=n.w/e.columns,m=!(i%2),c=!(r%2),h=Math.random()*o,f=e.interval<0?(e.rows+e.columns-(i+r))*e.interval*-1:(i+r)*e.interval,y=h*e.random+Math.max(1-e.random,0)*f,p={},v=t.style;e.fade&&(p.opacity=e.unhide?{start:0,end:1}:{end:0}),1==e.columns?m=!c:1==e.rows&&(c=m);var g=parseInt(v.left),b=parseInt(v.top);m&&(c?p.top=e.unhide?{start:b+s*e.distance,end:b}:{start:b,end:b+s*e.distance}:p.left=e.unhide?{start:g+l*e.distance,end:g}:{start:g,end:g+l*e.distance}),m!=c?p.width=e.unhide?{start:l*(1-e.distance),end:l}:{start:l,end:l*(1-e.distance)}:p.height=e.unhide?{start:s*(1-e.distance),end:s}:{start:s,end:s*(1-e.distance)};var M=d.animateProperty({node:t,duration:o,delay:y,easing:e.easing||u.sinInOut,properties:p,beforeBegin:e.unhide?function(){e.fade&&a.style(t,"opacity",0),m?c?v.top=b+s*(1-e.distance)+"px":v.left=g+l*(1-e.distance)+"px":(v.left=g+"px",v.top=b+"px"),m!=c?v.width=l*(1-e.distance)+"px":v.height=s*(1-e.distance)+"px"}:void 0});return M};var r=c._split(e);return e.unhide?m.connect(r,"onEnd",r,function(){a.style(i,{opacity:"1"})}):m.connect(r,"play",r,function(){a.style(i,{opacity:"0"})}),r},unPinwheel:function(e){return e.unhide=!0,c.pinwheel(e)},blockFadeOut:function(e){var i=e.node=t.byId(e.node);e.rows=e.rows||5,e.columns=e.columns||5,e.duration=e.duration||1e3,e.interval=e.interval||e.duration/(e.rows+2*e.columns),e.random=e.random||0;var o=Math.abs(e.random),r=e.duration-(e.rows+e.columns)*e.interval;e.pieceAnimation=function(t,i,n,s){var l=Math.random()*e.duration,m=e.reverseOrder?(e.rows+e.columns-(i+n))*Math.abs(e.interval):(i+n)*e.interval,c=l*o+Math.max(1-o,0)*m,h=d.animateProperty({node:t,duration:r,delay:c,easing:e.easing||u.sinInOut,properties:{opacity:e.unhide?{start:"0",end:"1"}:{start:"1",end:"0"}},beforeBegin:e.unhide?function(){a.style(t,{opacity:"0"})}:function(){t.style.filter=""}});return h};var n=c._split(e);return e.unhide?m.connect(n,"onEnd",n,function(){a.style(i,{opacity:"1"})}):m.connect(n,"onPlay",n,function(){a.style(i,{opacity:"0"})}),n},blockFadeIn:function(e){return e.unhide=!0,c.blockFadeOut(e)}}),l});//# sourceMappingURL=split.js.map