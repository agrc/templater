//>>built
define("dojox/fx/flip",["dojo/_base/kernel","dojo/_base/html","dojo/dom","dojo/dom-construct","dojo/dom-geometry","dojo/_base/connect","dojo/_base/Color","dojo/_base/sniff","dojo/_base/lang","dojo/_base/window","dojo/_base/fx","dojo/fx","./_base"],function(e,t,a,i,r,o,n,s,l,d,u,m,h){e.experimental("dojox.fx.flip");var c="border",f="Width",p="Height",g="Top",y="Right",v="Left",k="Bottom";return h.flip=function(e){var r=i.create("div"),h=e.node=a.byId(e.node),b=h.style,M=null,j=null,w=null,_=e.lightColor||"#dddddd",I=e.darkColor||"#555555",x=t.style(h,"backgroundColor"),F=e.endColor||x,A={},E=[],S=e.duration?e.duration/2:250,C=e.dir||"left",z=.9,T="transparent",N=e.whichAnim,D=e.axis||"center",L=e.depth,P=function(e){return"#000000"===new n(e).toHex()?"#000001":e};s("ie")<7&&(F=P(F),_=P(_),I=P(I),x=P(x),T="black",r.style.filter="chroma(color='#000000')"),function(e){return function(){var a=t.coords(e,!0);M={top:a.y,left:a.x,width:a.w,height:a.h}}}(h)(),j={position:"absolute",top:M.top+"px",left:M.left+"px",height:"0",width:"0",zIndex:e.zIndex||b.zIndex||0,border:"0 solid "+T,fontSize:"0",visibility:"hidden"};var G=[{},{top:M.top,left:M.left}];w={left:[v,y,g,k,f,p,"end"+p+"Min",v,"end"+p+"Max"],right:[y,v,g,k,f,p,"end"+p+"Min",v,"end"+p+"Max"],top:[g,k,v,y,p,f,"end"+f+"Min",g,"end"+f+"Max"],bottom:[k,g,v,y,p,f,"end"+f+"Min",g,"end"+f+"Max"]}[C],void 0!==L?(L=Math.max(0,Math.min(1,L))/2,z=.5-L+.4):z=Math.min(.9,Math.max(.4,M[w[5].toLowerCase()]/M[w[4].toLowerCase()]));for(var O=G[0],q=4;q<6;q++)"center"==D||"cube"==D?(M["end"+w[q]+"Min"]=M[w[q].toLowerCase()]*z,M["end"+w[q]+"Max"]=M[w[q].toLowerCase()]/z):"shortside"==D?(M["end"+w[q]+"Min"]=M[w[q].toLowerCase()],M["end"+w[q]+"Max"]=M[w[q].toLowerCase()]/z):"longside"==D&&(M["end"+w[q]+"Min"]=M[w[q].toLowerCase()]*z,M["end"+w[q]+"Max"]=M[w[q].toLowerCase()]);"center"==D?O[w[2].toLowerCase()]=M[w[2].toLowerCase()]-(M[w[8]]-M[w[6]])/4:"shortside"==D&&(O[w[2].toLowerCase()]=M[w[2].toLowerCase()]-(M[w[8]]-M[w[6]])/2),A[w[5].toLowerCase()]=M[w[5].toLowerCase()]+"px",A[w[4].toLowerCase()]="0",A[c+w[1]+f]=M[w[4].toLowerCase()]+"px",A[c+w[1]+"Color"]=x,O[c+w[1]+f]=0,O[c+w[1]+"Color"]=I,O[c+w[2]+f]=O[c+w[3]+f]="cube"!=D?(M["end"+w[5]+"Max"]-M["end"+w[5]+"Min"])/2:M[w[6]]/2,O[w[7].toLowerCase()]=M[w[7].toLowerCase()]+M[w[4].toLowerCase()]/2+(e.shift||0),O[w[5].toLowerCase()]=M[w[6]];var R=G[1];R[c+w[0]+"Color"]={start:_,end:F},R[c+w[0]+f]=M[w[4].toLowerCase()],R[c+w[2]+f]=0,R[c+w[3]+f]=0,R[w[5].toLowerCase()]={start:M[w[6]],end:M[w[5].toLowerCase()]},l.mixin(j,A),t.style(r,j),d.body().appendChild(r);var H=function(){i.destroy(r),b.backgroundColor=F,b.visibility="visible"};if("last"==N){for(q in O)O[q]={start:O[q]};O[c+w[1]+"Color"]={start:I,end:F},R=O}return N&&"first"!=N||E.push(u.animateProperty({node:r,duration:S,properties:O})),N&&"last"!=N||E.push(u.animateProperty({node:r,duration:S,properties:R,onEnd:H})),o.connect(E[0],"play",function(){r.style.visibility="visible",b.visibility="hidden"}),m.chain(E)},h.flipCube=function(e){var t=[],a=r.getMarginBox(e.node),i=a.w/2,o=a.h/2,n={top:{pName:"height",args:[{whichAnim:"first",dir:"top",shift:-o},{whichAnim:"last",dir:"bottom",shift:o}]},right:{pName:"width",args:[{whichAnim:"first",dir:"right",shift:i},{whichAnim:"last",dir:"left",shift:-i}]},bottom:{pName:"height",args:[{whichAnim:"first",dir:"bottom",shift:o},{whichAnim:"last",dir:"top",shift:-o}]},left:{pName:"width",args:[{whichAnim:"first",dir:"left",shift:-i},{whichAnim:"last",dir:"right",shift:i}]}},s=n[e.dir||"left"],d=s.args;e.duration=e.duration?2*e.duration:500,e.depth=.8,e.axis="cube";for(var u=d.length-1;u>=0;u--)l.mixin(e,d[u]),t.push(h.flip(e));return m.combine(t)},h.flipPage=function(e){var a=e.node,r=t.coords(a,!0),n=r.x,s=r.y,u=r.w,h=r.h,c=t.style(a,"backgroundColor"),f=e.lightColor||"#dddddd",p=e.darkColor,g=i.create("div"),y=[],v=[],k=e.dir||"right",b={left:["left","right","x","w"],top:["top","bottom","y","h"],right:["left","left","x","w"],bottom:["top","top","y","h"]},M={right:[1,-1],left:[-1,1],top:[-1,1],bottom:[1,-1]};t.style(g,{position:"absolute",width:u+"px",height:h+"px",top:s+"px",left:n+"px",visibility:"hidden"});for(var j=[],w=0;w<2;w++){var _=w%2,I=_?b[k][1]:k,x=_?"last":"first",F=_?c:f,A=_?F:e.startColor||a.style.backgroundColor;v[w]=l.clone(g);var E=function(e){return function(){i.destroy(v[e])}}(w);d.body().appendChild(v[w]),j[w]={backgroundColor:_?A:c},j[w][b[k][0]]=r[b[k][2]]+M[k][0]*w*r[b[k][3]]+"px",t.style(v[w],j[w]),y.push(dojox.fx.flip({node:v[w],dir:I,axis:"shortside",depth:e.depth,duration:e.duration/2,shift:M[k][w]*r[b[k][3]]/2,darkColor:p,lightColor:f,whichAnim:x,endColor:F})),o.connect(y[w],"onEnd",E)}return m.chain(y)},h.flipGrid=function(e){var a=e.rows||4,r=e.cols||4,n=[],s=i.create("div"),u=e.node,h=t.coords(u,!0),c=h.x,f=h.y,p=h.w,g=h.h,y=h.w/r,v=h.h/a,k=[];t.style(s,{position:"absolute",width:y+"px",height:v+"px",backgroundColor:t.style(u,"backgroundColor")});for(var b=0;b<a;b++){var M=b%2,j=M?"right":"left",w=M?1:-1,_=l.clone(u);t.style(_,{position:"absolute",width:p+"px",height:g+"px",top:f+"px",left:c+"px",clip:"rect("+b*v+"px,"+p+"px,"+g+"px,0)"}),d.body().appendChild(_),n[b]=[];for(var I=0;I<r;I++){var x=l.clone(s),F=M?I:r-(I+1),A=function(e,a,i){return function(){a%2?t.style(e,{clip:"rect("+a*v+"px,"+p+"px,"+(a+1)*v+"px,"+(i+1)*y+"px)"}):t.style(e,{clip:"rect("+a*v+"px,"+(p-(i+1)*y)+"px,"+(a+1)*v+"px,0px)"})}}(_,b,I);d.body().appendChild(x),t.style(x,{left:c+F*y+"px",top:f+b*v+"px",visibility:"hidden"});var E=dojox.fx.flipPage({node:x,dir:j,duration:e.duration||900,shift:w*y/2,depth:.2,darkColor:e.darkColor,lightColor:e.lightColor,startColor:e.startColor||e.node.style.backgroundColor}),S=function(e){return function(){i.destroy(e)}}(x);o.connect(E,"play",this,A),o.connect(E,"play",this,S),n[b].push(E)}k.push(m.chain(n[b]))}return o.connect(k[0],"play",function(){t.style(u,{visibility:"hidden"})}),m.combine(k)},h});//# sourceMappingURL=flip.js.map