//>>built
define("dojox/fx/flip",["dojo/_base/kernel","dojo/_base/html","dojo/dom","dojo/dom-construct","dojo/dom-geometry","dojo/_base/connect","dojo/_base/Color","dojo/_base/sniff","dojo/_base/lang","dojo/_base/window","dojo/_base/fx","dojo/fx","./_base"],function(e,t,a,i,r,n,o,s,l,d,m,u,c){e.experimental("dojox.fx.flip");var h="border",f="Width",g="Height",p="Top",y="Right",v="Left",k="Bottom";return c.flip=function(e){var r=i.create("div"),c=e.node=a.byId(e.node),b=c.style,M=null,w=null,_=null,j=e.lightColor||"#dddddd",I=e.darkColor||"#555555",x=t.style(c,"backgroundColor"),E=e.endColor||x,F={},z=[],A=e.duration?e.duration/2:250,C=e.dir||"left",S=.9,T="transparent",L=e.whichAnim,G=e.axis||"center",N=e.depth,P=function(e){return"#000000"===new o(e).toHex()?"#000001":e};s("ie")<7&&(E=P(E),j=P(j),I=P(I),x=P(x),T="black",r.style.filter="chroma(color='#000000')"),function(e){return function(){var a=t.coords(e,!0);M={top:a.y,left:a.x,width:a.w,height:a.h}}}(c)(),w={position:"absolute",top:M.top+"px",left:M.left+"px",height:"0",width:"0",zIndex:e.zIndex||b.zIndex||0,border:"0 solid "+T,fontSize:"0",visibility:"hidden"};var D=[{},{top:M.top,left:M.left}];_={left:[v,y,p,k,f,g,"end"+g+"Min",v,"end"+g+"Max"],right:[y,v,p,k,f,g,"end"+g+"Min",v,"end"+g+"Max"],top:[p,k,v,y,g,f,"end"+f+"Min",p,"end"+f+"Max"],bottom:[k,p,v,y,g,f,"end"+f+"Min",p,"end"+f+"Max"]}[C],void 0!==N?(N=Math.max(0,Math.min(1,N))/2,S=.5-N+.4):S=Math.min(.9,Math.max(.4,M[_[5].toLowerCase()]/M[_[4].toLowerCase()]));for(var H=D[0],O=4;O<6;O++)"center"==G||"cube"==G?(M["end"+_[O]+"Min"]=M[_[O].toLowerCase()]*S,M["end"+_[O]+"Max"]=M[_[O].toLowerCase()]/S):"shortside"==G?(M["end"+_[O]+"Min"]=M[_[O].toLowerCase()],M["end"+_[O]+"Max"]=M[_[O].toLowerCase()]/S):"longside"==G&&(M["end"+_[O]+"Min"]=M[_[O].toLowerCase()]*S,M["end"+_[O]+"Max"]=M[_[O].toLowerCase()]);"center"==G?H[_[2].toLowerCase()]=M[_[2].toLowerCase()]-(M[_[8]]-M[_[6]])/4:"shortside"==G&&(H[_[2].toLowerCase()]=M[_[2].toLowerCase()]-(M[_[8]]-M[_[6]])/2),F[_[5].toLowerCase()]=M[_[5].toLowerCase()]+"px",F[_[4].toLowerCase()]="0",F[h+_[1]+f]=M[_[4].toLowerCase()]+"px",F[h+_[1]+"Color"]=x,H[h+_[1]+f]=0,H[h+_[1]+"Color"]=I,H[h+_[2]+f]=H[h+_[3]+f]="cube"!=G?(M["end"+_[5]+"Max"]-M["end"+_[5]+"Min"])/2:M[_[6]]/2,H[_[7].toLowerCase()]=M[_[7].toLowerCase()]+M[_[4].toLowerCase()]/2+(e.shift||0),H[_[5].toLowerCase()]=M[_[6]];var R=D[1];R[h+_[0]+"Color"]={start:j,end:E},R[h+_[0]+f]=M[_[4].toLowerCase()],R[h+_[2]+f]=0,R[h+_[3]+f]=0,R[_[5].toLowerCase()]={start:M[_[6]],end:M[_[5].toLowerCase()]},l.mixin(w,F),t.style(r,w),d.body().appendChild(r);var q=function(){i.destroy(r),b.backgroundColor=E,b.visibility="visible"};if("last"==L){for(O in H)H[O]={start:H[O]};H[h+_[1]+"Color"]={start:I,end:E},R=H}return L&&"first"!=L||z.push(m.animateProperty({node:r,duration:A,properties:H})),L&&"last"!=L||z.push(m.animateProperty({node:r,duration:A,properties:R,onEnd:q})),n.connect(z[0],"play",function(){r.style.visibility="visible",b.visibility="hidden"}),u.chain(z)},c.flipCube=function(e){var t=[],a=r.getMarginBox(e.node),i=a.w/2,n=a.h/2,o={top:{pName:"height",args:[{whichAnim:"first",dir:"top",shift:-n},{whichAnim:"last",dir:"bottom",shift:n}]},right:{pName:"width",args:[{whichAnim:"first",dir:"right",shift:i},{whichAnim:"last",dir:"left",shift:-i}]},bottom:{pName:"height",args:[{whichAnim:"first",dir:"bottom",shift:n},{whichAnim:"last",dir:"top",shift:-n}]},left:{pName:"width",args:[{whichAnim:"first",dir:"left",shift:-i},{whichAnim:"last",dir:"right",shift:i}]}},s=o[e.dir||"left"],d=s.args;e.duration=e.duration?2*e.duration:500,e.depth=.8,e.axis="cube";for(var m=d.length-1;m>=0;m--)l.mixin(e,d[m]),t.push(c.flip(e));return u.combine(t)},c.flipPage=function(e){var a=e.node,r=t.coords(a,!0),o=r.x,s=r.y,m=r.w,c=r.h,h=t.style(a,"backgroundColor"),f=e.lightColor||"#dddddd",g=e.darkColor,p=i.create("div"),y=[],v=[],k=e.dir||"right",b={left:["left","right","x","w"],top:["top","bottom","y","h"],right:["left","left","x","w"],bottom:["top","top","y","h"]},M={right:[1,-1],left:[-1,1],top:[-1,1],bottom:[1,-1]};t.style(p,{position:"absolute",width:m+"px",height:c+"px",top:s+"px",left:o+"px",visibility:"hidden"});for(var w=[],_=0;_<2;_++){var j=_%2,I=j?b[k][1]:k,x=j?"last":"first",E=j?h:f,F=j?E:e.startColor||a.style.backgroundColor;v[_]=l.clone(p);var z=function(e){return function(){i.destroy(v[e])}}(_);d.body().appendChild(v[_]),w[_]={backgroundColor:j?F:h},w[_][b[k][0]]=r[b[k][2]]+M[k][0]*_*r[b[k][3]]+"px",t.style(v[_],w[_]),y.push(dojox.fx.flip({node:v[_],dir:I,axis:"shortside",depth:e.depth,duration:e.duration/2,shift:M[k][_]*r[b[k][3]]/2,darkColor:g,lightColor:f,whichAnim:x,endColor:E})),n.connect(y[_],"onEnd",z)}return u.chain(y)},c.flipGrid=function(e){var a=e.rows||4,r=e.cols||4,o=[],s=i.create("div"),m=e.node,c=t.coords(m,!0),h=c.x,f=c.y,g=c.w,p=c.h,y=c.w/r,v=c.h/a,k=[];t.style(s,{position:"absolute",width:y+"px",height:v+"px",backgroundColor:t.style(m,"backgroundColor")});for(var b=0;b<a;b++){var M=b%2,w=M?"right":"left",_=M?1:-1,j=l.clone(m);t.style(j,{position:"absolute",width:g+"px",height:p+"px",top:f+"px",left:h+"px",clip:"rect("+b*v+"px,"+g+"px,"+p+"px,0)"}),d.body().appendChild(j),o[b]=[];for(var I=0;I<r;I++){var x=l.clone(s),E=M?I:r-(I+1),F=function(e,a,i){return function(){a%2?t.style(e,{clip:"rect("+a*v+"px,"+g+"px,"+(a+1)*v+"px,"+(i+1)*y+"px)"}):t.style(e,{clip:"rect("+a*v+"px,"+(g-(i+1)*y)+"px,"+(a+1)*v+"px,0px)"})}}(j,b,I);d.body().appendChild(x),t.style(x,{left:h+E*y+"px",top:f+b*v+"px",visibility:"hidden"});var z=dojox.fx.flipPage({node:x,dir:w,duration:e.duration||900,shift:_*y/2,depth:.2,darkColor:e.darkColor,lightColor:e.lightColor,startColor:e.startColor||e.node.style.backgroundColor}),A=function(e){return function(){i.destroy(e)}}(x);n.connect(z,"play",this,F),n.connect(z,"play",this,A),o[b].push(z)}k.push(u.chain(o[b]))}return n.connect(k[0],"play",function(){t.style(m,{visibility:"hidden"})}),u.combine(k)},c});//# sourceMappingURL=flip.js.map