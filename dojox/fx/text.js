//>>built
define("dojox/fx/text",["dojo/_base/lang","./_base","dojo/_base/fx","dojo/fx","dojo/fx/easing","dojo/dom","dojo/dom-style","dojo/_base/html","dojo/_base/connect"],function(e,t,a,i,o,r,n,d,s){var l=e.getObject("dojox.fx.text",!0);return l._split=function(t){function a(i){var o=i.nextSibling;if("SPAN"==i.tagName&&1==i.childNodes.length&&3==i.firstChild.nodeType){var r=d.coords(i,!0);k++,n.set(i,{padding:0,margin:0,top:t.crop?"0px":r.t+"px",left:t.crop?"0px":r.l+"px",display:"inline"});var s=t.pieceAnimation(i,r,m,k,M);e.isArray(s)?p=p.concat(s):p[p.length]=s}else i.firstChild&&a(i.firstChild);o&&a(o)}var o=t.node=r.byId(t.node),l=o.style,u=n.getComputedStyle(o),m=d.coords(o,!0);t.duration=t.duration||1e3,t.words=t.words||!1;var h=t.text&&"string"==typeof t.text?t.text:o.innerHTML,c=l.height,f=l.width,p=[];n.set(o,{height:u.height,width:u.width});for(var y=/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)/g,g=t.words?/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)\s*|([^\s<]+\s*)/g:/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)\s*|([^\s<]\s*)/g,v="string"==typeof t.text?t.text.match(g):o.innerHTML.match(g),b="",M=0,k=0,j=0;j<v.length;j++){var w=v[j];w.match(y)?b+=w:(b+="<span>"+w+"</span>",M++)}o.innerHTML=b,a(o.firstChild);var x=i.combine(p);return s.connect(x,"onEnd",x,function(){o.innerHTML=h,n.set(o,{height:c,width:f})}),t.onPlay&&s.connect(x,"onPlay",x,t.onPlay),t.onEnd&&s.connect(x,"onEnd",x,t.onEnd),x},l.explode=function(e){var t=e.node=r.byId(e.node);t.style;e.distance=e.distance||1,e.duration=e.duration||1e3,e.random=e.random||0,"undefined"==typeof e.fade&&(e.fade=!0),"undefined"==typeof e.sync&&(e.sync=!0),e.random=Math.abs(e.random),e.pieceAnimation=function(t,i,r,d,s){var l=i.h,u=i.w,m=2*e.distance,h=e.duration,c=parseFloat(t.style.top),f=parseFloat(t.style.left),p=0,y=0,g=0;if(e.random){var v=Math.random()*e.random+Math.max(1-e.random,0);m*=v,h*=v,p=e.unhide&&e.sync||!e.unhide&&!e.sync?e.duration-h:0,y=Math.random()-.5,g=Math.random()-.5}var b=(r.h-l)/2-(i.y-r.y),M=(r.w-u)/2-(i.x-r.x),k=Math.sqrt(Math.pow(M,2)+Math.pow(b,2)),j=c-b*m+k*g,w=f-M*m+k*y,x=a.animateProperty({node:t,duration:h,delay:p,easing:e.easing||(e.unhide?o.sinOut:o.circOut),beforeBegin:e.unhide?function(){e.fade&&n.set(t,"opacity",0),t.style.position=e.crop?"relative":"absolute",t.style.top=j+"px",t.style.left=w+"px"}:function(){t.style.position=e.crop?"relative":"absolute"},properties:{top:e.unhide?{start:j,end:c}:{start:c,end:j},left:e.unhide?{start:w,end:f}:{start:f,end:w}}});if(e.fade){var _=a.animateProperty({node:t,duration:h,delay:p,easing:e.fadeEasing||o.quadOut,properties:{opacity:e.unhide?{start:0,end:1}:{end:0}}});return e.unhide?[_,x]:[x,_]}return x};var i=l._split(e);return i},l.converge=function(e){return e.unhide=!0,l.explode(e)},l.disintegrate=function(e){var t=e.node=r.byId(e.node);t.style;e.duration=e.duration||1500,e.distance=e.distance||1.5,e.random=e.random||0,e.fade||(e.fade=!0);var i=Math.abs(e.random);e.pieceAnimation=function(t,r,d,s,l){var u=(r.h,r.w,e.interval||e.duration/(1.5*l)),m=e.duration-l*u,h=Math.random()*l*u,c=e.reverseOrder||e.distance<0?s*u:(l-s)*u,f=h*i+Math.max(1-i,0)*c,p={};e.unhide?(p.top={start:parseFloat(t.style.top)-d.h*e.distance,end:parseFloat(t.style.top)},e.fade&&(p.opacity={start:0,end:1})):(p.top={end:parseFloat(t.style.top)+d.h*e.distance},e.fade&&(p.opacity={end:0}));var y=a.animateProperty({node:t,duration:m,delay:f,easing:e.easing||(e.unhide?o.sinIn:o.circIn),properties:p,beforeBegin:e.unhide?function(){e.fade&&n.set(t,"opacity",0),t.style.position=e.crop?"relative":"absolute",t.style.top=p.top.start+"px"}:function(){t.style.position=e.crop?"relative":"absolute"}});return y};var d=l._split(e);return d},l.build=function(e){return e.unhide=!0,l.disintegrate(e)},l.blockFadeOut=function(e){var t=e.node=r.byId(e.node);t.style;e.duration=e.duration||1e3,e.random=e.random||0;var i=Math.abs(e.random);e.pieceAnimation=function(t,r,d,s,l){var u=e.interval||e.duration/(1.5*l),m=e.duration-l*u,h=Math.random()*l*u,c=e.reverseOrder?(l-s)*u:s*u,f=h*i+Math.max(1-i,0)*c,p=a.animateProperty({node:t,duration:m,delay:f,easing:e.easing||o.sinInOut,properties:{opacity:e.unhide?{start:0,end:1}:{end:0}},beforeBegin:e.unhide?function(){n.set(t,"opacity",0)}:void 0});return p};var d=l._split(e);return d},l.blockFadeIn=function(e){return e.unhide=!0,l.blockFadeOut(e)},l.backspace=function(e){var t=e.node=r.byId(e.node);t.style;e.words=!1,e.duration=e.duration||2e3,e.random=e.random||0;var i=Math.abs(e.random),d=10;e.pieceAnimation=function(t,r,s,l,u){var m=e.interval||e.duration/(1.5*u),h="textContent"in t?t.textContent:t.innerText,c=h.match(/\s/g);"undefined"==typeof e.wordDelay&&(e.wordDelay=2*m),e.unhide||(d=(u-l-1)*m);var f,p;if(e.fixed){if(e.unhide)var f=function(){n.set(t,"opacity",0)}}else if(e.unhide)var f=function(){t.style.display="none"},p=function(){t.style.display="inline"};else var p=function(){t.style.display="none"};var y=a.animateProperty({node:t,duration:1,delay:d,easing:e.easing||o.sinInOut,properties:{opacity:e.unhide?{start:0,end:1}:{end:0}},beforeBegin:f,onEnd:p});if(e.unhide){var g=Math.random()*h.length*m,v=g*i/2+Math.max(1-i/2,0)*e.wordDelay;d+=g*i+Math.max(1-i,0)*m*h.length+v*(c&&h.lastIndexOf(c[c.length-1])==h.length-1)}return y};var s=l._split(e);return s},l.type=function(e){return e.unhide=!0,l.backspace(e)},l});//# sourceMappingURL=text.js.map