//>>built
define("dojox/fx/text",["dojo/_base/lang","./_base","dojo/_base/fx","dojo/fx","dojo/fx/easing","dojo/dom","dojo/dom-style","dojo/_base/html","dojo/_base/connect"],function(e,t,i,a,o,n,r,s,l){var d=e.getObject("dojox.fx.text",!0);return d._split=function(t){function i(a){var o=a.nextSibling;if("SPAN"==a.tagName&&1==a.childNodes.length&&3==a.firstChild.nodeType){var n=s.coords(a,!0);M++,r.set(a,{padding:0,margin:0,top:t.crop?"0px":n.t+"px",left:t.crop?"0px":n.l+"px",display:"inline"});var l=t.pieceAnimation(a,n,m,M,k);e.isArray(l)?p=p.concat(l):p[p.length]=l}else a.firstChild&&i(a.firstChild);o&&i(o)}var o=t.node=n.byId(t.node),d=o.style,u=r.getComputedStyle(o),m=s.coords(o,!0);t.duration=t.duration||1e3,t.words=t.words||!1;var c=t.text&&"string"==typeof t.text?t.text:o.innerHTML,h=d.height,f=d.width,p=[];r.set(o,{height:u.height,width:u.width});for(var g=/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)/g,v=t.words?/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)\s*|([^\s<]+\s*)/g:/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)\s*|([^\s<]\s*)/g,y="string"==typeof t.text?t.text.match(v):o.innerHTML.match(v),b="",k=0,M=0,_=0;_<y.length;_++){var j=y[_];j.match(g)?b+=j:(b+="<span>"+j+"</span>",k++)}o.innerHTML=b,i(o.firstChild);var w=a.combine(p);return l.connect(w,"onEnd",w,function(){o.innerHTML=c,r.set(o,{height:h,width:f})}),t.onPlay&&l.connect(w,"onPlay",w,t.onPlay),t.onEnd&&l.connect(w,"onEnd",w,t.onEnd),w},d.explode=function(e){var t=e.node=n.byId(e.node);t.style;return e.distance=e.distance||1,e.duration=e.duration||1e3,e.random=e.random||0,void 0===e.fade&&(e.fade=!0),void 0===e.sync&&(e.sync=!0),e.random=Math.abs(e.random),e.pieceAnimation=function(t,a,n,s,l){var d=a.h,u=a.w,m=2*e.distance,c=e.duration,h=parseFloat(t.style.top),f=parseFloat(t.style.left),p=0,g=0,v=0;if(e.random){var y=Math.random()*e.random+Math.max(1-e.random,0);m*=y,c*=y,p=e.unhide&&e.sync||!e.unhide&&!e.sync?e.duration-c:0,g=Math.random()-.5,v=Math.random()-.5}var b=(n.h-d)/2-(a.y-n.y),k=(n.w-u)/2-(a.x-n.x),M=Math.sqrt(Math.pow(k,2)+Math.pow(b,2)),_=h-b*m+M*v,j=f-k*m+M*g,w=i.animateProperty({node:t,duration:c,delay:p,easing:e.easing||(e.unhide?o.sinOut:o.circOut),beforeBegin:e.unhide?function(){e.fade&&r.set(t,"opacity",0),t.style.position=e.crop?"relative":"absolute",t.style.top=_+"px",t.style.left=j+"px"}:function(){t.style.position=e.crop?"relative":"absolute"},properties:{top:e.unhide?{start:_,end:h}:{start:h,end:_},left:e.unhide?{start:j,end:f}:{start:f,end:j}}});if(e.fade){var x=i.animateProperty({node:t,duration:c,delay:p,easing:e.fadeEasing||o.quadOut,properties:{opacity:e.unhide?{start:0,end:1}:{end:0}}});return e.unhide?[x,w]:[w,x]}return w},d._split(e)},d.converge=function(e){return e.unhide=!0,d.explode(e)},d.disintegrate=function(e){var t=e.node=n.byId(e.node);t.style;e.duration=e.duration||1500,e.distance=e.distance||1.5,e.random=e.random||0,e.fade||(e.fade=!0);var a=Math.abs(e.random);return e.pieceAnimation=function(t,n,s,l,d){var u=(n.h,n.w,e.interval||e.duration/(1.5*d)),m=e.duration-d*u,c=Math.random()*d*u,h=e.reverseOrder||e.distance<0?l*u:(d-l)*u,f=c*a+Math.max(1-a,0)*h,p={};return e.unhide?(p.top={start:parseFloat(t.style.top)-s.h*e.distance,end:parseFloat(t.style.top)},e.fade&&(p.opacity={start:0,end:1})):(p.top={end:parseFloat(t.style.top)+s.h*e.distance},e.fade&&(p.opacity={end:0})),i.animateProperty({node:t,duration:m,delay:f,easing:e.easing||(e.unhide?o.sinIn:o.circIn),properties:p,beforeBegin:e.unhide?function(){e.fade&&r.set(t,"opacity",0),t.style.position=e.crop?"relative":"absolute",t.style.top=p.top.start+"px"}:function(){t.style.position=e.crop?"relative":"absolute"}})},d._split(e)},d.build=function(e){return e.unhide=!0,d.disintegrate(e)},d.blockFadeOut=function(e){var t=e.node=n.byId(e.node);t.style;e.duration=e.duration||1e3,e.random=e.random||0;var a=Math.abs(e.random);return e.pieceAnimation=function(t,n,s,l,d){var u=e.interval||e.duration/(1.5*d),m=e.duration-d*u,c=Math.random()*d*u,h=e.reverseOrder?(d-l)*u:l*u,f=c*a+Math.max(1-a,0)*h;return i.animateProperty({node:t,duration:m,delay:f,easing:e.easing||o.sinInOut,properties:{opacity:e.unhide?{start:0,end:1}:{end:0}},beforeBegin:e.unhide?function(){r.set(t,"opacity",0)}:void 0})},d._split(e)},d.blockFadeIn=function(e){return e.unhide=!0,d.blockFadeOut(e)},d.backspace=function(e){var t=e.node=n.byId(e.node);t.style;e.words=!1,e.duration=e.duration||2e3,e.random=e.random||0;var a=Math.abs(e.random),s=10;return e.pieceAnimation=function(t,n,l,d,u){var m=e.interval||e.duration/(1.5*u),c="textContent"in t?t.textContent:t.innerText,h=c.match(/\s/g);void 0===e.wordDelay&&(e.wordDelay=2*m),e.unhide||(s=(u-d-1)*m);var f,p;if(e.fixed){if(e.unhide)var f=function(){r.set(t,"opacity",0)}}else if(e.unhide)var f=function(){t.style.display="none"},p=function(){t.style.display="inline"};else var p=function(){t.style.display="none"};var g=i.animateProperty({node:t,duration:1,delay:s,easing:e.easing||o.sinInOut,properties:{opacity:e.unhide?{start:0,end:1}:{end:0}},beforeBegin:f,onEnd:p});if(e.unhide){var v=Math.random()*c.length*m,y=v*a/2+Math.max(1-a/2,0)*e.wordDelay;s+=v*a+Math.max(1-a,0)*m*c.length+y*(h&&c.lastIndexOf(h[h.length-1])==c.length-1)}return g},d._split(e)},d.type=function(e){return e.unhide=!0,d.backspace(e)},d});//# sourceMappingURL=text.js.map