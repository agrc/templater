//>>built
define("dojox/treemap/_utils",["dojo/_base/array"],function(e){var t={group:function(i,a,n){var o={children:[]},r=function(e,t){return e.__treeValue||(e.__treeValue=0),e.__treeValue+=n(t),e};return e.forEach(i,function(i){var n=o;e.forEach(a,function(e,o){var s=e(i),l=t.find(n.children,function(e){return e.__treeName==s});l||n.children.push(l={__treeName:s,__treeID:s+Math.random(),children:[]}),l=r(l,i),o!=a.length-1?n=l:l.children.push(i)}),n=r(n,i)}),o},find:function(e,t){for(var i=e.length,a=0;i>a;++a)if(t.call(null,e[a]))return e[a];return null},solve:function(i,a,n,o,r){var s=t.initElements(i,o),l=s.total,d=s.elements,h=l;if(0==l){if(0==d.length)return{items:i,rects:[],total:0};e.forEach(d,function(e){e.size=e.sizeTmp=100}),l=100*d.length}d.sort(function(e,t){return t.size-e.size}),t._compute(a,n,d,l),d.sort(function(e,t){return e.index-t.index});var c={};return c.elements=d,c.size=h,rects=e.map(d,function(e){return{x:r?a-e.x-e.width:e.x,y:e.y,w:e.width,h:e.height}}),c.rectangles=rects,c},initElements:function(t,i){var a=0,n=e.map(t,function(e,t){var n=null!=i?i(e):0;if(0>n)throw new Error("item size dimension must be positive");return a+=n,{index:t,size:n,sizeTmp:n}});return{elements:n,total:a}},_compute:function(i,a,n,o){var r=i*a/o/100;e.forEach(n,function(e){e.sizeTmp*=r});for(var s,l=0,d=0,h=-1>>>1,c=0,u=0,m=i,f=a,g=m>f;d!=n.length;)if(s=t._trySolution(n,l,d,g,m,f),s>h||1>s){for(var p=0,v=0,y=l;d>y;y++)n[y].x=c+p,n[y].y=u+v,g?v+=n[y].height:p+=n[y].width;g?c+=n[l].width:u+=n[l].height,m=i-c,f=a-u,g=m>f,l=d,d=l,h=-1>>>1}else{for(var y=l;d>=y;y++)n[y].width=n[y].widthTmp,n[y].height=n[y].heightTmp;h=s,d++}for(var b=0,_=0,y=l;d>y;y++)n[y].x=c+b,n[y].y=u+_,g?_+=n[y].height:b+=n[y].width},_trySolution:function(e,t,i,a,n,o){for(var r=0,s=0,l=0,d=0,h=t;i>=h;h++)r+=e[h].sizeTmp;a?0==o?l=d=0:(l=r/o*100,d=o):0==n?l=d=0:(d=r/n*100,l=n);for(var h=t;i>=h;h++)a?(e[h].widthTmp=l,0==r?e[h].heightTmp=0:e[h].heightTmp=d*e[h].sizeTmp/r):(0==r?e[h].widthTmp=0:e[h].widthTmp=l*e[h].sizeTmp/r,e[h].heightTmp=d);return s=Math.max(e[i].heightTmp/e[i].widthTmp,e[i].widthTmp/e[i].heightTmp),void 0==s?1:s}};return t});//# sourceMappingURL=_utils.js.map