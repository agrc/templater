//>>built
define("dojox/treemap/_utils",["dojo/_base/array"],function(e){var t={group:function(i,a,r){var n={children:[]},o=function(e,t){return e.__treeValue||(e.__treeValue=0),e.__treeValue+=r(t),e};return e.forEach(i,function(i){var r=n;e.forEach(a,function(e,n){var s=e(i),l=t.find(r.children,function(e){return e.__treeName==s});l||r.children.push(l={__treeName:s,__treeID:s+Math.random(),children:[]}),l=o(l,i),n!=a.length-1?r=l:l.children.push(i)}),r=o(r,i)}),n},find:function(e,t){for(var i=e.length,a=0;a<i;++a)if(t.call(null,e[a]))return e[a];return null},solve:function(i,a,r,n,o){var s=t.initElements(i,n),l=s.total,d=s.elements,h=l;if(0==l){if(0==d.length)return{items:i,rects:[],total:0};e.forEach(d,function(e){e.size=e.sizeTmp=100}),l=100*d.length}d.sort(function(e,t){return t.size-e.size}),t._compute(a,r,d,l),d.sort(function(e,t){return e.index-t.index});var u={};return u.elements=d,u.size=h,rects=e.map(d,function(e){return{x:o?a-e.x-e.width:e.x,y:e.y,w:e.width,h:e.height}}),u.rectangles=rects,u},initElements:function(t,i){var a=0;return{elements:e.map(t,function(e,t){var r=null!=i?i(e):0;if(r<0)throw new Error("item size dimension must be positive");return a+=r,{index:t,size:r,sizeTmp:r}}),total:a}},_compute:function(i,a,r,n){var o=i*a/n/100;e.forEach(r,function(e){e.sizeTmp*=o});for(var s,l=0,d=0,h=-1>>>1,u=0,c=0,m=i,f=a,g=m>f;d!=r.length;)if((s=t._trySolution(r,l,d,g,m,f))>h||s<1){for(var p=0,y=0,v=l;v<d;v++)r[v].x=u+p,r[v].y=c+y,g?y+=r[v].height:p+=r[v].width;g?u+=r[l].width:c+=r[l].height,m=i-u,f=a-c,g=m>f,l=d,d=l,h=-1>>>1}else{for(var v=l;v<=d;v++)r[v].width=r[v].widthTmp,r[v].height=r[v].heightTmp;h=s,d++}for(var b=0,k=0,v=l;v<d;v++)r[v].x=u+b,r[v].y=c+k,g?k+=r[v].height:b+=r[v].width},_trySolution:function(e,t,i,a,r,n){for(var o=0,s=0,l=0,d=0,h=t;h<=i;h++)o+=e[h].sizeTmp;a?0==n?l=d=0:(l=o/n*100,d=n):0==r?l=d=0:(d=o/r*100,l=r);for(var h=t;h<=i;h++)a?(e[h].widthTmp=l,e[h].heightTmp=0==o?0:d*e[h].sizeTmp/o):(e[h].widthTmp=0==o?0:l*e[h].sizeTmp/o,e[h].heightTmp=d);return s=Math.max(e[i].heightTmp/e[i].widthTmp,e[i].widthTmp/e[i].heightTmp),void 0==s?1:s}};return t});//# sourceMappingURL=_utils.js.map