//>>built
define("dojox/treemap/_utils",["dojo/_base/array"],function(e){var t={group:function(i,a,o){var r={children:[]},n=function(e,t){return e.__treeValue||(e.__treeValue=0),e.__treeValue+=o(t),e};return e.forEach(i,function(i){var o=r;e.forEach(a,function(e,r){var s=e(i),l=t.find(o.children,function(e){return e.__treeName==s});l||o.children.push(l={__treeName:s,__treeID:s+Math.random(),children:[]}),l=n(l,i),r!=a.length-1?o=l:l.children.push(i)}),o=n(o,i)}),r},find:function(e,t){for(var i=e.length,a=0;i>a;++a)if(t.call(null,e[a]))return e[a];return null},solve:function(i,a,o,r,n){var s=t.initElements(i,r),l=s.total,d=s.elements,h=l;if(0==l){if(0==d.length)return{items:i,rects:[],total:0};e.forEach(d,function(e){e.size=e.sizeTmp=100}),l=100*d.length}d.sort(function(e,t){return t.size-e.size}),t._compute(a,o,d,l),d.sort(function(e,t){return e.index-t.index});var c={};return c.elements=d,c.size=h,rects=e.map(d,function(e){return{x:n?a-e.x-e.width:e.x,y:e.y,w:e.width,h:e.height}}),c.rectangles=rects,c},initElements:function(t,i){var a=0,o=e.map(t,function(e,t){var o=null!=i?i(e):0;if(0>o)throw new Error("item size dimension must be positive");return a+=o,{index:t,size:o,sizeTmp:o}});return{elements:o,total:a}},_compute:function(i,a,o,r){var n=i*a/r/100;e.forEach(o,function(e){e.sizeTmp*=n});for(var s,l=0,d=0,h=-1>>>1,c=0,u=0,m=i,f=a,p=m>f;d!=o.length;)if(s=t._trySolution(o,l,d,p,m,f),s>h||1>s){for(var g=0,y=0,v=l;d>v;v++)o[v].x=c+g,o[v].y=u+y,p?y+=o[v].height:g+=o[v].width;p?c+=o[l].width:u+=o[l].height,m=i-c,f=a-u,p=m>f,l=d,d=l,h=-1>>>1}else{for(var v=l;d>=v;v++)o[v].width=o[v].widthTmp,o[v].height=o[v].heightTmp;h=s,d++}for(var b=0,_=0,v=l;d>v;v++)o[v].x=c+b,o[v].y=u+_,p?_+=o[v].height:b+=o[v].width},_trySolution:function(e,t,i,a,o,r){for(var n=0,s=0,l=0,d=0,h=t;i>=h;h++)n+=e[h].sizeTmp;a?0==r?l=d=0:(l=n/r*100,d=r):0==o?l=d=0:(d=n/o*100,l=o);for(var h=t;i>=h;h++)a?(e[h].widthTmp=l,0==n?e[h].heightTmp=0:e[h].heightTmp=d*e[h].sizeTmp/n):(0==n?e[h].widthTmp=0:e[h].widthTmp=l*e[h].sizeTmp/n,e[h].heightTmp=d);return s=Math.max(e[i].heightTmp/e[i].widthTmp,e[i].widthTmp/e[i].heightTmp),void 0==s?1:s}};return t});//# sourceMappingURL=_utils.js.map