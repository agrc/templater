//>>built
define("dojox/treemap/_utils",["dojo/_base/array"],function(e){var t={group:function(i,o,a){var r={children:[]},n=function(e,t){return e.__treeValue||(e.__treeValue=0),e.__treeValue+=a(t),e};return e.forEach(i,function(i){var a=r;e.forEach(o,function(e,r){var s=e(i),l=t.find(a.children,function(e){return e.__treeName==s});l||a.children.push(l={__treeName:s,__treeID:s+Math.random(),children:[]}),l=n(l,i),r!=o.length-1?a=l:l.children.push(i)}),a=n(a,i)}),r},find:function(e,t){for(var i=e.length,o=0;i>o;++o)if(t.call(null,e[o]))return e[o];return null},solve:function(i,o,a,r,n){var s=t.initElements(i,r),l=s.total,d=s.elements,h=l;if(0==l){if(0==d.length)return{items:i,rects:[],total:0};e.forEach(d,function(e){e.size=e.sizeTmp=100}),l=100*d.length}d.sort(function(e,t){return t.size-e.size}),t._compute(o,a,d,l),d.sort(function(e,t){return e.index-t.index});var c={};return c.elements=d,c.size=h,rects=e.map(d,function(e){return{x:n?o-e.x-e.width:e.x,y:e.y,w:e.width,h:e.height}}),c.rectangles=rects,c},initElements:function(t,i){var o=0,a=e.map(t,function(e,t){var a=null!=i?i(e):0;if(0>a)throw new Error("item size dimension must be positive");return o+=a,{index:t,size:a,sizeTmp:a}});return{elements:a,total:o}},_compute:function(i,o,a,r){var n=i*o/r/100;e.forEach(a,function(e){e.sizeTmp*=n});for(var s,l=0,d=0,h=-1>>>1,c=0,u=0,m=i,f=o,p=m>f;d!=a.length;)if(s=t._trySolution(a,l,d,p,m,f),s>h||1>s){for(var g=0,y=0,v=l;d>v;v++)a[v].x=c+g,a[v].y=u+y,p?y+=a[v].height:g+=a[v].width;p?c+=a[l].width:u+=a[l].height,m=i-c,f=o-u,p=m>f,l=d,d=l,h=-1>>>1}else{for(var v=l;d>=v;v++)a[v].width=a[v].widthTmp,a[v].height=a[v].heightTmp;h=s,d++}for(var b=0,_=0,v=l;d>v;v++)a[v].x=c+b,a[v].y=u+_,p?_+=a[v].height:b+=a[v].width},_trySolution:function(e,t,i,o,a,r){for(var n=0,s=0,l=0,d=0,h=t;i>=h;h++)n+=e[h].sizeTmp;o?0==r?l=d=0:(l=n/r*100,d=r):0==a?l=d=0:(d=n/a*100,l=a);for(var h=t;i>=h;h++)o?(e[h].widthTmp=l,0==n?e[h].heightTmp=0:e[h].heightTmp=d*e[h].sizeTmp/n):(0==n?e[h].widthTmp=0:e[h].widthTmp=l*e[h].sizeTmp/n,e[h].heightTmp=d);return s=Math.max(e[i].heightTmp/e[i].widthTmp,e[i].widthTmp/e[i].heightTmp),void 0==s?1:s}};return t});//# sourceMappingURL=_utils.js.map