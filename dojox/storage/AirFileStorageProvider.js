//>>built
define("dojox/storage/AirFileStorageProvider",["dojo","dijit","dojox","dojo/require!dojox/storage/manager,dojox/storage/Provider"],function(e,t,i){e.provide("dojox.storage.AirFileStorageProvider"),e.require("dojox.storage.manager"),e.require("dojox.storage.Provider"),e.isAIR&&!function(){if(!t)var t={};t.File=window.runtime.flash.filesystem.File,t.FileStream=window.runtime.flash.filesystem.FileStream,t.FileMode=window.runtime.flash.filesystem.FileMode,e.declare("dojox.storage.AirFileStorageProvider",[i.storage.Provider],{initialized:!1,_storagePath:"__DOJO_STORAGE/",initialize:function(){this.initialized=!1;try{var e=t.File.applicationStorageDirectory.resolvePath(this._storagePath);e.exists||e.createDirectory(),this.initialized=!0}catch(a){}i.storage.manager.loaded()},isAvailable:function(){return!0},put:function(e,i,a,n){if(0==this.isValidKey(e))throw new Error("Invalid key given: "+e);if(n=n||this.DEFAULT_NAMESPACE,0==this.isValidKey(n))throw new Error("Invalid namespace given: "+n);try{this.remove(e,n);var o=t.File.applicationStorageDirectory.resolvePath(this._storagePath+n);o.exists||o.createDirectory();var r=o.resolvePath(e),s=new t.FileStream;s.open(r,t.FileMode.WRITE),s.writeObject(i),s.close()}catch(d){return void a(this.FAILED,e,d.toString(),n)}a&&a(this.SUCCESS,e,null,n)},get:function(e,i){if(0==this.isValidKey(e))throw new Error("Invalid key given: "+e);i=i||this.DEFAULT_NAMESPACE;var a=null,n=t.File.applicationStorageDirectory.resolvePath(this._storagePath+i+"/"+e);if(n.exists&&!n.isDirectory){var o=new t.FileStream;o.open(n,t.FileMode.READ),a=o.readObject(),o.close()}return a},getNamespaces:function(){var e,i=[this.DEFAULT_NAMESPACE],a=t.File.applicationStorageDirectory.resolvePath(this._storagePath),n=a.getDirectoryListing();for(e=0;e<n.length;e++)n[e].isDirectory&&n[e].name!=this.DEFAULT_NAMESPACE&&i.push(n[e].name);return i},getKeys:function(e){if(e=e||this.DEFAULT_NAMESPACE,0==this.isValidKey(e))throw new Error("Invalid namespace given: "+e);var i=[],a=t.File.applicationStorageDirectory.resolvePath(this._storagePath+e);if(a.exists&&a.isDirectory){var n,o=a.getDirectoryListing();for(n=0;n<o.length;n++)i.push(o[n].name)}return i},clear:function(e){if(0==this.isValidKey(e))throw new Error("Invalid namespace given: "+e);var i=t.File.applicationStorageDirectory.resolvePath(this._storagePath+e);i.exists&&i.isDirectory&&i.deleteDirectory(!0)},remove:function(e,i){i=i||this.DEFAULT_NAMESPACE;var a=t.File.applicationStorageDirectory.resolvePath(this._storagePath+i+"/"+e);a.exists&&!a.isDirectory&&a.deleteFile()},putMultiple:function(e,t,i,a){if(this.isValidKeyArray(e)===!1||!t instanceof Array||e.length!=t.length)throw new Error("Invalid arguments: keys = ["+e+"], values = ["+t+"]");if(null!=a&&"undefined"!=typeof a||(a=this.DEFAULT_NAMESPACE),0==this.isValidKey(a))throw new Error("Invalid namespace given: "+a);this._statusHandler=i;try{for(var n=0;n<e.length;n++)this.put(e[n],t[n],null,a)}catch(o){return void(i&&i(this.FAILED,e,o.toString(),a))}i&&i(this.SUCCESS,e,null,a)},getMultiple:function(e,t){if(this.isValidKeyArray(e)===!1)throw new Error("Invalid key array given: "+e);if(null!=t&&"undefined"!=typeof t||(t=this.DEFAULT_NAMESPACE),0==this.isValidKey(t))throw new Error("Invalid namespace given: "+t);for(var i=[],a=0;a<e.length;a++)i[a]=this.get(e[a],t);return i},removeMultiple:function(e,t){t=t||this.DEFAULT_NAMESPACE;for(var i=0;i<e.length;i++)this.remove(e[i],t)},isPermanent:function(){return!0},getMaximumSize:function(){return this.SIZE_NO_LIMIT},hasSettingsUI:function(){return!1},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface")},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface")}}),i.storage.manager.register("dojox.storage.AirFileStorageProvider",new i.storage.AirFileStorageProvider),i.storage.manager.initialize()}()});//# sourceMappingURL=AirFileStorageProvider.js.map