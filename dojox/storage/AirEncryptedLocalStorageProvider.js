//>>built
define("dojox/storage/AirEncryptedLocalStorageProvider",["dojo","dijit","dojox","dojo/require!dojox/storage/manager,dojox/storage/Provider"],function(e,t,i){e.provide("dojox.storage.AirEncryptedLocalStorageProvider"),e.require("dojox.storage.manager"),e.require("dojox.storage.Provider"),e.isAIR&&!function(){if(!t)var t={};t.ByteArray=window.runtime.flash.utils.ByteArray,t.EncryptedLocalStore=window.runtime.flash.data.EncryptedLocalStore,e.declare("dojox.storage.AirEncryptedLocalStorageProvider",[i.storage.Provider],{initialize:function(){i.storage.manager.loaded()},isAvailable:function(){return!0},_getItem:function(e){var i=t.EncryptedLocalStore.getItem("__dojo_"+e);return i?i.readUTFBytes(i.length):""},_setItem:function(e,i){var a=new t.ByteArray;a.writeUTFBytes(i),t.EncryptedLocalStore.setItem("__dojo_"+e,a)},_removeItem:function(e){t.EncryptedLocalStore.removeItem("__dojo_"+e)},put:function(e,t,i,a){if(0==this.isValidKey(e))throw new Error("Invalid key given: "+e);if(a=a||this.DEFAULT_NAMESPACE,0==this.isValidKey(a))throw new Error("Invalid namespace given: "+a);try{var n=this._getItem("namespaces")||"|";-1==n.indexOf("|"+a+"|")&&this._setItem("namespaces",n+a+"|");var o=this._getItem(a+"_keys")||"|";-1==o.indexOf("|"+e+"|")&&this._setItem(a+"_keys",o+e+"|"),this._setItem("_"+a+"_"+e,t)}catch(r){return void i(this.FAILED,e,r.toString(),a)}i&&i(this.SUCCESS,e,null,a)},get:function(e,t){if(0==this.isValidKey(e))throw new Error("Invalid key given: "+e);return t=t||this.DEFAULT_NAMESPACE,this._getItem("_"+t+"_"+e)},getNamespaces:function(){for(var e=[this.DEFAULT_NAMESPACE],t=(this._getItem("namespaces")||"|").split("|"),i=0;i<t.length;i++)t[i].length&&t[i]!=this.DEFAULT_NAMESPACE&&e.push(t[i]);return e},getKeys:function(e){if(e=e||this.DEFAULT_NAMESPACE,0==this.isValidKey(e))throw new Error("Invalid namespace given: "+e);for(var t=[],i=(this._getItem(e+"_keys")||"|").split("|"),a=0;a<i.length;a++)i[a].length&&t.push(i[a]);return t},clear:function(e){if(0==this.isValidKey(e))throw new Error("Invalid namespace given: "+e);var t=this._getItem("namespaces")||"|";-1!=t.indexOf("|"+e+"|")&&this._setItem("namespaces",t.replace("|"+e+"|","|"));for(var i=(this._getItem(e+"_keys")||"|").split("|"),a=0;a<i.length;a++)i[a].length&&this._removeItem(e+"_"+i[a]);this._removeItem(e+"_keys")},remove:function(e,t){t=t||this.DEFAULT_NAMESPACE;var i=this._getItem(t+"_keys")||"|";-1!=i.indexOf("|"+e+"|")&&this._setItem(t+"_keys",i.replace("|"+e+"|","|")),this._removeItem("_"+t+"_"+e)},putMultiple:function(e,t,i,a){if(this.isValidKeyArray(e)===!1||!t instanceof Array||e.length!=t.length)throw new Error("Invalid arguments: keys = ["+e+"], values = ["+t+"]");if(null!=a&&"undefined"!=typeof a||(a=this.DEFAULT_NAMESPACE),0==this.isValidKey(a))throw new Error("Invalid namespace given: "+a);this._statusHandler=i;try{for(var n=0;n<e.length;n++)this.put(e[n],t[n],null,a)}catch(o){return void(i&&i(this.FAILED,e,o.toString(),a))}i&&i(this.SUCCESS,e,null)},getMultiple:function(e,t){if(this.isValidKeyArray(e)===!1)throw new Error("Invalid key array given: "+e);if(null!=t&&"undefined"!=typeof t||(t=this.DEFAULT_NAMESPACE),0==this.isValidKey(t))throw new Error("Invalid namespace given: "+t);for(var i=[],a=0;a<e.length;a++)i[a]=this.get(e[a],t);return i},removeMultiple:function(e,t){t=t||this.DEFAULT_NAMESPACE;for(var i=0;i<e.length;i++)this.remove(e[i],t)},isPermanent:function(){return!0},getMaximumSize:function(){return this.SIZE_NO_LIMIT},hasSettingsUI:function(){return!1},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface")},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface")}}),i.storage.manager.register("dojox.storage.AirEncryptedLocalStorageProvider",new i.storage.AirEncryptedLocalStorageProvider),i.storage.manager.initialize()}()});//# sourceMappingURL=AirEncryptedLocalStorageProvider.js.map