//>>built
define("dojox/storage/manager",["dojo/_base/config","dojo/_base/lang","dojo/_base/array"],function(config,lang,array){var manager=new function(){this.currentProvider=null,this.available=!1,this.providers=[],this._initialized=!1,this._onLoadListeners=[],this.initialize=function(){this.autodetect()},this.register=function(e,t){this.providers.push(t),this.providers[e]=t},this.setProvider=function(e){},this.autodetect=function(){if(!this._initialized){for(var e,t=config.forceStorageProvider||!1,i=0;i<this.providers.length;i++){if(e=this.providers[i],t&&t==e.declaredClass){e.isAvailable();break}if(!t&&e.isAvailable())break}if(!e)return this._initialized=!0,this.available=!1,this.currentProvider=null,void this.loaded();this.currentProvider=e,lang.mixin(dojox.storage,this.currentProvider),dojox.storage.initialize(),this._initialized=!0,this.available=!0}},this.isAvailable=function(){return this.available},this.addOnLoad=function(e){this._onLoadListeners.push(e),this.isInitialized()&&this._fireLoaded()},this.removeOnLoad=function(e){for(var t=0;t<this._onLoadListeners.length;t++)if(e==this._onLoadListeners[t]){this._onLoadListeners.splice(t,1);break}},this.isInitialized=function(){return(null==this.currentProvider||"dojox.storage.FlashStorageProvider"!=this.currentProvider.declaredClass||0!=dojox.flash.ready)&&this._initialized},this.supportsProvider=function(storageClass){try{var provider=eval("new "+storageClass+"()"),results=provider.isAvailable();return results||!1}catch(e){return!1}},this.getProvider=function(){return this.currentProvider},this.loaded=function(){this._fireLoaded()},this._fireLoaded=function(){array.forEach(this._onLoadListeners,function(e){try{e()}catch(e){}})},this.getResourceList=function(){var e=[];return array.forEach(dojox.storage.manager.providers,function(t){e=e.concat(t.getResourceList())}),e}};return manager});//# sourceMappingURL=manager.js.map