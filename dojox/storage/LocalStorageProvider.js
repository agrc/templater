//>>built
define("dojox/storage/LocalStorageProvider",["dojo","dijit","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(e,t,i){e.provide("dojox.storage.LocalStorageProvider"),e.require("dojox.storage.Provider"),e.require("dojox.storage.manager"),e.declare("dojox.storage.LocalStorageProvider",[i.storage.Provider],{store:null,initialize:function(){this.store=localStorage,this.initialized=!0,i.storage.manager.loaded()},isAvailable:function(){return"undefined"!=typeof localStorage},put:function(t,i,a,o){this._assertIsValidKey(t),o=o||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(o);var r=this.getFullKey(t,o);i=e.toJson(i);try{this.store.setItem(r,i),a&&a(this.SUCCESS,t,null,o)}catch(n){a&&a(this.FAILED,t,n.toString(),o)}},get:function(t,i){return this._assertIsValidKey(t),i=i||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(i),t=this.getFullKey(t,i),e.fromJson(this.store.getItem(t))},getKeys:function(e){e=e||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(e),e="__"+e+"_";for(var t=[],i=0;i<this.store.length;i++){var a=this.store.key(i);this._beginsWith(a,e)&&(a=a.substring(e.length),t.push(a))}return t},clear:function(t){t=t||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(t),t="__"+t+"_";for(var i=[],a=0;a<this.store.length;a++)this._beginsWith(this.store.key(a),t)&&i.push(this.store.key(a));e.forEach(i,e.hitch(this.store,"removeItem"))},remove:function(e,t){t=t||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(t),this.store.removeItem(this.getFullKey(e,t))},getNamespaces:function(){var e=[this.DEFAULT_NAMESPACE],t={};t[this.DEFAULT_NAMESPACE]=!0;for(var i=/^__([^_]*)_/,a=0;a<this.store.length;a++){var o=this.store.key(a);if(1==i.test(o)){var r=o.match(i)[1];"undefined"==typeof t[r]&&(t[r]=!0,e.push(r))}}return e},isPermanent:function(){return!0},getMaximumSize:function(){return i.storage.SIZE_NO_LIMIT},hasSettingsUI:function(){return!1},isValidKey:function(e){return null===e||void 0===e?!1:/^[0-9A-Za-z_-]*$/.test(e)},isValidNamespace:function(e){return null===e||void 0===e?!1:/^[0-9A-Za-z-]*$/.test(e)},getFullKey:function(e,t){return"__"+t+"_"+e},_beginsWith:function(e,t){return t.length>e.length?!1:e.substring(0,t.length)===t},_assertIsValidNamespace:function(e){if(this.isValidNamespace(e)===!1)throw new Error("Invalid namespace given: "+e)},_assertIsValidKey:function(e){if(this.isValidKey(e)===!1)throw new Error("Invalid key given: "+e)}}),i.storage.manager.register("dojox.storage.LocalStorageProvider",new i.storage.LocalStorageProvider)});//# sourceMappingURL=LocalStorageProvider.js.map