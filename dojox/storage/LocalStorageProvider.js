//>>built
define("dojox/storage/LocalStorageProvider",["dojo/_base/declare","dojox/storage/Provider","dojox/storage/manager","dojo/_base/array","dojo/_base/lang","dojo/json"],function(e,t,i,r,o,n){var a=e("dojox.storage.LocalStorageProvider",[t],{store:null,initialize:function(){this.store=localStorage,this.initialized=!0,i.loaded()},isAvailable:function(){return"undefined"!=typeof localStorage},put:function(e,t,i,r){this._assertIsValidKey(e),r=r||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(r);var o=this.getFullKey(e,r);t=n.stringify(t);try{this.store.setItem(o,t),i&&i(this.SUCCESS,e,null,r)}catch(t){i&&i(this.FAILED,e,t.toString(),r)}},get:function(e,t){return this._assertIsValidKey(e),t=t||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(t),e=this.getFullKey(e,t),n.parse(this.store.getItem(e))},getKeys:function(e){e=e||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(e),e="__"+e+"_";for(var t=[],i=0;i<this.store.length;i++){var r=this.store.key(i);this._beginsWith(r,e)&&(r=r.substring(e.length),t.push(r))}return t},clear:function(e){e=e||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(e),e="__"+e+"_";for(var t=[],i=0;i<this.store.length;i++)this._beginsWith(this.store.key(i),e)&&t.push(this.store.key(i));r.forEach(t,o.hitch(this.store,"removeItem"))},remove:function(e,t){t=t||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(t),this.store.removeItem(this.getFullKey(e,t))},getNamespaces:function(){var e=[this.DEFAULT_NAMESPACE],t={};t[this.DEFAULT_NAMESPACE]=!0;for(var i=/^__([^_]*)_/,r=0;r<this.store.length;r++){var o=this.store.key(r);if(1==i.test(o)){var n=o.match(i)[1];void 0===t[n]&&(t[n]=!0,e.push(n))}}return e},isPermanent:function(){return!0},getMaximumSize:function(){return dojox.storage.SIZE_NO_LIMIT},hasSettingsUI:function(){return!1},isValidKey:function(e){return null!==e&&void 0!==e&&/^[0-9A-Za-z_-]*$/.test(e)},isValidNamespace:function(e){return null!==e&&void 0!==e&&/^[0-9A-Za-z-]*$/.test(e)},getFullKey:function(e,t){return"__"+t+"_"+e},_beginsWith:function(e,t){return!(t.length>e.length)&&e.substring(0,t.length)===t},_assertIsValidNamespace:function(e){if(!1===this.isValidNamespace(e))throw new Error("Invalid namespace given: "+e)},_assertIsValidKey:function(e){if(!1===this.isValidKey(e))throw new Error("Invalid key given: "+e)}});return i.register("dojox.storage.LocalStorageProvider",new a),a});//# sourceMappingURL=LocalStorageProvider.js.map