//>>built
require({cache:{"url:dojox/image/resources/Lightbox.html":'<div class="dojoxLightbox" dojoAttachPoint="containerNode">\n\t<div style="position:relative">\n\t\t<div dojoAttachPoint="imageContainer" class="dojoxLightboxContainer" dojoAttachEvent="onclick: _onImageClick">\n\t\t\t<img dojoAttachPoint="imgNode" src="${imgUrl}" class="${imageClass}" alt="${title}">\n\t\t\t<div class="dojoxLightboxFooter" dojoAttachPoint="titleNode">\n\t\t\t\t<div class="dijitInline LightboxClose" dojoAttachPoint="closeButtonNode"></div>\n\t\t\t\t<div class="dijitInline LightboxNext" dojoAttachPoint="nextButtonNode"></div>\t\n\t\t\t\t<div class="dijitInline LightboxPrev" dojoAttachPoint="prevButtonNode"></div>\n\t\t\t\t<div class="dojoxLightboxText" dojoAttachPoint="titleTextNode"><span dojoAttachPoint="textNode">${title}</span><span dojoAttachPoint="groupCount" class="dojoxLightboxGroupText"></span></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'}}),define("dojox/image/Lightbox",["require","dojo","dijit","dojox","dojo/text!./resources/Lightbox.html","dijit/Dialog","dojox/fx/_base"],function(e,t,a,i,r){t.experimental("dojox.image.Lightbox"),t.getObject("image",!0,i);var n=t.declare("dojox.image.Lightbox",a._Widget,{group:"",title:"",href:"",duration:500,modal:!1,_allowPassthru:!1,_attachedDialog:null,startup:function(){this.inherited(arguments);var e=a.byId("dojoxLightboxDialog");e?this._attachedDialog=e:(this._attachedDialog=new i.image.LightboxDialog({id:"dojoxLightboxDialog"}),this._attachedDialog.startup()),this.store||(this._addSelf(),this.connect(this.domNode,"onclick","_handleClick"))},_addSelf:function(){this._attachedDialog.addImage({href:this.href,title:this.title},this.group||null)},_handleClick:function(e){this._allowPassthru||(e.preventDefault(),this.show())},show:function(){this._attachedDialog.show(this)},hide:function(){this._attachedDialog.hide()},disable:function(){this._allowPassthru=!0},enable:function(){this._allowPassthru=!1},onClick:function(){},destroy:function(){this._attachedDialog.removeImage(this),this.inherited(arguments)}});return n.LightboxDialog=t.declare("dojox.image.LightboxDialog",a.Dialog,{title:"",inGroup:null,imgUrl:a._Widget.prototype._blankGif,errorMessage:"Image not found.",adjust:!0,modal:!1,imageClass:"dojoxLightboxImage",errorImg:e.toUrl("./resources/images/warning.png"),templateString:r,constructor:function(e){this._groups=this._groups||e&&e._groups||{XnoGroupX:[]}},startup:function(){return this.inherited(arguments),this._animConnects=[],this.connect(this.nextButtonNode,"onclick","_nextImage"),this.connect(this.prevButtonNode,"onclick","_prevImage"),this.connect(this.closeButtonNode,"onclick","hide"),this._makeAnims(),this._vp=t.window.getBox(),this},show:function(e){var i=this;if(this._lastGroup=e,i.open||(i.inherited(arguments),i._modalconnects.push(t.connect(t.global,"onscroll",this,"_position"),t.connect(t.global,"onresize",this,"_position"),t.connect(t.body(),"onkeypress",this,"_handleKey")),e.modal||i._modalconnects.push(t.connect(a._underlay.domNode,"onclick",this,"onCancel"))),this._wasStyled){var r=t.create("img",{className:i.imageClass},i.imgNode,"after");t.destroy(i.imgNode),i.imgNode=r,i._makeAnims(),i._wasStyled=!1}t.style(i.imgNode,"opacity","0"),t.style(i.titleNode,"opacity","0");var n=e.href;if(e.group&&"XnoGroupX"!==e||i.inGroup){if(i.inGroup||(i.inGroup=i._groups[e.group],t.forEach(i.inGroup,function(t,a){t.href==e.href&&(i._index=a)})),!i._index){i._index=0;var o=i.inGroup[i._index];n=o&&o.href||i.errorImg}i.groupCount.innerHTML=" ("+(i._index+1)+" of "+Math.max(1,i.inGroup.length)+")",i.prevButtonNode.style.visibility="visible",i.nextButtonNode.style.visibility="visible"}else i.groupCount.innerHTML="",i.prevButtonNode.style.visibility="hidden",i.nextButtonNode.style.visibility="hidden";e.leaveTitle||(i.textNode.innerHTML=e.title),i._ready(n)},_ready:function(e){var a=this;a._imgError=t.connect(a.imgNode,"error",a,function(){t.disconnect(a._imgError),a.imgNode.src=a.errorImg,a.textNode.innerHTML=a.errorMessage}),a._imgConnect=t.connect(a.imgNode,"load",a,function(e){a.resizeTo({w:a.imgNode.width,h:a.imgNode.height,duration:a.duration}),t.disconnect(a._imgConnect),a._imgError&&t.disconnect(a._imgError)}),a.imgNode.src=e},_nextImage:function(){this.inGroup&&(this._index+1<this.inGroup.length?this._index++:this._index=0,this._loadImage())},_prevImage:function(){this.inGroup&&(0==this._index?this._index=this.inGroup.length-1:this._index--,this._loadImage())},_loadImage:function(){this._loadingAnim.play(1)},_prepNodes:function(){this._imageReady=!1,this.inGroup&&this.inGroup[this._index]?this.show({href:this.inGroup[this._index].href,title:this.inGroup[this._index].title}):this.show({title:this.errorMessage,href:this.errorImg})},_calcTitleSize:function(){var e=t.map(t.query("> *",this.titleNode).position(),function(e){return e.h});return{h:Math.max.apply(Math,e)}},resizeTo:function(e,a){var r="border-box"==t.boxModel?t._getBorderExtents(this.domNode).w:0,n=a||this._calcTitleSize();this._lastTitleSize=n,this.adjust&&(e.h+n.h+r+80>this._vp.h||e.w+r+60>this._vp.w)&&(this._lastSize=e,e=this._scaleToFit(e)),this._currentSize=e;var o=i.fx.sizeTo({node:this.containerNode,duration:e.duration||this.duration,width:e.w+r,height:e.h+n.h+r});this.connect(o,"onEnd","_showImage"),o.play(15)},_scaleToFit:function(e){var t={},a={w:this._vp.w-80,h:this._vp.h-60-this._lastTitleSize.h},i=a.w/a.h,r=e.w/e.h;return r>=i?(t.h=a.w/r,t.w=a.w):(t.w=r*a.h,t.h=a.h),this._wasStyled=!0,this._setImageSize(t),t.duration=e.duration,t},_setImageSize:function(e){var t=this.imgNode;t.height=e.h,t.width=e.w},_size:function(){},_position:function(e){this._vp=t.window.getBox(),this.inherited(arguments),e&&"resize"==e.type&&(this._wasStyled?(this._setImageSize(this._lastSize),this.resizeTo(this._lastSize)):(this.imgNode.height+80>this._vp.h||this.imgNode.width+60>this._vp.h)&&this.resizeTo({w:this.imgNode.width,h:this.imgNode.height}))},_showImage:function(){this._showImageAnim.play(1)},_showNav:function(){var e=t.marginBox(this.titleNode);e.h>this._lastTitleSize.h?this.resizeTo(this._wasStyled?this._lastSize:this._currentSize,e):this._showNavAnim.play(1)},hide:function(){t.fadeOut({node:this.titleNode,duration:200,onEnd:t.hitch(this,function(){this.imgNode.src=this._blankGif})}).play(5),this.inherited(arguments),this.inGroup=null,this._index=null},addImage:function(e,t){var a=t;e.href&&(a?(this._groups[a]||(this._groups[a]=[]),this._groups[a].push(e)):this._groups.XnoGroupX.push(e))},removeImage:function(e){var a=e.group||"XnoGroupX";t.every(this._groups[a],function(t,a,i){return t.href!=e.href||(i.splice(a,1),!1)})},removeGroup:function(e){this._groups[e]&&(this._groups[e]=[])},_handleKey:function(e){if(this.open){var a=t.keys;switch(e.charOrCode){case a.ESCAPE:this.hide();break;case a.DOWN_ARROW:case a.RIGHT_ARROW:case 78:this._nextImage();break;case a.UP_ARROW:case a.LEFT_ARROW:case 80:this._prevImage()}}},_makeAnims:function(){t.forEach(this._animConnects,t.disconnect),this._animConnects=[],this._showImageAnim=t.fadeIn({node:this.imgNode,duration:this.duration}),this._animConnects.push(t.connect(this._showImageAnim,"onEnd",this,"_showNav")),this._loadingAnim=t.fx.combine([t.fadeOut({node:this.imgNode,duration:175}),t.fadeOut({node:this.titleNode,duration:175})]),this._animConnects.push(t.connect(this._loadingAnim,"onEnd",this,"_prepNodes")),this._showNavAnim=t.fadeIn({node:this.titleNode,duration:225})},onClick:function(e){},_onImageClick:function(e){e&&e.target==this.imgNode&&(this.onClick(this._lastGroup),this._lastGroup.declaredClass&&this._lastGroup.onClick(this._lastGroup))}}),n});//# sourceMappingURL=Lightbox.js.map