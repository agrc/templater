//>>built
define("dojox/image/Badge",["dojo","dijit","dojox/main","dijit/_Widget","dijit/_TemplatedMixin","dojo/fx/easing"],function(e,t,i,a,o){return e.experimental("dojox.image.Badge"),e.getObject("image",!0,i),e.declare("dojox.image.Badge",[a,o],{baseClass:"dojoxBadge",templateString:'<div class="dojoxBadge" dojoAttachPoint="containerNode"></div>',children:"div.dojoxBadgeImage",rows:4,cols:5,cellSize:50,cellMargin:1,delay:2e3,threads:1,easing:"dojo.fx.easing.backOut",startup:function(){this._started||(e.isString(this.easing)&&(this.easing=e.getObject(this.easing)),this.inherited(arguments),this._init())},_init:function(){var t=0,i=this.cellSize;e.style(this.domNode,{width:i*this.cols+"px",height:i*this.rows+"px"}),this._nl=e.query(this.children,this.containerNode).forEach(function(a,o){var r=o%this.cols,n=t*i,s=r*i,l=2*this.cellMargin;e.style(a,{top:n+"px",left:s+"px",width:i-l+"px",height:i-l+"px"}),r==this.cols-1&&t++,e.addClass(a,this.baseClass+"Image")},this);for(var a=this._nl.length;this.threads--;){var o=Math.floor(Math.random()*a);setTimeout(e.hitch(this,"_enbiggen",{target:this._nl[o]}),this.delay*this.threads)}},_getCell:function(e){var t=this._nl.indexOf(e);if(t>=0){var i=t%this.cols,a=Math.floor(t/this.cols);return{x:i,y:a,n:this._nl[t],io:t}}},_getImage:function(){return"url('')"},_enbiggen:function(t){var i=this._getCell(t.target||t);if(i){var a=this.cellMargin,o=2*this.cellSize-2*a,r={height:o,width:o},n=function(){return Math.round(Math.random())};(i.x==this.cols-1||i.x>0&&n())&&(r.left=this.cellSize*(i.x-a)),(i.y==this.rows-1||i.y>0&&n())&&(r.top=this.cellSize*(i.y-a));var s=this.baseClass;e.addClass(i.n,s+"Top"),e.addClass(i.n,s+"Seen"),e.animateProperty({node:i.n,properties:r,onEnd:e.hitch(this,"_loadUnder",i,r),easing:this.easing}).play()}},_loadUnder:function(t,i){var a=t.io,o=i.left>=0,r=i.top>=0,n=this.cols,s=a+(o?-1:1),l=a+(r?-n:n),d=r?o?s-n:l+1:o?l-1:s+n,c=this.baseClass;e.forEach([s,l,d],function(t){var i=this._nl[t];i&&e.hasClass(i,c+"Seen")&&e.removeClass(i,c+"Seen")},this),setTimeout(e.hitch(this,"_disenbiggen",t,i),1.25*this.delay)},_disenbiggen:function(t,i){i.top>=0&&(i.top+=this.cellSize),i.left>=0&&(i.left+=this.cellSize);var a=this.cellSize-2*this.cellMargin;e.animateProperty({node:t.n,properties:e.mixin(i,{width:a,height:a}),onEnd:e.hitch(this,"_cycle",t,i)}).play(5)},_cycle:function(t,i){var a=this.baseClass;e.removeClass(t.n,a+"Top");var o=this._nl.filter(function(t){return!e.hasClass(t,a+"Seen")}),r=o[Math.floor(Math.random()*o.length)];setTimeout(e.hitch(this,"_enbiggen",{target:r}),this.delay/2)}})});//# sourceMappingURL=Badge.js.map