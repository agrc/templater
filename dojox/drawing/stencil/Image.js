//>>built
define("dojox/drawing/stencil/Image",["dojo","../util/oo","./_Base","../manager/_registry"],function(e,t,a,i){var r=t.declare(a,function(e){},{type:"dojox.drawing.stencil.Image",anchorType:"group",baseRender:!0,dataToPoints:function(e){return e=e||this.data,this.points=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],this.points},pointsToData:function(e){e=e||this.points;var t=e[0],a=e[2];return this.data={x:t.x,y:t.y,width:a.x-t.x,height:a.y-t.y,src:this.src||this.data.src},this.data},_createHilite:function(){this.remove(this.hit),this.hit=this.container.createRect(this.data).setStroke(this.style.current).setFill(this.style.current.fill),this._setNodeAtts(this.hit)},_create:function(e,t,a){this.remove(this[e]);var i=this.container.getParent();this[e]=i.createImage(t),this.container.add(this[e]),this._setNodeAtts(this[e])},render:function(e){return"auto"==this.data.width||isNaN(this.data.width)?void this.getImageSize(!0):(this.onBeforeRender(this),this.renderHit&&this._createHilite(),void this._create("shape",this.data,this.style.current))},getImageSize:function(t){if(!this._gettingSize){this._gettingSize=!0;var a=e.create("img",{src:this.data.src},e.body()),i=e.connect(a,"error",this,function(){e.disconnect(r),e.disconnect(i)}),r=e.connect(a,"load",this,function(){var i=e.marginBox(a);this.setData({x:this.data.x,y:this.data.y,src:this.data.src,width:i.w,height:i.h}),e.disconnect(r),e.destroy(a),t&&this.render(!0)})}}});return e.setObject("dojox.drawing.stencil.Image",r),i.register({name:"dojox.drawing.stencil.Image"},"stencil"),r});//# sourceMappingURL=Image.js.map