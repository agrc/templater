//>>built
define("dojox/drawing/ui/dom/Toolbar",["dojo","../../util/common"],function(dojo,commonUtil){return dojo.deprecated("dojox.drawing.ui.dom.Toolbar","It may not even make it to the 1.4 release.",1.4),dojo.declare("dojox.drawing.ui.dom.Toolbar",[],{baseClass:"drawingToolbar",buttonClass:"drawingButton",iconClass:"icon",constructor:function(e,t){dojo.addOnLoad(this,function(){this.domNode=dojo.byId(t),dojo.addClass(this.domNode,this.baseClass),this.parse()})},createIcon:function(e,t){var a=t&&t.setup?t.setup:{};if(a.iconClass){var i=a.iconClass?a.iconClass:"iconNone",r=a.tooltip?a.tooltip:"Tool",o=dojo.create("div",{title:r},e);dojo.addClass(o,this.iconClass),dojo.addClass(o,i),dojo.connect(e,"mouseup",function(t){dojo.stopEvent(t),dojo.removeClass(e,"active")}),dojo.connect(e,"mouseover",function(t){dojo.stopEvent(t),dojo.addClass(e,"hover")}),dojo.connect(e,"mousedown",this,function(t){dojo.stopEvent(t),dojo.addClass(e,"active")}),dojo.connect(e,"mouseout",this,function(t){dojo.stopEvent(t),dojo.removeClass(e,"hover")})}},createTool:function(e){e.innerHTML="";var t=dojo.attr(e,"tool");this.toolNodes[t]=e,dojo.attr(e,"tabIndex",1);var a=dojo.getObject(t);this.createIcon(e,a),this.drawing.registerTool(t,a),dojo.connect(e,"mouseup",this,function(a){dojo.stopEvent(a),dojo.removeClass(e,"active"),this.onClick(t)}),dojo.connect(e,"mouseover",function(t){dojo.stopEvent(t),dojo.addClass(e,"hover")}),dojo.connect(e,"mousedown",this,function(t){dojo.stopEvent(t),dojo.addClass(e,"active")}),dojo.connect(e,"mouseout",this,function(t){dojo.stopEvent(t),dojo.removeClass(e,"hover")})},parse:function(){var drawingId=dojo.attr(this.domNode,"drawingId");this.drawing=commonUtil.byId(drawingId),!this.drawing&&0&&console.error("Drawing not found based on 'drawingId' in Toolbar. "),this.toolNodes={};var _sel;dojo.forEach(this.domNode.childNodes,function(node,i){if(1===node.nodeType){node.className=this.buttonClass;var tool=dojo.attr(node,"tool"),action=dojo.attr(node,"action"),plugin=dojo.attr(node,"plugin");if(tool)0!=i&&"true"!=dojo.attr(node,"selected")||(_sel=tool),this.createTool(node);else if(plugin){var p={name:plugin,options:{}},opt=dojo.attr(node,"options");opt&&(p.options=eval("("+opt+")")),p.options.node=node,node.innerHTML="",this.drawing.addPlugin(p),this.createIcon(node,dojo.getObject(dojo.attr(node,"plugin")))}}},this),this.drawing.initPlugins(),dojo.connect(this.drawing,"setTool",this,"onSetTool"),this.drawing.setTool(_sel)},onClick:function(e){this.drawing.setTool(e)},onSetTool:function(e){for(var t in this.toolNodes)t==e?(dojo.addClass(this.toolNodes[e],"selected"),this.toolNodes[e].blur()):dojo.removeClass(this.toolNodes[t],"selected")}})});//# sourceMappingURL=Toolbar.js.map