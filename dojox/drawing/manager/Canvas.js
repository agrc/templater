//>>built
define("dojox/drawing/manager/Canvas",["dojo","../util/oo","dojox/gfx"],function(e,t,a){return t.declare(function(t){e.mixin(this,t);var i=e.contentBox(this.srcRefNode);this.height=this.parentHeight=t.height||i.h,this.width=this.parentWidth=t.width||i.w,this.domNode=e.create("div",{id:"canvasNode"},this.srcRefNode),e.style(this.domNode,{width:this.width,height:"auto"}),e.setSelectable(this.domNode,!1),this.id=this.id||this.util.uid("surface"),this.gfxSurface=a.createSurface(this.domNode,this.width,this.height),this.gfxSurface.whenLoaded(this,function(){setTimeout(e.hitch(this,function(){this.surfaceReady=!0,e.isIE||"silverlight"==a.renderer&&(this.id=this.domNode.firstChild.id),this.underlay=this.gfxSurface.createGroup(),this.surface=this.gfxSurface.createGroup(),this.overlay=this.gfxSurface.createGroup(),this.surface.setTransform({dx:0,dy:0,xx:1,yy:1}),this.gfxSurface.getDimensions=e.hitch(this.gfxSurface,"getDimensions"),t.callback&&t.callback(this.domNode)}),500)}),this._mouseHandle=this.mouse.register(this)},{zoom:1,useScrollbars:!0,baseClass:"drawingCanvas",resize:function(e,t){this.parentWidth=e,this.parentHeight=t,this.setDimensions(e,t)},setDimensions:function(t,a,i,r){var o=this.getScrollWidth();this.width=Math.max(t,this.parentWidth),this.height=Math.max(a,this.parentHeight),this.height>this.parentHeight&&(this.width-=o),this.width>this.parentWidth&&(this.height-=o),this.mouse.resize(this.width,this.height),this.gfxSurface.setDimensions(this.width,this.height),this.domNode.parentNode.scrollTop=r||0,this.domNode.parentNode.scrollLeft=i||0,this.useScrollbars?e.style(this.domNode.parentNode,{overflowY:this.height>this.parentHeight?"scroll":"hidden",overflowX:this.width>this.parentWidth?"scroll":"hidden"}):e.style(this.domNode.parentNode,{overflowY:"hidden",overflowX:"hidden"})},setZoom:function(e){this.zoom=e,this.surface.setTransform({xx:e,yy:e}),this.setDimensions(this.width*e,this.height*e)},onScroll:function(){},getScrollOffset:function(){return{top:this.domNode.parentNode.scrollTop,left:this.domNode.parentNode.scrollLeft}},getScrollWidth:function(){var t=e.create("div");t.innerHTML='<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:0;left:-1000px;"><div style="height:100px;"></div>';var a=t.firstChild;e.body().appendChild(a);var i=e.contentBox(a).h;e.style(a,"overflow","scroll");var r=i-e.contentBox(a).h;return e.destroy(a),this.getScrollWidth=function(){return r},r}})});//# sourceMappingURL=Canvas.js.map