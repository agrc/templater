//>>built
define("dojox/drawing/annotations/Angle",["dojo","../util/oo","../util/positioning"],function(e,t,a){return t.declare(function(e){this.stencil=e.stencil,this.util=e.stencil.util,this.mouse=e.stencil.mouse,this.stencil.connectMult([["onDrag",this,"showAngle"],["onUp",this,"hideAngle"],["onTransformBegin",this,"showAngle"],["onTransform",this,"showAngle"],["onTransformEnd",this,"hideAngle"]])},{type:"dojox.drawing.tools.custom",angle:0,showAngle:function(){if(this.stencil.selected||!this.stencil.created){if(this.stencil.getRadius()<this.stencil.minimumSize)return void this.hideAngle();var t=this.getAngleNode(),i=this.stencil.pointsToData(),r=a.angle({x:i.x1,y:i.y1},{x:i.x2,y:i.y2}),o=this.mouse.scrollOffset(),n=this.stencil.getTransform(),d=n.dx/this.mouse.zoom,s=n.dy/this.mouse.zoom;r.x/=this.mouse.zoom,r.y/=this.mouse.zoom;var l=this.stencil._offX+r.x-o.left+d,m=this.stencil._offY+r.y-o.top+s;e.style(t,{left:l+"px",top:m+"px",align:r.align});var u=this.stencil.getAngle();this.stencil.style.zAxis&&"vector"==this.stencil.shortType?t.innerHTML=this.stencil.data.cosphi>0?"out of":"into":"line"==this.stencil.shortType?t.innerHTML=this.stencil.style.zAxis?"out of":Math.ceil(u%180):t.innerHTML=Math.ceil(u)}},getAngleNode:function(){return this._angleNode||(this._angleNode=e.create("span",null,e.body()),e.addClass(this._angleNode,"textAnnotation"),e.style(this._angleNode,"opacity",1)),this._angleNode},hideAngle:function(){this._angleNode&&e.style(this._angleNode,"opacity")>.9&&(e.fadeOut({node:this._angleNode,duration:500,onEnd:function(t){e.destroy(t)}}).play(),this._angleNode=null)}})});//# sourceMappingURL=Angle.js.map