//>>built
define("dojox/grid/_ViewManager",["dojo/_base/declare","dojo/_base/sniff","dojo/dom-class"],function(e,t,a){return e("dojox.grid._ViewManager",null,{constructor:function(e){this.grid=e},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(e){e.idx=this.views.length,this.views.push(e)},destroyViews:function(){for(var e,t=0;e=this.views[t];t++)e.destroy();this.views=[]},getContentNodes:function(){for(var e,t=[],a=0;e=this.views[a];a++)t.push(e.contentNode);return t},forEach:function(e){for(var t,a=0;t=this.views[a];a++)e(t,a)},onEach:function(e,t){t=t||[];for(var a,i=0;a=this.views[i];i++)e in a&&a[e].apply(a,t)},normalizeHeaderNodeHeight:function(){for(var e,t=[],a=0;e=this.views[a];a++)e.headerContentNode.firstChild&&t.push(e.headerContentNode);this.normalizeRowNodeHeights(t)},normalizeRowNodeHeights:function(e){var i=0,r=[];if(this.grid.rowHeight)i=this.grid.rowHeight;else{if(e.length<=1)return;for(var o,n=0;o=e[n];n++)a.contains(o,"dojoxGridNonNormalizedCell")||(r[n]=o.firstChild.offsetHeight,i=Math.max(i,r[n]));i=i>=0?i:0,(t("mozilla")||t("ie")>8)&&i&&i++}for(n=0;o=e[n];n++)r[n]!=i&&(o.firstChild.style.height=i+"px")},resetHeaderNodeHeight:function(){for(var e,t,a=0;e=this.views[a];a++)(t=e.headerContentNode.firstChild)&&(t.style.height="")},renormalizeRow:function(e){for(var t,a,i=[],r=0;(t=this.views[r])&&(a=t.getRowNode(e));r++)a.firstChild.style.height="",i.push(a);this.normalizeRowNodeHeights(i)},getViewWidth:function(e){return this.views[e].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight(),this.forEach(function(e){e.headerContentNode.style.height=""});var e=0;return this.forEach(function(t){e=Math.max(t.headerNode.offsetHeight,e)}),e},measureContent:function(){var e=0;return this.forEach(function(t){e=Math.max(t.domNode.offsetHeight,e)}),e},findClient:function(e){var t=this.grid.elasticView||-1;if(t<0)for(var a,i=1;a=this.views[i];i++)if(a.viewWidth){for(i=1;a=this.views[i];i++)if(!a.viewWidth){t=i;break}break}return t<0&&(t=Math.floor(this.views.length/2)),t},arrange:function(e,a){var i,r,o,n=this.views.length,s=this,d=a<=0?n:this.findClient(),l=function(e,a){var i=e.domNode.style,r=e.headerNode.style;s.grid.isLeftToRight()?(i.left=a+"px",r.left=a+"px"):(i.right=a+"px",t("ff")<4?r.right=a+e.getScrollbarWidth()+"px":r.right=a+"px",t("webkit")||"auto"==r.width||(r.width=parseInt(r.width,10)-e.getScrollbarWidth()+"px")),i.top="0px",r.top=0};for(i=0;(r=this.views[i])&&i<d;i++)o=this.getViewWidth(i),r.setSize(o,0),l(r,e),o=r.headerContentNode&&r.headerContentNode.firstChild?r.getColumnsWidth()+r.getScrollbarWidth():r.domNode.offsetWidth,e+=o;i++;for(var h=a,u=n-1;(r=this.views[u])&&i<=u;u--)o=this.getViewWidth(u),r.setSize(o,0),o=r.domNode.offsetWidth,h-=o,l(r,h);return d<n&&(r=this.views[d],o=Math.max(1,h-e),r.setSize(o+"px",0),l(r,e)),e},renderRow:function(e,t,a){for(var i,r,o,n=[],s=0;(i=this.views[s])&&(r=t[s]);s++)o=i.renderRow(e),r.appendChild(o),n.push(o);a||this.normalizeRowNodeHeights(n)},rowRemoved:function(e){this.onEach("rowRemoved",[e])},updateRow:function(e,t){for(var a,i=0;a=this.views[i];i++)a.updateRow(e);t||this.renormalizeRow(e)},updateRowStyles:function(e){this.onEach("updateRowStyles",[e])},setScrollTop:function(e){for(var a,i=e,r=0;a=this.views[r];r++)i=a.setScrollTop(e),t("ie")&&a.headerNode&&a.scrollboxNode&&(a.headerNode.scrollLeft=a.scrollboxNode.scrollLeft);return i},getFirstScrollingView:function(){for(var e,t=0;e=this.views[t];t++)if(e.hasHScrollbar()||e.hasVScrollbar())return e;return null}})});//# sourceMappingURL=_ViewManager.js.map