//>>built
define("dojox/grid/_ViewManager",["dojo/_base/declare","dojo/_base/sniff","dojo/dom-class"],function(e,t,i){return e("dojox.grid._ViewManager",null,{constructor:function(e){this.grid=e},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(e){e.idx=this.views.length,this.views.push(e)},destroyViews:function(){for(var e,t=0;e=this.views[t];t++)e.destroy();this.views=[]},getContentNodes:function(){for(var e,t=[],i=0;e=this.views[i];i++)t.push(e.contentNode);return t},forEach:function(e){for(var t,i=0;t=this.views[i];i++)e(t,i)},onEach:function(e,t){t=t||[];for(var i,a=0;i=this.views[a];a++)e in i&&i[e].apply(i,t)},normalizeHeaderNodeHeight:function(){for(var e,t=[],i=0;e=this.views[i];i++)e.headerContentNode.firstChild&&t.push(e.headerContentNode);this.normalizeRowNodeHeights(t)},normalizeRowNodeHeights:function(e){var a=0,o=[];if(this.grid.rowHeight)a=this.grid.rowHeight;else{if(e.length<=1)return;for(var r,n=0;r=e[n];n++)i.contains(r,"dojoxGridNonNormalizedCell")||(o[n]=r.firstChild.offsetHeight,a=Math.max(a,o[n]));a=a>=0?a:0,(t("mozilla")||t("ie")>8)&&a&&a++}for(n=0;r=e[n];n++)o[n]!=a&&(r.firstChild.style.height=a+"px")},resetHeaderNodeHeight:function(){for(var e,t,i=0;e=this.views[i];i++)t=e.headerContentNode.firstChild,t&&(t.style.height="")},renormalizeRow:function(e){for(var t,i,a=[],o=0;(t=this.views[o])&&(i=t.getRowNode(e));o++)i.firstChild.style.height="",a.push(i);this.normalizeRowNodeHeights(a)},getViewWidth:function(e){return this.views[e].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight(),this.forEach(function(e){e.headerContentNode.style.height=""});var e=0;return this.forEach(function(t){e=Math.max(t.headerNode.offsetHeight,e)}),e},measureContent:function(){var e=0;return this.forEach(function(t){e=Math.max(t.domNode.offsetHeight,e)}),e},findClient:function(e){var t=this.grid.elasticView||-1;if(0>t)for(var i,a=1;i=this.views[a];a++)if(i.viewWidth){for(a=1;i=this.views[a];a++)if(!i.viewWidth){t=a;break}break}return 0>t&&(t=Math.floor(this.views.length/2)),t},arrange:function(e,i){var a,o,r,n=this.views.length,s=this,l=0>=i?n:this.findClient(),d=function(e,i){var a=e.domNode.style,o=e.headerNode.style;s.grid.isLeftToRight()?(a.left=i+"px",o.left=i+"px"):(a.right=i+"px",t("ff")<4?o.right=i+e.getScrollbarWidth()+"px":o.right=i+"px",t("webkit")||"auto"==o.width||(o.width=parseInt(o.width,10)-e.getScrollbarWidth()+"px")),a.top="0px",o.top=0};for(a=0;(o=this.views[a])&&l>a;a++)r=this.getViewWidth(a),o.setSize(r,0),d(o,e),r=o.headerContentNode&&o.headerContentNode.firstChild?o.getColumnsWidth()+o.getScrollbarWidth():o.domNode.offsetWidth,e+=r;a++;for(var h=i,u=n-1;(o=this.views[u])&&u>=a;u--)r=this.getViewWidth(u),o.setSize(r,0),r=o.domNode.offsetWidth,h-=r,d(o,h);return n>l&&(o=this.views[l],r=Math.max(1,h-e),o.setSize(r+"px",0),d(o,e)),e},renderRow:function(e,t,i){for(var a,o,r,n=[],s=0;(a=this.views[s])&&(o=t[s]);s++)r=a.renderRow(e),o.appendChild(r),n.push(r);i||this.normalizeRowNodeHeights(n)},rowRemoved:function(e){this.onEach("rowRemoved",[e])},updateRow:function(e,t){for(var i,a=0;i=this.views[a];a++)i.updateRow(e);t||this.renormalizeRow(e)},updateRowStyles:function(e){this.onEach("updateRowStyles",[e])},setScrollTop:function(e){for(var i,a=e,o=0;i=this.views[o];o++)a=i.setScrollTop(e),t("ie")&&i.headerNode&&i.scrollboxNode&&(i.headerNode.scrollLeft=i.scrollboxNode.scrollLeft);return a},getFirstScrollingView:function(){for(var e,t=0;e=this.views[t];t++)if(e.hasHScrollbar()||e.hasVScrollbar())return e;return null}})});//# sourceMappingURL=_ViewManager.js.map