//>>built
define("dojox/grid/_ViewManager",["dojo/_base/declare","dojo/_base/sniff","dojo/dom-class"],function(e,t,i){return e("dojox.grid._ViewManager",null,{constructor:function(e){this.grid=e},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(e){e.idx=this.views.length,this.views.push(e)},destroyViews:function(){for(var e,t=0;e=this.views[t];t++)e.destroy();this.views=[]},getContentNodes:function(){for(var e,t=[],i=0;e=this.views[i];i++)t.push(e.contentNode);return t},forEach:function(e){for(var t,i=0;t=this.views[i];i++)e(t,i)},onEach:function(e,t){t=t||[];for(var i,a=0;i=this.views[a];a++)e in i&&i[e].apply(i,t)},normalizeHeaderNodeHeight:function(){for(var e,t=[],i=0;e=this.views[i];i++)e.headerContentNode.firstChild&&t.push(e.headerContentNode);this.normalizeRowNodeHeights(t)},normalizeRowNodeHeights:function(e){var a=0,r=[];if(this.grid.rowHeight)a=this.grid.rowHeight;else{if(e.length<=1)return;for(var n,o=0;n=e[o];o++)i.contains(n,"dojoxGridNonNormalizedCell")||(r[o]=n.firstChild.offsetHeight,a=Math.max(a,r[o]));a=a>=0?a:0,(t("mozilla")||t("ie")>8)&&a&&a++}for(o=0;n=e[o];o++)r[o]!=a&&(n.firstChild.style.height=a+"px")},resetHeaderNodeHeight:function(){for(var e,t,i=0;e=this.views[i];i++)t=e.headerContentNode.firstChild,t&&(t.style.height="")},renormalizeRow:function(e){for(var t,i,a=[],r=0;(t=this.views[r])&&(i=t.getRowNode(e));r++)i.firstChild.style.height="",a.push(i);this.normalizeRowNodeHeights(a)},getViewWidth:function(e){return this.views[e].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight(),this.forEach(function(e){e.headerContentNode.style.height=""});var e=0;return this.forEach(function(t){e=Math.max(t.headerNode.offsetHeight,e)}),e},measureContent:function(){var e=0;return this.forEach(function(t){e=Math.max(t.domNode.offsetHeight,e)}),e},findClient:function(e){var t=this.grid.elasticView||-1;if(0>t)for(var i,a=1;i=this.views[a];a++)if(i.viewWidth){for(a=1;i=this.views[a];a++)if(!i.viewWidth){t=a;break}break}return 0>t&&(t=Math.floor(this.views.length/2)),t},arrange:function(e,i){var a,r,n,o=this.views.length,s=this,l=0>=i?o:this.findClient(),d=function(e,i){var a=e.domNode.style,r=e.headerNode.style;s.grid.isLeftToRight()?(a.left=i+"px",r.left=i+"px"):(a.right=i+"px",t("ff")<4?r.right=i+e.getScrollbarWidth()+"px":r.right=i+"px",t("webkit")||"auto"==r.width||(r.width=parseInt(r.width,10)-e.getScrollbarWidth()+"px")),a.top="0px",r.top=0};for(a=0;(r=this.views[a])&&l>a;a++)n=this.getViewWidth(a),r.setSize(n,0),d(r,e),n=r.headerContentNode&&r.headerContentNode.firstChild?r.getColumnsWidth()+r.getScrollbarWidth():r.domNode.offsetWidth,e+=n;a++;for(var h=i,u=o-1;(r=this.views[u])&&u>=a;u--)n=this.getViewWidth(u),r.setSize(n,0),n=r.domNode.offsetWidth,h-=n,d(r,h);return o>l&&(r=this.views[l],n=Math.max(1,h-e),r.setSize(n+"px",0),d(r,e)),e},renderRow:function(e,t,i){for(var a,r,n,o=[],s=0;(a=this.views[s])&&(r=t[s]);s++)n=a.renderRow(e),r.appendChild(n),o.push(n);i||this.normalizeRowNodeHeights(o)},rowRemoved:function(e){this.onEach("rowRemoved",[e])},updateRow:function(e,t){for(var i,a=0;i=this.views[a];a++)i.updateRow(e);t||this.renormalizeRow(e)},updateRowStyles:function(e){this.onEach("updateRowStyles",[e])},setScrollTop:function(e){for(var i,a=e,r=0;i=this.views[r];r++)a=i.setScrollTop(e),t("ie")&&i.headerNode&&i.scrollboxNode&&(i.headerNode.scrollLeft=i.scrollboxNode.scrollLeft);return a},getFirstScrollingView:function(){for(var e,t=0;e=this.views[t];t++)if(e.hasHScrollbar()||e.hasVScrollbar())return e;return null}})});//# sourceMappingURL=_ViewManager.js.map