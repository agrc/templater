//>>built
define("dojox/grid/_SelectionPreserver",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array"],function(e,t,i,a){return e("dojox.grid._SelectionPreserver",null,{constructor:function(e){this.selection=e;var a=this.grid=e.grid;this.reset(),this._connects=[t.connect(a,"_setStore",this,"reset"),t.connect(a,"_addItem",this,"_reSelectById"),t.connect(e,"onSelected",i.hitch(this,"_selectById",!0)),t.connect(e,"onDeselected",i.hitch(this,"_selectById",!1)),t.connect(e,"deselectAll",this,"reset")]},destroy:function(){this.reset(),a.forEach(this._connects,t.disconnect),delete this._connects},reset:function(){this._selectedById={}},_reSelectById:function(e,t){e&&this.grid._hasIdentity&&(this.selection.selected[t]=this._selectedById[this.grid.store.getIdentity(e)])},_selectById:function(e,t){if("none"!=this.selection.mode&&this.grid._hasIdentity){var i=t,a=this.grid;if("number"==typeof t||"string"==typeof t){var o=a._by_idx[t];i=o&&o.item}return i&&(this._selectedById[a.store.getIdentity(i)]=!!e),i}}})});//# sourceMappingURL=_SelectionPreserver.js.map