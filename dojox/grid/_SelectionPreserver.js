//>>built
define("dojox/grid/_SelectionPreserver",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array"],function(e,t,i,r){return e("dojox.grid._SelectionPreserver",null,{constructor:function(e){this.selection=e;var r=this.grid=e.grid;this.reset(),this._connects=[t.connect(r,"_setStore",this,"reset"),t.connect(r,"_addItem",this,"_reSelectById"),t.connect(e,"onSelected",i.hitch(this,"_selectById",!0)),t.connect(e,"onDeselected",i.hitch(this,"_selectById",!1)),t.connect(e,"deselectAll",this,"reset")]},destroy:function(){this.reset(),r.forEach(this._connects,t.disconnect),delete this._connects},reset:function(){this._selectedById={}},_reSelectById:function(e,t){e&&this.grid._hasIdentity&&(this.selection.selected[t]=this._selectedById[this.grid.store.getIdentity(e)])},_selectById:function(e,t){if("none"!=this.selection.mode&&this.grid._hasIdentity){var i=t,r=this.grid;if("number"==typeof t||"string"==typeof t){var a=r._by_idx[t];i=a&&a.item}return i&&(this._selectedById[r.store.getIdentity(i)]=!!e),i}}})});//# sourceMappingURL=_SelectionPreserver.js.map