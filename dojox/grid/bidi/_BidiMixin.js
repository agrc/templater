//>>built
define("dojox/grid/bidi/_BidiMixin",["../../main","dojo/_base/lang","../_Builder","dijit/_BidiSupport","../_Grid","../cells/_base","../cells/dijit"],function(e,t,i,a,n,r,o){t.extend(n,{setCellNodeTextDirection:function(e,t,i){this.getCell(e).getNode(t).style.direction=i||""},getCellNodeTextDirection:function(e,t){return this.getCell(e).getNode(t).style.direction},_setTextDirAttr:function(e){this.textDir=e,this.render()}}),t.extend(i._ContentBuilder,{_getTextDirStyle:function(e,t,i){var n=this.grid.getItem(i),r="";if("auto"===e){var o=t.get?t.get(i,n):t.value||t.defaultValue;o&&(e=a.prototype._checkContextual(o))}return r=" direction:"+e+";"}}),t.extend(i._HeaderBuilder,{_getTextDirStyle:function(e,t,i){if("auto"===e){var n=i||t.name||t.grid.getCellName(t);n&&(e=a.prototype._checkContextual(n))}return" direction:"+e+"; "}}),t.extend(r.Cell,{LRE:"‪",RLE:"‫",PDF:"‬",KEY_HANDLER:'onkeyup=\' javascript:(function(){var target; if (event.target) target = event.target; else if (event.srcElement) target = event.srcElement; if(!target) return;var regExMatch = /[A-Za-zא-ٟ٪-ۯۺ-߿יִ-﷿ﹰ-ﻼ]/.exec(target.value);target.dir = regExMatch ? ( regExMatch[0] <= "z" ? "ltr" : "rtl" ) : target.dir ? target.dir : "ltr"; })();\'',_getTextDirMarkup:function(e){var t="",i=this.textDir||this.grid.textDir;return i&&("auto"===i&&(t=this.KEY_HANDLER,i=a.prototype._checkContextual(e)),t+=" dir='"+i+"'; "),t},formatEditing:function(e,t){return this.needFormatNode(e,t),'<input class="dojoxGridInput" '+this._getTextDirMarkup(e)+' type="text" value="'+e+'">'},_enforceTextDirWithUcc:function(e,t){return e="auto"===e?a.prototype._checkContextual(t):e,("rtl"===e?this.RLE:this.LRE)+t+this.PDF}}),t.extend(r.Select,{_getValueCallOrig:e.grid.cells.Select.prototype.getValue,getValue:function(e){var t=this._getValueCallOrig(e);return t&&(this.textDir||this.grid.textDir)&&(t=t.replace(/\u202A|\u202B|\u202C/g,"")),t},formatEditing:function(e,t){this.needFormatNode(e,t);for(var i,a,n=['<select dir = "'+(this.grid.isLeftToRight()?"ltr":"rtl")+'" class="dojoxGridSelect">'],r=0;void 0!==(i=this.options[r])&&void 0!==(a=this.values[r]);r++)a=a.replace?a.replace(/&/g,"&amp;").replace(/</g,"&lt;"):a,i=i.replace?i.replace(/&/g,"&amp;").replace(/</g,"&lt;"):i,(this.textDir||this.grid.textDir)&&(i=this._enforceTextDirWithUcc(this.textDir||this.grid.textDir,i)),n.push("<option",e==a?" selected":"",' value = "'+a+'"',">",i,"</option>");return n.push("</select>"),n.join("")}}),t.extend(o.ComboBox,{getWidgetPropsCallOrig:e.grid.cells.ComboBox.prototype.getWidgetProps,getWidgetProps:function(e){var t=this.getWidgetPropsCallOrig(e);return(this.textDir||this.grid.textDir)&&(t.textDir=this.textDir||this.grid.textDir),t}}),t.extend(o._Widget,{getWidgetPropsCallOrig:e.grid.cells._Widget.prototype.getWidgetProps,getWidgetProps:function(e){var t=this.getWidgetPropsCallOrig(e);return(this.textDir||this.grid.textDir)&&(t.textDir=this.textDir||this.grid.textDir),t}})});//# sourceMappingURL=_BidiMixin.js.map