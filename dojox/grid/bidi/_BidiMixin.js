//>>built
define("dojox/grid/bidi/_BidiMixin",["../../main","dojo/_base/lang","../_Builder","dijit/_BidiSupport","../_Grid","../cells/_base","../cells/dijit"],function(e,t,a,i,r,n,o){t.extend(r,{setCellNodeTextDirection:function(e,t,a){this.getCell(e).getNode(t).style.direction=a||""},getCellNodeTextDirection:function(e,t){return this.getCell(e).getNode(t).style.direction},_setTextDirAttr:function(e){this.textDir=e,this.render()}}),t.extend(a._ContentBuilder,{_getTextDirStyle:function(e,t,a){var r=this.grid.getItem(a),n="";if("auto"===e){var o=t.get?t.get(a,r):t.value||t.defaultValue;o&&(e=i.prototype._checkContextual(o))}return n=" direction:"+e+";"}}),t.extend(a._HeaderBuilder,{_getTextDirStyle:function(e,t,a){if("auto"===e){var r=a||t.name||t.grid.getCellName(t);r&&(e=i.prototype._checkContextual(r))}return" direction:"+e+"; "}}),t.extend(n.Cell,{LRE:"‪",RLE:"‫",PDF:"‬",KEY_HANDLER:'onkeyup=\' javascript:(function(){var target; if (event.target) target = event.target; else if (event.srcElement) target = event.srcElement; if(!target) return;var regExMatch = /[A-Za-zא-ٟ٪-ۯۺ-߿יִ-﷿ﹰ-ﻼ]/.exec(target.value);target.dir = regExMatch ? ( regExMatch[0] <= "z" ? "ltr" : "rtl" ) : target.dir ? target.dir : "ltr"; })();\'',_getTextDirMarkup:function(e){var t="",a=this.textDir||this.grid.textDir;return a&&("auto"===a&&(t=this.KEY_HANDLER,a=i.prototype._checkContextual(e)),t+=" dir='"+a+"'; "),t},formatEditing:function(e,t){return this.needFormatNode(e,t),'<input class="dojoxGridInput" '+this._getTextDirMarkup(e)+' type="text" value="'+e+'">'},_enforceTextDirWithUcc:function(e,t){return e="auto"===e?i.prototype._checkContextual(t):e,("rtl"===e?this.RLE:this.LRE)+t+this.PDF}}),t.extend(n.Select,{_getValueCallOrig:e.grid.cells.Select.prototype.getValue,getValue:function(e){var t=this._getValueCallOrig(e);return t&&(this.textDir||this.grid.textDir)&&(t=t.replace(/\u202A|\u202B|\u202C/g,"")),t},formatEditing:function(e,t){this.needFormatNode(e,t);for(var a,i,r=['<select dir = "'+(this.grid.isLeftToRight()?"ltr":"rtl")+'" class="dojoxGridSelect">'],n=0;void 0!==(a=this.options[n])&&void 0!==(i=this.values[n]);n++)i=i.replace?i.replace(/&/g,"&amp;").replace(/</g,"&lt;"):i,a=a.replace?a.replace(/&/g,"&amp;").replace(/</g,"&lt;"):a,(this.textDir||this.grid.textDir)&&(a=this._enforceTextDirWithUcc(this.textDir||this.grid.textDir,a)),r.push("<option",e==i?" selected":"",' value = "'+i+'"',">",a,"</option>");return r.push("</select>"),r.join("")}}),t.extend(o.ComboBox,{getWidgetPropsCallOrig:e.grid.cells.ComboBox.prototype.getWidgetProps,getWidgetProps:function(e){var t=this.getWidgetPropsCallOrig(e);return(this.textDir||this.grid.textDir)&&(t.textDir=this.textDir||this.grid.textDir),t}}),t.extend(o._Widget,{getWidgetPropsCallOrig:e.grid.cells._Widget.prototype.getWidgetProps,getWidgetProps:function(e){var t=this.getWidgetPropsCallOrig(e);return(this.textDir||this.grid.textDir)&&(t.textDir=this.textDir||this.grid.textDir),t}})});//# sourceMappingURL=_BidiMixin.js.map