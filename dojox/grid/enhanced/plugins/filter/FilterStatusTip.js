//>>built
require({cache:{"url:dojox/grid/enhanced/templates/FilterStatusPane.html":'<div class="dojoxGridFStatusTip"\n	><div class="dojoxGridFStatusTipHead"\n		><span class="dojoxGridFStatusTipTitle" dojoAttachPoint="statusTitle"></span\n		><span class="dojoxGridFStatusTipRel" dojoAttachPoint="statusRel"></span\n	></div\n	><div class="dojoxGridFStatusTipDetail" dojoAttachPoint="statusDetailNode"\n	></div\n></div>\n'}}),define("dojox/grid/enhanced/plugins/filter/FilterStatusTip",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/query","dojo/string","dojo/date/locale","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/TooltipDialog","dijit/form/Button","dijit/_base/popup","dojo/text!../../templates/FilterStatusPane.html","dojo/i18n!../../nls/Filter"],function(e,t,i,a,o,n,r,s,l,d,h,u,c){var m="",f="",p="",g="",y="dojoxGridFStatusTipOddRow",v="dojoxGridFStatusTipHandle",b="dojoxGridFStatusTipCondition",x="dojoxGridFStatusTipDelRuleBtnIcon",w="</tbody></table>",M=e("dojox.grid.enhanced.plugins.filter.FilterStatusPane",[r,s],{templateString:c});return e("dojox.grid.enhanced.plugins.filter.FilterStatusTip",null,{constructor:function(e){var t=this.plugin=e.plugin;this._statusHeader=["<table border='0' cellspacing='0' class='",m,"'><thead><tr class='",f,"'><th class='",p,"'><div>",t.nls.statusTipHeaderColumn,"</div></th><th class='",p," lastColumn'><div>",t.nls.statusTipHeaderCondition,"</div></th></tr></thead><tbody>"].join(""),this._removedCriterias=[],this._rules=[],this.statusPane=new M,this._dlg=new d({"class":"dijitTooltipBelow dojoxGridFStatusTipDialog",content:this.statusPane,autofocus:!1}),this._dlg.connect(this._dlg.domNode,"onmouseleave",i.hitch(this,this.closeDialog)),this._dlg.connect(this._dlg.domNode,"click",i.hitch(this,this._modifyFilter))},destroy:function(){this._dlg.destroyRecursive()},showDialog:function(e,t,i){this._pos={x:e,y:t},u.close(this._dlg),this._removedCriterias=[],this._rules=[],this._updateStatus(i),u.open({popup:this._dlg,parent:this.plugin.filterBar,onCancel:function(){},x:e-12,y:t-3})},closeDialog:function(){u.close(this._dlg),this._removedCriterias.length&&(this.plugin.filterDefDialog.removeCriteriaBoxes(this._removedCriterias),this._removedCriterias=[],this.plugin.filterDefDialog.onFilter())},_updateStatus:function(e){var t,i=this.plugin,a=i.nls,n=this.statusPane,r=i.filterDefDialog;if(0===r.getCriteria()){n.statusTitle.innerHTML=a.statusTipTitleNoFilter,n.statusRel.innerHTML="";var s=i.grid.layout.cells[e],l=s?"'"+(s.name||s.field)+"'":a.anycolumn;t=o.substitute(a.statusTipMsg,[l])}else{n.statusTitle.innerHTML=a.statusTipTitleHasFilter,n.statusRel.innerHTML="logicall"==r._relOpCls?a.statusTipRelAll:a.statusTipRelAny,this._rules=[];for(var d=0,h=r.getCriteria(d++);h;)h.index=d-1,this._rules.push(h),h=r.getCriteria(d++);t=this._createStatusDetail()}n.statusDetailNode.innerHTML=t,this._addButtonForRules()},_createStatusDetail:function(){return this._statusHeader+t.map(this._rules,function(e,t){return this._getCriteriaStr(e,t)},this).join("")+w},_addButtonForRules:function(){this._rules.length>1&&a("."+v,this.statusPane.statusDetailNode).forEach(i.hitch(this,function(e,t){new h({label:this.plugin.nls.removeRuleButton,showLabel:!1,iconClass:x,onClick:i.hitch(this,function(e){e.stopPropagation(),this._removedCriterias.push(this._rules[t].index),this._rules.splice(t,1),this.statusPane.statusDetailNode.innerHTML=this._createStatusDetail(),this._addButtonForRules()})}).placeAt(e,"last")}))},_getCriteriaStr:function(e,t){var i=["<tr class='",g," ",t%2?y:"","'><td class='",p,"'>",e.colTxt,"</td><td class='",p,"'><div class='",v,"'><span class='",b,"'>",e.condTxt,"&nbsp;</span>",e.formattedVal,"</div></td></tr>"];return i.join("")},_modifyFilter:function(){this.closeDialog();var e=this.plugin;e.filterDefDialog.showDialog(e.filterBar.getColumnIdx(this._pos.x))}})});//# sourceMappingURL=FilterStatusTip.js.map