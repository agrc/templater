//>>built
define("dojox/grid/enhanced/plugins/Search",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/data/util/filter","../../EnhancedGrid","../_Plugin"],function(e,t,a,i,r,n,o){var s=a("dojox.grid.enhanced.plugins.Search",o,{name:"search",constructor:function(e,a){this.grid=e,a=a&&t.isObject(a)?a:{},this._cacheSize=a.cacheSize||-1,e.searchRow=t.hitch(this,"searchRow")},searchRow:function(e,a){if(t.isFunction(a)){t.isString(e)&&(e=r.patternToRegExp(e));var i=!1;if(e instanceof RegExp)i=!0;else{if(!t.isObject(e))return;var n=!0;for(var o in e)t.isString(e[o])&&(e[o]=r.patternToRegExp(e[o])),n=!1;if(n)return}this._search(e,0,a,i)}},_search:function(e,t,a,r){var n=this,o=this._cacheSize,s={start:t,query:this.grid.query,sort:this.grid.getSortProps(),queryOptions:this.grid.queryOptions,onBegin:function(e){n._storeSize=e},onComplete:function(s){i.some(s,function(i,o){return n._checkRow(i,e,r)?(a(t+o,i),!0):!1})||(o>0&&t+o<n._storeSize?n._search(e,t+o,a,r):a(-1,null))}};o>0&&(s.count=o),this.grid._storeLayerFetch(s)},_checkRow:function(e,t,a){var r,n,o=this.grid,s=o.store,l=i.filter(o.layout.cells,function(e){return!e.hidden});if(a)return i.some(l,function(a){try{if(a.field)return String(s.getValue(e,a.field)).search(t)>=0}catch(i){}return!1});for(n in t)if(t[n]instanceof RegExp){for(r=l.length-1;r>=0;--r)if(l[r].field==n)try{if(String(s.getValue(e,n)).search(t[n])<0)return!1;break}catch(d){return!1}if(0>r)return!1}return!0}});return n.registerPlugin(s),s});//# sourceMappingURL=Search.js.map