//>>built
define("dojox/grid/enhanced/plugins/Filter",["dojo/_base/declare","dojo/_base/lang","../_Plugin","./Dialog","./filter/FilterLayer","./filter/FilterBar","./filter/FilterDefDialog","./filter/FilterStatusTip","./filter/ClearFilterConfirm","../../EnhancedGrid","dojo/i18n!../nls/Filter"],function(e,t,i,a,r,n,o,s,d,l,h){var u=e("dojox.grid.enhanced.plugins.Filter",i,{name:"filter",constructor:function(e,i){this.grid=e,this.nls=h,i=this.args=t.isObject(i)?i:{},("number"!=typeof i.ruleCount||i.ruleCount<0)&&(i.ruleCount=3);var r=this.ruleCountToConfirmClearFilter=i.ruleCountToConfirmClearFilter;void 0===r&&(this.ruleCountToConfirmClearFilter=2),this._wrapStore();var l={plugin:this};this.clearFilterDialog=new a({refNode:this.grid.domNode,title:this.nls.clearFilterDialogTitle,content:new d(l)}),this.filterDefDialog=new o(l),this.filterBar=new n(l),this.filterStatusTip=new s(l),e.onFilterDefined=function(){},this.connect(e.layer("filter"),"onFilterDefined",function(t){e.onFilterDefined(e.getFilter(),e.getFilterRelation())})},destroy:function(){this.inherited(arguments);try{this.grid.unwrap("filter"),this.filterBar.destroyRecursive(),this.filterBar=null,this.clearFilterDialog.destroyRecursive(),this.clearFilterDialog=null,this.filterStatusTip.destroy(),this.filterStatusTip=null,this.filterDefDialog.destroy(),this.filterDefDialog=null,this.grid=null,this.args=null}catch(e){}},_wrapStore:function(){var e=this.grid,i=this.args,a=i.isServerSide?new r.ServerSideFilterLayer(i):new r.ClientSideFilterLayer({cacheSize:i.filterCacheSize,fetchAll:i.fetchAllOnFirstFilter,getter:this._clientFilterGetter});r.wrap(e,"_storeLayerFetch",a),this.connect(e,"_onDelete",t.hitch(a,"invalidate"))},onSetStore:function(e){this.filterDefDialog.clearFilter(!0)},_clientFilterGetter:function(e,t,i){return t.get(i,e)}});return l.registerPlugin(u),u});//# sourceMappingURL=Filter.js.map