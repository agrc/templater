//>>built
define("dojox/grid/enhanced/plugins/Filter",["dojo/_base/declare","dojo/_base/lang","../_Plugin","./Dialog","./filter/FilterLayer","./filter/FilterBar","./filter/FilterDefDialog","./filter/FilterStatusTip","./filter/ClearFilterConfirm","../../EnhancedGrid","dojo/i18n!../nls/Filter"],function(e,t,a,i,n,r,o,s,d,l,u){var h=e("dojox.grid.enhanced.plugins.Filter",a,{name:"filter",constructor:function(e,a){this.grid=e,this.nls=u,a=this.args=t.isObject(a)?a:{},("number"!=typeof a.ruleCount||a.ruleCount<0)&&(a.ruleCount=3);var n=this.ruleCountToConfirmClearFilter=a.ruleCountToConfirmClearFilter;void 0===n&&(this.ruleCountToConfirmClearFilter=2),this._wrapStore();var l={plugin:this};this.clearFilterDialog=new i({refNode:this.grid.domNode,title:this.nls.clearFilterDialogTitle,content:new d(l)}),this.filterDefDialog=new o(l),this.filterBar=new r(l),this.filterStatusTip=new s(l),e.onFilterDefined=function(){},this.connect(e.layer("filter"),"onFilterDefined",function(t){e.onFilterDefined(e.getFilter(),e.getFilterRelation())})},destroy:function(){this.inherited(arguments);try{this.grid.unwrap("filter"),this.filterBar.destroyRecursive(),this.filterBar=null,this.clearFilterDialog.destroyRecursive(),this.clearFilterDialog=null,this.filterStatusTip.destroy(),this.filterStatusTip=null,this.filterDefDialog.destroy(),this.filterDefDialog=null,this.grid=null,this.args=null}catch(e){}},_wrapStore:function(){var e=this.grid,a=this.args,i=a.isServerSide?new n.ServerSideFilterLayer(a):new n.ClientSideFilterLayer({cacheSize:a.filterCacheSize,fetchAll:a.fetchAllOnFirstFilter,getter:this._clientFilterGetter});n.wrap(e,"_storeLayerFetch",i),this.connect(e,"_onDelete",t.hitch(i,"invalidate"))},onSetStore:function(e){this.filterDefDialog.clearFilter(!0)},_clientFilterGetter:function(e,t,a){return t.get(a,e)}});return l.registerPlugin(h),h});//# sourceMappingURL=Filter.js.map