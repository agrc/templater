//>>built
define("dojox/grid/enhanced/plugins/AutoScroll",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/html","dojo/_base/window","../_Plugin","../../_RowSelector","../../EnhancedGrid"],function(e,t,i,a,r,o,n,s){var d=e("dojox.grid.enhanced.plugins.AutoScroll",o,{name:"autoScroll",autoScrollInterval:1e3,autoScrollMargin:30,constructor:function(e,t){this.grid=e,this.readyForAutoScroll=!1,this._scrolling=!1,t=i.isObject(t)?t:{},"interval"in t&&(this.autoScrollInterval=t.interval),"margin"in t&&(this.autoScrollMargin=t.margin),this._initEvents(),this._mixinGrid()},_initEvents:function(){var e=this.grid;this.connect(e,"onCellMouseDown",function(){this.readyForAutoScroll=!0}),this.connect(e,"onHeaderCellMouseDown",function(){this.readyForAutoScroll=!0}),this.connect(e,"onRowSelectorMouseDown",function(){this.readyForAutoScroll=!0}),this.connect(r.doc,"onmouseup",function(e){this._manageAutoScroll(!0),this.readyForAutoScroll=!1}),this.connect(r.doc,"onmousemove",function(i){if(this.readyForAutoScroll){this._event=i;var r=a.position(e.domNode),o=e._getHeaderHeight(),s=this.autoScrollMargin,d=i.clientY,l=i.clientX,h=r.y,u=r.x,c=r.h,m=r.w;if(l>=u&&l<=u+m){if(d>=h+o&&d<h+o+s)return void this._manageAutoScroll(!1,!0,!1);if(d>h+c-s&&d<=h+c)return void this._manageAutoScroll(!1,!0,!0);if(d>=h&&d<=h+c){if(t.some(e.views.views,function(e,t){if(e instanceof n)return!1;var i=a.position(e.domNode);return l<i.x+s&&l>=i.x?(this._manageAutoScroll(!1,!1,!1,e),!0):l>i.x+i.w-s&&l<i.x+i.w&&(this._manageAutoScroll(!1,!1,!0,e),!0)},this))return}}this._manageAutoScroll(!0)}})},_mixinGrid:function(){var e=this.grid;e.onStartAutoScroll=function(){},e.onEndAutoScroll=function(){}},_fireEvent:function(e,t){var i=this.grid;switch(e){case"start":i.onStartAutoScroll.apply(i,t);break;case"end":i.onEndAutoScroll.apply(i,t)}},_manageAutoScroll:function(e,t,a,r){e?(this._scrolling=!1,clearInterval(this._handler)):this._scrolling||(this._scrolling=!0,this._fireEvent("start",[t,a,r]),this._autoScroll(t,a,r),this._handler=setInterval(i.hitch(this,"_autoScroll",t,a,r),this.autoScrollInterval))},_autoScroll:function(e,t,i){var a=this.grid,r=null;if(e){var o=a.scroller.firstVisibleRow+(t?1:-1);o>=0&&o<a.rowCount&&(a.scrollToRow(o),r=o)}else r=this._scrollColumn(t,i);null!==r&&this._fireEvent("end",[e,t,i,r,this._event])},_scrollColumn:function(e,i){var r=i.scrollboxNode,o=null;if(r.clientWidth<r.scrollWidth){var n,s,d,l,h=t.filter(this.grid.layout.cells,function(e){return!e.hidden}),u=a.position(i.domNode);if(e){for(n=r.clientWidth,l=0;l<h.length;++l)if(d=a.position(h[l].getHeaderNode()),(s=d.x-u.x+d.w)>n){o=h[l].index,r.scrollLeft+=s-n+10;break}}else for(n=0,l=h.length-1;l>=0;--l)if(d=a.position(h[l].getHeaderNode()),(s=d.x-u.x)<n){o=h[l].index,r.scrollLeft+=s-n-10;break}}return o}});return s.registerPlugin(d),d});//# sourceMappingURL=AutoScroll.js.map