//>>built
define("dojox/secure/capability",["dojo","dijit","dojox"],function(e,t,i){e.provide("dojox.secure.capability"),i.secure.badProps=/^__|^(apply|call|callee|caller|constructor|eval|prototype|this|unwatch|valueOf|watch)$|__$/,i.secure.capability={keywords:["break","case","catch","const","continue","debugger","default","delete","do","else","enum","false","finally","for","function","if","in","instanceof","new","null","yield","return","switch","throw","true","try","typeof","var","void","while"],validate:function(e,t,i){function a(e,t){var i={};return e.replace(/#\d+/g,function(e){var t=l[e.substring(1)];for(var a in t){if(a==s)throw a;"this"==a&&t[":method"]&&1==t["this"]&&(a=s),":method"!=a&&(i[a]=2)}}),e.replace(/(\W|^)([a-z_\$A-Z][\w_\$]*)/g,function(e,t,a){if("_"==a.charAt(0))throw new Error("Names may not start with _");i[a]=1}),i}function o(e,t,i,o,r,n){function d(e,t,i,a){a.replace(/,?([a-z\$A-Z][_\w\$]*)/g,function(e,t){if("Class"==t)throw new Error("Class is reserved");delete h[t]})}return n.replace(/(^|,)0:\s*function#(\d+)/g,function(e,t,i){var a=l[i];a[":method"]=1}),n=n.replace(/(^|[^_\w\$])Class\s*\(\s*([_\w\$]+\s*,\s*)*#(\d+)/g,function(e,t,i,a){var o=l[a];return delete o[s],(t||"")+(i||"")+"#"+a}),h=a(n,t),t&&d(e,i,i,r),n.replace(/(\W|^)(var) ([ \t,_\w\$]+)/g,d),(i||"")+(o||"")+"#"+(l.push(h)-1)}for(var r=this.keywords,n=0;n<r.length;n++)i[r[n]]=!0;var s="|this| keyword in object literal without a Class call",l=[];if(e.match(/[\u200c-\u200f\u202a-\u202e\u206a-\u206f\uff00-\uffff]/))throw new Error("Illegal unicode characters detected");if(e.match(/\/\*@cc_on/))throw new Error("Conditional compilation token is not allowed");e=e.replace(/\\["'\\\/bfnrtu]/g,"@").replace(/\/\/.*|\/\*[\w\W]*?\*\/|("[^"]*")|('[^']*')/g,function(e){return e.match(/^\/\/|^\/\*/)?" ":"0"}).replace(/\.\s*([a-z\$_A-Z][\w\$_]*)|([;,{])\s*([a-z\$_A-Z][\w\$_]*\s*):/g,function(e,t,i,a){if(t=t||a,/^__|^(apply|call|callee|caller|constructor|eval|prototype|this|unwatch|valueOf|watch)$|__$/.test(t))throw new Error("Illegal property name "+t);return i&&i+"0:"||"~"}),e.replace(/([^\[][\]\}]\s*=)|((\Wreturn|\S)\s*\[\s*\+?)|([^=!][=!]=[^=])/g,function(e){if(!e.match(/((\Wreturn|[=\&\|\:\?\,])\s*\[)|\[\s*\+$/))throw new Error("Illegal operator "+e.substring(1))}),e=e.replace(new RegExp("("+t.join("|")+")[\\s~]*\\(","g"),function(e){return"new("});var d,h;do d=e.replace(/((function|catch)(\s+[_\w\$]+)?\s*\(([^\)]*)\)\s*)?{([^{}]*)}/g,o);while(d!=e&&(e=d));o(0,0,0,0,0,e);for(n in h)if(!(n in i))throw new Error("Illegal reference to "+n)}}});//# sourceMappingURL=capability.js.map