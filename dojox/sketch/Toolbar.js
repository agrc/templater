//>>built
define("dojox/sketch/Toolbar",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/declare","./Annotation","dijit/Toolbar","dijit/form/Button"],function(e){return e.getObject("sketch",!0,dojox),e.declare("dojox.sketch.ButtonGroup",null,{constructor:function(){this._childMaps={},this._children=[]},add:function(t){this._childMaps[t]=t.connect(t,"onActivate",e.hitch(this,"_resetGroup",t)),this._children.push(t)},_resetGroup:function(t){var i=this._children;e.forEach(i,function(e){t!=e&&e.attr&&e.attr("checked",!1)})}}),e.declare("dojox.sketch.Toolbar",dijit.Toolbar,{figure:null,plugins:null,postCreate:function(){this.inherited(arguments),this.shapeGroup=new dojox.sketch.ButtonGroup,this.plugins||(this.plugins=["Lead","SingleArrow","DoubleArrow","Underline","Preexisting","Slider"]),this._plugins=[],e.forEach(this.plugins,function(t){var i=e.isString(t)?t:t.name,a=new dojox.sketch.tools[i](t.args||{});this._plugins.push(a),a.setToolbar(this),!this._defaultTool&&a.button&&(this._defaultTool=a)},this)},setFigure:function(t){this.figure=t,this.connect(t,"onLoad","reset"),e.forEach(this._plugins,function(e){e.setFigure(t)})},destroy:function(){e.forEach(this._plugins,function(e){e.destroy()}),this.inherited(arguments),delete this._defaultTool,delete this._plugins},addGroupItem:function(e,t){"toolsGroup"==t&&this.shapeGroup.add(e)},reset:function(){this._defaultTool.activate()},_setShape:function(e){if(this.figure.surface&&this.figure.hasSelections())for(var t=0;t<this.figure.selected.length;t++){var i=this.figure.selected[t].serialize();this.figure.convert(this.figure.selected[t],e),this.figure.history.add(dojox.sketch.CommandTypes.Convert,this.figure.selected[t],i)}}}),dojox.sketch.makeToolbar=function(e,t){var i=new dojox.sketch.Toolbar;return i.setFigure(t),e.appendChild(i.domNode),i},dojox.sketch.Toolbar});//# sourceMappingURL=Toolbar.js.map