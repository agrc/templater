//>>built
define("dojox/css3/transition",["dojo/_base/lang","dojo/_base/array","dojo/Deferred","dojo/when","dojo/promise/all","dojo/on","dojo/sniff"],function(e,t,a,i,r,o,n){var d="transitionend",s="t",l="translate3d(",m=",0,0)";n("webkit")?(s="WebkitT",d="webkitTransitionEnd"):n("mozilla")&&(s="MozT",l="translateX(",m=")");var u=function(t){var i={startState:{},endState:{},node:null,duration:250,"in":!0,direction:1,autoClear:!0};e.mixin(this,i),e.mixin(this,t),this.deferred||(this.deferred=new a)};e.extend(u,{play:function(){u.groupedPlay([this])},_applyState:function(e){var t=this.node.style;for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},initState:function(){this.node.style[s+"ransitionProperty"]="none",this.node.style[s+"ransitionDuration"]="0ms",this._applyState(this.startState)},_beforeStart:function(){"none"===this.node.style.display&&(this.node.style.display=""),this.beforeStart()},_beforeClear:function(){this.node.style[s+"ransitionProperty"]="",this.node.style[s+"ransitionDuration"]="",this["in"]!==!0&&(this.node.style.display="none"),this.beforeClear()},_onAfterEnd:function(){this.deferred.resolve(this.node),this.node.id&&u.playing[this.node.id]===this.deferred&&delete u.playing[this.node.id],this.onAfterEnd()},beforeStart:function(){},beforeClear:function(){},onAfterEnd:function(){},start:function(){this._beforeStart(),this._startTime=(new Date).getTime(),this._cleared=!1;var e=this;e.node.style[s+"ransitionProperty"]="all",e.node.style[s+"ransitionDuration"]=e.duration+"ms",o.once(e.node,d,function(){e.clear()}),this._applyState(this.endState)},clear:function(){this._cleared||(this._cleared=!0,this._beforeClear(),this._removeState(this.endState),this._onAfterEnd())},_removeState:function(e){var t=this.node.style;for(var a in e)e.hasOwnProperty(a)&&(t[a]="")}}),u.slide=function(e,t){var a=new u(t);a.node=e;var i="0",r="0";return a["in"]?i=1===a.direction?"100%":"-100%":r=1===a.direction?"-100%":"100%",a.startState[s+"ransform"]=l+i+m,a.endState[s+"ransform"]=l+r+m,a},u.fade=function(t,a){var i=new u(a);i.node=t;var r="0",o="0";return i["in"]?o="1":r="1",e.mixin(i,{startState:{opacity:r},endState:{opacity:o}}),i},u.flip=function(t,a){var i=new u(a);return i.node=t,i["in"]?(e.mixin(i,{startState:{opacity:"0"},endState:{opacity:"1"}}),i.startState[s+"ransform"]="scale(0,0.8) skew(0,-30deg)",i.endState[s+"ransform"]="scale(1,1) skew(0,0)"):(e.mixin(i,{startState:{opacity:"1"},endState:{opacity:"0"}}),i.startState[s+"ransform"]="scale(1,1) skew(0,0)",i.endState[s+"ransform"]="scale(0,0.8) skew(0,30deg)"),i};var f=function(e){var a=[];return t.forEach(e,function(e){e.id&&u.playing[e.id]&&a.push(u.playing[e.id])}),r(a)};return u.getWaitingList=f,u.groupedPlay=function(e){var a=t.filter(e,function(e){return e.node}),r=f(a);t.forEach(e,function(e){e.node.id&&(u.playing[e.node.id]=e.deferred)}),i(r,function(){t.forEach(e,function(e){e.initState()}),setTimeout(function(){t.forEach(e,function(e){e.start()}),o.once(e[e.length-1].node,d,function(){for(var t,a=0;a<e.length-1;a++)0===e[a].deferred.fired||e[a]._cleared||(t=(new Date).getTime()-e[a]._startTime,t>=e[a].duration&&e[a].clear())}),setTimeout(function(){for(var t,a=0;a<e.length;a++)0===e[a].deferred.fired||e[a]._cleared||(t=(new Date).getTime()-e[a]._startTime,t>=e[a].duration&&e[a].clear())},e[0].duration+50)},33)})},u.chainedPlay=function(a){var r=t.filter(a,function(e){return e.node}),o=f(r);t.forEach(a,function(e){e.node.id&&(u.playing[e.node.id]=e.deferred)}),i(o,function(){t.forEach(a,function(e){e.initState()});for(var i=1,r=a.length;r>i;i++)a[i-1].deferred.then(e.hitch(a[i],function(){this.start()}));setTimeout(function(){a[0].start()},33)})},u.playing={},u});//# sourceMappingURL=transition.js.map