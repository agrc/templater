//>>built
define("dojox/css3/transition",["dojo/_base/lang","dojo/_base/array","dojo/Deferred","dojo/when","dojo/promise/all","dojo/on","dojo/sniff"],function(e,t,i,a,r,n,o){var s="transitionend",d="t",l="translate3d(",u=",0,0)";o("webkit")?(d="WebkitT",s="webkitTransitionEnd"):o("mozilla")&&(d="MozT",l="translateX(",u=")");var c=function(t){var a={startState:{},endState:{},node:null,duration:250,in:!0,direction:1,autoClear:!0};e.mixin(this,a),e.mixin(this,t),this.deferred||(this.deferred=new i)};e.extend(c,{play:function(){c.groupedPlay([this])},_applyState:function(e){var t=this.node.style;for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},initState:function(){this.node.style[d+"ransitionProperty"]="none",this.node.style[d+"ransitionDuration"]="0ms",this._applyState(this.startState)},_beforeStart:function(){"none"===this.node.style.display&&(this.node.style.display=""),this.beforeStart()},_beforeClear:function(){this.node.style[d+"ransitionProperty"]="",this.node.style[d+"ransitionDuration"]="",!0!==this.in&&(this.node.style.display="none"),this.beforeClear()},_onAfterEnd:function(){this.deferred.resolve(this.node),this.node.id&&c.playing[this.node.id]===this.deferred&&delete c.playing[this.node.id],this.onAfterEnd()},beforeStart:function(){},beforeClear:function(){},onAfterEnd:function(){},start:function(){this._beforeStart(),this._startTime=(new Date).getTime(),this._cleared=!1;var e=this;e.node.style[d+"ransitionProperty"]="all",e.node.style[d+"ransitionDuration"]=e.duration+"ms",n.once(e.node,s,function(){e.clear()}),this._applyState(this.endState)},clear:function(){this._cleared||(this._cleared=!0,this._beforeClear(),this._removeState(this.endState),this._onAfterEnd())},_removeState:function(e){var t=this.node.style;for(var i in e)e.hasOwnProperty(i)&&(t[i]="")}}),c.slide=function(e,t){var i=new c(t);i.node=e;var a="0",r="0";return i.in?a=1===i.direction?"100%":"-100%":r=1===i.direction?"-100%":"100%",i.startState[d+"ransform"]=l+a+u,i.endState[d+"ransform"]=l+r+u,i},c.fade=function(t,i){var a=new c(i);a.node=t;var r="0",n="0";return a.in?n="1":r="1",e.mixin(a,{startState:{opacity:r},endState:{opacity:n}}),a},c.flip=function(t,i){var a=new c(i);return a.node=t,a.in?(e.mixin(a,{startState:{opacity:"0"},endState:{opacity:"1"}}),a.startState[d+"ransform"]="scale(0,0.8) skew(0,-30deg)",a.endState[d+"ransform"]="scale(1,1) skew(0,0)"):(e.mixin(a,{startState:{opacity:"1"},endState:{opacity:"0"}}),a.startState[d+"ransform"]="scale(1,1) skew(0,0)",a.endState[d+"ransform"]="scale(0,0.8) skew(0,30deg)"),a};var h=function(e){var i=[];return t.forEach(e,function(e){e.id&&c.playing[e.id]&&i.push(c.playing[e.id])}),r(i)};return c.getWaitingList=h,c.groupedPlay=function(e){var i=t.filter(e,function(e){return e.node}),r=h(i);t.forEach(e,function(e){e.node.id&&(c.playing[e.node.id]=e.deferred)}),a(r,function(){t.forEach(e,function(e){e.initState()}),setTimeout(function(){t.forEach(e,function(e){e.start()}),n.once(e[e.length-1].node,s,function(){for(var t=0;t<e.length-1;t++)0===e[t].deferred.fired||e[t]._cleared||(new Date).getTime()-e[t]._startTime>=e[t].duration&&e[t].clear()}),setTimeout(function(){for(var t=0;t<e.length;t++)0===e[t].deferred.fired||e[t]._cleared||(new Date).getTime()-e[t]._startTime>=e[t].duration&&e[t].clear()},e[0].duration+50)},33)})},c.chainedPlay=function(i){var r=t.filter(i,function(e){return e.node}),n=h(r);t.forEach(i,function(e){e.node.id&&(c.playing[e.node.id]=e.deferred)}),a(n,function(){t.forEach(i,function(e){e.initState()});for(var a=1,r=i.length;a<r;a++)i[a-1].deferred.then(e.hitch(i[a],function(){this.start()}));setTimeout(function(){i[0].start()},33)})},c.playing={},c});//# sourceMappingURL=transition.js.map