//>>built
define("dojox/date/persian/Date",["dojo/_base/lang","dojo/_base/declare","dojo/date"],function(e,t,a){var r=t("dojox.date.persian.Date",null,{_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,_GREGORIAN_EPOCH:1721425.5,_PERSIAN_EPOCH:1948320.5,daysInMonth:[31,31,31,31,31,31,30,30,30,30,30,29],constructor:function(){var e=arguments.length;if(e)if(1==e){var t=arguments[0];"number"==typeof t&&(t=new Date(t)),t instanceof Date?this.fromGregorian(t):""==t?this._date=new Date(""):(this._year=t._year,this._month=t._month,this._date=t._date,this._hours=t._hours,this._minutes=t._minutes,this._seconds=t._seconds,this._milliseconds=t._milliseconds)}else e>=3&&(this._year+=arguments[0],this._month+=arguments[1],this._date+=arguments[2],this._hours+=arguments[3]||0,this._minutes+=arguments[4]||0,this._seconds+=arguments[5]||0,this._milliseconds+=arguments[6]||0);else this.fromGregorian(new Date)},getDate:function(){return this._date},getMonth:function(){return this._month},getFullYear:function(){return this._year},getDay:function(){return this.toGregorian().getDay()},getHours:function(){return this._hours},getMinutes:function(){return this._minutes},getSeconds:function(){return this._seconds},getMilliseconds:function(){return this._milliseconds},setDate:function(e){if(e=parseInt(e),e>0&&e<=this.getDaysInPersianMonth(this._month,this._year))this._date=e;else{var t;if(e>0){for(t=this.getDaysInPersianMonth(this._month,this._year);e>t;e-=t,t=this.getDaysInPersianMonth(this._month,this._year))this._month++,this._month>=12&&(this._year++,this._month-=12);this._date=e}else{for(t=this.getDaysInPersianMonth(this._month-1>=0?this._month-1:11,this._month-1>=0?this._year:this._year-1);0>=e;t=this.getDaysInPersianMonth(this._month-1>=0?this._month-1:11,this._month-1>=0?this._year:this._year-1))this._month--,this._month<0&&(this._year--,this._month+=12),e+=t;this._date=e}}return this},setFullYear:function(e){this._year=+e},setMonth:function(e){this._year+=Math.floor(e/12),e>0?this._month=Math.floor(e%12):this._month=Math.floor((e%12+12)%12)},setHours:function(){var e=arguments.length,t=0;for(e>=1&&(t=parseInt(arguments[0])),e>=2&&(this._minutes=parseInt(arguments[1])),e>=3&&(this._seconds=parseInt(arguments[2])),4==e&&(this._milliseconds=parseInt(arguments[3]));t>=24;){this._date++;var a=this.getDaysInPersianMonth(this._month,this._year);this._date>a&&(this._month++,this._month>=12&&(this._year++,this._month-=12),this._date-=a),t-=24}this._hours=t},_addMinutes:function(e){return e+=this._minutes,this.setMinutes(e),this.setHours(this._hours+parseInt(e/60)),this},_addSeconds:function(e){return e+=this._seconds,this.setSeconds(e),this._addMinutes(parseInt(e/60)),this},_addMilliseconds:function(e){return e+=this._milliseconds,this.setMilliseconds(e),this._addSeconds(parseInt(e/1e3)),this},setMinutes:function(e){return this._minutes=e%60,this},setSeconds:function(e){return this._seconds=e%60,this},setMilliseconds:function(e){return this._milliseconds=e%1e3,this},toString:function(){if(isNaN(this._date))return"Invalidate Date";var e=new Date;return e.setHours(this._hours),e.setMinutes(this._minutes),e.setSeconds(this._seconds),e.setMilliseconds(this._milliseconds),this._month+" "+this._date+" "+this._year+" "+e.toTimeString()},toGregorian:function(){var e,t;this._year;t=this.persian_to_jd(this._year,this._month+1,this._date),e=this.jd_to_gregorian(t,this._month+1),weekday=this.jwday(t);var a=new Date(e[0],e[1]-1,e[2],this._hours,this._minutes,this._seconds,this._milliseconds);return a},fromGregorian:function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth(),i=t.getDate(),o=this.calcGregorian(a,r,i);return this._date=o[2],this._month=o[1],this._year=o[0],this._hours=t.getHours(),this._minutes=t.getMinutes(),this._seconds=t.getSeconds(),this._milliseconds=t.getMilliseconds(),this._day=t.getDay(),this},calcGregorian:function(e,t,a){var r,i;return r=this.gregorian_to_jd(e,t+1,a)+Math.floor(.5)/86400,perscal=this.jd_to_persian(r),i=this.jwday(r),new Array(perscal[0],perscal[1],perscal[2],i)},jd_to_persian:function(e){var t,a,r,i,o,n,d,l,s,m;return e=Math.floor(e)+.5,i=e-this.persian_to_jd(475,1,1),o=Math.floor(i/1029983),n=this._mod(i,1029983),1029982==n?d=2820:(l=Math.floor(n/366),s=this._mod(n,366),d=Math.floor((2134*l+2816*s+2815)/1028522)+l+1),t=d+2820*o+474,0>=t&&t--,m=e-this.persian_to_jd(t,1,1)+1,a=186>=m?Math.ceil(m/31):Math.ceil((m-6)/30),r=e-this.persian_to_jd(t,a,1)+1,new Array(t,a-1,r)},persian_to_jd:function(e,t,a){var r,i;return r=e-(e>=0?474:473),i=474+this._mod(r,2820),a+(7>=t?31*(t-1):30*(t-1)+6)+Math.floor((682*i-110)/2816)+365*(i-1)+1029983*Math.floor(r/2820)+(this._PERSIAN_EPOCH-1)},gregorian_to_jd:function(e,t,a){return this._GREGORIAN_EPOCH-1+365*(e-1)+Math.floor((e-1)/4)+-Math.floor((e-1)/100)+Math.floor((e-1)/400)+Math.floor((367*t-362)/12+(2>=t?0:this.leap_gregorian(e)?-1:-2)+a)},jd_to_gregorian:function(e,t){var a,r,i,o,n,d,l,s,m,u,f,h;return a=Math.floor(e-.5)+.5,r=a-this._GREGORIAN_EPOCH,i=Math.floor(r/146097),o=this._mod(r,146097),n=Math.floor(o/36524),d=this._mod(o,36524),l=Math.floor(d/1461),s=this._mod(d,1461),m=Math.floor(s/365),u=400*i+100*n+4*l+m,4!=n&&4!=m&&u++,f=a-this.gregorian_to_jd(u,1,1),h=a<this.gregorian_to_jd(u,3,1)?0:this.leap_gregorian(u)?1:2,month=Math.floor((12*(f+h)+373)/367),day=a-this.gregorian_to_jd(u,month,1)+1,new Array(u,month,day)},valueOf:function(){return this.toGregorian().valueOf()},jwday:function(e){return this._mod(Math.floor(e+1.5),7)},_yearStart:function(e){return 354*(e-1)+Math.floor((3+11*e)/30)},_monthStart:function(e,t){return Math.ceil(29.5*t)+354*(e-1)+Math.floor((3+11*e)/30)},leap_gregorian:function(e){return e%4==0&&!(e%100==0&&e%400!=0)},isLeapYear:function(e,t,a){return!(0>e||e>32767||1>t||t>12||1>a||a>this.daysInMonth[t-1]+(12==t&&!((e-979)%33%4)))},getDaysInPersianMonth:function(e,t){var a=this.daysInMonth[e];return 11==e&&this.isLeapYear(t,e+1,30)&&a++,a},_mod:function(e,t){return e-t*Math.floor(e/t)}});return r.getDaysInPersianMonth=function(e){return(new r).getDaysInPersianMonth(e.getMonth(),e.getFullYear())},r});//# sourceMappingURL=Date.js.map