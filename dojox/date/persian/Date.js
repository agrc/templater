//>>built
define("dojox/date/persian/Date",["dojo/_base/lang","dojo/_base/declare","dojo/date"],function(e,t,i){var r=t("dojox.date.persian.Date",null,{_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,_GREGORIAN_EPOCH:1721425.5,_PERSIAN_EPOCH:1948320.5,daysInMonth:[31,31,31,31,31,31,30,30,30,30,30,29],constructor:function(){var e=arguments.length;if(e)if(1==e){var t=arguments[0];"number"==typeof t&&(t=new Date(t)),t instanceof Date?this.fromGregorian(t):""==t?this._date=new Date(""):(this._year=t._year,this._month=t._month,this._date=t._date,this._hours=t._hours,this._minutes=t._minutes,this._seconds=t._seconds,this._milliseconds=t._milliseconds)}else e>=3&&(this._year+=arguments[0],this._month+=arguments[1],this._date+=arguments[2],this._hours+=arguments[3]||0,this._minutes+=arguments[4]||0,this._seconds+=arguments[5]||0,this._milliseconds+=arguments[6]||0);else this.fromGregorian(new Date)},getDate:function(){return this._date},getMonth:function(){return this._month},getFullYear:function(){return this._year},getDay:function(){return this.toGregorian().getDay()},getHours:function(){return this._hours},getMinutes:function(){return this._minutes},getSeconds:function(){return this._seconds},getMilliseconds:function(){return this._milliseconds},setDate:function(e){if((e=parseInt(e))>0&&e<=this.getDaysInPersianMonth(this._month,this._year))this._date=e;else{var t;if(e>0){for(t=this.getDaysInPersianMonth(this._month,this._year);e>t;e-=t,t=this.getDaysInPersianMonth(this._month,this._year))++this._month>=12&&(this._year++,this._month-=12);this._date=e}else{for(t=this.getDaysInPersianMonth(this._month-1>=0?this._month-1:11,this._month-1>=0?this._year:this._year-1);e<=0;t=this.getDaysInPersianMonth(this._month-1>=0?this._month-1:11,this._month-1>=0?this._year:this._year-1))this._month--,this._month<0&&(this._year--,this._month+=12),e+=t;this._date=e}}return this},setFullYear:function(e){this._year=+e},setMonth:function(e){this._year+=Math.floor(e/12),this._month=e>0?Math.floor(e%12):Math.floor((e%12+12)%12)},setHours:function(){var e=arguments.length,t=0;for(e>=1&&(t=parseInt(arguments[0])),e>=2&&(this._minutes=parseInt(arguments[1])),e>=3&&(this._seconds=parseInt(arguments[2])),4==e&&(this._milliseconds=parseInt(arguments[3]));t>=24;){this._date++;var i=this.getDaysInPersianMonth(this._month,this._year);this._date>i&&(this._month++,this._month>=12&&(this._year++,this._month-=12),this._date-=i),t-=24}this._hours=t},_addMinutes:function(e){return e+=this._minutes,this.setMinutes(e),this.setHours(this._hours+parseInt(e/60)),this},_addSeconds:function(e){return e+=this._seconds,this.setSeconds(e),this._addMinutes(parseInt(e/60)),this},_addMilliseconds:function(e){return e+=this._milliseconds,this.setMilliseconds(e),this._addSeconds(parseInt(e/1e3)),this},setMinutes:function(e){return this._minutes=e%60,this},setSeconds:function(e){return this._seconds=e%60,this},setMilliseconds:function(e){return this._milliseconds=e%1e3,this},toString:function(){if(isNaN(this._date))return"Invalidate Date";var e=new Date;return e.setHours(this._hours),e.setMinutes(this._minutes),e.setSeconds(this._seconds),e.setMilliseconds(this._milliseconds),this._month+" "+this._date+" "+this._year+" "+e.toTimeString()},toGregorian:function(){var e,t;this._year;return t=this.persian_to_jd(this._year,this._month+1,this._date),e=this.jd_to_gregorian(t,this._month+1),weekday=this.jwday(t),new Date(e[0],e[1]-1,e[2],this._hours,this._minutes,this._seconds,this._milliseconds)},fromGregorian:function(e){var t=new Date(e),i=t.getFullYear(),r=t.getMonth(),a=t.getDate(),n=this.calcGregorian(i,r,a);return this._date=n[2],this._month=n[1],this._year=n[0],this._hours=t.getHours(),this._minutes=t.getMinutes(),this._seconds=t.getSeconds(),this._milliseconds=t.getMilliseconds(),this._day=t.getDay(),this},calcGregorian:function(e,t,i){var r,a;return r=this.gregorian_to_jd(e,t+1,i)+Math.floor(.5)/86400,perscal=this.jd_to_persian(r),a=this.jwday(r),new Array(perscal[0],perscal[1],perscal[2],a)},jd_to_persian:function(e){var t,i,r,a,n,o,s,d,l,u;return e=Math.floor(e)+.5,a=e-this.persian_to_jd(475,1,1),n=Math.floor(a/1029983),o=this._mod(a,1029983),1029982==o?s=2820:(d=Math.floor(o/366),l=this._mod(o,366),s=Math.floor((2134*d+2816*l+2815)/1028522)+d+1),t=s+2820*n+474,t<=0&&t--,u=e-this.persian_to_jd(t,1,1)+1,i=u<=186?Math.ceil(u/31):Math.ceil((u-6)/30),r=e-this.persian_to_jd(t,i,1)+1,new Array(t,i-1,r)},persian_to_jd:function(e,t,i){var r,a;return r=e-(e>=0?474:473),a=474+this._mod(r,2820),i+(t<=7?31*(t-1):30*(t-1)+6)+Math.floor((682*a-110)/2816)+365*(a-1)+1029983*Math.floor(r/2820)+(this._PERSIAN_EPOCH-1)},gregorian_to_jd:function(e,t,i){return this._GREGORIAN_EPOCH-1+365*(e-1)+Math.floor((e-1)/4)+-Math.floor((e-1)/100)+Math.floor((e-1)/400)+Math.floor((367*t-362)/12+(t<=2?0:this.leap_gregorian(e)?-1:-2)+i)},jd_to_gregorian:function(e,t){var i,r,a,n,o,s,d,l,u,c,h,f;return i=Math.floor(e-.5)+.5,r=i-this._GREGORIAN_EPOCH,a=Math.floor(r/146097),n=this._mod(r,146097),o=Math.floor(n/36524),s=this._mod(n,36524),d=Math.floor(s/1461),l=this._mod(s,1461),u=Math.floor(l/365),c=400*a+100*o+4*d+u,4!=o&&4!=u&&c++,h=i-this.gregorian_to_jd(c,1,1),f=i<this.gregorian_to_jd(c,3,1)?0:this.leap_gregorian(c)?1:2,month=Math.floor((12*(h+f)+373)/367),day=i-this.gregorian_to_jd(c,month,1)+1,new Array(c,month,day)},valueOf:function(){return this.toGregorian().valueOf()},jwday:function(e){return this._mod(Math.floor(e+1.5),7)},_yearStart:function(e){return 354*(e-1)+Math.floor((3+11*e)/30)},_monthStart:function(e,t){return Math.ceil(29.5*t)+354*(e-1)+Math.floor((3+11*e)/30)},leap_gregorian:function(e){return e%4==0&&!(e%100==0&&e%400!=0)},isLeapYear:function(e,t,i){return!(e<0||e>32767||t<1||t>12||i<1||i>this.daysInMonth[t-1]+(12==t&&!((e-979)%33%4)))},getDaysInPersianMonth:function(e,t){var i=this.daysInMonth[e];return 11==e&&this.isLeapYear(t,e+1,30)&&i++,i},_mod:function(e,t){return e-t*Math.floor(e/t)}});return r.getDaysInPersianMonth=function(e){return(new r).getDaysInPersianMonth(e.getMonth(),e.getFullYear())},r});//# sourceMappingURL=Date.js.map