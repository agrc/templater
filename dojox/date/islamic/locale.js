//>>built
define("dojox/date/islamic/locale",["../..","dojo/_base/lang","dojo/_base/array","dojo/date","dojo/i18n","dojo/regexp","dojo/string","./Date","dojo/i18n!dojo/cldr/nls/islamic"],function(e,t,a,r,i,o,n,d,s){function l(e,t,a,i,o){return o.replace(/([a-z])\1*/gi,function(a){var i,d,s=a.charAt(0),l=a.length,m=["abbr","wide","narrow"];switch(s){case"G":i=t.eraAbbr[0];break;case"y":i=String(e.getFullYear());break;case"M":var u=e.getMonth();if(3>l)i=u+1,d=!0;else{var f=["months","format",m[l-3]].join("-");i=t[f][u]}break;case"d":i=e.getDate(!0),d=!0;break;case"E":var c=e.getDay();if(3>l)i=c+1,d=!0;else{var h=["days","format",m[l-3]].join("-");i=t[h][c]}break;case"a":var y=e.getHours()<12?"am":"pm";i=t["dayPeriods-format-wide-"+y];break;case"h":case"H":case"K":case"k":var v=e.getHours();switch(s){case"h":i=v%12||12;break;case"H":i=v;break;case"K":i=v%12;break;case"k":i=v||24}d=!0;break;case"m":i=e.getMinutes(),d=!0;break;case"s":i=e.getSeconds(),d=!0;break;case"S":i=Math.round(e.getMilliseconds()*Math.pow(10,l-3)),d=!0;break;case"z":if(i=r.getTimezoneName(e.toGregorian()))break;l=4;case"Z":var p=e.toGregorian().getTimezoneOffset(),M=[0>=p?"+":"-",n.pad(Math.floor(Math.abs(p)/60),2),n.pad(Math.abs(p)%60,2)];4==l&&(M.splice(0,0,"GMT"),M.splice(3,0,":")),i=M.join("");break;default:throw new Error("dojox.date.islamic.locale.formatPattern: invalid pattern char: "+o)}return d&&(i=n.pad(i,l)),i})}function m(e,t,r,i){var o=function(e){return e};t=t||o,r=r||o,i=i||o;var n=e.match(/(''|[^'])+/g),d="'"==e.charAt(0);return a.forEach(n,function(e,a){e?(n[a]=(d?r:t)(e),d=!d):n[a]=""}),i(n.join(""))}function u(e,t,a,r){r=o.escapeString(r);i.normalizeLocale(a.locale);return r.replace(/([a-z])\1*/gi,function(r){var i,o=r.charAt(0),n=r.length,d="",s="";switch(a.strict?(n>1&&(d="0{"+(n-1)+"}"),n>2&&(s="0{"+(n-2)+"}")):(d="0?",s="0{0,2}"),o){case"y":i="\\d+";break;case"M":i=n>2?"\\S+ ?\\S+":d+"[1-9]|1[0-2]";break;case"d":i="[12]\\d|"+d+"[1-9]|3[01]";break;case"E":i="\\S+";break;case"h":i=d+"[1-9]|1[0-2]";break;case"k":i=d+"\\d|1[01]";break;case"H":i=d+"\\d|1\\d|2[0-3]";break;case"K":i=d+"[1-9]|1\\d|2[0-4]";break;case"m":case"s":i=d+"\\d|[0-5]\\d";break;case"S":i="\\d{"+n+"}";break;case"a":var l=a.am||t["dayPeriods-format-wide-am"],m=a.pm||t["dayPeriods-format-wide-pm"];a.strict?i=l+"|"+m:(i=l+"|"+m,l!=l.toLowerCase()&&(i+="|"+l.toLowerCase()),m!=m.toLowerCase()&&(i+="|"+m.toLowerCase()));break;default:i=".*"}return e&&e.push(r),"("+i+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var f=t.getObject("date.islamic.locale",!0,e);f.format=function(e,a){a=a||{};var r=i.normalizeLocale(a.locale),o=a.formatLength||"short",n=f._getIslamicBundle(r),d=[],s=t.hitch(this,l,e,n,r,a.fullYear);if("year"==a.selector){var u=e.getFullYear();return u}if("time"!=a.selector){var c=a.datePattern||n["dateFormat-"+o];c&&d.push(m(c,s))}if("date"!=a.selector){var h=a.timePattern||n["timeFormat-"+o];h&&d.push(m(h,s))}var y=d.join(" ");return y},f.regexp=function(e){return f._parseInfo(e).regexp},f._parseInfo=function(e){e=e||{};var a,r=i.normalizeLocale(e.locale),o=f._getIslamicBundle(r),n=e.formatLength||"short",d=e.datePattern||o["dateFormat-"+n],s=e.timePattern||o["timeFormat-"+n];a="date"==e.selector?d:"time"==e.selector?s:"undefined"==typeof s?d:d+" "+s;var l=[],c=m(a,t.hitch(this,u,l,o,e));return{regexp:c,tokens:l,bundle:o}},f.parse=function(e,t){e=e.replace(/[\u200E\u200F\u202A\u202E]/g,""),t||(t={});var r=f._parseInfo(t),o=r.tokens,n=r.bundle,s=r.regexp.replace(/[\u200E\u200F\u202A\u202E]/g,""),l=new RegExp("^"+s+"$"),m=l.exec(e);i.normalizeLocale(t.locale);if(!m)return null;var u=[1389,0,1,0,0,0,0],c="",h=0,y=["abbr","wide","narrow"],v=(a.every(m,function(e,r){if(!r)return!0;var i=o[r-1],d=i.length;switch(i.charAt(0)){case"y":u[0]=Number(e);break;case"M":if(d>2){var s=n["months-format-"+y[d-3]].concat();if(t.strict||(e=e.replace(".","").toLowerCase(),s=a.map(s,function(e){return e?e.replace(".","").toLowerCase():e})),e=a.indexOf(s,e),-1==e)return!1;h=d}else e--;u[1]=Number(e);break;case"D":u[1]=0;case"d":u[2]=Number(e);break;case"a":var l=t.am||n["dayPeriods-format-wide-am"],m=t.pm||n["dayPeriods-format-wide-pm"];if(!t.strict){var f=/\./g;e=e.replace(f,"").toLowerCase(),l=l.replace(f,"").toLowerCase(),m=m.replace(f,"").toLowerCase()}if(t.strict&&e!=l&&e!=m)return!1;c=e==m?"p":e==l?"a":"";break;case"K":24==e&&(e=0);case"h":case"H":case"k":u[3]=Number(e);break;case"m":u[4]=Number(e);break;case"s":u[5]=Number(e);break;case"S":u[6]=Number(e)}return!0}),+u[3]);"p"===c&&12>v?u[3]=v+12:"a"===c&&12==v&&(u[3]=0);var p=new d(u[0],u[1],u[2],u[3],u[4],u[5],u[6]);return p};var c=[];return f.addCustomFormats=function(e,t){c.push({pkg:e,name:t})},f._getIslamicBundle=function(e){var r={};return a.forEach(c,function(a){var o=i.getLocalization(a.pkg,a.name,e);r=t.mixin(r,o)},this),r},f.addCustomFormats("dojo.cldr","islamic"),f.getNames=function(e,t,a,r,i){var o,n=f._getIslamicBundle(r),d=[e,a,t];if("standAlone"==a){var s=d.join("-");o=n[s],1==o[0]&&(o=void 0)}return d[1]="format",(o||n[d.join("-")]).concat()},f.weekDays=f.getNames("days","wide","format"),f.months=f.getNames("months","wide","format"),f});//# sourceMappingURL=locale.js.map