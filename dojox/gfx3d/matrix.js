//>>built
define("dojox/gfx3d/matrix",["dojo/_base/lang","./_base"],function(e,t){return t.matrix={_degToRad:function(e){return Math.PI*e/180},_radToDeg:function(e){return e/Math.PI*180}},t.matrix.Matrix3D=function(a){if(a)if("number"==typeof a)this.xx=this.yy=this.zz=a;else if(a instanceof Array){if(a.length>0){for(var i=t.matrix.normalize(a[0]),r=1;r<a.length;++r){var o=i,n=t.matrix.normalize(a[r]);i=new t.matrix.Matrix3D,i.xx=o.xx*n.xx+o.xy*n.yx+o.xz*n.zx,i.xy=o.xx*n.xy+o.xy*n.yy+o.xz*n.zy,i.xz=o.xx*n.xz+o.xy*n.yz+o.xz*n.zz,i.yx=o.yx*n.xx+o.yy*n.yx+o.yz*n.zx,i.yy=o.yx*n.xy+o.yy*n.yy+o.yz*n.zy,i.yz=o.yx*n.xz+o.yy*n.yz+o.yz*n.zz,i.zx=o.zx*n.xx+o.zy*n.yx+o.zz*n.zx,i.zy=o.zx*n.xy+o.zy*n.yy+o.zz*n.zy,i.zz=o.zx*n.xz+o.zy*n.yz+o.zz*n.zz,i.dx=o.xx*n.dx+o.xy*n.dy+o.xz*n.dz+o.dx,i.dy=o.yx*n.dx+o.yy*n.dy+o.yz*n.dz+o.dy,i.dz=o.zx*n.dx+o.zy*n.dy+o.zz*n.dz+o.dz}e.mixin(this,i)}}else e.mixin(this,a)},e.extend(t.matrix.Matrix3D,{xx:1,xy:0,xz:0,yx:0,yy:1,yz:0,zx:0,zy:0,zz:1,dx:0,dy:0,dz:0}),e.mixin(t.matrix,{identity:new t.matrix.Matrix3D,translate:function(e,a,i){return arguments.length>1?new t.matrix.Matrix3D({dx:e,dy:a,dz:i}):new t.matrix.Matrix3D({dx:e.x,dy:e.y,dz:e.z})},scale:function(e,a,i){return arguments.length>1?new t.matrix.Matrix3D({xx:e,yy:a,zz:i}):"number"==typeof e?new t.matrix.Matrix3D({xx:e,yy:e,zz:e}):new t.matrix.Matrix3D({xx:e.x,yy:e.y,zz:e.z})},rotateX:function(e){var a=Math.cos(e),i=Math.sin(e);return new t.matrix.Matrix3D({yy:a,yz:-i,zy:i,zz:a})},rotateXg:function(e){return t.matrix.rotateX(t.matrix._degToRad(e))},rotateY:function(e){var a=Math.cos(e),i=Math.sin(e);return new t.matrix.Matrix3D({xx:a,xz:i,zx:-i,zz:a})},rotateYg:function(e){return t.matrix.rotateY(t.matrix._degToRad(e))},rotateZ:function(e){var a=Math.cos(e),i=Math.sin(e);return new t.matrix.Matrix3D({xx:a,xy:-i,yx:i,yy:a})},rotateZg:function(e){return t.matrix.rotateZ(t.matrix._degToRad(e))},cameraTranslate:function(e,a,i){return arguments.length>1?new t.matrix.Matrix3D({dx:-e,dy:-a,dz:-i}):new t.matrix.Matrix3D({dx:-e.x,dy:-e.y,dz:-e.z})},cameraRotateX:function(e){var a=Math.cos(-e),i=Math.sin(-e);return new t.matrix.Matrix3D({yy:a,yz:-i,zy:i,zz:a})},cameraRotateXg:function(e){return t.matrix.rotateX(t.matrix._degToRad(e))},cameraRotateY:function(e){var a=Math.cos(-e),i=Math.sin(-e);return new t.matrix.Matrix3D({xx:a,xz:i,zx:-i,zz:a})},cameraRotateYg:function(e){return t.matrix.rotateY(dojox.gfx3d.matrix._degToRad(e))},cameraRotateZ:function(e){var a=Math.cos(-e),i=Math.sin(-e);return new t.matrix.Matrix3D({xx:a,xy:-i,yx:i,yy:a})},cameraRotateZg:function(e){return t.matrix.rotateZ(t.matrix._degToRad(e))},normalize:function(e){return e instanceof t.matrix.Matrix3D?e:new t.matrix.Matrix3D(e)},clone:function(e){var a=new t.matrix.Matrix3D;for(var i in e)"number"==typeof e[i]&&"number"==typeof a[i]&&a[i]!=e[i]&&(a[i]=e[i]);return a},invert:function(e){var a=t.matrix.normalize(e),i=a.xx*a.yy*a.zz+a.xy*a.yz*a.zx+a.xz*a.yx*a.zy-a.xx*a.yz*a.zy-a.xy*a.yx*a.zz-a.xz*a.yy*a.zx,r=new t.matrix.Matrix3D({xx:(a.yy*a.zz-a.yz*a.zy)/i,xy:(a.xz*a.zy-a.xy*a.zz)/i,xz:(a.xy*a.yz-a.xz*a.yy)/i,yx:(a.yz*a.zx-a.yx*a.zz)/i,yy:(a.xx*a.zz-a.xz*a.zx)/i,yz:(a.xz*a.yx-a.xx*a.yz)/i,zx:(a.yx*a.zy-a.yy*a.zx)/i,zy:(a.xy*a.zx-a.xx*a.zy)/i,zz:(a.xx*a.yy-a.xy*a.yx)/i,dx:-1*(a.xy*a.yz*a.dz+a.xz*a.dy*a.zy+a.dx*a.yy*a.zz-a.xy*a.dy*a.zz-a.xz*a.yy*a.dz-a.dx*a.yz*a.zy)/i,dy:(a.xx*a.yz*a.dz+a.xz*a.dy*a.zx+a.dx*a.yx*a.zz-a.xx*a.dy*a.zz-a.xz*a.yx*a.dz-a.dx*a.yz*a.zx)/i,dz:-1*(a.xx*a.yy*a.dz+a.xy*a.dy*a.zx+a.dx*a.yx*a.zy-a.xx*a.dy*a.zy-a.xy*a.yx*a.dz-a.dx*a.yy*a.zx)/i});return r},_multiplyPoint:function(e,t,a,i){return{x:e.xx*t+e.xy*a+e.xz*i+e.dx,y:e.yx*t+e.yy*a+e.yz*i+e.dy,z:e.zx*t+e.zy*a+e.zz*i+e.dz}},multiplyPoint:function(e,a,i,r){var o=t.matrix.normalize(e);return"number"==typeof a&&"number"==typeof i&&"number"==typeof r?t.matrix._multiplyPoint(o,a,i,r):t.matrix._multiplyPoint(o,a.x,a.y,a.z)},multiply:function(e){for(var a=t.matrix.normalize(e),i=1;i<arguments.length;++i){var r=a,o=t.matrix.normalize(arguments[i]);a=new t.matrix.Matrix3D,a.xx=r.xx*o.xx+r.xy*o.yx+r.xz*o.zx,a.xy=r.xx*o.xy+r.xy*o.yy+r.xz*o.zy,a.xz=r.xx*o.xz+r.xy*o.yz+r.xz*o.zz,a.yx=r.yx*o.xx+r.yy*o.yx+r.yz*o.zx,a.yy=r.yx*o.xy+r.yy*o.yy+r.yz*o.zy,a.yz=r.yx*o.xz+r.yy*o.yz+r.yz*o.zz,a.zx=r.zx*o.xx+r.zy*o.yx+r.zz*o.zx,a.zy=r.zx*o.xy+r.zy*o.yy+r.zz*o.zy,a.zz=r.zx*o.xz+r.zy*o.yz+r.zz*o.zz,a.dx=r.xx*o.dx+r.xy*o.dy+r.xz*o.dz+r.dx,a.dy=r.yx*o.dx+r.yy*o.dy+r.yz*o.dz+r.dy,a.dz=r.zx*o.dx+r.zy*o.dy+r.zz*o.dz+r.dz}return a},_project:function(e,t,a,i){return{x:e.xx*t+e.xy*a+e.xz*i+e.dx,y:e.yx*t+e.yy*a+e.yz*i+e.dy,z:e.zx*t+e.zy*a+e.zz*i+e.dz}},project:function(e,a,i,r){var o=t.matrix.normalize(e);return"number"==typeof a&&"number"==typeof i&&"number"==typeof r?t.matrix._project(o,a,i,r):t.matrix._project(o,a.x,a.y,a.z)}}),t.Matrix3D=t.matrix.Matrix3D,t.matrix});//# sourceMappingURL=matrix.js.map