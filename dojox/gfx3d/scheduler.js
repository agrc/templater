//>>built
define("dojox/gfx3d/scheduler",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./_base","./vector"],function(e,t,i,a,r){a.scheduler={zOrder:function(e,t){return t=t||a.scheduler.order,e.sort(function(e,i){return t(i)-t(e)}),e},bsp:function(e,i){i=i||a.scheduler.outline;var r=new a.scheduler.BinarySearchTree(e[0],i);return t.forEach(e.slice(1),function(e){r.add(e,i)}),r.iterate(i)},order:function(e){return e.getZOrder()},outline:function(e){return e.getOutline()}};var n=i("dojox.gfx3d.scheduler.BinarySearchTree",null,{constructor:function(e,t){this.plus=null,this.minus=null,this.object=e;var i=t(e);this.orient=i[0],this.normal=r.normalize(i)},add:function(e,i){var n=.5,o=i(e),s=r,d=this.normal,l=this.orient,u=a.scheduler.BinarySearchTree;if(t.every(o,function(e){return Math.floor(n+s.dotProduct(d,s.substract(e,l)))<=0}))this.minus?this.minus.add(e,i):this.minus=new u(e,i);else{if(!t.every(o,function(e){return Math.floor(n+s.dotProduct(d,s.substract(e,l)))>=0}))throw"The case: polygon cross siblings' plate is not implemented yet";this.plus?this.plus.add(e,i):this.plus=new u(e,i)}},iterate:function(e){var t=r,i=[],a=null,n={x:0,y:0,z:-1e4};return a=Math.floor(.5+t.dotProduct(this.normal,t.substract(n,this.orient)))<=0?[this.plus,this.minus]:[this.minus,this.plus],a[0]&&(i=i.concat(a[0].iterate())),i.push(this.object),a[1]&&(i=i.concat(a[1].iterate())),i}});return a.drawer={conservative:function(e,i,a){t.forEach(this.objects,function(e){e.destroy()}),t.forEach(i,function(e){e.draw(a.lighting)})},chart:function(e,i,a){t.forEach(this.todos,function(e){e.draw(a.lighting)})}},{scheduler:a.scheduler,drawer:a.drawer,BinarySearchTree:n}});//# sourceMappingURL=scheduler.js.map