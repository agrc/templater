//>>built
define("dojox/gfx3d/scheduler",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./_base","./vector"],function(e,t,a,i,r){i.scheduler={zOrder:function(e,t){return t=t||i.scheduler.order,e.sort(function(e,a){return t(a)-t(e)}),e},bsp:function(e,a){a=a||i.scheduler.outline;var r=new i.scheduler.BinarySearchTree(e[0],a);return t.forEach(e.slice(1),function(e){r.add(e,a)}),r.iterate(a)},order:function(e){return e.getZOrder()},outline:function(e){return e.getOutline()}};var n=a("dojox.gfx3d.scheduler.BinarySearchTree",null,{constructor:function(e,t){this.plus=null,this.minus=null,this.object=e;var a=t(e);this.orient=a[0],this.normal=r.normalize(a)},add:function(e,a){var n=.5,o=a(e),s=r,d=this.normal,l=this.orient,u=i.scheduler.BinarySearchTree;if(t.every(o,function(e){return Math.floor(n+s.dotProduct(d,s.substract(e,l)))<=0}))this.minus?this.minus.add(e,a):this.minus=new u(e,a);else{if(!t.every(o,function(e){return Math.floor(n+s.dotProduct(d,s.substract(e,l)))>=0}))throw"The case: polygon cross siblings' plate is not implemented yet";this.plus?this.plus.add(e,a):this.plus=new u(e,a)}},iterate:function(e){var t=r,a=[],i=null,n={x:0,y:0,z:-1e4};return i=Math.floor(.5+t.dotProduct(this.normal,t.substract(n,this.orient)))<=0?[this.plus,this.minus]:[this.minus,this.plus],i[0]&&(a=a.concat(i[0].iterate())),a.push(this.object),i[1]&&(a=a.concat(i[1].iterate())),a}});return i.drawer={conservative:function(e,a,i){t.forEach(this.objects,function(e){e.destroy()}),t.forEach(a,function(e){e.draw(i.lighting)})},chart:function(e,a,i){t.forEach(this.todos,function(e){e.draw(i.lighting)})}},{scheduler:i.scheduler,drawer:i.drawer,BinarySearchTree:n}});//# sourceMappingURL=scheduler.js.map