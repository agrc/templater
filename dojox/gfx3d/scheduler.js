//>>built
define("dojox/gfx3d/scheduler",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./_base","./vector"],function(e,t,i,a,n){a.scheduler={zOrder:function(e,t){return t=t?t:a.scheduler.order,e.sort(function(e,i){return t(i)-t(e)}),e},bsp:function(e,i){i=i?i:a.scheduler.outline;var n=new a.scheduler.BinarySearchTree(e[0],i);return t.forEach(e.slice(1),function(e){n.add(e,i)}),n.iterate(i)},order:function(e){return e.getZOrder()},outline:function(e){return e.getOutline()}};var o=i("dojox.gfx3d.scheduler.BinarySearchTree",null,{constructor:function(e,t){this.plus=null,this.minus=null,this.object=e;var i=t(e);this.orient=i[0],this.normal=n.normalize(i)},add:function(e,i){var o=.5,r=i(e),s=n,l=this.normal,d=this.orient,c=a.scheduler.BinarySearchTree;if(t.every(r,function(e){return Math.floor(o+s.dotProduct(l,s.substract(e,d)))<=0}))this.minus?this.minus.add(e,i):this.minus=new c(e,i);else{if(!t.every(r,function(e){return Math.floor(o+s.dotProduct(l,s.substract(e,d)))>=0}))throw"The case: polygon cross siblings' plate is not implemented yet";this.plus?this.plus.add(e,i):this.plus=new c(e,i)}},iterate:function(e){var t=.5,i=n,a=[],o=null,r={x:0,y:0,z:-1e4};return o=Math.floor(t+i.dotProduct(this.normal,i.substract(r,this.orient)))<=0?[this.plus,this.minus]:[this.minus,this.plus],o[0]&&(a=a.concat(o[0].iterate())),a.push(this.object),o[1]&&(a=a.concat(o[1].iterate())),a}});a.drawer={conservative:function(e,i,a){t.forEach(this.objects,function(e){e.destroy()}),t.forEach(i,function(e){e.draw(a.lighting)})},chart:function(e,i,a){t.forEach(this.todos,function(e){e.draw(a.lighting)})}};var r={scheduler:a.scheduler,drawer:a.drawer,BinarySearchTree:o};return r});//# sourceMappingURL=scheduler.js.map