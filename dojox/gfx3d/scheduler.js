//>>built
define("dojox/gfx3d/scheduler",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./_base","./vector"],function(e,t,a,i,n){i.scheduler={zOrder:function(e,t){return t=t?t:i.scheduler.order,e.sort(function(e,a){return t(a)-t(e)}),e},bsp:function(e,a){a=a?a:i.scheduler.outline;var n=new i.scheduler.BinarySearchTree(e[0],a);return t.forEach(e.slice(1),function(e){n.add(e,a)}),n.iterate(a)},order:function(e){return e.getZOrder()},outline:function(e){return e.getOutline()}};var o=a("dojox.gfx3d.scheduler.BinarySearchTree",null,{constructor:function(e,t){this.plus=null,this.minus=null,this.object=e;var a=t(e);this.orient=a[0],this.normal=n.normalize(a)},add:function(e,a){var o=.5,r=a(e),s=n,l=this.normal,d=this.orient,u=i.scheduler.BinarySearchTree;if(t.every(r,function(e){return Math.floor(o+s.dotProduct(l,s.substract(e,d)))<=0}))this.minus?this.minus.add(e,a):this.minus=new u(e,a);else{if(!t.every(r,function(e){return Math.floor(o+s.dotProduct(l,s.substract(e,d)))>=0}))throw"The case: polygon cross siblings' plate is not implemented yet";this.plus?this.plus.add(e,a):this.plus=new u(e,a)}},iterate:function(e){var t=.5,a=n,i=[],o=null,r={x:0,y:0,z:-1e4};return o=Math.floor(t+a.dotProduct(this.normal,a.substract(r,this.orient)))<=0?[this.plus,this.minus]:[this.minus,this.plus],o[0]&&(i=i.concat(o[0].iterate())),i.push(this.object),o[1]&&(i=i.concat(o[1].iterate())),i}});i.drawer={conservative:function(e,a,i){t.forEach(this.objects,function(e){e.destroy()}),t.forEach(a,function(e){e.draw(i.lighting)})},chart:function(e,a,i){t.forEach(this.todos,function(e){e.draw(i.lighting)})}};var r={scheduler:i.scheduler,drawer:i.drawer,BinarySearchTree:o};return r});//# sourceMappingURL=scheduler.js.map