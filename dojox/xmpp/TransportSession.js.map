{"version":3,"sources":["TransportSession.js.uncompressed.js"],"names":["define","dojo","dijit","dojox","provide","require","xmpp","TransportSession","props","this","sendTimeout","wait","isObject","mixin","useScriptSrcTransport","transportIframes","extend","rid","hold","polling","secure","lang","submitContentType","serviceUrl","defaultResource","domain","keepAliveTimer","state","transmitState","protocolPacketQueue","outboundQueue","outboundRequests","inboundQueue","deferredRequests","matchTypeIdAttribute","open","status","Math","round","random","setTimeout","hitch","bosh","initialize","iframes","load","_sendLogin","req","content","to","xml:lang","xmpp:version","xmlns","BODY_NS","xmlns:xmpp","msg","util","createElement","addToOutboundQueue","_sendRestart","sid","xmpp:restart","processScriptSrc","msgDom","xml","parser","parse","processDocument","_keepAlive","isTerminated","_dispatchPacket","close","protocolMsg","type","envelope","string","Builder","append","toString","dispatchPacket","protocolMatchType","matchId","matchProperty","push","def","Deferred","dispatchTimer","clearTimeout","authId","length","processProtocolPacketQueue","lastPollTime","now","Date","getTime","redispatchPacket","env","sendXml","removeFromOutboundQueue","i","splice","packets","message","get","url","encodeURIComponent","error","res","io","setState","timeout","rawXhrPost","contentType","postData","handleAs","processError","xhr","responseXML","addCallback","doc","firstChild","body","nodeName","expectedId","processResponse","processInboundQueue","gap","addToInboundQueue","item","shift","getAttribute","reasonNode","errorMessage","Error","authRetries","terminateSession","parseInt","inactivity","forEach","childNodes","node","processProtocolResponse","onProcessProtocolResponse","key","callback","err","httpStatusCode","dojoType","onTerminate","newState","oldState","onReady"],"mappings":"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","file":"TransportSession.js.uncompressed.js"}