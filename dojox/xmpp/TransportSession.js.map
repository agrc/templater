{"version":3,"sources":["TransportSession.js.uncompressed.js"],"names":["define","dojo","dijit","dojox","provide","require","xmpp","TransportSession","props","this","sendTimeout","wait","isObject","mixin","useScriptSrcTransport","transportIframes","extend","rid","hold","polling","secure","lang","submitContentType","serviceUrl","defaultResource","domain","keepAliveTimer","state","transmitState","protocolPacketQueue","outboundQueue","outboundRequests","inboundQueue","deferredRequests","matchTypeIdAttribute","open","status","Math","round","random","setTimeout","hitch","bosh","initialize","iframes","load","_sendLogin","req","content","to","xml:lang","xmpp:version","xmlns","BODY_NS","xmlns:xmpp","msg","util","createElement","addToOutboundQueue","_sendRestart","sid","xmpp:restart","processScriptSrc","msgDom","xml","parser","parse","processDocument","_keepAlive","isTerminated","_dispatchPacket","close","protocolMsg","type","envelope","string","Builder","append","toString","dispatchPacket","protocolMatchType","matchId","matchProperty","push","def","Deferred","dispatchTimer","clearTimeout","authId","length","processProtocolPacketQueue","lastPollTime","now","Date","getTime","redispatchPacket","env","sendXml","removeFromOutboundQueue","i","splice","packets","message","get","url","encodeURIComponent","error","res","io","setState","timeout","rawXhrPost","contentType","postData","handleAs","processError","xhr","responseXML","addCallback","doc","firstChild","body","nodeName","expectedId","processResponse","processInboundQueue","addToInboundQueue","item","shift","getAttribute","reasonNode","errorMessage","Error","authRetries","terminateSession","parseInt","inactivity","forEach","childNodes","node","processProtocolResponse","onProcessProtocolResponse","key","callback","err","httpStatusCode","dojoType","onTerminate","newState","oldState","onReady"],"mappings":"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","file":"TransportSession.js.uncompressed.js"}