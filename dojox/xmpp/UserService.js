//>>built
define("dojox/xmpp/UserService",["dojo","dijit","dojox"],function(e,t,i){e.provide("dojox.xmpp.UserService"),e.declare("dojox.xmpp.UserService",null,{constructor:function(e){this.session=e},getPersonalProfile:function(){var e={id:this.session.getNextIqId(),type:"get"},t=new i.string.Builder(i.xmpp.util.createElement("iq",e,!1));t.append(i.xmpp.util.createElement("query",{xmlns:"jabber:iq:private"},!1)),t.append(i.xmpp.util.createElement("sunmsgr",{xmlsns:"sun:xmpp:properties"},!0)),t.append("</query></iq>"),this.session.dispatchPacket(t.toString(),"iq",e.id).addCallback(this,"_onGetPersonalProfile")},setPersonalProfile:function(e){var t={id:this.session.getNextIqId(),type:"set"},a=new i.string.Builder(i.xmpp.util.createElement("iq",t,!1));a.append(i.xmpp.util.createElement("query",{xmlns:"jabber:iq:private"},!1)),a.append(i.xmpp.util.createElement("sunmsgr",{xmlsns:"sun:xmpp:properties"},!1));for(var o in e)a.append(i.xmpp.util.createElement("property",{name:o},!1)),a.append(i.xmpp.util.createElement("value",{},!1)),a.append(e[o]),a.append("</value></props>");a.append("</sunmsgr></query></iq>"),this.session.dispatchPacket(a.toString(),"iq",t.id).addCallback(this,"_onSetPersonalProfile")},_onSetPersonalProfile:function(e){if("result"==e.getAttribute("type"))this.onSetPersonalProfile(e.getAttribute("id"));else if("error"==e.getAttribute("type")){var t=this.session.processXmppError(e);this.onSetPersonalProfileFailure(t)}},onSetPersonalProfile:function(e){},onSetPersonalProfileFailure:function(e){},_onGetPersonalProfile:function(e){if("result"==e.getAttribute("type")){var t={};if(e.hasChildNodes()){var i=e.firstChild;if("query"==i.nodeName&&"jabber:iq:private"==i.getAttribute("xmlns")){var a=i.firstChild;if("query"==a.nodeName&&"sun:xmpp:properties"==a.getAttributes("xmlns"))for(var o=0;o<a.childNodes.length;o++){var n=a.childNodes[o];if("property"==n.nodeName){var r=n.getAttribute("name"),s=n.firstChild||"";t[r]=s}}}this.onGetPersonalProfile(t)}}else if("error"==e.getAttribute("type")){var d=this.session.processXmppError(e);this.onGetPersonalProfileFailure(d)}return e},onGetPersonalProfile:function(e){},onGetPersonalProfileFailure:function(e){}})});//# sourceMappingURL=UserService.js.map