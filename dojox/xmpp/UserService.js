//>>built
define("dojox/xmpp/UserService",["dojo","dijit","dojox"],function(e,t,i){e.provide("dojox.xmpp.UserService"),e.declare("dojox.xmpp.UserService",null,{constructor:function(e){this.session=e},getPersonalProfile:function(){var e={id:this.session.getNextIqId(),type:"get"},t=new i.string.Builder(i.xmpp.util.createElement("iq",e,!1));t.append(i.xmpp.util.createElement("query",{xmlns:"jabber:iq:private"},!1)),t.append(i.xmpp.util.createElement("sunmsgr",{xmlsns:"sun:xmpp:properties"},!0)),t.append("</query></iq>");var r=this.session.dispatchPacket(t.toString(),"iq",e.id);r.addCallback(this,"_onGetPersonalProfile")},setPersonalProfile:function(e){var t={id:this.session.getNextIqId(),type:"set"},r=new i.string.Builder(i.xmpp.util.createElement("iq",t,!1));r.append(i.xmpp.util.createElement("query",{xmlns:"jabber:iq:private"},!1)),r.append(i.xmpp.util.createElement("sunmsgr",{xmlsns:"sun:xmpp:properties"},!1));for(var o in e)r.append(i.xmpp.util.createElement("property",{name:o},!1)),r.append(i.xmpp.util.createElement("value",{},!1)),r.append(e[o]),r.append("</value></props>");r.append("</sunmsgr></query></iq>");var a=this.session.dispatchPacket(r.toString(),"iq",t.id);a.addCallback(this,"_onSetPersonalProfile")},_onSetPersonalProfile:function(e){if("result"==e.getAttribute("type"))this.onSetPersonalProfile(e.getAttribute("id"));else if("error"==e.getAttribute("type")){var t=this.session.processXmppError(e);this.onSetPersonalProfileFailure(t)}},onSetPersonalProfile:function(e){},onSetPersonalProfileFailure:function(e){},_onGetPersonalProfile:function(e){if("result"==e.getAttribute("type")){var t={};if(e.hasChildNodes()){var i=e.firstChild;if("query"==i.nodeName&&"jabber:iq:private"==i.getAttribute("xmlns")){var r=i.firstChild;if("query"==r.nodeName&&"sun:xmpp:properties"==r.getAttributes("xmlns"))for(var o=0;o<r.childNodes.length;o++){var a=r.childNodes[o];if("property"==a.nodeName){var n=a.getAttribute("name"),s=a.firstChild||"";t[n]=s}}}this.onGetPersonalProfile(t)}}else if("error"==e.getAttribute("type")){var l=this.session.processXmppError(e);this.onGetPersonalProfileFailure(l)}return e},onGetPersonalProfile:function(e){},onGetPersonalProfileFailure:function(e){}})});//# sourceMappingURL=UserService.js.map