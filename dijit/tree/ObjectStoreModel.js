//>>built
define("dijit/tree/ObjectStoreModel",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/Deferred","dojo/_base/lang","dojo/when","../Destroyable"],function(e,t,i,o,n,s,r){return i("dijit.tree.ObjectStoreModel",r,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(e){n.mixin(this,e),this.childrenCache={}},getRoot:function(e,t){if(this.root)e(this.root);else{var i=this.store.query(this.query);i.then&&this.own(i),s(i,n.hitch(this,function(t){if(1!=t.length)throw new Error("dijit.tree.ObjectStoreModel: root query returned "+t.length+" items, but must return exactly one");this.root=t[0],e(this.root),i.observe&&i.observe(n.hitch(this,function(e){this.onChange(e)}),!0)}),t)}},mayHaveChildren:function(){return!0},getChildren:function(e,t,i){var o=this.store.getIdentity(e);if(this.childrenCache[o])return void s(this.childrenCache[o],t,i);var r=this.childrenCache[o]=this.store.getChildren(e);r.then&&this.own(r),r.observe&&this.own(r.observe(n.hitch(this,function(t,i,o){this.onChange(t),i!=o&&s(r,n.hitch(this,"onChildrenChange",e))}),!0)),s(r,t,i)},isItem:function(){return!0},getIdentity:function(e){return this.store.getIdentity(e)},getLabel:function(e){return e[this.labelAttr]},newItem:function(e,t,i,o){return this.store.put(e,{parent:t,before:o})},pasteItem:function(t,i,s,r,a,l){var d=new o;return i!==s||r||l?(i&&!r?this.getChildren(i,n.hitch(this,function(o){o=[].concat(o);var n=e.indexOf(o,t);o.splice(n,1),this.onChildrenChange(i,o),d.resolve(this.store.put(t,{overwrite:!0,parent:s,oldParent:i,before:l}))})):d.resolve(this.store.put(t,{overwrite:!0,parent:s,oldParent:i,before:l})),d):(d.resolve(!0),d)},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})});//# sourceMappingURL=ObjectStoreModel.js.map