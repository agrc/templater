//>>built
define("dijit/Menu",["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(t,e,n,o,i,a,r,d,s,l,c,u,p,h,m,f){return c("dijit-legacy-requires")&&f(0,function(){var e=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];t(e)}),n("dijit.Menu",m,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):e.forEach(this.targetNodeIds,this.bindDomNode,this),this.inherited(arguments)},_iframeContentWindow:function(t){return p.get(this._iframeContentDocument(t))||this._iframeContentDocument(t).__parent__||t.name&&document.frames[t.name]||null},_iframeContentDocument:function(t){return t.contentDocument||t.contentWindow&&t.contentWindow.document||t.name&&document.frames[t.name]&&document.frames[t.name].document||null},bindDomNode:function(t){t=o.byId(t,this.ownerDocument);var e;if("iframe"==t.tagName.toLowerCase()){var n=t,a=this._iframeContentWindow(n);e=u.body(a.document)}else e=t==u.body(this.ownerDocument)?this.ownerDocument.documentElement:t;var r={node:t,iframe:n};i.set(t,"_dijitMenu"+this.id,this._bindings.push(r));var c=s.hitch(this,function(t){var e=this.selector,o=e?function(t){return l.selector(e,t)}:function(t){return t},i=this;return[l(t,o(this.leftClickToOpen?"click":"contextmenu"),function(t){t.stopPropagation(),t.preventDefault(),(new Date).getTime()<i._lastKeyDown+500||i._scheduleOpen(this,n,{x:t.pageX,y:t.pageY},t.target)}),l(t,o("keydown"),function(t){(93==t.keyCode||t.shiftKey&&t.keyCode==d.F10||i.leftClickToOpen&&t.keyCode==d.SPACE)&&(t.stopPropagation(),t.preventDefault(),i._scheduleOpen(this,n,null,t.target),i._lastKeyDown=(new Date).getTime())})]});r.connects=e?c(e):[],n&&(r.onloadHandler=s.hitch(this,function(){var t=this._iframeContentWindow(n),e=u.body(t.document);r.connects=c(e)}),n.addEventListener?n.addEventListener("load",r.onloadHandler,!1):n.attachEvent("onload",r.onloadHandler))},unBindDomNode:function(t){var e;try{e=o.byId(t,this.ownerDocument)}catch(n){return}var a="_dijitMenu"+this.id;if(e&&i.has(e,a)){for(var r,d=i.get(e,a)-1,s=this._bindings[d];r=s.connects.pop();)r.remove();var l=s.iframe;l&&(l.removeEventListener?l.removeEventListener("load",s.onloadHandler,!1):l.detachEvent("onload",s.onloadHandler)),i.remove(e,a),delete this._bindings[d]}},_scheduleOpen:function(t,e,n,o){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer,this._openMyself({target:o,delegatedTarget:t,iframe:e,coords:n})},1))},_openMyself:function(t){function e(){b.refocus&&_&&_.focus(),h.close(b)}var n=t.target,i=t.iframe,d=t.coords,s=!d;if(this.currentTarget=t.delegatedTarget,d){if(i){var l=a.position(i,!0),u=this._iframeContentWindow(i),p=a.docScroll(u.document),m=r.getComputedStyle(i),f=r.toPixelValue,v=(c("ie")&&c("quirks")?0:f(i,m.paddingLeft))+(c("ie")&&c("quirks")?f(i,m.borderLeftWidth):0),g=(c("ie")&&c("quirks")?0:f(i,m.paddingTop))+(c("ie")&&c("quirks")?f(i,m.borderTopWidth):0);d.x+=l.x+v-p.x,d.y+=l.y+g-p.y}}else d=a.position(n,!0),d.x+=10,d.y+=10;var b=this,j=this._focusManager.get("prevNode"),y=this._focusManager.get("curNode"),_=!y||o.isDescendant(y,this.domNode)?j:y;h.open({popup:this,x:d.x,y:d.y,onExecute:e,onCancel:e,orient:this.isLeftToRight()?"L":"R"}),this.focus(),s||this.defer(function(){this._cleanUp(!0)}),this._onBlur=function(){this.inherited("_onBlur",arguments),h.close(this)}},destroy:function(){e.forEach(this._bindings,function(t){t&&this.unBindDomNode(t.node)},this),this.inherited(arguments)}})});//# sourceMappingURL=Menu.js.map