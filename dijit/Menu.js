//>>built
define("dijit/Menu",["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(e,t,o,n,i,a,r,d,s,c,u,h,l,f,p,m){return u("dijit-legacy-requires")&&m(0,function(){var t=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];e(t)}),o("dijit.Menu",p,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):t.forEach(this.targetNodeIds,this.bindDomNode,this),this.inherited(arguments)},_iframeContentWindow:function(e){return l.get(this._iframeContentDocument(e))||this._iframeContentDocument(e).__parent__||e.name&&document.frames[e.name]||null},_iframeContentDocument:function(e){return e.contentDocument||e.contentWindow&&e.contentWindow.document||e.name&&document.frames[e.name]&&document.frames[e.name].document||null},bindDomNode:function(e){e=n.byId(e,this.ownerDocument);var t;if("iframe"==e.tagName.toLowerCase()){var o=e,a=this._iframeContentWindow(o);t=h.body(a.document)}else t=e==h.body(this.ownerDocument)?this.ownerDocument.documentElement:e;var r={node:e,iframe:o};i.set(e,"_dijitMenu"+this.id,this._bindings.push(r));var u=s.hitch(this,function(e){var t=this.selector,n=t?function(e){return c.selector(t,e)}:function(e){return e},i=this;return[c(e,n(this.leftClickToOpen?"click":"contextmenu"),function(e){e.stopPropagation(),e.preventDefault(),(new Date).getTime()<i._lastKeyDown+500||i._scheduleOpen(this,o,{x:e.pageX,y:e.pageY},e.target)}),c(e,n("keydown"),function(e){(93==e.keyCode||e.shiftKey&&e.keyCode==d.F10||i.leftClickToOpen&&e.keyCode==d.SPACE)&&(e.stopPropagation(),e.preventDefault(),i._scheduleOpen(this,o,null,e.target),i._lastKeyDown=(new Date).getTime())})]});r.connects=t?u(t):[],o&&(r.onloadHandler=s.hitch(this,function(){var e=this._iframeContentWindow(o),t=h.body(e.document);r.connects=u(t)}),o.addEventListener?o.addEventListener("load",r.onloadHandler,!1):o.attachEvent("onload",r.onloadHandler))},unBindDomNode:function(e){var t;try{t=n.byId(e,this.ownerDocument)}catch(o){return}var a="_dijitMenu"+this.id;if(t&&i.has(t,a)){for(var r,d=i.get(t,a)-1,s=this._bindings[d];r=s.connects.pop();)r.remove();var c=s.iframe;c&&(c.removeEventListener?c.removeEventListener("load",s.onloadHandler,!1):c.detachEvent("onload",s.onloadHandler)),i.remove(t,a),delete this._bindings[d]}},_scheduleOpen:function(e,t,o,n){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer,this._openMyself({target:n,delegatedTarget:e,iframe:t,coords:o})},1))},_openMyself:function(e){function t(){_.refocus&&y&&y.focus(),f.close(_)}var o=e.target,i=e.iframe,d=e.coords,s=!d;if(this.currentTarget=e.delegatedTarget,d){if(i){var c=a.position(i,!0),h=this._iframeContentWindow(i),l=a.docScroll(h.document),p=r.getComputedStyle(i),m=r.toPixelValue,g=(u("ie")&&u("quirks")?0:m(i,p.paddingLeft))+(u("ie")&&u("quirks")?m(i,p.borderLeftWidth):0),j=(u("ie")&&u("quirks")?0:m(i,p.paddingTop))+(u("ie")&&u("quirks")?m(i,p.borderTopWidth):0);d.x+=c.x+g-l.x,d.y+=c.y+j-l.y}}else d=a.position(o,!0),d.x+=10,d.y+=10;var _=this,v=this._focusManager.get("prevNode"),b=this._focusManager.get("curNode"),y=!b||n.isDescendant(b,this.domNode)?v:b;f.open({popup:this,x:d.x,y:d.y,onExecute:t,onCancel:t,orient:this.isLeftToRight()?"L":"R"}),this.focus(),s||this.defer(function(){this._cleanUp(!0)}),this._onBlur=function(){this.inherited("_onBlur",arguments),f.close(this)}},destroy:function(){t.forEach(this._bindings,function(e){e&&this.unBindDomNode(e.node)},this),this.inherited(arguments)}})});//# sourceMappingURL=Menu.js.map