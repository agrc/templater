{"version":3,"sources":["EnterKeyHandling.js.uncompressed.js"],"names":["define","declare","domConstruct","keys","lang","on","has","win","winUtils","_Plugin","RichText","rangeapi","blockNodeForEnter","constructor","args","toUpperCase","mixin","this","setEditor","editor","customUndo","onLoadDeferred","then","hitch","d","own","document","e","keyCode","ENTER","ne","shiftKey","handleEnterKey","stopPropagation","preventDefault","setTimeout","r","selection","createRange","move","select","h","addKeyHandler","onKeyPressed","_checkListLater","isCollapsed","liparent","getAncestorElement","parentNode","nodeName","fc","firstChild","nodeType","insertBefore","ownerDocument","createTextNode","newrange","create","window","setStart","getSelection","removeAllRanges","addRange","prototype","execCommand","call","block","innerHTML","bogusHtmlContent","_pressedEnterInBlock","previousSibling","removeTrailingBr","blockNodes","range","startNode","endNode","brNode","br","rs","txt","doc","parent","getParentElement","header","getAncestor","tagName","getRangeAt","collapsed","deleteContents","atBeginningOfContainer","startContainer","startOffset","createElement","setStartAfter","atEndOfContainer","nodeValue","substring","place","destroy","appendChild","lastChild","rangeCount","offset","length","ret","_adjustNodeAndOffset","node","setEnd","collapse","targetNode","childNodes","_letBrowserHandle","getBlockAncestor","endContainer","editNode","blockNode","test","e2","blockContainer","textContent","replace","newblock","endOffset","height","scrollIntoView","nextSibling","style","cssText","firstNodeMoved","nodeToMove","tNode","parentC","tg","newTg","color","face","size","nodeForCursor","innerMostFirstNodeMoved","container","para","getParentOfType"],"mappings":"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","file":"EnterKeyHandling.js.uncompressed.js"}