//>>built
define("dijit/_editor/plugins/TextColor",["require","dojo/colors","dojo/_base/declare","dojo/_base/lang","../_Plugin","../../form/DropDownButton"],function(e,t,i,r,a,o){var n=i("dijit._editor.plugins.TextColor",a,{buttonClass:o,colorPicker:"dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=this.name,this.inherited(arguments);var t=this;this.button.loadDropDown=function(i){function r(e){t.button.dropDown=new e({dir:t.editor.dir,ownerDocument:t.editor.ownerDocument,value:t.value,onChange:function(e){t.editor.execCommand(t.command,e)},onExecute:function(){t.editor.execCommand(t.command,this.get("value"))}}),i()}"string"==typeof t.colorPicker?e([t.colorPicker],r):r(t.colorPicker)}},updateState:function(){var e=this.editor,i=this.command;if(e&&e.isLoaded&&i.length){if(this.button){var r=this.get("disabled");if(this.button.set("disabled",r),r)return;var a;try{a=e.queryCommandValue(i)||""}catch(o){a=""}}""==a&&(a="#000000"),"transparent"==a&&(a="#ffffff"),"string"==typeof a?a.indexOf("rgb")>-1&&(a=t.fromRgb(a).toHex()):(a=(255&a)<<16|65280&a|(16711680&a)>>>16,a=a.toString(16),a="#000000".slice(0,7-a.length)+a),this.value=a;var n=this.button.dropDown;n&&n.get&&a!==n.get("value")&&n.set("value",a,!1)}}});return a.registry.foreColor=function(e){return new n(e)},a.registry.hiliteColor=function(e){return new n(e)},n});//# sourceMappingURL=TextColor.js.map