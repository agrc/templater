//>>built
define("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(t,e,i){var a={};e.setObject("dijit._editor.html",a);var n=a.escapeXml=function(t,e){return t=t.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;"),e||(t=t.replace(/'/gm,"&#39;")),t};return a.getNodeHtml=function(t){var e=[];return a.getNodeHtmlHelper(t,e),e.join("")},a.getNodeHtmlHelper=function(e,o){switch(e.nodeType){case 1:var s=e.nodeName.toLowerCase();if(!s||"/"==s.charAt(0))return"";o.push("<",s);var r,d=[],l={};if(i("dom-attributes-explicit")||i("dom-attributes-specified-flag"))for(var h=0;r=e.attributes[h++];){var u=r.name;if("_dj"!==u.substr(0,3)&&(!i("dom-attributes-specified-flag")||r.specified)&&!(u in l)){var c=r.value;"src"!=u&&"href"!=u||e.getAttribute("_djrealurl")&&(c=e.getAttribute("_djrealurl")),8===i("ie")&&"style"===u&&(c=c.replace("HEIGHT:","height:").replace("WIDTH:","width:")),d.push([u,c]),l[u]=c}}else{var p=/^input$|^img$/i.test(e.nodeName)?e:e.cloneNode(!1),g=p.outerHTML,f=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi,m=g.match(f);g=g.substr(0,g.indexOf(">")),t.forEach(m,function(t){if(t){var i=t.indexOf("=");if(i>0){var a=t.substring(0,i);if("_dj"!=a.substr(0,3)){if(("src"==a||"href"==a)&&e.getAttribute("_djrealurl"))return void d.push([a,e.getAttribute("_djrealurl")]);var n,o;switch(a){case"style":n=e.style.cssText.toLowerCase();break;case"class":n=e.className;break;case"width":if("img"===s){o=/width=(\S+)/i.exec(g),o&&(n=o[1]);break}case"height":if("img"===s){o=/height=(\S+)/i.exec(g),o&&(n=o[1]);break}default:n=e.getAttribute(a)}null!=n&&d.push([a,n.toString()])}}}},this)}d.sort(function(t,e){return t[0]<e[0]?-1:t[0]==e[0]?0:1});for(var b=0;r=d[b++];)o.push(" ",r[0],'="',"string"==typeof r[1]?n(r[1],!0):r[1],'"');switch(s){case"br":case"hr":case"img":case"input":case"base":case"meta":case"area":case"basefont":o.push(" />");break;case"script":o.push(">",e.innerHTML,"</",s,">");break;default:o.push(">"),e.hasChildNodes()&&a.getChildrenHtmlHelper(e,o),o.push("</",s,">")}break;case 4:case 3:o.push(n(e.nodeValue,!0));break;case 8:o.push("\x3c!--",n(e.nodeValue,!0),"--\x3e");break;default:o.push("\x3c!-- Element not recognized - Type: ",e.nodeType," Name: ",e.nodeName,"--\x3e")}},a.getChildrenHtml=function(t){var e=[];return a.getChildrenHtmlHelper(t,e),e.join("")},a.getChildrenHtmlHelper=function(t,e){if(t)for(var n,o=t.childNodes||t,s=!i("ie")||o!==t,r=0;n=o[r++];)s&&n.parentNode!=t||a.getNodeHtmlHelper(n,e)},a});//# sourceMappingURL=html.js.map