//>>built
define("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(e,t,i){var o={};t.setObject("dijit._editor.html",o);var n=o.escapeXml=function(e,t){return e=e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;"),t||(e=e.replace(/'/gm,"&#39;")),e};return o.getNodeHtml=function(e){var t=[];return o.getNodeHtmlHelper(e,t),t.join("")},o.getNodeHtmlHelper=function(t,a){switch(t.nodeType){case 1:var s=t.nodeName.toLowerCase();if(!s||"/"==s.charAt(0))return"";a.push("<",s);var r,d=[],l={};if(i("dom-attributes-explicit")||i("dom-attributes-specified-flag"))for(var h=0;r=t.attributes[h++];){var u=r.name;if("_dj"!==u.substr(0,3)&&(!i("dom-attributes-specified-flag")||r.specified)&&!(u in l)){var p=r.value;"src"!=u&&"href"!=u||t.getAttribute("_djrealurl")&&(p=t.getAttribute("_djrealurl")),8===i("ie")&&"style"===u&&(p=p.replace("HEIGHT:","height:").replace("WIDTH:","width:")),d.push([u,p]),l[u]=p}}else{var c=/^input$|^img$/i.test(t.nodeName)?t:t.cloneNode(!1),g=c.outerHTML,f=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi,m=g.match(f);g=g.substr(0,g.indexOf(">")),e.forEach(m,function(e){if(e){var i=e.indexOf("=");if(i>0){var o=e.substring(0,i);if("_dj"!=o.substr(0,3)){if(("src"==o||"href"==o)&&t.getAttribute("_djrealurl"))return void d.push([o,t.getAttribute("_djrealurl")]);var n,a;switch(o){case"style":n=t.style.cssText.toLowerCase();break;case"class":n=t.className;break;case"width":if("img"===s){a=/width=(\S+)/i.exec(g),a&&(n=a[1]);break}case"height":if("img"===s){a=/height=(\S+)/i.exec(g),a&&(n=a[1]);break}default:n=t.getAttribute(o)}null!=n&&d.push([o,n.toString()])}}}},this)}d.sort(function(e,t){return e[0]<t[0]?-1:e[0]==t[0]?0:1});for(var b=0;r=d[b++];)a.push(" ",r[0],'="',"string"==typeof r[1]?n(r[1],!0):r[1],'"');switch(s){case"br":case"hr":case"img":case"input":case"base":case"meta":case"area":case"basefont":a.push(" />");break;case"script":a.push(">",t.innerHTML,"</",s,">");break;default:a.push(">"),t.hasChildNodes()&&o.getChildrenHtmlHelper(t,a),a.push("</",s,">")}break;case 4:case 3:a.push(n(t.nodeValue,!0));break;case 8:a.push("\x3c!--",n(t.nodeValue,!0),"--\x3e");break;default:a.push("\x3c!-- Element not recognized - Type: ",t.nodeType," Name: ",t.nodeName,"--\x3e")}},o.getChildrenHtml=function(e){var t=[];return o.getChildrenHtmlHelper(e,t),t.join("")},o.getChildrenHtmlHelper=function(e,t){if(e)for(var n,a=e.childNodes||e,s=!i("ie")||a!==e,r=0;n=a[r++];)s&&n.parentNode!=e||o.getNodeHtmlHelper(n,t)},o});//# sourceMappingURL=html.js.map