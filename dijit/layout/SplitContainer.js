//>>built
define("dijit/layout/SplitContainer",["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","../registry","../_WidgetBase","./_LayoutWidget"],function(t,e,i,o,n,a,s,r,d,l,h,u,c,p,f,g){var m=i("dijit.layout.SplitContainer",g,{constructor:function(){l.deprecated("dijit.layout.SplitContainer is deprecated","use BorderContainer with splitter instead",2)},activeSizing:!1,sizerWidth:7,orientation:"horizontal",persist:!0,baseClass:"dijitSplitContainer",postMixInProperties:function(){this.inherited("postMixInProperties",arguments),this.isHorizontal="horizontal"==this.orientation},postCreate:function(){if(this.inherited(arguments),this.sizers=[],c("mozilla")&&(this.domNode.style.overflow="-moz-scrollbars-none"),"object"==typeof this.sizerWidth)try{this.sizerWidth=parseInt(this.sizerWidth.toString())}catch(t){this.sizerWidth=7}var e=this.ownerDocument.createElement("div");this.virtualSizer=e,e.style.position="relative",e.style.zIndex=10,e.className=this.isHorizontal?"dijitSplitContainerVirtualSizerH":"dijitSplitContainerVirtualSizerV",this.domNode.appendChild(e),o.setSelectable(e,!1)},destroy:function(){if(delete this.virtualSizer,this._ownconnects)for(var t;t=this._ownconnects.pop();)t.remove();this.inherited(arguments)},startup:function(){this._started||(t.forEach(this.getChildren(),function(t,e,i){this._setupChild(t),e<i.length-1&&this._addSizer()},this),this.persist&&this._restoreState(),this.inherited(arguments))},_setupChild:function(t){this.inherited(arguments),t.domNode.style.position="absolute",n.add(t.domNode,"dijitSplitPane")},_onSizerMouseDown:function(t){if(t.target.id){for(var e=0;e<this.sizers.length&&this.sizers[e].id!=t.target.id;e++);e<this.sizers.length&&this.beginSizing(t,e)}},_addSizer:function(t){t=void 0===t?this.sizers.length:t;var e=this.ownerDocument.createElement("div");e.id=p.getUniqueId("dijit_layout_SplitterContainer_Splitter"),this.sizers.splice(t,0,e),this.domNode.appendChild(e),e.className=this.isHorizontal?"dijitSplitContainerSizerH":"dijitSplitContainerSizerV";var i=this.ownerDocument.createElement("div");i.className="thumb",e.appendChild(i),this.connect(e,"onmousedown","_onSizerMouseDown"),o.setSelectable(e,!1)},removeChild:function(e){if(this.sizers.length){var i=t.indexOf(this.getChildren(),e);-1!=i&&(i==this.sizers.length&&i--,a.destroy(this.sizers[i]),this.sizers.splice(i,1))}this.inherited(arguments),this._started&&this.layout()},addChild:function(t,e){if("undefined"!=typeof e&&"last"!=e||(e=this.getChildren().length),this.inherited(arguments,[t,e]),this._started){var i=this.getChildren();i.length>1&&this._addSizer(e),this.layout()}},layout:function(){this.paneWidth=this._contentBox.w,this.paneHeight=this._contentBox.h;var e=this.getChildren();if(e.length){var i=this.isHorizontal?this.paneWidth:this.paneHeight;e.length>1&&(i-=this.sizerWidth*(e.length-1));var o=0;t.forEach(e,function(t){o+=t.sizeShare});var n=i/o,a=0;t.forEach(e.slice(0,e.length-1),function(t){var e=Math.round(n*t.sizeShare);t.sizeActual=e,a+=e}),e[e.length-1].sizeActual=i-a,this._checkSizes();var s=0,r=e[0].sizeActual;this._movePanel(e[0],s,r),e[0].position=s,s+=r,this.sizers&&t.some(e.slice(1),function(t,e){return this.sizers[e]?(this._moveSlider(this.sizers[e],s,this.sizerWidth),this.sizers[e].position=s,s+=this.sizerWidth,r=t.sizeActual,this._movePanel(t,s,r),t.position=s,void(s+=r)):!0},this)}},_movePanel:function(t,e,i){var o;this.isHorizontal?(t.domNode.style.left=e+"px",t.domNode.style.top=0,o={w:i,h:this.paneHeight},t.resize?t.resize(o):s.setMarginBox(t.domNode,o)):(t.domNode.style.left=0,t.domNode.style.top=e+"px",o={w:this.paneWidth,h:i},t.resize?t.resize(o):s.setMarginBox(t.domNode,o))},_moveSlider:function(t,e,i){this.isHorizontal?(t.style.left=e+"px",t.style.top=0,s.setMarginBox(t,{w:i,h:this.paneHeight})):(t.style.left=0,t.style.top=e+"px",s.setMarginBox(t,{w:this.paneWidth,h:i}))},_growPane:function(t,e){return t>0&&e.sizeActual>e.sizeMin&&(e.sizeActual-e.sizeMin>t?(e.sizeActual=e.sizeActual-t,t=0):(t-=e.sizeActual-e.sizeMin,e.sizeActual=e.sizeMin)),t},_checkSizes:function(){var e=0,i=0,o=this.getChildren();if(t.forEach(o,function(t){i+=t.sizeActual,e+=t.sizeMin}),i>=e){var n=0;if(t.forEach(o,function(t){t.sizeActual<t.sizeMin&&(n+=t.sizeMin-t.sizeActual,t.sizeActual=t.sizeMin)}),n>0){var a=this.isDraggingLeft?o.reverse():o;t.forEach(a,function(t){n=this._growPane(n,t)},this)}}else t.forEach(o,function(t){t.sizeActual=Math.round(i*(t.sizeMin/e))})},beginSizing:function(t,e){var i=this.getChildren();this.paneBefore=i[e],this.paneAfter=i[e+1],this.paneBefore.sizeBeforeDrag=this.paneBefore.sizeActual,this.paneAfter.sizeBeforeDrag=this.paneAfter.sizeActual,this.paneAfter.positionBeforeDrag=this.paneAfter.position,this.isSizing=!0,this.sizingSplitter=this.sizers[e],this.sizingSplitter.positionBeforeDrag=r.get(this.sizingSplitter,this.isHorizontal?"left":"top"),this.cover?this.cover.style.zIndex=5:this.cover=a.create("div",{style:{position:"absolute",zIndex:5,top:0,left:0,width:"100%",height:"100%"}},this.domNode),this.sizingSplitter.style.zIndex=6,this.startPoint=this.lastPoint=this.isHorizontal?t.pageX:t.pageY,this.maxDelta=this.paneAfter.sizeActual-this.paneAfter.sizeMin,this.minDelta=-1*(this.paneBefore.sizeActual-this.paneBefore.sizeMin),this.activeSizing||this._showSizingLine(),this._ownconnects=[u(this.ownerDocument.documentElement,"mousemove",h.hitch(this,"changeSizing")),u(this.ownerDocument.documentElement,"mouseup",h.hitch(this,"endSizing"))],d.stop(t)},changeSizing:function(t){if(this.isSizing){this.lastPoint=this.isHorizontal?t.pageX:t.pageY;var e=Math.max(Math.min(this.lastPoint-this.startPoint,this.maxDelta),this.minDelta);this.activeSizing?this._updateSize(e):this._moveSizingLine(e),d.stop(t)}},endSizing:function(){if(this.isSizing){this.cover&&(this.cover.style.zIndex=-1),this.activeSizing||this._hideSizingLine();var t=Math.max(Math.min(this.lastPoint-this.startPoint,this.maxDelta),this.minDelta);this._updateSize(t),this.isSizing=!1,this.persist&&this._saveState(this);for(var e;e=this._ownconnects.pop();)e.remove()}},_updateSize:function(e){this.paneBefore.sizeActual=this.paneBefore.sizeBeforeDrag+e,this.paneAfter.position=this.paneAfter.positionBeforeDrag+e,this.paneAfter.sizeActual=this.paneAfter.sizeBeforeDrag-e,t.forEach(this.getChildren(),function(t){t.sizeShare=t.sizeActual}),this._started&&this.layout()},_showSizingLine:function(){this._moveSizingLine(0),s.setMarginBox(this.virtualSizer,this.isHorizontal?{w:this.sizerWidth,h:this.paneHeight}:{w:this.paneWidth,h:this.sizerWidth}),this.virtualSizer.style.display="block"},_hideSizingLine:function(){this.virtualSizer.style.display="none"},_moveSizingLine:function(t){var e=t+this.sizingSplitter.positionBeforeDrag;r.set(this.virtualSizer,this.isHorizontal?"left":"top",e+"px")},_getCookieName:function(t){return this.id+"_"+t},_restoreState:function(){t.forEach(this.getChildren(),function(t,i){var o=this._getCookieName(i),n=e(o);if(n){var a=parseInt(n);"number"==typeof a&&(t.sizeShare=a)}},this)},_saveState:function(){this.persist&&t.forEach(this.getChildren(),function(t,i){e(this._getCookieName(i),t.sizeShare,{expires:365})},this)}});return m.ChildWidgetProperties={sizeMin:10,sizeShare:10},h.extend(f,m.ChildWidgetProperties),m});//# sourceMappingURL=SplitContainer.js.map