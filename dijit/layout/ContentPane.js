//>>built
define("dijit/layout/ContentPane",["dojo/_base/kernel","dojo/_base/lang","../_Widget","../_Container","./_ContentPaneResizeMixin","dojo/string","dojo/html","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/_base/xhr","dojo/i18n","dojo/when","dojo/i18n!../nls/loading"],function(e,t,i,o,n,s,r,a,d,l,h,c,u,p,f,m){return d("dijit.layout.ContentPane",[i,o,n],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:e._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(e,t,i){var o=new i(e,t);return!o.href&&o._contentSetter&&o._contentSetter.parseDeferred&&!o._contentSetter.parseDeferred.isFulfilled()?o._contentSetter.parseDeferred.then(function(){return o}):o},create:function(e,i){if((!e||!e.template)&&i&&!("href"in e)&&!("content"in e)){i=h.byId(i);for(var o=i.ownerDocument.createDocumentFragment();i.firstChild;)o.appendChild(i.firstChild);e=t.delegate(e,{content:o})}this.inherited(arguments,[e,i])},postMixInProperties:function(){this.inherited(arguments);var e=f.getLocalization("dijit","loading",this.lang);this.loadingMessage=s.substitute(this.loadingMessage,e),this.errorMessage=s.substitute(this.errorMessage,e)},buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode),this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments),this._contentSetter&&a.forEach(this._contentSetter.parseResults,function(e){e._started||e._destroyed||!t.isFunction(e.startup)||(e.startup(),e._started=!0)},this)},_startChildren:function(){a.forEach(this.getChildren(),function(e){e._started||e._destroyed||!t.isFunction(e.startup)||(e.startup(),e._started=!0)}),this._contentSetter&&a.forEach(this._contentSetter.parseResults,function(e){e._started||e._destroyed||!t.isFunction(e.startup)||(e.startup(),e._started=!0)},this)},setHref:function(t){return e.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0"),this.set("href",t)},_setHrefAttr:function(e){return this.cancel(),this.onLoadDeferred=new l(t.hitch(this,"cancel")),this.onLoadDeferred.then(t.hitch(this,"onLoad")),this._set("href",e),this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0,this.onLoadDeferred},setContent:function(t){e.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0"),this.set("content",t)},_setContentAttr:function(e){return this._set("href",""),this.cancel(),this.onLoadDeferred=new l(t.hitch(this,"cancel")),this._created&&this.onLoadDeferred.then(t.hitch(this,"onLoad")),this._setContent(e||""),this._isDownloaded=!1,this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel(),delete this._xhrDfd,this.onLoadDeferred=null},destroy:function(){this.cancel(),this.inherited(arguments)},destroyRecursive:function(e){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){if(this.inherited(arguments),this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){return this.cancel(),this.onLoadDeferred=new l(t.hitch(this,"cancel")),this.onLoadDeferred.then(t.hitch(this,"onLoad")),this._load(),this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var e=this,i={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};t.isObject(this.ioArgs)&&t.mixin(i,this.ioArgs);var o,n=this._xhrDfd=(this.ioMethod||p.get)(i);n.then(function(t){o=t;try{return e._isDownloaded=!0,e._setContent(t,!1)}catch(t){e._onError("Content",t)}},function(t){return n.canceled||e._onError("Download",t),delete e._xhrDfd,t}).then(function(){return e.onDownloadEnd(),delete e._xhrDfd,o}),delete this._hrefChanged},_onLoadHandler:function(e){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(e)}catch(e){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(e){}},destroyDescendants:function(e){this.isLoaded&&this._onUnloadHandler();var t=this._contentSetter;a.forEach(this.getChildren(),function(t){t.destroyRecursive?t.destroyRecursive(e):t.destroy&&t.destroy(e),t._destroyed=!0}),t&&(a.forEach(t.parseResults,function(t){t._destroyed||(t.destroyRecursive?t.destroyRecursive(e):t.destroy&&t.destroy(e),t._destroyed=!0)}),delete t.parseResults),e||u.empty(this.containerNode),delete this._singleChild},_setContent:function(e,i){e=this.preprocessContent(e),this.destroyDescendants();var o=this._contentSetter;o&&o instanceof r._ContentSetter||(o=this._contentSetter=new r._ContentSetter({node:this.containerNode,_onError:t.hitch(this,this._onError),onContentError:t.hitch(this,function(e){var t=this.onContentError(e);try{this.containerNode.innerHTML=t}catch(e){}})}));var n=t.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!e.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),s=o.set(t.isObject(e)&&e.domNode?e.domNode:e,n),a=this;return m(s&&s.then?s:o.parseDeferred,function(){delete a._contentSetterParams,i||(a._started&&(a._startChildren(),a._scheduleLayout()),a._onLoadHandler(e))})},preprocessContent:function(e){return e},_onError:function(e,t,i){this.onLoadDeferred.reject(t);var o=this["on"+e+"Error"].call(this,t);i||o&&this._setContent(o,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})});//# sourceMappingURL=ContentPane.js.map