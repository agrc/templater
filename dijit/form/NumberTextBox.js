//>>built
define("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/i18n","dojo/string","dojo/number","./RangeBoundTextBox"],function(e,t,i,o,n,s){var r=function(e){var t,e=e||{},o=i.getLocalization("dojo.cldr","number",i.normalizeLocale(e.locale)),n=e.pattern?e.pattern:o[(e.type||"decimal")+"Format"];return t="number"==typeof e.places?e.places:"string"==typeof e.places&&e.places.length>0?e.places.replace(/.*,/,""):-1!=n.indexOf(".")?n.split(".")[1].replace(/[^#0]/g,"").length:0,{sep:o.decimal,places:t}},a=e("dijit.form.NumberTextBoxMixin",null,{pattern:function(e){return"("+(this.focused&&this.editOptions?this._regExpGenerator(t.delegate(e,this.editOptions))+"|":"")+this._regExpGenerator(e)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:n.format,_regExpGenerator:n.regexp,_decimalInfo:r(),postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},_setConstraintsAttr:function(e){var t="number"==typeof e.places?e.places:0;t&&t++,"number"!=typeof e.max&&(e.max=9*Math.pow(10,15-t)),"number"!=typeof e.min&&(e.min=-9*Math.pow(10,15-t)),this.inherited(arguments,[e]),this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value),this._decimalInfo=r(e)},_onFocus:function(){if(!this.disabled&&!this.readOnly){var e=this.get("value");if("number"==typeof e&&!isNaN(e)){var t=this.format(e,this.constraints);void 0!==t&&(this.textbox.value=t)}this.inherited(arguments)}},format:function(e,i){var o=String(e);return"number"!=typeof e?o:isNaN(e)?"":"rangeCheck"in this&&this.rangeCheck(e,i)||!1===i.exponent||!/\de[-+]?\d/i.test(o)?(this.editOptions&&this.focused&&(i=t.mixin({},i,this.editOptions)),this._formatter(e,i)):o},_parser:n.parse,parse:function(e,i){var o=t.mixin({},i,this.editOptions&&this.focused?this.editOptions:{});if(this.focused&&null!=o.places){var n=o.places,s="number"==typeof n?n:Number(n.split(",").pop());o.places="0,"+s}var r=this._parser(e,o);return this.editOptions&&this.focused&&isNaN(r)&&(r=this._parser(e,i)),r},_getDisplayedValueAttr:function(){var e=this.inherited(arguments);return isNaN(e)?this.textbox.value:e},filter:function(e){return null==e||"string"==typeof e&&""==e?NaN:("number"!=typeof e||isNaN(e)||0==e||(e=n.round(e,this._decimalInfo.places)),this.inherited(arguments,[e]))},serialize:function(e,t){return"number"!=typeof e||isNaN(e)?"":this.inherited(arguments)},_setBlurValue:function(){var e=t.hitch(t.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(e,!0)},_setValueAttr:function(e,t,i){void 0!==e&&void 0===i&&(i=String(e),"number"==typeof e?isNaN(e)?i="":("rangeCheck"in this&&this.rangeCheck(e,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(i))&&(i=void 0):e?e=void 0:(i="",e=NaN)),this.inherited(arguments,[e,t,i])},_getValueAttr:function(){var e=this.inherited(arguments);{if(!isNaN(e)||""===this.textbox.value)return e;if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&new RegExp("^"+n._realNumberRegexp(t.delegate(this.constraints))+"$").test(this.textbox.value)){var i=Number(this.textbox.value);return isNaN(i)?void 0:i}}},isValid:function(e){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var t=this.get("value");return!(isNaN(t)||!this.rangeCheck(t,this.constraints))&&(!(!1===this.constraints.exponent||!/\de[-+]?\d/i.test(this.textbox.value))||this.inherited(arguments))},_isValidSubset:function(){var e="number"==typeof this.constraints.min,t="number"==typeof this.constraints.max,i=this.get("value");if(isNaN(i)||!e&&!t)return this.inherited(arguments);var n=0|i,s=i<0,r=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),a=this.maxLength||20,d=a-this.textbox.value.length,c=r?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"",l=r?n+"."+c:n+"",u=o.rep("9",d),h=i,f=i;return s?h=Number(l+u):f=Number(l+u),!(e&&f<this.constraints.min||t&&h>this.constraints.max)}}),d=e("dijit.form.NumberTextBox",[s,a],{baseClass:"dijitTextBox dijitNumberTextBox"});return d.Mixin=a,d});//# sourceMappingURL=NumberTextBox.js.map