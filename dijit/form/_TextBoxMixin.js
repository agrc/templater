//>>built
define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/sniff","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(t,e,i,o,n,s,r,a){var d=e("dijit.form._TextBoxMixin"+(o("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(t,e,i){var o;void 0!==t&&(o=this.filter(t),"string"!=typeof i&&(i=null===o||"number"==typeof o&&isNaN(o)?"":this.filter(this.format(o,this.constraints)),0!=this.compare(o,this.filter(this.parse(i,this.constraints)))&&(i=null))),null==i||"number"==typeof i&&isNaN(i)||this.textbox.value==i||(this.textbox.value=i,this._set("displayedValue",this.get("displayedValue"))),this.inherited(arguments,[o,e])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(t){null==t?t="":"string"!=typeof t&&(t=String(t)),this.textbox.value=t,this._setValueAttr(this.get("value"),void 0),this._set("displayedValue",this.get("displayedValue"))},format:function(t){return null==t?"":t.toString?t.toString():t},parse:function(t){return t},_refreshState:function(){},onInput:function(){},_onInput:function(t){this._lastInputEventValue=this.textbox.value,this._processInput(this._lastInputProducingEvent||t),delete this._lastInputProducingEvent,this.intermediateChanges&&this._handleOnChange(this.get("value"),!1)},_processInput:function(){this._refreshState(),this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){function t(t){var e;if("keydown"==t.type&&229!=t.keyCode){switch(e=t.keyCode){case n.SHIFT:case n.ALT:case n.CTRL:case n.META:case n.CAPS_LOCK:case n.NUM_LOCK:case n.SCROLL_LOCK:return}if(!t.ctrlKey&&!t.metaKey&&!t.altKey){switch(e){case n.NUMPAD_0:case n.NUMPAD_1:case n.NUMPAD_2:case n.NUMPAD_3:case n.NUMPAD_4:case n.NUMPAD_5:case n.NUMPAD_6:case n.NUMPAD_7:case n.NUMPAD_8:case n.NUMPAD_9:case n.NUMPAD_MULTIPLY:case n.NUMPAD_PLUS:case n.NUMPAD_ENTER:case n.NUMPAD_MINUS:case n.NUMPAD_PERIOD:case n.NUMPAD_DIVIDE:return}if(e>=65&&e<=90||e>=48&&e<=57||e==n.SPACE)return;var i=!1;for(var a in n)if(n[a]===t.keyCode){i=!0;break}if(!i)return}}if(e=t.charCode>=32?String.fromCharCode(t.charCode):t.charCode,e||(e=t.keyCode>=65&&t.keyCode<=90||t.keyCode>=48&&t.keyCode<=57||t.keyCode==n.SPACE?String.fromCharCode(t.keyCode):t.keyCode),e||(e=229),"keypress"==t.type){if("string"!=typeof e)return;if((e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||" "===e)&&(t.ctrlKey||t.metaKey||t.altKey))return}var d,l={faux:!0};for(d in t)if(!/^(layer[XY]|returnValue|keyLocation)$/.test(d)){var h=t[d];"function"!=typeof h&&void 0!==h&&(l[d]=h)}if(s.mixin(l,{charOrCode:e,_wasConsumed:!1,preventDefault:function(){l._wasConsumed=!0,t.preventDefault()},stopPropagation:function(){t.stopPropagation()}}),this._lastInputProducingEvent=l,!1===this.onInput(l)&&(l.preventDefault(),l.stopPropagation()),!l._wasConsumed&&o("ie")<=9)switch(t.keyCode){case n.TAB:case n.ESCAPE:case n.DOWN_ARROW:case n.UP_ARROW:case n.LEFT_ARROW:case n.RIGHT_ARROW:break;default:if(t.keyCode==n.ENTER&&"textarea"!=this.textbox.tagName.toLowerCase())break;this.defer(function(){this.textbox.value!==this._lastInputEventValue&&r.emit(this.textbox,"input",{bubbles:!0})})}}this.textbox.setAttribute("value",this.textbox.value),this.inherited(arguments),this.own(r(this.textbox,"keydown, keypress, paste, cut, compositionend",s.hitch(this,t)),r(this.textbox,"input",s.hitch(this,"_onInput")),r(this.domNode,"keypress",function(t){t.stopPropagation()}))},_blankValue:"",filter:function(t){return null===t?this._blankValue:"string"!=typeof t?t:(this.trim&&(t=s.trim(t)),this.uppercase&&(t=t.toUpperCase()),this.lowercase&&(t=t.toLowerCase()),this.propercase&&(t=t.replace(/[^\s]+/g,function(t){return t.substring(0,1).toUpperCase()+t.substring(1)})),t)},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(t){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(t){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==t&&(this._selectOnClickHandle=r.once(this.domNode,"mouseup, touchend",s.hitch(this,function(t){this._isTextSelected()||d.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="",this.inherited(arguments)}});return o("dojo-bidi")&&(d=e("dijit.form._TextBoxMixin",d,{_setValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode),this.inherited(arguments)}})),d._setSelectionRange=a._setSelectionRange=function(t,e,i){t.setSelectionRange&&t.setSelectionRange(e,i)},d.selectInputText=a.selectInputText=function(t,e,o){t=i.byId(t),isNaN(e)&&(e=0),isNaN(o)&&(o=t.value?t.value.length:0);try{t.focus(),d._setSelectionRange(t,e,o)}catch(t){}},d});//# sourceMappingURL=_TextBoxMixin.js.map