//>>built
define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","dojo/has!dojo-bidi?./_BidiMixin","./registry"],function(t,e,i,o,n,s,d,r,a,h,l,c,u,p,f,m,_,N,g,v,b,C,y){function x(t){var e={};for(var i in t)e[i.toLowerCase()]=!0;return e}function j(t){return function(e){r[e?"set":"remove"](this.domNode,t,e),this._set(t,e)}}function w(t,e){return t===e||t!==t&&e!==e}u.add("dijit-legacy-requires",!p.isAsync),u.add("dojo-bidi",!1),u("dijit-legacy-requires")&&_(0,function(){t(["dijit/_base/manager"])});var T={},D=s("dijit._WidgetBase",[N,b],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:j("lang"),dir:"",_setDirAttr:j("dir"),class:"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(t){this._set("ownerDocument",t)},attributeMap:{},_blankGif:o.blankGif||t.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var t=this.constructor;if(!t._setterAttrs){var e=t.prototype,i=t._setterAttrs=[],o=t._onMap={};for(var n in e.attributeMap)i.push(n);for(n in e)/^on/.test(n)&&(o[n.substring(2).toLowerCase()]=n),/^_set[A-Z](.*)Attr$/.test(n)&&(n=n.charAt(4).toLowerCase()+n.substr(5,n.length-9),e.attributeMap&&n in e.attributeMap||i.push(n))}},postscript:function(t,e){this.create(t,e)},create:function(t,e){this._introspect(),this.srcNodeRef=d.byId(e),this._connects=[],this._supportingWidgets=[],this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id),t&&(this.params=t,f.mixin(this,t)),this.postMixInProperties(),this.id||(this.id=y.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id),this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document),this.ownerDocumentBody=v.body(this.ownerDocument),y.add(this),this.buildRendering();var i;if(this.domNode){this._applyAttributes();var o=this.srcNodeRef;o&&o.parentNode&&this.domNode!==o&&(o.parentNode.replaceChild(this.domNode,o),i=!0),this.domNode.setAttribute("widgetId",this.id)}this.postCreate(),i&&delete this.srcNodeRef,this._created=!0},_applyAttributes:function(){var t={};for(var i in this.params||{})t[i]=this._get(i);e.forEach(this.constructor._setterAttrs,function(e){if(!(e in t)){var i=this._get(e);i&&this.set(e,i)}},this);for(i in t)this.set(i,t[i])},postMixInProperties:function(){},buildRendering:function(){if(this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div")),this.baseClass){var t=this.baseClass.split(" ");this.isLeftToRight()||(t=t.concat(e.map(t,function(t){return t+"Rtl"}))),a.add(this.domNode,t)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,e.forEach(this.getChildren(),function(t){t._started||t._destroyed||!f.isFunction(t.startup)||(t.startup(),t._started=!0)}))},destroyRecursive:function(t){this._beingDestroyed=!0,this.destroyDescendants(t),this.destroy(t)},destroy:function(t){function i(e){e.destroyRecursive?e.destroyRecursive(t):e.destroy&&e.destroy(t)}this._beingDestroyed=!0,this.uninitialize(),e.forEach(this._connects,f.hitch(this,"disconnect")),e.forEach(this._supportingWidgets,i),this.domNode&&e.forEach(y.findWidgets(this.domNode,this.containerNode),i),this.destroyRendering(t),y.remove(this.id),this._destroyed=!0},destroyRendering:function(t){this.bgIframe&&(this.bgIframe.destroy(t),delete this.bgIframe),this.domNode&&(t?r.remove(this.domNode,"widgetId"):h.destroy(this.domNode),delete this.domNode),this.srcNodeRef&&(t||h.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(t){e.forEach(this.getChildren(),function(e){e.destroyRecursive&&e.destroyRecursive(t)})},uninitialize:function(){return!1},_setStyleAttr:function(t){var e=this.domNode;f.isObject(t)?c.set(e,t):e.style.cssText?e.style.cssText+="; "+t:e.style.cssText=t,this._set("style",t)},_attrToDom:function(t,i,o){o=arguments.length>=3?o:this.attributeMap[t],e.forEach(f.isArray(o)?o:[o],function(e){var o=this[e.node||e||"domNode"];switch(e.type||"attribute"){case"attribute":f.isFunction(i)&&(i=f.hitch(this,i));var n=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(t)?t.toLowerCase():t;o.tagName?r.set(o,n,i):o.set(n,i);break;case"innerText":o.innerHTML="",o.appendChild(this.ownerDocument.createTextNode(i));break;case"innerHTML":o.innerHTML=i;break;case"class":a.replace(o,i,this[t]);break;case"toggleClass":a.toggle(o,e.className||t,i)}},this)},get:function(t){var e=this._getAttrNames(t);return this[e.g]?this[e.g]():this._get(t)},set:function(t,e){if("object"==typeof t){for(var i in t)this.set(i,t[i]);return this}var o=this._getAttrNames(t),n=this[o.s];if(f.isFunction(n))var s=n.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&!f.isFunction(this.focusNode)?"focusNode":"domNode",r=this[d]&&this[d].tagName,a=r&&(T[r]||(T[r]=x(this[d]))),h=t in this.attributeMap?this.attributeMap[t]:o.s in this?this[o.s]:a&&o.l in a&&"function"!=typeof e||/^aria-|^data-|^role$/.test(t)?d:null;null!=h&&this._attrToDom(t,e,h),this._set(t,e)}return s||this},_attrPairNames:{},_getAttrNames:function(t){var e=this._attrPairNames;if(e[t])return e[t];var i=t.replace(/^[a-z]|-[a-zA-Z]/g,function(t){return t.charAt(t.length-1).toUpperCase()});return e[t]={n:t+"Node",s:"_set"+i+"Attr",g:"_get"+i+"Attr",l:i.toLowerCase()}},_set:function(t,e){var i=this[t];this[t]=e,this._created&&!w(i,e)&&(this._watchCallbacks&&this._watchCallbacks(t,i,e),this.emit("attrmodified-"+t,{detail:{prevValue:i,newValue:e}}))},_get:function(t){return this[t]},emit:function(t,e,i){e=e||{},void 0===e.bubbles&&(e.bubbles=!0),void 0===e.cancelable&&(e.cancelable=!0),e.detail||(e.detail={}),e.detail.widget=this;var o,n=this["on"+t];return n&&(o=n.apply(this,i||[e])),this._started&&!this._beingDestroyed&&m.emit(this.domNode,t.toLowerCase(),e),o},on:function(t,e){var o=this._onMap(t);return o?i.after(this,o,e,!0):this.own(m(this.domNode,t,e))[0]},_onMap:function(t){var e=this.constructor,i=e._onMap;if(!i){i=e._onMap={};for(var o in e.prototype)/^on/.test(o)&&(i[o.replace(/^on/,"").toLowerCase()]=o)}return i["string"==typeof t&&t.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?y.findWidgets(this.containerNode):[]},getParent:function(){return y.getEnclosingWidget(this.domNode.parentNode)},connect:function(t,e,i){return this.own(n.connect(t,e,this,i))[0]},disconnect:function(t){t.remove()},subscribe:function(t,e){return this.own(g.subscribe(t,f.hitch(this,e)))[0]},unsubscribe:function(t){t.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():l.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=c.get(this.domNode,"display")},placeAt:function(t,e){var i=!t.tagName&&y.byId(t);if(!i||!i.addChild||e&&"number"!=typeof e){var o=i&&"domNode"in i?i.containerNode&&!/after|before|replace/.test(e||"")?i.containerNode:i.domNode:d.byId(t,this.ownerDocument);h.place(this.domNode,o,e),!this._started&&(this.getParent()||{})._started&&this.startup()}else i.addChild(this,e);return this},defer:function(t,e){var i=setTimeout(f.hitch(this,function(){i&&(i=null,this._destroyed||f.hitch(this,t)())}),e||0);return{remove:function(){return i&&(clearTimeout(i),i=null),null}}}});return u("dojo-bidi")&&D.extend(C),D});//# sourceMappingURL=_WidgetBase.js.map