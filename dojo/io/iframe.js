//>>built
define("dojo/io/iframe",["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(e,t,a,i,r,d,o,n,l,s,m,f,y){a.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var u=y._iframeName;u=u.substring(0,u.lastIndexOf("_"));var h=i.delegate(y,{create:function(){return h._frame=y.create.apply(y,arguments)},get:null,post:null,send:function(i){var d,o=r._ioSetArgs(i,function(e){d&&d.cancel()},function(e){var i=null,r=e.ioArgs;try{var o=r.handleAs;"xml"===o||"html"===o?i=d.response.data:(i=d.response.text,"json"===o?i=t.fromJson(i):"javascript"===o&&(i=a.eval(i)))}catch(n){i=n}return i},function(e,t){return t.ioArgs._hasError=!0,e}),l=o.ioArgs,s="GET",m=n.byId(i.form);i.method&&"POST"===i.method.toUpperCase()&&m&&(s="POST");var u={method:s,handleAs:"json"===i.handleAs||"javascript"===i.handleAs?"text":i.handleAs,form:i.form,query:m?null:i.content,data:m?i.content:null,timeout:i.timeout,ioArgs:l};if(u.method&&(u.method=u.method.toUpperCase()),e.ioPublish&&a.publish&&l.args.ioPublish!==!1)var h=f.after(y,"_notifyStart",function(e){e.options.ioArgs===l&&(h.remove(),r._ioNotifyStart(o))},!0);return d=y(l.url,u,!0),l._callNext=d._callNext,d.then(function(){o.resolve(o)}).otherwise(function(e){o.ioArgs.error=e,o.reject(e)}),o},_iframeOnload:o.global[u+"_onload"]});return i.setObject("dojo.io.iframe",h),h});//# sourceMappingURL=iframe.js.map