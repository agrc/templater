//>>built
define("dojo/io/iframe",["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(e,t,a,i,r,o,d,n,l,s,m,f,u){a.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var y=u._iframeName;y=y.substring(0,y.lastIndexOf("_"));var c=i.delegate(u,{create:function(){return c._frame=u.create.apply(u,arguments)},get:null,post:null,send:function(i){var o,d=r._ioSetArgs(i,function(e){o&&o.cancel()},function(e){var i=null,r=e.ioArgs;try{var d=r.handleAs;"xml"===d||"html"===d?i=o.response.data:(i=o.response.text,"json"===d?i=t.fromJson(i):"javascript"===d&&(i=a.eval(i)))}catch(n){i=n}return i},function(e,t){return t.ioArgs._hasError=!0,e}),l=d.ioArgs,s="GET",m=n.byId(i.form);i.method&&"POST"===i.method.toUpperCase()&&m&&(s="POST");var y={method:s,handleAs:"json"===i.handleAs||"javascript"===i.handleAs?"text":i.handleAs,form:i.form,query:m?null:i.content,data:m?i.content:null,timeout:i.timeout,ioArgs:l};if(y.method&&(y.method=y.method.toUpperCase()),e.ioPublish&&a.publish&&l.args.ioPublish!==!1)var c=f.after(u,"_notifyStart",function(e){e.options.ioArgs===l&&(c.remove(),r._ioNotifyStart(d))},!0);return o=u(l.url,y,!0),l._callNext=o._callNext,o.then(function(){d.resolve(d)}).otherwise(function(e){d.ioArgs.error=e,d.reject(e)}),d},_iframeOnload:d.global[y+"_onload"]});return i.setObject("dojo.io.iframe",c),c});//# sourceMappingURL=iframe.js.map