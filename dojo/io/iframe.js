//>>built
define("dojo/io/iframe",["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(e,t,a,i,r,d,o,n,l,s,m,f,u){a.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var y=u._iframeName;y=y.substring(0,y.lastIndexOf("_"));var h=i.delegate(u,{create:function(){return h._frame=u.create.apply(u,arguments)},get:null,post:null,send:function(i){var d,o=r._ioSetArgs(i,function(e){d&&d.cancel()},function(e){var i=null,r=e.ioArgs;try{var o=r.handleAs;"xml"===o||"html"===o?i=d.response.data:(i=d.response.text,"json"===o?i=t.fromJson(i):"javascript"===o&&(i=a.eval(i)))}catch(e){i=e}return i},function(e,t){return t.ioArgs._hasError=!0,e}),l=o.ioArgs,s="GET",m=n.byId(i.form);i.method&&"POST"===i.method.toUpperCase()&&m&&(s="POST");var y={method:s,handleAs:"json"===i.handleAs||"javascript"===i.handleAs?"text":i.handleAs,form:i.form,query:m?null:i.content,data:m?i.content:null,timeout:i.timeout,ioArgs:l};if(y.method&&(y.method=y.method.toUpperCase()),e.ioPublish&&a.publish&&!1!==l.args.ioPublish)var h=f.after(u,"_notifyStart",function(e){e.options.ioArgs===l&&(h.remove(),r._ioNotifyStart(o))},!0);return d=u(l.url,y,!0),l._callNext=d._callNext,d.then(function(){o.resolve(o)}).otherwise(function(e){o.ioArgs.error=e,o.reject(e)}),o},_iframeOnload:o.global[y+"_onload"]});return i.setObject("dojo.io.iframe",h),h});//# sourceMappingURL=iframe.js.map