//>>built
define("dojo/date/locale",["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(e,t,i,a,r,n,o,s,d){function l(e,t,i,r){return r.replace(/([a-z])\1*/gi,function(n){var s,d,l=n.charAt(0),u=n.length,c=["abbr","wide","narrow"];switch(l){case"G":s=t[u<4?"eraAbbr":"eraNames"][e.getFullYear()<0?0:1];break;case"y":switch(s=e.getFullYear(),u){case 1:break;case 2:if(!i.fullYear){s=String(s),s=s.substr(s.length-2);break}default:d=!0}break;case"Q":case"q":s=Math.ceil((e.getMonth()+1)/3),d=!0;break;case"M":case"L":var m=e.getMonth();if(u<3)s=m+1,d=!0;else{var h=["months","L"==l?"standAlone":"format",c[u-3]].join("-");s=t[h][m]}break;case"w":s=f._getWeekOfYear(e,0),d=!0;break;case"d":s=e.getDate(),d=!0;break;case"D":s=f._getDayOfYear(e),d=!0;break;case"e":case"c":var p=e.getDay();if(u<2){s=(p-a.getFirstDayOfWeek(i.locale)+8)%7;break}case"E":if(p=e.getDay(),u<3)s=p+1,d=!0;else{var y=["days","c"==l?"standAlone":"format",c[u-3]].join("-");s=t[y][p]}break;case"a":var v=e.getHours()<12?"am":"pm";s=i[v]||t["dayPeriods-format-wide-"+v];break;case"h":case"H":case"K":case"k":var g=e.getHours();switch(l){case"h":s=g%12||12;break;case"H":s=g;break;case"K":s=g%12;break;case"k":s=g||24}d=!0;break;case"m":s=e.getMinutes(),d=!0;break;case"s":s=e.getSeconds(),d=!0;break;case"S":s=Math.round(e.getMilliseconds()*Math.pow(10,u-3)),d=!0;break;case"v":case"z":if(s=f._getZone(e,!0,i))break;u=4;case"Z":var b=f._getZone(e,!1,i),M=[b<=0?"+":"-",o.pad(Math.floor(Math.abs(b)/60),2),o.pad(Math.abs(b)%60,2)];4==u&&(M.splice(0,0,"GMT"),M.splice(3,0,":")),s=M.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+r)}return d&&(s=o.pad(s,u)),s})}function u(e,i,a,r){var n=function(e){return e};i=i||n,a=a||n,r=r||n;var o=e.match(/(''|[^'])+/g),s="'"==e.charAt(0);return t.forEach(o,function(e,t){e?(o[t]=(s?a:i)(e.replace(/''/g,"'")),s=!s):o[t]=""}),r(o.join(""))}function c(e,t,i,a){return a=n.escapeString(a),i.strict||(a=a.replace(" a"," ?a")),a.replace(/([a-z])\1*/gi,function(a){var r,n=a.charAt(0),o=a.length,s="",d="";switch(i.strict?(o>1&&(s="0{"+(o-1)+"}"),o>2&&(d="0{"+(o-2)+"}")):(s="0?",d="0{0,2}"),n){case"y":r="\\d{2,4}";break;case"M":case"L":if(o>2){r=t["months-"+("L"==n?"standAlone":"format")+"-"+m[o-3]].slice(0).join("|"),i.strict||(r=r.replace(/\./g,""),r="(?:"+r+")\\.?")}else r="1[0-2]|"+s+"[1-9]";break;case"D":r="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+s+"[1-9][0-9]|"+d+"[1-9]";break;case"d":r="3[01]|[12]\\d|"+s+"[1-9]";break;case"w":r="[1-4][0-9]|5[0-3]|"+s+"[1-9]";break;case"E":case"e":case"c":r=".+?";break;case"h":r="1[0-2]|"+s+"[1-9]";break;case"k":r="1[01]|"+s+"\\d";break;case"H":r="1\\d|2[0-3]|"+s+"\\d";break;case"K":r="1\\d|2[0-4]|"+s+"[1-9]";break;case"m":case"s":r="[0-5]\\d";break;case"S":r="\\d{"+o+"}";break;case"a":var l=i.am||t["dayPeriods-format-wide-am"],u=i.pm||t["dayPeriods-format-wide-pm"];r=l+"|"+u,i.strict||(l!=l.toLowerCase()&&(r+="|"+l.toLowerCase()),u!=u.toLowerCase()&&(r+="|"+u.toLowerCase()),-1!=r.indexOf(".")&&(r+="|"+r.replace(/\./g,""))),r=r.replace(/\./g,"\\.");break;default:r=".*"}return e&&e.push(a),"("+r+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var f={};e.setObject(d.id.replace(/\//g,"."),f),f._getZone=function(e,t,a){return t?i.getTimezoneName(e):e.getTimezoneOffset()},f.format=function(t,i){i=i||{};var a=r.normalizeLocale(i.locale),n=i.formatLength||"short",o=f._getGregorianBundle(a),s=[],d=e.hitch(this,l,t,o,i);if("year"==i.selector)return u(o["dateFormatItem-yyyy"]||"yyyy",d);var c;return"date"!=i.selector&&(c=i.timePattern||o["timeFormat-"+n])&&s.push(u(c,d)),"time"!=i.selector&&(c=i.datePattern||o["dateFormat-"+n])&&s.push(u(c,d)),1==s.length?s[0]:o["dateTimeFormat-"+n].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(e,t){return s[t]})},f.regexp=function(e){return f._parseInfo(e).regexp},f._parseInfo=function(t){t=t||{};var i,a=r.normalizeLocale(t.locale),n=f._getGregorianBundle(a),o=t.formatLength||"short",s=t.datePattern||n["dateFormat-"+o],d=t.timePattern||n["timeFormat-"+o];i="date"==t.selector?s:"time"==t.selector?d:n["dateTimeFormat-"+o].replace(/\{(\d+)\}/g,function(e,t){return[d,s][t]});var l=[];return{regexp:u(i,e.hitch(this,c,l,n,t)),tokens:l,bundle:n}},f.parse=function(e,a){var r=/[\u200E\u200F\u202A\u202E]/g,n=f._parseInfo(a),o=n.tokens,s=n.bundle,d=new RegExp("^"+n.regexp.replace(r,"")+"$",n.strict?"":"i"),l=d.exec(e&&e.replace(r,""));if(!l)return null;var u=["abbr","wide","narrow"],c=[1970,0,1,0,0,0,0],m="",h=t.every(l,function(e,i){if(!i)return!0;var r=o[i-1],n=r.length,d=r.charAt(0);switch(d){case"y":if(2!=n&&a.strict)c[0]=e;else if(e<100){e=Number(e);var l=""+(new Date).getFullYear(),f=100*l.substring(0,2),h=Math.min(Number(l.substring(2,4))+20,99);c[0]=e<h?f+e:f-100+e}else{if(a.strict)return!1;c[0]=e}break;case"M":case"L":if(n>2){var p=s["months-"+("L"==d?"standAlone":"format")+"-"+u[n-3]].concat();if(a.strict||(e=e.replace(".","").toLowerCase(),p=t.map(p,function(e){return e.replace(".","").toLowerCase()})),-1==(e=t.indexOf(p,e)))return!1}else e--;c[1]=e;break;case"E":case"e":case"c":var y=s["days-"+("c"==d?"standAlone":"format")+"-"+u[n-3]].concat();if(a.strict||(e=e.toLowerCase(),y=t.map(y,function(e){return e.toLowerCase()})),-1==(e=t.indexOf(y,e)))return!1;break;case"D":c[1]=0;case"d":c[2]=e;break;case"a":var v=a.am||s["dayPeriods-format-wide-am"],g=a.pm||s["dayPeriods-format-wide-pm"];if(!a.strict){var b=/\./g;e=e.replace(b,"").toLowerCase(),v=v.replace(b,"").toLowerCase(),g=g.replace(b,"").toLowerCase()}if(a.strict&&e!=v&&e!=g)return!1;m=e==g?"p":e==v?"a":"";break;case"K":24==e&&(e=0);case"h":case"H":case"k":if(e>23)return!1;c[3]=e;break;case"m":c[4]=e;break;case"s":c[5]=e;break;case"S":c[6]=e}return!0}),p=+c[3];"p"===m&&p<12?c[3]=p+12:"a"===m&&12==p&&(c[3]=0);var y=new Date(c[0],c[1],c[2],c[3],c[4],c[5],c[6]);a.strict&&y.setFullYear(c[0]);var v=o.join(""),g=-1!=v.indexOf("d"),b=-1!=v.indexOf("M");return!h||b&&y.getMonth()>c[1]||g&&y.getDate()>c[2]?null:((b&&y.getMonth()<c[1]||g&&y.getDate()<c[2])&&(y=i.add(y,"hour",1)),y)};var m=["abbr","wide","narrow"],h=[],p={};return f.addCustomFormats=function(e,t){h.push({pkg:e,name:t}),p={}},f._getGregorianBundle=function(i){if(p[i])return p[i];var a={};return t.forEach(h,function(t){var n=r.getLocalization(t.pkg,t.name,i);a=e.mixin(a,n)},this),p[i]=a},f.addCustomFormats(d.id.replace(/\/date\/locale$/,".cldr"),"gregorian"),f.getNames=function(e,t,i,a){var r,n=f._getGregorianBundle(a),o=[e,i,t];if("standAlone"==i){r=n[o.join("-")],1==r[0]&&(r=void 0)}return o[1]="format",(r||n[o.join("-")]).concat()},f.isWeekend=function(e,t){var i=a.getWeekend(t),r=(e||new Date).getDay();return i.end<i.start&&(i.end+=7,r<i.start&&(r+=7)),r>=i.start&&r<=i.end},f._getDayOfYear=function(e){return i.difference(new Date(e.getFullYear(),0,1,e.getHours()),e)+1},f._getWeekOfYear=function(e,t){1==arguments.length&&(t=0);var i=new Date(e.getFullYear(),0,1).getDay(),a=(i-t+7)%7,r=Math.floor((f._getDayOfYear(e)+a-1)/7);return i==t&&r++,r},f});//# sourceMappingURL=locale.js.map