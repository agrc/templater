//>>built
define("dojo/fx",["./_base/lang","./Evented","./_base/kernel","./_base/array","./aspect","./_base/fx","./dom","./dom-style","./dom-geometry","./ready","require"],function(t,e,i,n,o,s,a,r,d,l,h){i.isAsync||l(0,function(){var t=["./fx/Toggler"];h(t)});var u=i.fx={},c={_fire:function(t,e){return this[t]&&this[t].apply(this,e||[]),this}},f=function(t){this._index=-1,this._animations=t||[],this._current=this._onAnimateCtx=this._onEndCtx=null,this.duration=0,n.forEach(this._animations,function(t){t&&("undefined"!=typeof t.duration&&(this.duration+=t.duration),t.delay&&(this.duration+=t.delay))},this)};f.prototype=new e,t.extend(f,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove(),this._onEndCtx.remove(),this._onAnimateCtx=this._onEndCtx=null,this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=o.after(this._current,"onAnimate",t.hitch(this,"_onAnimate"),!0),this._onEndCtx=o.after(this._current,"onEnd",t.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(e,i){if(this._current||(this._current=this._animations[this._index=0]),!i&&"playing"==this._current.status())return this;var n=o.after(this._current,"beforeBegin",t.hitch(this,function(){this._fire("beforeBegin")}),!0),s=o.after(this._current,"onBegin",t.hitch(this,function(t){this._fire("onBegin",arguments)}),!0),a=o.after(this._current,"onPlay",t.hitch(this,function(t){this._fire("onPlay",arguments),n.remove(),s.remove(),a.remove()}));return this._onAnimateCtx&&this._onAnimateCtx.remove(),this._onAnimateCtx=o.after(this._current,"onAnimate",t.hitch(this,"_onAnimate"),!0),this._onEndCtx&&this._onEndCtx.remove(),this._onEndCtx=o.after(this._current,"onEnd",t.hitch(this,"_onEnd"),!0),this._current.play.apply(this._current,arguments),this},pause:function(){if(this._current){var e=o.after(this._current,"onPause",t.hitch(this,function(t){this._fire("onPause",arguments),e.remove()}),!0);this._current.pause()}return this},gotoPercent:function(t,e){this.pause();var i=this.duration*t;return this._current=null,n.some(this._animations,function(t,e){return i<=t.duration?(this._current=t,this._index=e,!0):(i-=t.duration,!1)},this),this._current&&this._current.gotoPercent(i/this._current.duration),e&&this.play(),this},stop:function(e){if(this._current){if(e){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var i=o.after(this._current,"onStop",t.hitch(this,function(t){this._fire("onStop",arguments),i.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop(),this._onAnimateCtx&&this._onAnimateCtx.remove(),this._onEndCtx&&this._onEndCtx.remove()}}),t.extend(f,c),u.chain=function(t){return new f(t)};var p=function(e){this._animations=e||[],this._connects=[],this._finished=0,this.duration=0,n.forEach(e,function(e){var i=e.duration;e.delay&&(i+=e.delay),this.duration<i&&(this.duration=i),this._connects.push(o.after(e,"onEnd",t.hitch(this,"_onEnd"),!0))},this),this._pseudoAnimation=new s.Animation({curve:[0,1],duration:this.duration});var i=this;n.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(t){i._connects.push(o.after(i._pseudoAnimation,t,function(){i._fire(t,arguments)},!0))})};return t.extend(p,{_doAction:function(t,e){return n.forEach(this._animations,function(i){i[t].apply(i,e)}),this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(t,e){var i=this._pseudoAnimation;i[t].apply(i,e)},play:function(t,e){return this._finished=0,this._doAction("play",arguments),this._call("play",arguments),this},pause:function(){return this._doAction("pause",arguments),this._call("pause",arguments),this},gotoPercent:function(t,e){var i=this.duration*t;return n.forEach(this._animations,function(t){t.gotoPercent(t.duration<i?1:i/t.duration,e)}),this._call("gotoPercent",arguments),this},stop:function(t){return this._doAction("stop",arguments),this._call("stop",arguments),this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop(),n.forEach(this._connects,function(t){t.remove()})}}),t.extend(p,c),u.combine=function(t){return new p(t)},u.wipeIn=function(e){var i,n=e.node=a.byId(e.node),d=n.style,l=s.animateProperty(t.mixin({properties:{height:{start:function(){if(i=d.overflow,d.overflow="hidden","hidden"==d.visibility||"none"==d.display)return d.height="1px",d.display="",d.visibility="",1;var t=r.get(n,"height");return Math.max(t,1)},end:function(){return n.scrollHeight}}}},e)),h=function(){d.height="auto",d.overflow=i};return o.after(l,"onStop",h,!0),o.after(l,"onEnd",h,!0),l},u.wipeOut=function(e){var i,n=e.node=a.byId(e.node),r=n.style,d=s.animateProperty(t.mixin({properties:{height:{end:1}}},e));o.after(d,"beforeBegin",function(){i=r.overflow,r.overflow="hidden",r.display=""},!0);var l=function(){r.overflow=i,r.height="auto",r.display="none"};return o.after(d,"onStop",l,!0),o.after(d,"onEnd",l,!0),d},u.slideTo=function(e){var i=e.node=a.byId(e.node),n=null,l=null,h=function(t){return function(){var e=r.getComputedStyle(t),i=e.position;if(n="absolute"==i?t.offsetTop:parseInt(e.top)||0,l="absolute"==i?t.offsetLeft:parseInt(e.left)||0,"absolute"!=i&&"relative"!=i){var o=d.position(t,!0);n=o.y,l=o.x,t.style.position="absolute",t.style.top=n+"px",t.style.left=l+"px"}}}(i);h();var u=s.animateProperty(t.mixin({properties:{top:e.top||0,left:e.left||0}},e));return o.after(u,"beforeBegin",h,!0),u},u});//# sourceMappingURL=fx.js.map