//>>built
define("dojo/number",["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(e,t,i,n,o){var r={};if(e.setObject("dojo.number",r),r.format=function(i,n){n=e.mixin({},n||{});var o=t.normalizeLocale(n.locale),a=t.getLocalization("dojo.cldr","number",o);n.customs=a;var s=n.pattern||a[(n.type||"decimal")+"Format"];return isNaN(i)||Math.abs(i)==1/0?null:r._applyPattern(i,s,n)},r._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/,r._applyPattern=function(e,t,i){i=i||{};var n=i.customs.group,o=i.customs.decimal,a=t.split(";"),s=a[0];if(t=a[0>e?1:0]||"-"+s,-1!=t.indexOf("%"))e*=100;else if(-1!=t.indexOf("‰"))e*=1e3;else if(-1!=t.indexOf("¤"))n=i.customs.currencyGroup||n,o=i.customs.currencyDecimal||o,t=t.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(e,t,n,o){var r=["symbol","currency","displayName"][n.length-1],a=i[r]||i.currency||"";return a?t+a+o:""});else if(-1!=t.indexOf("E"))throw new Error("exponential notation not supported");var l=r._numberPatternRE,d=s.match(l);if(!d)throw new Error("unable to find a number expression in pattern: "+t);return i.fractional===!1&&(i.places=0),t.replace(l,r._formatAbsolute(e,d[0],{decimal:o,group:n,places:i.places,round:i.round}))},r.round=function(e,t,i){var n=10/(i||10);return(n*+e).toFixed(t)/n},0==.9.toFixed()){var a=r.round;r.round=function(e,t,i){var n=Math.pow(10,-t||0),o=Math.abs(e);return!e||o>=n?n=0:(o/=n,(.5>o||o>=.95)&&(n=0)),a(e,t,i)+(e>0?n:-n)}}return r._formatAbsolute=function(e,t,i){i=i||{},i.places===!0&&(i.places=0),i.places===1/0&&(i.places=6);var o=t.split("."),a="string"==typeof i.places&&i.places.indexOf(","),s=i.places;a?s=i.places.substring(a+1):s>=0||(s=(o[1]||[]).length),i.round<0||(e=r.round(e,s,i.round));var l=String(Math.abs(e)).split("."),d=l[1]||"";if(o[1]||i.places){a&&(i.places=i.places.substring(0,a));var u=void 0!==i.places?i.places:o[1]&&o[1].lastIndexOf("0")+1;u>d.length&&(l[1]=n.pad(d,u,"0",!0)),s<d.length&&(l[1]=d.substr(0,s))}else l[1]&&l.pop();var c=o[0].replace(",","");u=c.indexOf("0"),-1!=u&&(u=c.length-u,u>l[0].length&&(l[0]=n.pad(l[0],u)),-1==c.indexOf("#")&&(l[0]=l[0].substr(l[0].length-u)));var h,f,p=o[0].lastIndexOf(",");if(-1!=p){h=o[0].length-p-1;var g=o[0].substr(0,p);p=g.lastIndexOf(","),-1!=p&&(f=g.length-p-1)}for(var m=[],_=l[0];_;){var v=_.length-h;m.push(v>0?_.substr(v):_),_=v>0?_.slice(0,v):"",f&&(h=f,delete f)}return l[0]=m.reverse().join(i.group||","),l.join(i.decimal||".")},r.regexp=function(e){return r._parseInfo(e).regexp},r._parseInfo=function(e){e=e||{};var i=t.normalizeLocale(e.locale),n=t.getLocalization("dojo.cldr","number",i),a=e.pattern||n[(e.type||"decimal")+"Format"],s=n.group,l=n.decimal,d=1;if(-1!=a.indexOf("%"))d/=100;else if(-1!=a.indexOf("‰"))d/=1e3;else{var u=-1!=a.indexOf("¤");u&&(s=n.currencyGroup||s,l=n.currencyDecimal||l)}var c=a.split(";");1==c.length&&c.push("-"+c[0]);var h=o.buildGroupRE(c,function(t){return t="(?:"+o.escapeString(t,".")+")",t.replace(r._numberPatternRE,function(t){var i={signed:!1,separator:e.strict?s:[s,""],fractional:e.fractional,decimal:l,exponent:!1},n=t.split("."),o=e.places;1==n.length&&1!=d&&(n[1]="###"),1==n.length||0===o?i.fractional=!1:(void 0===o&&(o=e.pattern?n[1].lastIndexOf("0")+1:1/0),o&&void 0==e.fractional&&(i.fractional=!0),!e.places&&o<n[1].length&&(o+=","+n[1].length),i.places=o);var a=n[0].split(",");return a.length>1&&(i.groupSize=a.pop().length,a.length>1&&(i.groupSize2=a.pop().length)),"("+r._realNumberRegexp(i)+")"})},!0);return u&&(h=h.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(t,i,n,r){var a=["symbol","currency","displayName"][n.length-1],s=o.escapeString(e[a]||e.currency||"");return s?(i=i?"[\\s\\xa0]":"",r=r?"[\\s\\xa0]":"",e.strict?i+s+r:(i&&(i+="*"),r&&(r+="*"),"(?:"+i+s+r+")?")):""})),{regexp:h.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:s,decimal:l,factor:d}},r.parse=function(e,t){var i=r._parseInfo(t),n=new RegExp("^"+i.regexp+"$").exec(e);if(!n)return NaN;var o=n[1];if(!n[1]){if(!n[2])return NaN;o=n[2],i.factor*=-1}return o=o.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),o*i.factor},r._realNumberRegexp=function(e){e=e||{},"places"in e||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(e.places)||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);var t=r._integerRegexp(e),i=o.buildGroupRE(e.fractional,function(t){var i="";return t&&0!==e.places&&(i="\\"+e.decimal,e.places==1/0?i="(?:"+i+"\\d+)?":i+="\\d{"+e.places+"}"),i},!0),n=o.buildGroupRE(e.exponent,function(t){return t?"([eE]"+r._integerRegexp({signed:e.eSigned})+")":""}),a=t+i;return i&&(a="(?:(?:"+a+")|(?:"+i+"))"),a+n},r._integerRegexp=function(e){e=e||{},"signed"in e||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="";var t=o.buildGroupRE(e.signed,function(e){return e?"[-+]":""},!0),i=o.buildGroupRE(e.separator,function(t){if(!t)return"(?:\\d+)";t=o.escapeString(t)," "==t?t="\\s":" "==t&&(t="\\s\\xa0");var i=e.groupSize,n=e.groupSize2;if(n){var r="(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*["+t+"]\\d{"+i+"})";return i-n>0?"(?:"+r+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":r}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"},!0);return t+i},r});//# sourceMappingURL=number.js.map