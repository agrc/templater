//>>built
define("dojo/number",["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(t,e,i,o,n){var r={};if(t.setObject("dojo.number",r),r.format=function(i,o){o=t.mixin({},o||{});var n=e.normalizeLocale(o.locale),s=e.getLocalization("dojo.cldr","number",n);o.customs=s;var a=o.pattern||s[(o.type||"decimal")+"Format"];return isNaN(i)||Math.abs(i)==1/0?null:r._applyPattern(i,a,o)},r._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/,r._applyPattern=function(t,e,i){i=i||{};var o=i.customs.group,n=i.customs.decimal,s=e.split(";"),a=s[0];if(e=s[0>t?1:0]||"-"+a,-1!=e.indexOf("%"))t*=100;else if(-1!=e.indexOf("‰"))t*=1e3;else if(-1!=e.indexOf("¤"))o=i.customs.currencyGroup||o,n=i.customs.currencyDecimal||n,e=e.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(t,e,o,n){var r=["symbol","currency","displayName"][o.length-1],s=i[r]||i.currency||"";return s?e+s+n:""});else if(-1!=e.indexOf("E"))throw new Error("exponential notation not supported");var d=r._numberPatternRE,l=a.match(d);if(!l)throw new Error("unable to find a number expression in pattern: "+e);return i.fractional===!1&&(i.places=0),e.replace(d,r._formatAbsolute(t,l[0],{decimal:n,group:o,places:i.places,round:i.round}))},r.round=function(t,e,i){var o=10/(i||10);return(o*+t).toFixed(e)/o},0==.9.toFixed()){var s=r.round;r.round=function(t,e,i){var o=Math.pow(10,-e||0),n=Math.abs(t);return!t||n>=o?o=0:(n/=o,(.5>n||n>=.95)&&(o=0)),s(t,e,i)+(t>0?o:-o)}}return r._formatAbsolute=function(t,e,i){i=i||{},i.places===!0&&(i.places=0),i.places===1/0&&(i.places=6);var n=e.split("."),s="string"==typeof i.places&&i.places.indexOf(","),a=i.places;s?a=i.places.substring(s+1):a>=0||(a=(n[1]||[]).length),i.round<0||(t=r.round(t,a,i.round));var d=String(Math.abs(t)).split("."),l=d[1]||"";if(n[1]||i.places){s&&(i.places=i.places.substring(0,s));var c=void 0!==i.places?i.places:n[1]&&n[1].lastIndexOf("0")+1;c>l.length&&(d[1]=o.pad(l,c,"0",!0)),a<l.length&&(d[1]=l.substr(0,a))}else d[1]&&d.pop();var u=n[0].replace(",","");c=u.indexOf("0"),-1!=c&&(c=u.length-c,c>d[0].length&&(d[0]=o.pad(d[0],c)),-1==u.indexOf("#")&&(d[0]=d[0].substr(d[0].length-c)));var h,f,p=n[0].lastIndexOf(",");if(-1!=p){h=n[0].length-p-1;var m=n[0].substr(0,p);p=m.lastIndexOf(","),-1!=p&&(f=m.length-p-1)}for(var g=[],b=d[0];b;){var _=b.length-h;g.push(_>0?b.substr(_):b),b=_>0?b.slice(0,_):"",f&&(h=f,delete f)}return d[0]=g.reverse().join(i.group||","),d.join(i.decimal||".")},r.regexp=function(t){return r._parseInfo(t).regexp},r._parseInfo=function(t){t=t||{};var i=e.normalizeLocale(t.locale),o=e.getLocalization("dojo.cldr","number",i),s=t.pattern||o[(t.type||"decimal")+"Format"],a=o.group,d=o.decimal,l=1;if(-1!=s.indexOf("%"))l/=100;else if(-1!=s.indexOf("‰"))l/=1e3;else{var c=-1!=s.indexOf("¤");c&&(a=o.currencyGroup||a,d=o.currencyDecimal||d)}var u=s.split(";");1==u.length&&u.push("-"+u[0]);var h=n.buildGroupRE(u,function(e){return e="(?:"+n.escapeString(e,".")+")",e.replace(r._numberPatternRE,function(e){var i={signed:!1,separator:t.strict?a:[a,""],fractional:t.fractional,decimal:d,exponent:!1},o=e.split("."),n=t.places;1==o.length&&1!=l&&(o[1]="###"),1==o.length||0===n?i.fractional=!1:(void 0===n&&(n=t.pattern?o[1].lastIndexOf("0")+1:1/0),n&&void 0==t.fractional&&(i.fractional=!0),!t.places&&n<o[1].length&&(n+=","+o[1].length),i.places=n);var s=o[0].split(",");return s.length>1&&(i.groupSize=s.pop().length,s.length>1&&(i.groupSize2=s.pop().length)),"("+r._realNumberRegexp(i)+")"})},!0);return c&&(h=h.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(e,i,o,r){var s=["symbol","currency","displayName"][o.length-1],a=n.escapeString(t[s]||t.currency||"");return a?(i=i?"[\\s\\xa0]":"",r=r?"[\\s\\xa0]":"",t.strict?i+a+r:(i&&(i+="*"),r&&(r+="*"),"(?:"+i+a+r+")?")):""})),{regexp:h.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:a,decimal:d,factor:l}},r.parse=function(t,e){var i=r._parseInfo(e),o=new RegExp("^"+i.regexp+"$").exec(t);if(!o)return NaN;var n=o[1];if(!o[1]){if(!o[2])return NaN;n=o[2],i.factor*=-1}return n=n.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),n*i.factor},r._realNumberRegexp=function(t){t=t||{},"places"in t||(t.places=1/0),"string"!=typeof t.decimal&&(t.decimal="."),"fractional"in t&&!/^0/.test(t.places)||(t.fractional=[!0,!1]),"exponent"in t||(t.exponent=[!0,!1]),"eSigned"in t||(t.eSigned=[!0,!1]);var e=r._integerRegexp(t),i=n.buildGroupRE(t.fractional,function(e){var i="";return e&&0!==t.places&&(i="\\"+t.decimal,t.places==1/0?i="(?:"+i+"\\d+)?":i+="\\d{"+t.places+"}"),i},!0),o=n.buildGroupRE(t.exponent,function(e){return e?"([eE]"+r._integerRegexp({signed:t.eSigned})+")":""}),s=e+i;return i&&(s="(?:(?:"+s+")|(?:"+i+"))"),s+o},r._integerRegexp=function(t){t=t||{},"signed"in t||(t.signed=[!0,!1]),"separator"in t?"groupSize"in t||(t.groupSize=3):t.separator="";var e=n.buildGroupRE(t.signed,function(t){return t?"[-+]":""},!0),i=n.buildGroupRE(t.separator,function(e){if(!e)return"(?:\\d+)";e=n.escapeString(e)," "==e?e="\\s":" "==e&&(e="\\s\\xa0");var i=t.groupSize,o=t.groupSize2;if(o){var r="(?:0|[1-9]\\d{0,"+(o-1)+"}(?:["+e+"]\\d{"+o+"})*["+e+"]\\d{"+i+"})";return i-o>0?"(?:"+r+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":r}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+e+"]\\d{"+i+"})*)"},!0);return e+i},r});//# sourceMappingURL=number.js.map