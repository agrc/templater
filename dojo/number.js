//>>built
define("dojo/number",["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(e,t,n,i,r){var o={};if(e.setObject("dojo.number",o),o.format=function(n,i){i=e.mixin({},i||{});var r=t.normalizeLocale(i.locale),a=t.getLocalization("dojo.cldr","number",r);i.customs=a;var s=i.pattern||a[(i.type||"decimal")+"Format"];return isNaN(n)||Math.abs(n)==1/0?null:o._applyPattern(n,s,i)},o._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/,o._applyPattern=function(e,t,n){n=n||{};var i=n.customs.group,r=n.customs.decimal,a=t.split(";"),s=a[0];if(t=a[0>e?1:0]||"-"+s,-1!=t.indexOf("%"))e*=100;else if(-1!=t.indexOf("‰"))e*=1e3;else if(-1!=t.indexOf("¤"))i=n.customs.currencyGroup||i,r=n.customs.currencyDecimal||r,t=t.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(e,t,i,r){var o=["symbol","currency","displayName"][i.length-1],a=n[o]||n.currency||"";return a?t+a+r:""});else if(-1!=t.indexOf("E"))throw new Error("exponential notation not supported");var c=o._numberPatternRE,u=s.match(c);if(!u)throw new Error("unable to find a number expression in pattern: "+t);return n.fractional===!1&&(n.places=0),t.replace(c,o._formatAbsolute(e,u[0],{decimal:r,group:i,places:n.places,round:n.round}))},o.round=function(e,t,n){var i=10/(n||10);return(i*+e).toFixed(t)/i},0==.9.toFixed()){var a=o.round;o.round=function(e,t,n){var i=Math.pow(10,-t||0),r=Math.abs(e);return!e||r>=i?i=0:(r/=i,(.5>r||r>=.95)&&(i=0)),a(e,t,n)+(e>0?i:-i)}}return o._formatAbsolute=function(e,t,n){n=n||{},n.places===!0&&(n.places=0),n.places===1/0&&(n.places=6);var r=t.split("."),a="string"==typeof n.places&&n.places.indexOf(","),s=n.places;a?s=n.places.substring(a+1):s>=0||(s=(r[1]||[]).length),n.round<0||(e=o.round(e,s,n.round));var c=String(Math.abs(e)).split("."),u=c[1]||"";if(r[1]||n.places){a&&(n.places=n.places.substring(0,a));var l=void 0!==n.places?n.places:r[1]&&r[1].lastIndexOf("0")+1;l>u.length&&(c[1]=i.pad(u,l,"0",!0)),s<u.length&&(c[1]=u.substr(0,s))}else c[1]&&c.pop();var d=r[0].replace(",","");l=d.indexOf("0"),-1!=l&&(l=d.length-l,l>c[0].length&&(c[0]=i.pad(c[0],l)),-1==d.indexOf("#")&&(c[0]=c[0].substr(c[0].length-l)));var h,f,p=r[0].lastIndexOf(",");if(-1!=p){h=r[0].length-p-1;var m=r[0].substr(0,p);p=m.lastIndexOf(","),-1!=p&&(f=m.length-p-1)}for(var g=[],v=c[0];v;){var y=v.length-h;g.push(y>0?v.substr(y):v),v=y>0?v.slice(0,y):"",f&&(h=f,delete f)}return c[0]=g.reverse().join(n.group||","),c.join(n.decimal||".")},o.regexp=function(e){return o._parseInfo(e).regexp},o._parseInfo=function(e){e=e||{};var n=t.normalizeLocale(e.locale),i=t.getLocalization("dojo.cldr","number",n),a=e.pattern||i[(e.type||"decimal")+"Format"],s=i.group,c=i.decimal,u=1;if(-1!=a.indexOf("%"))u/=100;else if(-1!=a.indexOf("‰"))u/=1e3;else{var l=-1!=a.indexOf("¤");l&&(s=i.currencyGroup||s,c=i.currencyDecimal||c)}var d=a.split(";");1==d.length&&d.push("-"+d[0]);var h=r.buildGroupRE(d,function(t){return t="(?:"+r.escapeString(t,".")+")",t.replace(o._numberPatternRE,function(t){var n={signed:!1,separator:e.strict?s:[s,""],fractional:e.fractional,decimal:c,exponent:!1},i=t.split("."),r=e.places;1==i.length&&1!=u&&(i[1]="###"),1==i.length||0===r?n.fractional=!1:(void 0===r&&(r=e.pattern?i[1].lastIndexOf("0")+1:1/0),r&&void 0==e.fractional&&(n.fractional=!0),!e.places&&r<i[1].length&&(r+=","+i[1].length),n.places=r);var a=i[0].split(",");return a.length>1&&(n.groupSize=a.pop().length,a.length>1&&(n.groupSize2=a.pop().length)),"("+o._realNumberRegexp(n)+")"})},!0);return l&&(h=h.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(t,n,i,o){var a=["symbol","currency","displayName"][i.length-1],s=r.escapeString(e[a]||e.currency||"");return s?(n=n?"[\\s\\xa0]":"",o=o?"[\\s\\xa0]":"",e.strict?n+s+o:(n&&(n+="*"),o&&(o+="*"),"(?:"+n+s+o+")?")):""})),{regexp:h.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:s,decimal:c,factor:u}},o.parse=function(e,t){var n=o._parseInfo(t),i=new RegExp("^"+n.regexp+"$").exec(e);if(!i)return NaN;var r=i[1];if(!i[1]){if(!i[2])return NaN;r=i[2],n.factor*=-1}return r=r.replace(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,"."),r*n.factor},o._realNumberRegexp=function(e){e=e||{},"places"in e||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(e.places)||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);var t=o._integerRegexp(e),n=r.buildGroupRE(e.fractional,function(t){var n="";return t&&0!==e.places&&(n="\\"+e.decimal,e.places==1/0?n="(?:"+n+"\\d+)?":n+="\\d{"+e.places+"}"),n},!0),i=r.buildGroupRE(e.exponent,function(t){return t?"([eE]"+o._integerRegexp({signed:e.eSigned})+")":""}),a=t+n;return n&&(a="(?:(?:"+a+")|(?:"+n+"))"),a+i},o._integerRegexp=function(e){e=e||{},"signed"in e||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="";var t=r.buildGroupRE(e.signed,function(e){return e?"[-+]":""},!0),n=r.buildGroupRE(e.separator,function(t){if(!t)return"(?:\\d+)";t=r.escapeString(t)," "==t?t="\\s":" "==t&&(t="\\s\\xa0");var n=e.groupSize,i=e.groupSize2;if(i){var o="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*["+t+"]\\d{"+n+"})";return n-i>0?"(?:"+o+"|(?:0|[1-9]\\d{0,"+(n-1)+"}))":o}return"(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*)"},!0);return t+n},o});//# sourceMappingURL=number.js.map