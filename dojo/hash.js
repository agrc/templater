//>>built
define("dojo/hash",["./_base/kernel","require","./_base/config","./aspect","./_base/lang","./topic","./domReady","./sniff"],function(e,t,i,n,o,s,a,r){function d(e,t){var i=e.indexOf(t);return i>=0?e.substring(i+1):""}function l(){return d(location.href,"#")}function c(){s.publish("/dojo/hashchange",l())}function u(){l()!==p&&(p=l(),c())}function h(e){if(m){if(m.isTransitioning())return void setTimeout(o.hitch(null,h,e),v);var t=m.iframe.location.href,i=t.indexOf("?");return void m.iframe.location.replace(t.substring(0,i)+"?"+e)}var t=location.href.replace(/#.*/,"");location.replace(t+"#"+e),!g&&u()}function f(){function n(){p=l(),u=g?p:d(b.href,"?"),h=!1,f=null}var s=document.createElement("iframe"),a="dojo-hash-iframe",r=i.dojoBlankHtmlUrl||t.toUrl("./resources/blank.html");i.useXDomain&&i.dojoBlankHtmlUrl,s.id=a,s.src=r+"?"+l(),s.style.display="none",document.body.appendChild(s),this.iframe=e.global[a];var u,h,f,m,g,b=this.iframe.location;this.isTransitioning=function(){return h},this.pollLocation=function(){if(!g)try{var e=d(b.href,"?");document.title!=m&&(m=this.iframe.document.title=document.title)}catch(e){g=!0}var t=l();if(h&&p===t){if(!g&&e!==f)return void setTimeout(o.hitch(this,this.pollLocation),0);n(),c()}else if(p!==t||!g&&u!==e){if(p!==t)return p=t,h=!0,f=t,s.src=r+"?"+f,g=!1,void setTimeout(o.hitch(this,this.pollLocation),0);g||(location.href="#"+b.search.substring(1),n(),c())}else;setTimeout(o.hitch(this,this.pollLocation),v)},n(),setTimeout(o.hitch(this,this.pollLocation),v)}e.hash=function(e,t){return arguments.length?("#"==e.charAt(0)&&(e=e.substring(1)),t?h(e):location.hash="#"+e,e):l()};var p,m,g,v=i.hashPollFrequency||100;return a(function(){"onhashchange"in e.global&&(!r("ie")||r("ie")>=8&&"BackCompat"!=document.compatMode)?g=n.after(e.global,"onhashchange",c,!0):document.addEventListener?(p=l(),setInterval(u,v)):document.attachEvent&&(m=new f)}),e.hash});//# sourceMappingURL=hash.js.map