//>>built
define("dojo/hash",["./_base/kernel","require","./_base/config","./aspect","./_base/lang","./topic","./domReady","./sniff"],function(t,e,i,o,n,a,r,s){function d(t,e){var i=t.indexOf(e);return i>=0?t.substring(i+1):""}function l(){return d(location.href,"#")}function c(){a.publish("/dojo/hashchange",l())}function h(){l()!==p&&(p=l(),c())}function u(t){if(m){if(m.isTransitioning())return void setTimeout(n.hitch(null,u,t),b);var e=m.iframe.location.href,i=e.indexOf("?");return void m.iframe.location.replace(e.substring(0,i)+"?"+t)}location.replace("#"+t),!g&&h()}function f(){function o(){p=l(),h=g?p:d(v.href,"?"),u=!1,f=null}var a=document.createElement("iframe"),r="dojo-hash-iframe",s=i.dojoBlankHtmlUrl||e.toUrl("./resources/blank.html");i.useXDomain&&!i.dojoBlankHtmlUrl,a.id=r,a.src=s+"?"+l(),a.style.display="none",document.body.appendChild(a),this.iframe=t.global[r];var h,u,f,m,g,v=this.iframe.location;this.isTransitioning=function(){return u},this.pollLocation=function(){if(!g)try{var t=d(v.href,"?");document.title!=m&&(m=this.iframe.document.title=document.title)}catch(e){g=!0}var i=l();if(u&&p===i){if(!g&&t!==f)return void setTimeout(n.hitch(this,this.pollLocation),0);o(),c()}else if(p!==i||!g&&h!==t){if(p!==i)return p=i,u=!0,f=i,a.src=s+"?"+f,g=!1,void setTimeout(n.hitch(this,this.pollLocation),0);g||(location.href="#"+v.search.substring(1),o(),c())}else;setTimeout(n.hitch(this,this.pollLocation),b)},o(),setTimeout(n.hitch(this,this.pollLocation),b)}t.hash=function(t,e){return arguments.length?("#"==t.charAt(0)&&(t=t.substring(1)),e?u(t):location.href="#"+t,t):l()};var p,m,g,b=i.hashPollFrequency||100;return r(function(){"onhashchange"in t.global&&(!s("ie")||s("ie")>=8&&"BackCompat"!=document.compatMode)?g=o.after(t.global,"onhashchange",c,!0):document.addEventListener?(p=l(),setInterval(h,b)):document.attachEvent&&(m=new f)}),t.hash});//# sourceMappingURL=hash.js.map