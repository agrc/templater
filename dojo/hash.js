//>>built
define("dojo/hash",["./_base/kernel","require","./_base/config","./aspect","./_base/lang","./topic","./domReady","./sniff"],function(t,e,i,n,o,a,s,r){function d(t,e){var i=t.indexOf(e);return i>=0?t.substring(i+1):""}function l(){return d(location.href,"#")}function h(){a.publish("/dojo/hashchange",l())}function u(){l()!==f&&(f=l(),h())}function c(t){if(m){if(m.isTransitioning())return void setTimeout(o.hitch(null,c,t),_);var e=m.iframe.location.href,i=e.indexOf("?");return void m.iframe.location.replace(e.substring(0,i)+"?"+t)}var e=location.href.replace(/#.*/,"");location.replace(e+"#"+t),!g&&u()}function p(){function n(){f=l(),u=g?f:d(b.href,"?"),c=!1,p=null}var a=document.createElement("iframe"),s="dojo-hash-iframe",r=i.dojoBlankHtmlUrl||e.toUrl("./resources/blank.html");i.useXDomain&&i.dojoBlankHtmlUrl,a.id=s,a.src=r+"?"+l(),a.style.display="none",document.body.appendChild(a),this.iframe=t.global[s];var u,c,p,m,g,b=this.iframe.location;this.isTransitioning=function(){return c},this.pollLocation=function(){if(!g)try{var t=d(b.href,"?");document.title!=m&&(m=this.iframe.document.title=document.title)}catch(t){g=!0}var e=l();if(c&&f===e){if(!g&&t!==p)return void setTimeout(o.hitch(this,this.pollLocation),0);n(),h()}else if(f!==e||!g&&u!==t){if(f!==e)return f=e,c=!0,p=e,a.src=r+"?"+p,g=!1,void setTimeout(o.hitch(this,this.pollLocation),0);g||(location.href="#"+b.search.substring(1),n(),h())}else;setTimeout(o.hitch(this,this.pollLocation),_)},n(),setTimeout(o.hitch(this,this.pollLocation),_)}t.hash=function(t,e){return arguments.length?("#"==t.charAt(0)&&(t=t.substring(1)),e?c(t):location.hash="#"+t,t):l()};var f,m,g,_=i.hashPollFrequency||100;return s(function(){"onhashchange"in t.global&&(!r("ie")||r("ie")>=8&&"BackCompat"!=document.compatMode)?g=n.after(t.global,"onhashchange",h,!0):document.addEventListener?(f=l(),setInterval(u,_)):document.attachEvent&&(m=new p)}),t.hash});//# sourceMappingURL=hash.js.map