//>>built
define("dojo/selector/acme",["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(e,t,a,i,r){var d=i.trim,o=a.forEach,n=function(){return r.doc},l="BackCompat"==n().compatMode,s=">~+",m=!1,f=function(){return!0},u=function(e){s.indexOf(e.slice(-1))>=0?e+=" * ":e+=" ";for(var t,a,i=function(t,a){return d(e.slice(t,a))},r=[],o=-1,n=-1,l=-1,f=-1,u=-1,y=-1,h=-1,M="",v="",c=0,g=e.length,p=null,b=null,F=function(){if(h>=0){var e=h==c?null:i(h,c);p[s.indexOf(e)<0?"tag":"oper"]=e,h=-1}},w=function(){y>=0&&(p.id=i(y,c).replace(/\\/g,""),y=-1)},k=function(){u>=0&&(p.classes.push(i(u+1,c).replace(/\\/g,"")),u=-1)},I=function(){w(),F(),k()},E=function(){I(),f>=0&&p.pseudos.push({name:i(f+1,c)}),p.loops=p.pseudos.length||p.attrs.length||p.classes.length,p.oquery=p.query=i(a,c),p.otag=p.tag=p.oper?null:p.tag||"*",p.tag&&(p.tag=p.tag.toUpperCase()),r.length&&r[r.length-1].oper&&(p.infixOper=r.pop(),p.query=p.infixOper.query+" "+p.query),r.push(p),p=null};M=v,v=e.charAt(c),c<g;c++)if("\\"!=M)if(p||(a=c,p={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return m?this.otag:this.tag}},h=c),t)v==t&&(t=null);else if("'"!=v&&'"'!=v)if(o>=0){if("]"==v){b.attr?b.matchFor=i(l||o+1,c):b.attr=i(o+1,c);var G=b.matchFor;G&&('"'!=G.charAt(0)&&"'"!=G.charAt(0)||(b.matchFor=G.slice(1,-1))),b.matchFor&&(b.matchFor=b.matchFor.replace(/\\/g,"")),p.attrs.push(b),b=null,o=l=-1}else if("="==v){var z="|~^$*".indexOf(M)>=0?M:"";b.type=z+v,b.attr=i(o+1,c-z.length),l=c+1}}else n>=0?")"==v&&(f>=0&&(b.value=i(n+1,c)),f=n=-1):"#"==v?(I(),y=c+1):"."==v?(I(),u=c):":"==v?(I(),f=c):"["==v?(I(),o=c,b={}):"("==v?(f>=0&&(b={name:i(f+1,c),value:null},p.pseudos.push(b)),n=c):" "==v&&M!=v&&E();else t=v;return r},y=function(e,t){return e?t?function(){return e.apply(window,arguments)&&t.apply(window,arguments)}:e:t},h=function(e,t){var a=t||[];return e&&a.push(e),a},M=function(e){return 1==e.nodeType},v="",c=function(e,t){return e?"class"==t?e.className||v:"for"==t?e.htmlFor||v:"style"==t?e.style.cssText||v:(m?e.getAttribute(t):e.getAttribute(t,2))||v:v},g={"*=":function(e,t){return function(a){return c(a,e).indexOf(t)>=0}},"^=":function(e,t){return function(a){return 0==c(a,e).indexOf(t)}},"$=":function(e,t){return function(a){var i=" "+c(a,e),r=i.lastIndexOf(t);return r>-1&&r==i.length-t.length}},"~=":function(e,t){var a=" "+t+" ";return function(t){return(" "+c(t,e)+" ").indexOf(a)>=0}},"|=":function(e,t){var a=t+"-";return function(i){var r=c(i,e);return r==t||0==r.indexOf(a)}},"=":function(e,t){return function(a){return c(a,e)==t}}},p=n().documentElement,b=!(p.nextElementSibling||"nextElementSibling"in p),F=b?"nextSibling":"nextElementSibling",w=b?"previousSibling":"previousElementSibling",k=b?M:f,I=function(e){for(;e=e[w];)if(k(e))return!1;return!0},E=function(e){for(;e=e[F];)if(k(e))return!1;return!0},G=function(e){var a=e.parentNode;a=7!=a.nodeType?a:a.nextSibling;var i=0,r=a.children||a.childNodes,d=e._i||e.getAttribute("_i")||-1,o=a._l||(void 0!==a.getAttribute?a.getAttribute("_l"):-1);if(!r)return-1;var n=r.length;if(o==n&&d>=0&&o>=0)return d;t("ie")&&void 0!==a.setAttribute?a.setAttribute("_l",n):a._l=n,d=-1;for(var l=a.firstElementChild||a.firstChild;l;l=l[F])k(l)&&(t("ie")?l.setAttribute("_i",++i):l._i=++i,e===l&&(d=i));return d},z=function(e){return!(G(e)%2)},j=function(e){return G(e)%2},A={checked:function(e,t){return function(e){return!!("checked"in e?e.checked:e.selected)}},disabled:function(e,t){return function(e){return e.disabled}},enabled:function(e,t){return function(e){return!e.disabled}},"first-child":function(){return I},"last-child":function(){return E},"only-child":function(e,t){return function(e){return I(e)&&E(e)}},empty:function(e,t){return function(e){for(var t=e.childNodes,a=e.childNodes.length,i=a-1;i>=0;i--){var r=t[i].nodeType;if(1===r||3==r)return!1}return!0}},contains:function(e,t){var a=t.charAt(0);return'"'!=a&&"'"!=a||(t=t.slice(1,-1)),function(e){return e.innerHTML.indexOf(t)>=0}},not:function(e,t){var a=u(t)[0],i={el:1};"*"!=a.tag&&(i.tag=1),a.classes.length||(i.classes=1);var r=_(a,i);return function(e){return!r(e)}},"nth-child":function(e,t){var a=parseInt;if("odd"==t)return j;if("even"==t)return z;if(-1!=t.indexOf("n")){var i=t.split("n",2),r=i[0]?"-"==i[0]?-1:a(i[0]):1,d=i[1]?a(i[1]):0,o=0,n=-1;if(r>0?d<0?d=d%r&&r+d%r:d>0&&(d>=r&&(o=d-d%r),d%=r):r<0&&(r*=-1,d>0&&(n=d,d%=r)),r>0)return function(e){var t=G(e);return t>=o&&(n<0||t<=n)&&t%r==d};t=d}var l=a(t);return function(e){return G(e)==l}}},S=t("ie")<9||9==t("ie")&&t("quirks")?function(e){var t=e.toLowerCase();return"class"==t&&(e="className"),function(a){return m?a.getAttribute(e):a[e]||a[t]}}:function(e){return function(t){return t&&t.getAttribute&&t.hasAttribute(e)}},_=function(e,t){if(!e)return f;t=t||{};var a=null;return"el"in t||(a=y(a,M)),"tag"in t||"*"!=e.tag&&(a=y(a,function(t){return t&&(m?t.tagName:t.tagName.toUpperCase())==e.getTag()})),"classes"in t||o(e.classes,function(e,t,i){var r=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)");a=y(a,function(e){return r.test(e.className)}),a.count=t}),"pseudos"in t||o(e.pseudos,function(e){var t=e.name;A[t]&&(a=y(a,A[t](t,e.value)))}),"attrs"in t||o(e.attrs,function(e){var t,i=e.attr;e.type&&g[e.type]?t=g[e.type](i,e.matchFor):i.length&&(t=S(i)),t&&(a=y(a,t))}),"id"in t||e.id&&(a=y(a,function(t){return!!t&&t.id==e.id})),a||"default"in t||(a=f),a},T=function(e){return function(t,a,i){for(;t=t[F];)if(!b||M(t)){i&&!Z(t,i)||!e(t)||a.push(t);break}return a}},x=function(e){return function(t,a,i){for(var r=t[F];r;){if(k(r)){if(i&&!Z(r,i))break;e(r)&&a.push(r)}r=r[F]}return a}},Q=function(e,t){var i=function(e){var t=[];try{t=Array.prototype.slice.call(e)}catch(r){for(var a=0,i=e.length;a<i;a++)t.push(e[a])}return t};return e=e||f,function(r,d,o){var n,l=0,s=[];for(s=i(r.children||r.childNodes),t&&a.forEach(s,function(e){1===e.nodeType&&(s=s.concat(i(e.getElementsByTagName("*"))))});n=s[l++];)k(n)&&(!o||Z(n,o))&&e(n,l)&&d.push(n);return d}},D=function(e,t){for(var a=e.parentNode;a&&a!=t;)a=a.parentNode;return!!a},H={},C=function(t){var i=H[t.query];if(i)return i;var r=t.infixOper,d=r?r.oper:"",o=_(t,{el:1}),s=t.tag,m="*"==s,u=n().getElementsByClassName;if(d){var y={el:1};m&&(y.tag=1),o=_(t,y),"+"==d?i=T(o):"~"==d?i=x(o):">"==d&&(i=Q(o))}else if(t.id)o=!t.loops&&m?f:_(t,{el:1,id:1}),i=function(i,r){var d=e.byId(t.id,i.ownerDocument||i);if(i.ownerDocument&&!D(i,i.ownerDocument)){var n=11===i.nodeType?i.childNodes:[i];a.some(n,function(e){var a=Q(function(e){return e.id===t.id},!0)(e,[]);if(a.length)return d=a[0],!1})}if(d&&o(d))return 9==i.nodeType?h(d,r):D(d,i)?h(d,r):void 0};else if(u&&/\{\s*\[native code\]\s*\}/.test(String(u))&&t.classes.length&&!l){o=_(t,{el:1,classes:1,id:1});var M=t.classes.join(" ");i=function(e,t,a){for(var i,r=h(0,t),d=0,n=e.getElementsByClassName(M);i=n[d++];)o(i,e)&&Z(i,a)&&r.push(i);return r}}else m||t.loops?(o=_(t,{el:1,tag:1,id:1}),i=function(e,a,i){for(var r,d=h(0,a),n=0,l=t.getTag(),s=l?e.getElementsByTagName(l):[];r=s[n++];)o(r,e)&&Z(r,i)&&d.push(r);return d}):i=function(e,a,i){for(var r,d=h(0,a),o=0,n=t.getTag(),l=n?e.getElementsByTagName(n):[];r=l[o++];)Z(r,i)&&d.push(r);return d};return H[t.query]=i},N=function(e,t){for(var a,i,r,d,o,n=h(e),l=t.length,s=0;s<l;s++){o=[],a=t[s],i=n.length-1,i>0&&(d={},o.nozip=!0);for(var m=C(a),f=0;r=n[f];f++)m(r,o,d);if(!o.length)break;n=o}return o},P={},L={},q=function(e){var t=u(d(e));if(1==t.length){var a=C(t[0]);return function(e){var t=a(e,[]);return t&&(t.nozip=!0),t}}return function(e){return N(e,t)}},B=t("ie")?"commentStrip":"nozip",R="querySelectorAll",O=!!n()[R],K=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,W=function(e,t,a,i){return a?(t?t+" ":"")+a+(i?" "+i:""):e},J=/([^[]*)([^\]]*])?/g,V=function(e,t,a){return t.replace(K,W)+(a||"")},U=function(e,a){if(e=e.replace(J,V),O){var i=L[e];if(i&&!a)return i}var r=P[e];if(r)return r;var d=e.charAt(0),o=-1==e.indexOf(" ");if(e.indexOf("#")>=0&&o&&(a=!0),O&&!a&&-1==s.indexOf(d)&&(!t("ie")||-1==e.indexOf(":"))&&!(l&&e.indexOf(".")>=0)&&-1==e.indexOf(":contains")&&-1==e.indexOf(":checked")&&-1==e.indexOf("|=")){var n=s.indexOf(e.charAt(e.length-1))>=0?e+" *":e;return L[e]=function(t){if(9==t.nodeType||o)try{var a=t[R](n);return a[B]=!0,a}catch(e){}return U(e,!0)(t)}}var m=e.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return P[e]=m.length<2?q(e):function(e){for(var t,a=0,i=[];t=m[a++];)i=i.concat(q(t)(e));return i}},$=0,Y=t("ie")?function(e){return m?e.getAttribute("_uid")||e.setAttribute("_uid",++$)||$:e.uniqueID}:function(e){return e._uid||(e._uid=++$)},Z=function(e,t){if(!t)return 1;var a=Y(e);return t[a]?0:t[a]=1},X="_zipIdx",ee=function(e){if(e&&e.nozip)return e;if(!e||!e.length)return[];if(e.length<2)return[e[0]];var a=[];$++;var i,r;if(t("ie")&&m){var d=$+"";for(i=0;i<e.length;i++)(r=e[i])&&r.getAttribute(X)!=d&&(a.push(r),r.setAttribute(X,d))}else if(t("ie")&&e.commentStrip)try{for(i=0;i<e.length;i++)(r=e[i])&&M(r)&&a.push(r)}catch(e){}else for(i=0;i<e.length;i++)(r=e[i])&&r[X]!=$&&(a.push(r),r[X]=$);return a},te=function(e,t){t=t||n();var a=t.ownerDocument||t;m="div"===a.createElement("div").tagName;var i=U(e)(t);return i&&i.nozip?i:ee(i)};return te.filter=function(t,i,r){for(var d,o=[],n=u(i),l=1!=n.length||/[^\w#\.]/.test(i)?function(t){return-1!=a.indexOf(te(i,e.byId(r)),t)}:_(n[0]),s=0;d=t[s];s++)l(d)&&o.push(d);return o},te});//# sourceMappingURL=acme.js.map