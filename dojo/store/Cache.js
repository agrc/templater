//>>built
define("dojo/store/Cache",["../_base/lang","../when"],function(e,t){var r=function(r,a,i){return i=i||{},e.delegate(r,{query:function(e,t){var n=r.query(e,t);return n.forEach(function(e){i.isLoaded&&!i.isLoaded(e)||a.put(e)}),n},queryEngine:r.queryEngine||a.queryEngine,get:function(e,i){return t(a.get(e),function(n){return n||t(r.get(e,i),function(t){return t&&a.put(t,{id:e}),t})})},add:function(e,i){return t(r.add(e,i),function(t){return a.add(t&&"object"==typeof t?t:e,i),t})},put:function(e,i){return a.remove(i&&i.id||this.getIdentity(e)),t(r.put(e,i),function(t){return a.put(t&&"object"==typeof t?t:e,i),t})},remove:function(e,i){return t(r.remove(e,i),function(t){return a.remove(e,i)})},evict:function(e){return a.remove(e)}})};return e.setObject("dojo.store.Cache",r),r});//# sourceMappingURL=Cache.js.map