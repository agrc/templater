//>>built
define("dojo/store/Memory",["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(e,t,a){return e("dojo.store.Memory",null,{constructor:function(e){for(var t in e)this[t]=e[t];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:a,get:function(e){return this.data[this.index[e]]},getIdentity:function(e){return e[this.idProperty]},put:function(e,t){var a=this.data,i=this.index,r=this.idProperty,d=e[r]=t&&"id"in t?t.id:r in e?e[r]:Math.random();if(d in i){if(t&&!1===t.overwrite)throw new Error("Object already exists");a[i[d]]=e}else i[d]=a.push(e)-1;return d},add:function(e,t){return(t=t||{}).overwrite=!1,this.put(e,t)},remove:function(e){var t=this.index,a=this.data;if(e in t)return a.splice(t[e],1),this.setData(a),!0},query:function(e,a){return t(this.queryEngine(e,a)(this.data))},setData:function(e){e.items?(this.idProperty=e.identifier||this.idProperty,e=this.data=e.items):this.data=e,this.index={};for(var t=0,a=e.length;t<a;t++)this.index[e[t][this.idProperty]]=t}})});//# sourceMappingURL=Memory.js.map