//>>built
define("dojo/_base/loader",["./kernel","../has","require","module","../json","./lang","./array"],function(dojo,has,require,thisModule,json,lang,array){var makeErrorToken=function(e){return{src:thisModule.id,id:e}},slashName=function(e){return e.replace(/\./g,"/")},buildDetectRe=/\/\/>>built/,dojoRequireCallbacks=[],dojoRequireModuleStack=[],dojoRequirePlugin=function(e,t,i){dojoRequireCallbacks.push(i),array.forEach(e.split(","),function(e){var i=getModule(e,t.module);dojoRequireModuleStack.push(i),injectModule(i)}),checkDojoRequirePlugin()},checkDojoRequirePlugin=function(){var e,t;for(t in modules)if(e=modules[t],void 0===e.noReqPluginCheck&&(e.noReqPluginCheck=/loadInit\!/.test(t)||/require\!/.test(t)?1:0),!e.executed&&!e.noReqPluginCheck&&e.injected==requested)return;guardCheckComplete(function(){var e=dojoRequireCallbacks;dojoRequireCallbacks=[],array.forEach(e,function(e){e(1)})})},dojoLoadInitPlugin=function(mid,require,loaded){require([mid],function(bundle){require(bundle.names,function(){for(var scopeText="",args=[],i=0;i<arguments.length;i++)scopeText+="var "+bundle.names[i]+"= arguments["+i+"]; ",args.push(arguments[i]);eval(scopeText);var callingModule=require.module,requireList=[],i18nDeps,syncLoaderApi={provide:function(e){e=slashName(e);var t=getModule(e,callingModule);t!==callingModule&&setArrived(t)},require:function(e,t){e=slashName(e),t&&(getModule(e,callingModule).result=nonmodule),requireList.push(e)},requireLocalization:function(e,t,i){i18nDeps||(i18nDeps=["dojo/i18n"]),i=(i||dojo.locale).toLowerCase(),e=slashName(e)+"/nls/"+(/root/i.test(i)?"":i+"/")+slashName(t),getModule(e,callingModule).isXd&&i18nDeps.push("dojo/i18n!"+e)},loadInit:function(e){e()}},hold={},p;try{for(p in syncLoaderApi)hold[p]=dojo[p],dojo[p]=syncLoaderApi[p];bundle.def.apply(null,args)}catch(e){signal("error",[makeErrorToken("failedDojoLoadInit"),e])}finally{for(p in syncLoaderApi)dojo[p]=hold[p]}i18nDeps&&(requireList=requireList.concat(i18nDeps)),requireList.length?dojoRequirePlugin(requireList.join(","),require,loaded):loaded()})})},extractApplication=function(e,t,i){var n,o=/\(|\)/g,s=1;for(o.lastIndex=t;(n=o.exec(e))&&(")"==n[0]?s-=1:s+=1,0!=s););if(0!=s)throw"unmatched paren around character "+o.lastIndex+" in: "+e;return[dojo.trim(e.substring(i,o.lastIndex))+";\n",o.lastIndex]},removeCommentRe=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/gm,syncLoaderApiRe=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/gm,amdLoaderApiRe=/(^|\s)(require|define)\s*\(/m,extractLegacyApiApplications=function(e,t){var i,n,o,s,r=[],a=[],d=[];for(t=t||e.replace(removeCommentRe,function(e){return syncLoaderApiRe.lastIndex=amdLoaderApiRe.lastIndex=0,syncLoaderApiRe.test(e)||amdLoaderApiRe.test(e)?"":e});i=syncLoaderApiRe.exec(t);)n=syncLoaderApiRe.lastIndex,o=n-i[0].length,s=extractApplication(t,n,o),"loadInit"==i[2]?r.push(s[0]):a.push(s[0]),syncLoaderApiRe.lastIndex=s[1];return d=r.concat(a),d.length||!amdLoaderApiRe.test(t)?[e.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 && dojo.loadInit("),d.join(""),d]:0},transformToAmd=function(e,t){var i,n,o=[],s=[];if(buildDetectRe.test(t)||!(i=extractLegacyApiApplications(t)))return 0;n=e.mid+"-*loadInit";for(var r in getModule("dojo",e).result.scopeMap)o.push(r),s.push('"'+r+'"');return"// xdomain rewrite of "+e.mid+"\ndefine('"+n+"',{\n	names:"+json.stringify(o)+",\n	def:function("+o.join(",")+"){"+i[1]+"}});\n\ndefine("+json.stringify(o.concat(["dojo/loadInit!"+n]))+", function("+o.join(",")+"){\n"+i[0]+"});"},loaderVars=require.initSyncLoader(dojoRequirePlugin,checkDojoRequirePlugin,transformToAmd),sync=loaderVars.sync,requested=loaderVars.requested,arrived=loaderVars.arrived,nonmodule=loaderVars.nonmodule,executing=loaderVars.executing,executed=loaderVars.executed,syncExecStack=loaderVars.syncExecStack,modules=loaderVars.modules,execQ=loaderVars.execQ,getModule=loaderVars.getModule,injectModule=loaderVars.injectModule,setArrived=loaderVars.setArrived,signal=loaderVars.signal,finishExec=loaderVars.finishExec,execModule=loaderVars.execModule,getLegacyMode=loaderVars.getLegacyMode,guardCheckComplete=loaderVars.guardCheckComplete;return dojoRequirePlugin=loaderVars.dojoRequirePlugin,dojo.provide=function(e){var t=syncExecStack[0],i=lang.mixin(getModule(slashName(e),require.module),{executed:executing,result:lang.getObject(e,!0)});return setArrived(i),t&&(t.provides||(t.provides=[])).push(function(){i.result=lang.getObject(e),delete i.provides,i.executed!==executed&&finishExec(i)}),i.result},has.add("config-publishRequireResult",1,0,0),dojo.require=function(e,t){function i(e,t){var i=getModule(slashName(e),require.module);if(syncExecStack.length&&syncExecStack[0].finish)return void syncExecStack[0].finish.push(e);if(i.executed)return i.result;t&&(i.result=nonmodule);var n=getLegacyMode();return injectModule(i),n=getLegacyMode(),i.executed!==executed&&i.injected===arrived&&loaderVars.guardCheckComplete(function(){execModule(i)}),i.executed?i.result:void(n==sync?i.cjs?execQ.unshift(i):syncExecStack.length&&(syncExecStack[0].finish=[e]):execQ.push(i))}var n=i(e,t);return has("config-publishRequireResult")&&!lang.exists(e)&&void 0!==n&&lang.setObject(e,n),n},dojo.loadInit=function(e){e()},dojo.registerModulePath=function(e,t){var i={};i[e.replace(/\./g,"/")]=t,require({paths:i})},dojo.platformRequire=function(e){for(var t,i=(e.common||[]).concat(e[dojo._name]||e["default"]||[]);i.length;)lang.isArray(t=i.shift())?dojo.require.apply(dojo,t):dojo.require(t)},dojo.requireIf=dojo.requireAfterIf=function(e,t,i){e&&dojo.require(t,i)},dojo.requireLocalization=function(e,t,i){require(["../i18n"],function(n){n.getLocalization(e,t,i)})},{extractLegacyApiApplications:extractLegacyApiApplications,require:dojoRequirePlugin,loadInit:dojoLoadInitPlugin}});//# sourceMappingURL=loader.js.map