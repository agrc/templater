//>>built
define("dojo/dnd/Mover",["../_base/array","../_base/declare","../_base/lang","../sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../on","../touch","./common","./autoscroll"],function(e,t,r,i,a,n,o,d,s,l,u,c,f){return t("dojo.dnd.Mover",[s],{constructor:function(e,t,i){function a(e){e.preventDefault(),e.stopPropagation()}this.node=n.byId(e),this.marginBox={l:t.pageX,t:t.pageY},this.mouseButton=t.button;var o=this.host=i,d=e.ownerDocument;this.events=[l(d,u.move,r.hitch(this,"onFirstMove")),l(d,u.move,r.hitch(this,"onMouseMove")),l(d,u.release,r.hitch(this,"onMouseUp")),l(d,"dragstart",a),l(d.body,"selectstart",a)],f.autoScrollStart(d),o&&o.onMoveStart&&o.onMoveStart(this)},onMouseMove:function(e){f.autoScroll(e);var t=this.marginBox;this.host.onMove(this,{l:t.l+e.pageX,t:t.t+e.pageY},e),e.preventDefault(),e.stopPropagation()},onMouseUp:function(e){(i("webkit")&&i("mac")&&2==this.mouseButton?0==e.button:this.mouseButton==e.button)&&this.destroy(),e.preventDefault(),e.stopPropagation()},onFirstMove:function(e){var t,r,i=this.node.style,n=this.host;switch(i.position){case"relative":case"absolute":t=Math.round(parseFloat(i.left))||0,r=Math.round(parseFloat(i.top))||0;break;default:i.position="absolute";var s=o.getMarginBox(this.node),l=a.doc.body,u=d.getComputedStyle(l),c=o.getMarginBox(l,u),f=o.getContentBox(l,u);t=s.l-(f.l-c.l),r=s.t-(f.t-c.t)}this.marginBox.l=t-this.marginBox.l,this.marginBox.t=r-this.marginBox.t,n&&n.onFirstMove&&n.onFirstMove(this,e),this.events.shift().remove()},destroy:function(){e.forEach(this.events,function(e){e.remove()});var t=this.host;t&&t.onMoveStop&&t.onMoveStop(this),this.events=this.node=this.host=null}})});//# sourceMappingURL=Mover.js.map