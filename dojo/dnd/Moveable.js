//>>built
define("dojo/dnd/Moveable",["../_base/array","../_base/declare","../_base/lang","../dom","../dom-class","../Evented","../has","../on","../topic","../touch","./common","./Mover","../_base/window"],function(e,t,a,i,d,r,o,n,l,s,m,f,u){function h(){"touchAction"in document.body.style?y="touchAction":"msTouchAction"in document.body.style&&(y="msTouchAction"),(c=function(e,t){e.style[y]=t})(arguments[0],arguments[1])}var y,c=function(){};return o("touch-action")&&(c=h),t("dojo.dnd.Moveable",[r],{handle:"",delay:0,skip:!1,constructor:function(e,t){this.node=i.byId(e),c(this.node,"none"),t||(t={}),this.handle=t.handle?i.byId(t.handle):null,this.handle||(this.handle=this.node),this.delay=t.delay>0?t.delay:0,this.skip=t.skip,this.mover=t.mover?t.mover:f,this.events=[n(this.handle,s.press,a.hitch(this,"onMouseDown")),n(this.handle,"dragstart",a.hitch(this,"onSelectStart")),n(this.handle,"selectstart",a.hitch(this,"onSelectStart"))]},markupFactory:function(e,t,a){return new a(t,e)},destroy:function(){e.forEach(this.events,function(e){e.remove()}),c(this.node,""),this.events=this.node=this.handle=null},onMouseDown:function(e){this.skip&&m.isFormElement(e)||(this.delay?(this.events.push(n(this.handle,s.move,a.hitch(this,"onMouseMove")),n(this.handle.ownerDocument,s.release,a.hitch(this,"onMouseUp"))),this._lastX=e.pageX,this._lastY=e.pageY):this.onDragDetected(e),e.stopPropagation(),e.preventDefault())},onMouseMove:function(e){(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)&&(this.onMouseUp(e),this.onDragDetected(e)),e.stopPropagation(),e.preventDefault()},onMouseUp:function(e){for(var t=0;t<2;++t)this.events.pop().remove();e.stopPropagation(),e.preventDefault()},onSelectStart:function(e){this.skip&&m.isFormElement(e)||(e.stopPropagation(),e.preventDefault())},onDragDetected:function(e){new this.mover(this.node,e,this)},onMoveStart:function(e){l.publish("/dnd/move/start",e),d.add(u.body(),"dojoMove"),d.add(this.node,"dojoMoveItem")},onMoveStop:function(e){l.publish("/dnd/move/stop",e),d.remove(u.body(),"dojoMove"),d.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(e,t){this.onMoving(e,t);var a=e.node.style;a.left=t.l+"px",a.top=t.t+"px",this.onMoved(e,t)},onMoving:function(){},onMoved:function(){}})});//# sourceMappingURL=Moveable.js.map