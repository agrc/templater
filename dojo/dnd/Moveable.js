//>>built
define("dojo/dnd/Moveable",["../_base/array","../_base/declare","../_base/lang","../dom","../dom-class","../Evented","../on","../topic","../touch","./common","./Mover","../_base/window"],function(e,t,a,i,r,o,d,n,l,s,m,f){var u=t("dojo.dnd.Moveable",[o],{handle:"",delay:0,skip:!1,constructor:function(e,t){this.node=i.byId(e),t||(t={}),this.handle=t.handle?i.byId(t.handle):null,this.handle||(this.handle=this.node),this.delay=t.delay>0?t.delay:0,this.skip=t.skip,this.mover=t.mover?t.mover:m,this.events=[d(this.handle,l.press,a.hitch(this,"onMouseDown")),d(this.handle,"dragstart",a.hitch(this,"onSelectStart")),d(this.handle,"selectstart",a.hitch(this,"onSelectStart"))]},markupFactory:function(e,t,a){return new a(t,e)},destroy:function(){e.forEach(this.events,function(e){e.remove()}),this.events=this.node=this.handle=null},onMouseDown:function(e){this.skip&&s.isFormElement(e)||(this.delay?(this.events.push(d(this.handle,l.move,a.hitch(this,"onMouseMove")),d(this.handle,l.release,a.hitch(this,"onMouseUp"))),this._lastX=e.pageX,this._lastY=e.pageY):this.onDragDetected(e),e.stopPropagation(),e.preventDefault())},onMouseMove:function(e){(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)&&(this.onMouseUp(e),this.onDragDetected(e)),e.stopPropagation(),e.preventDefault()},onMouseUp:function(e){for(var t=0;2>t;++t)this.events.pop().remove();e.stopPropagation(),e.preventDefault()},onSelectStart:function(e){this.skip&&s.isFormElement(e)||(e.stopPropagation(),e.preventDefault())},onDragDetected:function(e){new this.mover(this.node,e,this)},onMoveStart:function(e){n.publish("/dnd/move/start",e),r.add(f.body(),"dojoMove"),r.add(this.node,"dojoMoveItem")},onMoveStop:function(e){n.publish("/dnd/move/stop",e),r.remove(f.body(),"dojoMove"),r.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(e,t){this.onMoving(e,t);var a=e.node.style;a.left=t.l+"px",a.top=t.t+"px",this.onMoved(e,t)},onMoving:function(){},onMoved:function(){}});return u});//# sourceMappingURL=Moveable.js.map