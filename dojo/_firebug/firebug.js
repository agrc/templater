//>>built
define("dojo/_firebug/firebug",["../_base/kernel","require","../_base/html","../sniff","../_base/array","../_base/lang","../_base/event","../_base/unload"],function(dojo,require,html,has){function toggleConsole(e){frameVisible=e||!frameVisible,consoleFrame&&(consoleFrame.style.display=frameVisible?"block":"none")}function focusCommandLine(){toggleConsole(!0),commandLine&&commandLine.focus()}function openWin(e,t,i,o){var n=window.open("","_firebug","status=0,menubar=0,resizable=1,top="+t+",left="+e+",width="+i+",height="+o+",scrollbars=1,addressbar=0");if(!n){var r="Firebug Lite could not open a pop-up window, most likely because of a blocker.\nEither enable pop-ups for this domain, or change the djConfig to popup=false.";alert(r)}createResizeHandler(n);var a=n.document,s='<html style="height:100%;"><head><title>Firebug Lite</title></head>\n<body bgColor="#ccc" style="height:97%;" onresize="opener.onFirebugResize()">\n<div id="fb"></div></body></html>';return a.write(s),a.close(),n}function createResizeHandler(e){var t=new Date;t.setTime(t.getTime()+5184e6),t=t.toUTCString();var i,o=e.document;e.innerWidth?i=function(){return{w:e.innerWidth,h:e.innerHeight}}:o.documentElement&&o.documentElement.clientWidth?i=function(){return{w:o.documentElement.clientWidth,h:o.documentElement.clientHeight}}:o.body&&(i=function(){return{w:o.body.clientWidth,h:o.body.clientHeight}}),window.onFirebugResize=function(){layout(i().h),clearInterval(e._firebugWin_resize),e._firebugWin_resize=setTimeout(function(){var i=e.screenLeft,o=e.screenTop,n=e.outerWidth||e.document.body.offsetWidth,r=e.outerHeight||e.document.body.offsetHeight;document.cookie="_firebugPosition="+[i,o,n,r].join(",")+"; expires="+t+"; path=/"},5e3)}}function createFrame(){if(!consoleFrame){if(toggleConsole(!0),dojo.config.popup){var e="100%",t=document.cookie.match(/(?:^|; )_firebugPosition=([^;]*)/),i=t?t[1].split(","):[2,2,320,480];_firebugWin=openWin(i[0],i[1],i[2],i[3]),_firebugDoc=_firebugWin.document,dojo.config.debugContainerId="fb",_firebugWin.console=window.console,_firebugWin.dojo=window.dojo}else _firebugDoc=document,e=(dojo.config.debugHeight||300)+"px";var o=_firebugDoc.createElement("link");o.href=require.toUrl("./firebug.css"),o.rel="stylesheet",o.type="text/css";var n=_firebugDoc.getElementsByTagName("head");n&&(n=n[0]),n||(n=_firebugDoc.getElementsByTagName("html")[0]),has("ie")?window.setTimeout(function(){n.appendChild(o)},0):n.appendChild(o),dojo.config.debugContainerId&&(consoleFrame=_firebugDoc.getElementById(dojo.config.debugContainerId)),consoleFrame||(consoleFrame=_firebugDoc.createElement("div"),_firebugDoc.body.appendChild(consoleFrame)),consoleFrame.className+=" firebug",consoleFrame.id="firebug",consoleFrame.style.height=e,consoleFrame.style.display=frameVisible?"block":"none";var r=function(e,t,i,o){return'<li class="'+o+'"><a href="javascript:void(0);" onclick="console.'+i+'(); return false;" title="'+t+'">'+e+"</a></li>"};consoleFrame.innerHTML='<div id="firebugToolbar">  <ul id="fireBugTabs" class="tabs">'+r("Clear","Remove All Console Logs","clear","")+r("ReCSS","Refresh CSS without reloading page","recss","")+r("Console","Show Console Logs","openConsole","gap")+r("DOM","Show DOM Inspector","openDomInspector","")+r("Object","Show Object Inspector","openObjectInspector","")+(dojo.config.popup?"":r("Close","Close the console","close","gap"))+'	</ul></div><input type="text" id="firebugCommandLine" /><div id="firebugLog"></div><div id="objectLog" style="display:none;">Click on an object in the Log display</div><div id="domInspect" style="display:none;">Hover over HTML elements in the main page. Click to hold selection.</div>',consoleToolbar=_firebugDoc.getElementById("firebugToolbar"),commandLine=_firebugDoc.getElementById("firebugCommandLine"),addEvent(commandLine,"keydown",onCommandLineKeyDown),addEvent(_firebugDoc,has("ie")||has("safari")?"keydown":"keypress",onKeyDown),consoleBody=_firebugDoc.getElementById("firebugLog"),consoleObjectInspector=_firebugDoc.getElementById("objectLog"),consoleDomInspector=_firebugDoc.getElementById("domInspect"),fireBugTabs=_firebugDoc.getElementById("fireBugTabs"),layout(),flush()}}function clearFrame(){_firebugDoc=null,_firebugWin.console&&_firebugWin.console.clear(),_firebugWin=null,consoleFrame=null,consoleBody=null,consoleObjectInspector=null,consoleDomInspector=null,commandLine=null,messageQueue=[],groupStack=[],timeMap={}}function evalCommandLine(){var text=commandLine.value;commandLine.value="",logRow([">  ",text],"command");var value;try{value=eval(text)}catch(e){}}function layout(e){var t=25,i=e?e-(t+commandLine.offsetHeight+25+.01*e)+"px":consoleFrame.offsetHeight-t-commandLine.offsetHeight+"px";consoleBody.style.top=t+"px",consoleBody.style.height=i,consoleObjectInspector.style.height=i,consoleObjectInspector.style.top=t+"px",consoleDomInspector.style.height=i,consoleDomInspector.style.top=t+"px",commandLine.style.bottom=0,dojo.addOnWindowUnload(clearFrame)}function logRow(e,t,i){consoleBody?writeMessage(e,t,i):messageQueue.push([e,t,i])}function flush(){var e=messageQueue;messageQueue=[];for(var t=0;t<e.length;++t)writeMessage(e[t][0],e[t][1],e[t][2])}function writeMessage(e,t,i){var o=consoleBody.scrollTop+consoleBody.offsetHeight>=consoleBody.scrollHeight;i=i||writeRow,i(e,t),o&&(consoleBody.scrollTop=consoleBody.scrollHeight-consoleBody.offsetHeight)}function appendRow(e){var t=groupStack.length?groupStack[groupStack.length-1]:consoleBody;t.appendChild(e)}function writeRow(e,t){var i=consoleBody.ownerDocument.createElement("div");i.className="logRow"+(t?" logRow-"+t:""),i.innerHTML=e.join(""),appendRow(i)}function pushGroup(e,t){logFormatted(e,t);var i=consoleBody.ownerDocument.createElement("div");i.className="logGroupBox",appendRow(i),groupStack.push(i)}function popGroup(){groupStack.pop()}function logFormatted(e,t){var i=[],o=e[0],n=0;"string"!=typeof o&&(o="",n=-1);for(var r=parseFormat(o),a=0;a<r.length;++a){var s=r[a];s&&"object"==typeof s?s.appender(e[++n],i):appendText(s,i)}var l=[],d=[];for(a=n+1;a<e.length;++a){appendText(" ",i);var c=e[a];if(void 0===c||null===c)appendNull(c,i);else if("string"==typeof c)appendText(c,i);else if(c instanceof Date)appendText(c.toString(),i);else if(9==c.nodeType)appendText("[ XmlDoc ]",i);else{var u="_a"+__consoleAnchorId__++;l.push(u),d.push(c);var h='<a id="'+u+'" href="javascript:void(0);">'+getObjectAbbr(c)+"</a>";appendLink(h,i)}}for(logRow(i,t),a=0;a<l.length;a++){var f=_firebugDoc.getElementById(l[a]);f&&(f.obj=d[a],_firebugWin.console._connects.push(dojo.connect(f,"onclick",function(){console.openObjectInspector();try{printObject(this.obj)}catch(e){this.obj=e}consoleObjectInspector.innerHTML="<pre>"+printObject(this.obj)+"</pre>"})))}}function parseFormat(e){for(var t=[],i=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/,o={s:appendText,d:appendInteger,i:appendInteger,f:appendFloat},n=i.exec(e);n;n=i.exec(e)){var r=n[8]?n[8]:n[5],a=r in o?o[r]:appendObject,s=n[3]?parseInt(n[3]):"."==n[4]?-1:0;t.push(e.substr(0,"%"==n[0][0]?n.index:n.index+1)),t.push({appender:a,precision:s}),e=e.substr(n.index+n[0].length)}return t.push(e),t}function escapeHTML(e){function t(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&#39;";case'"':return"&quot;"}return"?"}return String(e).replace(/[<>&"']/g,t)}function objectToString(e){try{return e+""}catch(t){return null}}function appendLink(e,t){t.push(objectToString(e))}function appendText(e,t){t.push(escapeHTML(objectToString(e)))}function appendNull(e,t){t.push('<span class="objectBox-null">',escapeHTML(objectToString(e)),"</span>")}function appendString(e,t){t.push('<span class="objectBox-string">&quot;',escapeHTML(objectToString(e)),"&quot;</span>")}function appendInteger(e,t){t.push('<span class="objectBox-number">',escapeHTML(objectToString(e)),"</span>")}function appendFloat(e,t){t.push('<span class="objectBox-number">',escapeHTML(objectToString(e)),"</span>")}function appendFunction(e,t){t.push('<span class="objectBox-function">',getObjectAbbr(e),"</span>")}function appendObject(e,t){try{void 0===e?appendNull("undefined",t):null===e?appendNull("null",t):"string"==typeof e?appendString(e,t):"number"==typeof e?appendInteger(e,t):"function"==typeof e?appendFunction(e,t):1==e.nodeType?appendSelector(e,t):"object"==typeof e?appendObjectFormatted(e,t):appendText(e,t)}catch(i){}}function appendObjectFormatted(e,t){var i=objectToString(e),o=/\[object (.*?)\]/,n=o.exec(i);t.push('<span class="objectBox-object">',n?n[1]:i,"</span>")}function appendSelector(e,t){t.push('<span class="objectBox-selector">'),t.push('<span class="selectorTag">',escapeHTML(e.nodeName.toLowerCase()),"</span>"),e.id&&t.push('<span class="selectorId">#',escapeHTML(e.id),"</span>"),e.className&&t.push('<span class="selectorClass">.',escapeHTML(e.className),"</span>"),t.push("</span>")}function appendNode(e,t){if(1==e.nodeType){t.push('<div class="objectBox-element">','&lt;<span class="nodeTag">',e.nodeName.toLowerCase(),"</span>");for(var i=0;i<e.attributes.length;++i){var o=e.attributes[i];o.specified&&t.push('&nbsp;<span class="nodeName">',o.nodeName.toLowerCase(),'</span>=&quot;<span class="nodeValue">',escapeHTML(o.nodeValue),"</span>&quot;")}if(e.firstChild){t.push('&gt;</div><div class="nodeChildren">');for(var n=e.firstChild;n;n=n.nextSibling)appendNode(n,t);t.push('</div><div class="objectBox-element">&lt;/<span class="nodeTag">',e.nodeName.toLowerCase(),"&gt;</span></div>")}else t.push("/&gt;</div>")}else 3==e.nodeType&&t.push('<div class="nodeText">',escapeHTML(e.nodeValue),"</div>")}function addEvent(e,t,i){document.all?e.attachEvent("on"+t,i):e.addEventListener(t,i,!1)}function removeEvent(e,t,i){document.all?e.detachEvent("on"+t,i):e.removeEventListener(t,i,!1)}function cancelEvent(e){document.all?e.cancelBubble=!0:e.stopPropagation()}function onError(e,t,i){var o=t.lastIndexOf("/"),n=-1==o?t:t.substr(o+1),r=['<span class="errorMessage">',e,"</span>",'<div class="objectBox-sourceLink">',n," (line ",i,")</div>"];logRow(r,"error")}function onKeyDown(e){var t=(new Date).getTime();if(t>onKeyDownTime+200){e=dojo.fixEvent(e);var i=dojo.keys,o=e.keyCode;if(onKeyDownTime=t,o==i.F12)toggleConsole();else{if(o!=i.NUMPAD_ENTER&&76!=o||!e.shiftKey||!e.metaKey&&!e.ctrlKey)return;focusCommandLine()}cancelEvent(e)}}function onCommandLineKeyDown(e){var t=dojo.keys;13==e.keyCode&&commandLine.value?(addToHistory(commandLine.value),evalCommandLine()):27==e.keyCode?commandLine.value="":e.keyCode==t.UP_ARROW||e.charCode==t.UP_ARROW?navigateHistory("older"):e.keyCode==t.DOWN_ARROW||e.charCode==t.DOWN_ARROW?navigateHistory("newer"):e.keyCode==t.HOME||e.charCode==t.HOME?(historyPosition=1,navigateHistory("older")):e.keyCode!=t.END&&e.charCode!=t.END||(historyPosition=999999,navigateHistory("newer"))}function addToHistory(e){var t=cookie("firebug_history");t=t?dojo.fromJson(t):[];var i=dojo.indexOf(t,e);for(-1!=i&&t.splice(i,1),t.push(e),cookie("firebug_history",dojo.toJson(t),30);t.length&&!cookie("firebug_history");)t.shift(),cookie("firebug_history",dojo.toJson(t),30);historyCommandLine=null,historyPosition=-1}function navigateHistory(e){var t=cookie("firebug_history");t=t?dojo.fromJson(t):[],t.length&&(null===historyCommandLine&&(historyCommandLine=commandLine.value),-1==historyPosition&&(historyPosition=t.length),"older"==e?(--historyPosition,0>historyPosition&&(historyPosition=0)):"newer"==e&&(++historyPosition,historyPosition>t.length&&(historyPosition=t.length)),historyPosition==t.length?(commandLine.value=historyCommandLine,historyCommandLine=null):commandLine.value=t[historyPosition])}function cookie(e,t){var i=document.cookie;if(1==arguments.length){var o=i.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return o?decodeURIComponent(o[1]):void 0}var n=new Date;n.setMonth(n.getMonth()+1),document.cookie=e+"="+encodeURIComponent(t)+(n.toUtcString?"; expires="+n.toUTCString():"")}function isArray(e){return e&&e instanceof Array||"array"==typeof e}function objectLength(e){var t=0;for(var i in e)t++;return t}function printObject(e,t,i,o){var n=" 	";i=i||"",t=t||n,o=o||[];var r;if(e&&1==e.nodeType){var a=[];return appendNode(e,a),a.join("")}var s=",\n",l=0,d=objectLength(e);if(e instanceof Date)return t+e.toString()+s;e:for(var c in e)if(l++,l==d&&(s="\n"),e[c]===window||e[c]===document);else if(null===e[c])i+=t+c+" : NULL"+s;else if(e[c]&&e[c].nodeType)1==e[c].nodeType||3==e[c].nodeType&&(i+=t+c+" : [ TextNode "+e[c].data+" ]"+s);else if("object"==typeof e[c]&&(e[c]instanceof String||e[c]instanceof Number||e[c]instanceof Boolean))i+=t+c+" : "+e[c]+","+s;else if(e[c]instanceof Date)i+=t+c+" : "+e[c].toString()+s;else if("object"==typeof e[c]&&e[c]){for(var u,h=0;u=o[h];h++)if(e[c]===u){i+=t+c+" : RECURSION"+s;continue e}o.push(e[c]),r=isArray(e[c])?["[","]"]:["{","}"],i+=t+c+" : "+r[0]+"\n",i+=printObject(e[c],t+n,"",o),i+=t+r[1]+s}else if("undefined"==typeof e[c])i+=t+c+" : undefined"+s;else if("toString"==c&&"function"==typeof e[c]){var f=e[c]();"string"==typeof f&&f.match(/function ?(.*?)\(/)&&(f=escapeHTML(getObjectAbbr(e[c]))),i+=t+c+" : "+f+s}else i+=t+c+" : "+escapeHTML(getObjectAbbr(e[c]))+s;return i}function getObjectAbbr(e){var t=e instanceof Error;if(1==e.nodeType)return escapeHTML("< "+e.tagName.toLowerCase()+' id="'+e.id+'" />');if(3==e.nodeType)return escapeHTML('[TextNode: "'+e.nodeValue+'"]');var i=e&&(e.id||e.name||e.ObjectID||e.widgetId);if(!t&&i)return"{"+i+"}";var o=2,n=4,r=0;if(t)i="[ Error: "+(e.message||e.description||e)+" ]";else if(isArray(e))i="["+e.slice(0,n).join(","),e.length>n&&(i+=" ... ("+e.length+" items)"),i+="]";else if("function"==typeof e){i=e+"";var a=/function\s*([^\(]*)(\([^\)]*\))[^\{]*\{/,s=a.exec(i);s?(s[1]||(s[1]="function"),i=s[1]+s[2]):i="function()"}else if("object"!=typeof e||"string"==typeof e)i=e+"";else{i="{";for(var l in e){if(r++,r>o)break;i+=l+":"+escapeHTML(e[l])+"  "}i+="}"}return i}var isNewIE=/Trident/.test(window.navigator.userAgent);if(isNewIE){for(var calls=["log","info","debug","warn","error"],i=0;i<calls.length;i++){var m=calls[i];if(console[m]&&!console[m]._fake){var n="_"+calls[i];console[n]=console[m],console[m]=function(){var e=n;return function(){console[e](Array.prototype.join.call(arguments," "))}}()}}try{console.clear()}catch(e){}}if(has("ie")<8){try{if(window!=window.parent)return void(window.parent.console&&(window.console=window.parent.console))}catch(e){}var _firebugDoc=document,_firebugWin=window,__consoleAnchorId__=0,consoleFrame=null,consoleBody=null,consoleObjectInspector=null,fireBugTabs=null,commandLine=null,consoleToolbar=null,frameVisible=!1,messageQueue=[],groupStack=[],timeMap={},countMap={},consoleDomInspector=null,_inspectionMoveConnection,_inspectionClickConnection,_inspectionEnabled=!1,_inspectionTimer=null,_inspectTempNode=document.createElement("div"),_inspectCurrentNode,_restoreBorderStyle;window.console={_connects:[],log:function(){logFormatted(arguments,"")},debug:function(){logFormatted(arguments,"debug")},info:function(){logFormatted(arguments,"info")},warn:function(){logFormatted(arguments,"warning")},error:function(){logFormatted(arguments,"error")},assert:function(e,t){if(!e){for(var i=[],o=1;o<arguments.length;++o)i.push(arguments[o]);throw logFormatted(i.length?i:["Assertion Failure"],"error"),t?t:"Assertion Failure"}},dir:function(e){var t=printObject(e);t=t.replace(/\n/g,"<br />"),t=t.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),logRow([t],"dir")},dirxml:function(e){var t=[];appendNode(e,t),logRow(t,"dirxml")},group:function(){logRow(arguments,"group",pushGroup)},groupEnd:function(){logRow(arguments,"",popGroup)},time:function(e){timeMap[e]=(new Date).getTime()},timeEnd:function(e){if(e in timeMap){var t=(new Date).getTime()-timeMap[e];logFormatted([e+":",t+"ms"]),delete timeMap[e]}},count:function(e){countMap[e]||(countMap[e]=0),countMap[e]++,logFormatted([e+": "+countMap[e]])},trace:function(e){for(var t=e||3,i=console.trace.caller,o=0;t>o;o++){for(var n=(i.toString(),[]),r=0;r<i.arguments.length;r++)n.push(i.arguments[r]);i.arguments.length,i=i.caller}},profile:function(){this.warn(["profile() not supported."])},profileEnd:function(){},clear:function(){if(consoleBody)for(;consoleBody.childNodes.length;)dojo.destroy(consoleBody.firstChild);dojo.forEach(this._connects,dojo.disconnect)},open:function(){toggleConsole(!0)},close:function(){frameVisible&&toggleConsole()},_restoreBorder:function(){_inspectCurrentNode&&(_inspectCurrentNode.style.border=_restoreBorderStyle)},openDomInspector:function(){_inspectionEnabled=!0,consoleBody.style.display="none",consoleDomInspector.style.display="block",consoleObjectInspector.style.display="none",document.body.style.cursor="pointer",_inspectionMoveConnection=dojo.connect(document,"mousemove",function(e){if(_inspectionEnabled&&!_inspectionTimer){_inspectionTimer=setTimeout(function(){_inspectionTimer=null},50);var t=e.target;if(t&&_inspectCurrentNode!==t){console._restoreBorder();var i=[];appendNode(t,i),consoleDomInspector.innerHTML=i.join(""),_inspectCurrentNode=t,_restoreBorderStyle=_inspectCurrentNode.style.border,_inspectCurrentNode.style.border="#0000FF 1px solid"}}}),setTimeout(function(){_inspectionClickConnection=dojo.connect(document,"click",function(e){document.body.style.cursor="",_inspectionEnabled=!_inspectionEnabled,dojo.disconnect(_inspectionClickConnection)})},30)},_closeDomInspector:function(){document.body.style.cursor="",dojo.disconnect(_inspectionMoveConnection),dojo.disconnect(_inspectionClickConnection),_inspectionEnabled=!1,console._restoreBorder()},openConsole:function(){consoleBody.style.display="block",consoleDomInspector.style.display="none",consoleObjectInspector.style.display="none",console._closeDomInspector()},openObjectInspector:function(){consoleBody.style.display="none",consoleDomInspector.style.display="none",consoleObjectInspector.style.display="block",console._closeDomInspector()},recss:function(){var e,t,i;for(t=document.getElementsByTagName("link"),e=0;e<t.length;e++)if(i=t[e],i.rel.toLowerCase().indexOf("stylesheet")>=0&&i.href){var o=i.href.replace(/(&|%5C?)forceReload=\d+/,"");i.href=o+(o.indexOf("?")>=0?"&":"?")+"forceReload="+(new Date).valueOf()}}},dojo.addOnLoad(createFrame);var onKeyDownTime=(new Date).getTime(),historyPosition=-1,historyCommandLine=null;addEvent(document,has("ie")||has("safari")?"keydown":"keypress",onKeyDown),("true"==document.documentElement.getAttribute("debug")||dojo.config.isDebug)&&toggleConsole(!0),dojo.addOnWindowUnload(function(){removeEvent(document,has("ie")||has("safari")?"keydown":"keypress",onKeyDown),window.onFirebugResize=null,window.console=null})}});//# sourceMappingURL=firebug.js.map