//>>built
define("dojo/request/node",["require","./util","./handlers","../errors/RequestTimeoutError","../node!http","../node!https","../node!url","../node!stream"],function(e,t,a,i,r,o,n,d){function s(e,d){var s=t.parseArgs(e,t.deepCreate(u,d),d&&d.data instanceof m);e=s.url,d=s.options;var l=t.deferred(s,function(e,t){t.clientRequest.abort()});e=n.parse(e);var f=s.requestOptions={hostname:e.hostname,port:e.port,socketPath:d.socketPath,method:d.method,headers:d.headers,agent:d.agent,pfx:d.pfx,key:d.key,passphrase:d.passphrase,cert:d.cert,ca:d.ca,ciphers:d.ciphers,rejectUnauthorized:d.rejectUnauthorized!==!1};e.path&&(f.path=e.path),(d.user||d.password)&&(f.auth=(d.user||"")+":"+(d.password||""));var h=s.clientRequest=("https:"===e.protocol?o:r).request(f);if(d.socketOptions&&("timeout"in d.socketOptions&&h.setTimeout(d.socketOptions.timeout),"noDelay"in d.socketOptions&&h.setNoDelay(d.socketOptions.noDelay),"keepAlive"in d.socketOptions)){var c=d.socketOptions.keepAlive;h.setKeepAlive(c>=0,c||0)}if(h.on("socket",function(){s.hasSocket=!0,l.progress(s)}),h.on("response",function(e){s.clientResponse=e,s.status=e.statusCode,s.getHeader=function(t){return e.headers[t.toLowerCase()]||null};var t=[];e.on("data",function(e){t.push(e)}),e.on("end",function(){y&&clearTimeout(y),s.text=t.join("");try{a(s),l.resolve(s)}catch(e){l.reject(e)}})}),h.on("error",l.reject),d.data?"string"==typeof d.data?h.end(d.data):d.data.pipe(h):h.end(),d.timeout)var y=setTimeout(function(){l.cancel(new i(s))},d.timeout);return l.promise}var l,m=d.Stream,u={method:"GET",query:null,data:l,headers:{}};return t.addCommonMethods(s),s});//# sourceMappingURL=node.js.map