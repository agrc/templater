//>>built
define("dojo/request/node",["require","./util","./handlers","../errors/RequestTimeoutError","../node!http","../node!https","../node!url","../node!stream"],function(e,t,a,i,r,d,o,n){function l(e,n){var l=t.parseArgs(e,t.deepCreate(u,n),n&&n.data instanceof m);e=l.url,n=l.options;var s=t.deferred(l,function(e,t){t.clientRequest.abort()});e=o.parse(e);var f=l.requestOptions={hostname:e.hostname,port:e.port,socketPath:n.socketPath,method:n.method,headers:n.headers,agent:n.agent,pfx:n.pfx,key:n.key,passphrase:n.passphrase,cert:n.cert,ca:n.ca,ciphers:n.ciphers,rejectUnauthorized:n.rejectUnauthorized!==!1};e.path&&(f.path=e.path),(n.user||n.password)&&(f.auth=(n.user||"")+":"+(n.password||""));var y=l.clientRequest=("https:"===e.protocol?d:r).request(f);if(n.socketOptions&&("timeout"in n.socketOptions&&y.setTimeout(n.socketOptions.timeout),"noDelay"in n.socketOptions&&y.setNoDelay(n.socketOptions.noDelay),"keepAlive"in n.socketOptions)){var h=n.socketOptions.keepAlive;y.setKeepAlive(h>=0,h||0)}if(y.on("socket",function(){l.hasSocket=!0,s.progress(l)}),y.on("response",function(e){l.clientResponse=e,l.status=e.statusCode,l.getHeader=function(t){return e.headers[t.toLowerCase()]||null};var t=[];e.on("data",function(e){t.push(e)}),e.on("end",function(){M&&clearTimeout(M),l.text=t.join("");try{a(l),s.resolve(l)}catch(e){s.reject(e)}})}),y.on("error",s.reject),n.data?"string"==typeof n.data?y.end(n.data):n.data.pipe(y):y.end(),n.timeout)var M=setTimeout(function(){s.cancel(new i(l))},n.timeout);return s.promise}var s,m=n.Stream,u={method:"GET",query:null,data:s,headers:{}};return t.addCommonMethods(l),l});//# sourceMappingURL=node.js.map